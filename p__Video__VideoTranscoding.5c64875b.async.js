(self.webpackChunkcollaboration=self.webpackChunkcollaboration||[]).push([[471],{94374:function(Me,Ee,C){"use strict";C.r(Ee),C.d(Ee,{default:function(){return Xa}});var le={};C.r(le),C.d(le,{ABORT:function(){return gs},AFTER_DEFINITION_CHANGE:function(){return ui},AUTOPLAY_PREVENTED:function(){return si},AUTOPLAY_STARTED:function(){return Ze},BEFORE_DEFINITION_CHANGE:function(){return ps},BUFFER_CHANGE:function(){return vs},CANPLAY:function(){return Oe},CANPLAY_THROUGH:function(){return fs},COMPLETE:function(){return _t},CSS_FULLSCREEN_CHANGE:function(){return xt},DEFINITION_CHANGE:function(){return li},DESTROY:function(){return oi},DOWNLOAD_SPEED_CHANGE:function(){return Cn},DURATION_CHANGE:function(){return Ke},EMPTIED:function(){return rt},ENDED:function(){return Ye},ERROR:function(){return dt},FPS_STUCK:function(){return Pn},FULLSCREEN_CHANGE:function(){return De},LOADED_DATA:function(){return $e},LOAD_START:function(){return ii},MINI_STATE_CHANGE:function(){return wt},PAUSE:function(){return nt},PIP_CHANGE:function(){return ci},PLAY:function(){return Ce},PLAYER_BLUR:function(){return mn},PLAYER_FOCUS:function(){return ni},PLAYING:function(){return ei},PLAYNEXT:function(){return Pt},PROGRESS:function(){return pn},RATE_CHANGE:function(){return vn},READY:function(){return ri},REPLAY:function(){return ai},RESET:function(){return At},RETRY:function(){return ys},ROTATE:function(){return kn},SCREEN_SHOT:function(){return En},SEEKED:function(){return He},SEEKING:function(){return ti},SEI_PARSED:function(){return ms},SHORTCUT:function(){return Tn},SOURCE_ERROR:function(){return _n},SOURCE_SUCCESS:function(){return Sn},STALLED:function(){return hs},STATS_EVENTS:function(){return wn},SUSPEND:function(){return ds},SWITCH_SUBTITLE:function(){return Cs},TIME_UPDATE:function(){return Se},URL_CHANGE:function(){return St},URL_NULL:function(){return yn},USER_ACTION:function(){return It},VIDEO_EVENTS:function(){return xn},VIDEO_RESIZE:function(){return Xe},VOLUME_CHANGE:function(){return gn},WAITING:function(){return gt},XGLOG:function(){return bn}});var te=C(15009),ge=C.n(te),ve=C(99289),V=C.n(ve),F=C(5574),x=C.n(F),O=[{mime:"video/mp4",ext:"mp4"},{mime:"video/x-msvideo",ext:"avi"},{mime:"video/quicktime",ext:"mov"},{mime:"video/x-ms-wmv",ext:"wmv"},{mime:"video/x-flv",ext:"flv"},{mime:"video/webm",ext:"webm"},{mime:"video/x-matroska",ext:"mkv"},{mime:"video/x-ms-asf",ext:"asf"},{mime:"video/3gpp",ext:"3gp"},{mime:"video/x-mpeg",ext:"mpeg"},{mime:"video/x-msvideo",ext:"mpg"},{mime:"video/vnd.dlna.mpeg-tts",ext:"m2t"},{mime:"video/ogg",ext:"ogg"},{mime:"video/ogm",ext:"ogm"},{mime:"video/x-f4v",ext:"f4v"},{mime:"video/x-ms-vob",ext:"vob"},{mime:"video/x-matroska",ext:"mka"}],w=C(1930),Y=C(88484),H=C(1413),p=C(67294),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"},j=ce,xe=C(91146),we=function(o,r){return p.createElement(xe.Z,(0,H.Z)((0,H.Z)({},o),{},{ref:r,icon:j}))};we.displayName="ThunderboltOutlined";var J=p.forwardRef(we),Gt=C(69753),Ve=C(15360),sr=C(90930),ft=C(67286),Te=C(80854),ar=C(2453),Pi=C(19151),or=C(42075),tt=C(71577),Ii=C(32983),lr=C(69814),it=C(74902),Ai=C(38135),Li=C(17093),ur=C(76278),cr=C(17012),fr=C(26702),hr=C(1558),dr=C(94184),be=C.n(dr),Oi=C(86743),Tt=C(33603),Vt=C(10110),Di=C(62208),We=C(87462),Wt=C(97685),gr=C(54535),Ri=C(94999),vr=C(7028),Ni=C(15105),pr=C(64217);function Mi(s,o,r){var t=o;return!t&&r&&(t="".concat(s,"-").concat(r)),t}function Fi(s,o){var r=s["page".concat(o?"Y":"X","Offset")],t="scroll".concat(o?"Top":"Left");if(typeof r!="number"){var e=s.document;r=e.documentElement[t],typeof r!="number"&&(r=e.body[t])}return r}function mr(s){var o=s.getBoundingClientRect(),r={left:o.left,top:o.top},t=s.ownerDocument,e=t.defaultView||t.parentWindow;return r.left+=Fi(e),r.top+=Fi(e,!0),r}var Hi=C(82225),yr=p.memo(function(s){var o=s.children;return o},function(s,o){var r=o.shouldUpdate;return!r}),Bi={width:0,height:0,overflow:"hidden",outline:"none"},Cr=p.forwardRef(function(s,o){var r=s.prefixCls,t=s.className,e=s.style,i=s.title,n=s.ariaId,a=s.footer,l=s.closable,u=s.closeIcon,f=s.onClose,h=s.children,d=s.bodyStyle,g=s.bodyProps,v=s.modalRender,y=s.onMouseDown,E=s.onMouseUp,b=s.holderRef,_=s.visible,S=s.forceRender,P=s.width,L=s.height,U=(0,p.useRef)(),Z=(0,p.useRef)();p.useImperativeHandle(o,function(){return{focus:function(){var ne;(ne=U.current)===null||ne===void 0||ne.focus()},changeActive:function(ne){var me=document,de=me.activeElement;ne&&de===Z.current?U.current.focus():!ne&&de===U.current&&Z.current.focus()}}});var ee={};P!==void 0&&(ee.width=P),L!==void 0&&(ee.height=L);var Q;a&&(Q=p.createElement("div",{className:"".concat(r,"-footer")},a));var B;i&&(B=p.createElement("div",{className:"".concat(r,"-header")},p.createElement("div",{className:"".concat(r,"-title"),id:n},i)));var re;l&&(re=p.createElement("button",{type:"button",onClick:f,"aria-label":"Close",className:"".concat(r,"-close")},u||p.createElement("span",{className:"".concat(r,"-close-x")})));var oe=p.createElement("div",{className:"".concat(r,"-content")},re,B,p.createElement("div",(0,We.Z)({className:"".concat(r,"-body"),style:d},g),h),Q);return p.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?n:null,"aria-modal":"true",ref:b,style:(0,H.Z)((0,H.Z)({},e),ee),className:be()(r,t),onMouseDown:y,onMouseUp:E},p.createElement("div",{tabIndex:0,ref:U,style:Bi,"aria-hidden":"true"}),p.createElement(yr,{shouldUpdate:_||S},v?v(oe):oe),p.createElement("div",{tabIndex:0,ref:Z,style:Bi,"aria-hidden":"true"}))}),Ui=Cr,ji=p.forwardRef(function(s,o){var r=s.prefixCls,t=s.title,e=s.style,i=s.className,n=s.visible,a=s.forceRender,l=s.destroyOnClose,u=s.motionName,f=s.ariaId,h=s.onVisibleChanged,d=s.mousePosition,g=(0,p.useRef)(),v=p.useState(),y=(0,Wt.Z)(v,2),E=y[0],b=y[1],_={};E&&(_.transformOrigin=E);function S(){var P=mr(g.current);b(d?"".concat(d.x-P.left,"px ").concat(d.y-P.top,"px"):"")}return p.createElement(Hi.ZP,{visible:n,onVisibleChanged:h,onAppearPrepare:S,onEnterPrepare:S,forceRender:a,motionName:u,removeOnLeave:l,ref:g},function(P,L){var U=P.className,Z=P.style;return p.createElement(Ui,(0,We.Z)({},s,{ref:o,title:t,ariaId:f,prefixCls:r,holderRef:L,style:(0,H.Z)((0,H.Z)((0,H.Z)({},Z),e),_),className:be()(i,U)}))})});ji.displayName="Content";var kr=ji;function Er(s){var o=s.prefixCls,r=s.style,t=s.visible,e=s.maskProps,i=s.motionName;return p.createElement(Hi.ZP,{key:"mask",visible:t,motionName:i,leavedClassName:"".concat(o,"-mask-hidden")},function(n,a){var l=n.className,u=n.style;return p.createElement("div",(0,We.Z)({ref:a,style:(0,H.Z)((0,H.Z)({},u),r),className:be()("".concat(o,"-mask"),l)},e))})}function Tr(s){var o=s.prefixCls,r=o===void 0?"rc-dialog":o,t=s.zIndex,e=s.visible,i=e===void 0?!1:e,n=s.keyboard,a=n===void 0?!0:n,l=s.focusTriggerAfterClose,u=l===void 0?!0:l,f=s.wrapStyle,h=s.wrapClassName,d=s.wrapProps,g=s.onClose,v=s.afterOpenChange,y=s.afterClose,E=s.transitionName,b=s.animation,_=s.closable,S=_===void 0?!0:_,P=s.mask,L=P===void 0?!0:P,U=s.maskTransitionName,Z=s.maskAnimation,ee=s.maskClosable,Q=ee===void 0?!0:ee,B=s.maskStyle,re=s.maskProps,oe=s.rootClassName,ue=(0,p.useRef)(),ne=(0,p.useRef)(),me=(0,p.useRef)(),de=p.useState(i),Bt=(0,Wt.Z)(de,2),Ct=Bt[0],se=Bt[1],ye=(0,vr.Z)();function ke(){(0,Ri.Z)(ne.current,document.activeElement)||(ue.current=document.activeElement)}function et(){if(!(0,Ri.Z)(ne.current,document.activeElement)){var ae;(ae=me.current)===null||ae===void 0||ae.focus()}}function Ut(ae){if(ae)et();else{if(se(!1),L&&ue.current&&u){try{ue.current.focus({preventScroll:!0})}catch(Et){}ue.current=null}Ct&&(y==null||y())}v==null||v(ae)}function Ge(ae){g==null||g(ae)}var kt=(0,p.useRef)(!1),Le=(0,p.useRef)(),wi=function(){clearTimeout(Le.current),kt.current=!0},jt=function(){Le.current=setTimeout(function(){kt.current=!1})},Ne=null;Q&&(Ne=function(Et){kt.current?kt.current=!1:ne.current===Et.target&&Ge(Et)});function ct(ae){if(a&&ae.keyCode===Ni.Z.ESC){ae.stopPropagation(),Ge(ae);return}i&&ae.keyCode===Ni.Z.TAB&&me.current.changeActive(!ae.shiftKey)}return(0,p.useEffect)(function(){i&&(se(!0),ke())},[i]),(0,p.useEffect)(function(){return function(){clearTimeout(Le.current)}},[]),p.createElement("div",(0,We.Z)({className:be()("".concat(r,"-root"),oe)},(0,pr.Z)(s,{data:!0})),p.createElement(Er,{prefixCls:r,visible:L&&i,motionName:Mi(r,U,Z),style:(0,H.Z)({zIndex:t},B),maskProps:re}),p.createElement("div",(0,We.Z)({tabIndex:-1,onKeyDown:ct,className:be()("".concat(r,"-wrap"),h),ref:ne,onClick:Ne,style:(0,H.Z)((0,H.Z)({zIndex:t},f),{},{display:Ct?null:"none"})},d),p.createElement(kr,(0,We.Z)({},s,{onMouseDown:wi,onMouseUp:jt,ref:me,closable:S,ariaId:ye,prefixCls:r,visible:i&&Ct,onClose:Ge,onVisibleChanged:Ut,motionName:Mi(r,E,b)}))))}var Gi=function(o){var r=o.visible,t=o.getContainer,e=o.forceRender,i=o.destroyOnClose,n=i===void 0?!1:i,a=o.afterClose,l=p.useState(r),u=(0,Wt.Z)(l,2),f=u[0],h=u[1];return p.useEffect(function(){r&&h(!0)},[r]),!e&&n&&!f?null:p.createElement(gr.Z,{open:r||e||f,autoDestroy:!1,getContainer:t,autoLock:r||f},p.createElement(Tr,(0,We.Z)({},o,{destroyOnClose:n,afterClose:function(){a==null||a(),h(!1)}})))};Gi.displayName="Dialog";var br=Gi,_r=br,Sr=C(69760),xr=C(31808),zt=C(53124),wr=C(65223),Pr=C(4173),Ir=C(85432),Vi=C(83008);function Wi(s,o){return p.createElement("span",{className:`${s}-close-x`},o||p.createElement(Di.Z,{className:`${s}-close-icon`}))}const zi=s=>{const{okText:o,okType:r="primary",cancelText:t,confirmLoading:e,onOk:i,onCancel:n,okButtonProps:a,cancelButtonProps:l}=s,[u]=(0,Vt.Z)("Modal",(0,Vi.A)());return p.createElement(p.Fragment,null,p.createElement(tt.ZP,Object.assign({onClick:n},l),t||(u==null?void 0:u.cancelText)),p.createElement(tt.ZP,Object.assign({},(0,Ir.n)(r),{loading:e,onClick:i},a),o||(u==null?void 0:u.okText)))};var Yi=C(71194),Ar=function(s,o){var r={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&o.indexOf(t)<0&&(r[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(s);e<t.length;e++)o.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(s,t[e])&&(r[t[e]]=s[t[e]]);return r};let Yt;const Lr=s=>{Yt={x:s.pageX,y:s.pageY},setTimeout(()=>{Yt=null},100)};(0,xr.jD)()&&document.documentElement.addEventListener("click",Lr,!0);var Ki=s=>{var o;const{getPopupContainer:r,getPrefixCls:t,direction:e,modal:i}=p.useContext(zt.E_),n=me=>{const{onCancel:de}=s;de==null||de(me)},a=me=>{const{onOk:de}=s;de==null||de(me)},{prefixCls:l,className:u,rootClassName:f,open:h,wrapClassName:d,centered:g,getContainer:v,closeIcon:y,closable:E,focusTriggerAfterClose:b=!0,style:_,visible:S,width:P=520,footer:L}=s,U=Ar(s,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","closable","focusTriggerAfterClose","style","visible","width","footer"]),Z=t("modal",l),ee=t(),[Q,B]=(0,Yi.Z)(Z),re=be()(d,{[`${Z}-centered`]:!!g,[`${Z}-wrap-rtl`]:e==="rtl"}),oe=L===void 0?p.createElement(zi,Object.assign({},s,{onOk:a,onCancel:n})):L,[ue,ne]=(0,Sr.Z)(E,y,me=>Wi(Z,me),p.createElement(Di.Z,{className:`${Z}-close-icon`}),!0);return Q(p.createElement(Pr.BR,null,p.createElement(wr.Ux,{status:!0,override:!0},p.createElement(_r,Object.assign({width:P},U,{getContainer:v===void 0?r:v,prefixCls:Z,rootClassName:be()(B,f),wrapClassName:re,footer:oe,visible:h!=null?h:S,mousePosition:(o=U.mousePosition)!==null&&o!==void 0?o:Yt,onClose:n,closable:ue,closeIcon:ne,focusTriggerAfterClose:b,transitionName:(0,Tt.mL)(ee,"zoom",s.transitionName),maskTransitionName:(0,Tt.mL)(ee,"fade",s.maskTransitionName),className:be()(B,u,i==null?void 0:i.className),style:Object.assign(Object.assign({},i==null?void 0:i.style),_)})))))};function $i(s){const{icon:o,onCancel:r,onOk:t,close:e,okText:i,okButtonProps:n,cancelText:a,cancelButtonProps:l,confirmPrefixCls:u,rootPrefixCls:f,type:h,okCancel:d,footer:g,locale:v}=s;let y=o;if(!o&&o!==null)switch(h){case"info":y=p.createElement(hr.Z,null);break;case"success":y=p.createElement(ur.Z,null);break;case"error":y=p.createElement(cr.Z,null);break;default:y=p.createElement(fr.Z,null)}const E=s.okType||"primary",b=d!=null?d:h==="confirm",_=s.autoFocusButton===null?!1:s.autoFocusButton||"ok",[S]=(0,Vt.Z)("Modal"),P=v||S,L=b&&p.createElement(Oi.Z,{actionFn:r,close:e,autoFocus:_==="cancel",buttonProps:l,prefixCls:`${f}-btn`},a||(P==null?void 0:P.cancelText));return p.createElement("div",{className:`${u}-body-wrapper`},p.createElement("div",{className:`${u}-body`},y,s.title===void 0?null:p.createElement("span",{className:`${u}-title`},s.title),p.createElement("div",{className:`${u}-content`},s.content)),g===void 0?p.createElement("div",{className:`${u}-btns`},L,p.createElement(Oi.Z,{type:E,actionFn:t,close:e,autoFocus:_==="ok",buttonProps:n,prefixCls:`${f}-btn`},i||(b?P==null?void 0:P.okText:P==null?void 0:P.justOkText))):g)}var Zi=s=>{const{close:o,zIndex:r,afterClose:t,visible:e,open:i,keyboard:n,centered:a,getContainer:l,maskStyle:u,direction:f,prefixCls:h,wrapClassName:d,rootPrefixCls:g,iconPrefixCls:v,theme:y,bodyStyle:E,closable:b=!1,closeIcon:_,modalRender:S,focusTriggerAfterClose:P}=s,L=`${h}-confirm`,U=s.width||416,Z=s.style||{},ee=s.mask===void 0?!0:s.mask,Q=s.maskClosable===void 0?!1:s.maskClosable,B=be()(L,`${L}-${s.type}`,{[`${L}-rtl`]:f==="rtl"},s.className);return p.createElement(Li.ZP,{prefixCls:g,iconPrefixCls:v,direction:f,theme:y},p.createElement(Ki,{prefixCls:h,className:B,wrapClassName:be()({[`${L}-centered`]:!!s.centered},d),onCancel:()=>o==null?void 0:o({triggerCancel:!0}),open:i,title:"",footer:null,transitionName:(0,Tt.mL)(g,"zoom",s.transitionName),maskTransitionName:(0,Tt.mL)(g,"fade",s.maskTransitionName),mask:ee,maskClosable:Q,maskStyle:u,style:Z,bodyStyle:E,width:U,zIndex:r,afterClose:t,keyboard:n,centered:a,getContainer:l,closable:b,closeIcon:_,modalRender:S,focusTriggerAfterClose:P},p.createElement($i,Object.assign({},s,{confirmPrefixCls:L}))))},ze=[],Or=function(s,o){var r={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&o.indexOf(t)<0&&(r[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(s);e<t.length;e++)o.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(s,t[e])&&(r[t[e]]=s[t[e]]);return r};let Xi="";function Dr(){return Xi}function ht(s){const o=document.createDocumentFragment();let r=Object.assign(Object.assign({},s),{close:n,open:!0}),t;function e(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];const h=u.some(d=>d&&d.triggerCancel);s.onCancel&&h&&s.onCancel.apply(s,[()=>{}].concat((0,it.Z)(u.slice(1))));for(let d=0;d<ze.length;d++)if(ze[d]===n){ze.splice(d,1);break}(0,Ai.v)(o)}function i(l){var{okText:u,cancelText:f,prefixCls:h,getContainer:d}=l,g=Or(l,["okText","cancelText","prefixCls","getContainer"]);clearTimeout(t),t=setTimeout(()=>{const v=(0,Vi.A)(),{getPrefixCls:y,getIconPrefixCls:E,getTheme:b}=(0,Li.w6)(),_=y(void 0,Dr()),S=h||`${_}-modal`,P=E(),L=b();let U=d;U===!1&&(U=void 0),(0,Ai.s)(p.createElement(Zi,Object.assign({},g,{getContainer:U,prefixCls:S,rootPrefixCls:_,iconPrefixCls:P,okText:u,locale:v,theme:L,cancelText:f||v.cancelText})),o)})}function n(){for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{typeof s.afterClose=="function"&&s.afterClose(),e.apply(this,u)}}),r.visible&&delete r.visible,i(r)}function a(l){typeof l=="function"?r=l(r):r=Object.assign(Object.assign({},r),l),i(r)}return i(r),ze.push(n),{destroy:n,update:a}}function Ji(s){return Object.assign(Object.assign({},s),{type:"warning"})}function Qi(s){return Object.assign(Object.assign({},s),{type:"info"})}function qi(s){return Object.assign(Object.assign({},s),{type:"success"})}function en(s){return Object.assign(Object.assign({},s),{type:"error"})}function tn(s){return Object.assign(Object.assign({},s),{type:"confirm"})}function Rr(s){let{rootPrefixCls:o}=s;Xi=o}var Nr=function(s,o){var r={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&o.indexOf(t)<0&&(r[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(s);e<t.length;e++)o.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(s,t[e])&&(r[t[e]]=s[t[e]]);return r},Mr=s=>{const{prefixCls:o,className:r,closeIcon:t,closable:e,type:i,title:n,children:a}=s,l=Nr(s,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:u}=p.useContext(zt.E_),f=u(),h=o||u("modal"),[,d]=(0,Yi.Z)(h),g=`${h}-confirm`;let v={};return i?v={closable:e!=null?e:!1,title:"",footer:"",children:p.createElement($i,Object.assign({},s,{confirmPrefixCls:g,rootPrefixCls:f,content:a}))}:v={closable:e!=null?e:!0,title:n,footer:s.footer===void 0?p.createElement(zi,Object.assign({},s)):s.footer,children:a},p.createElement(Ui,Object.assign({prefixCls:h,className:be()(d,`${h}-pure-panel`,i&&g,i&&`${g}-${i}`,r)},l,{closeIcon:Wi(h,t),closable:e},v))};function Fr(){const[s,o]=p.useState([]),r=p.useCallback(t=>(o(e=>[].concat((0,it.Z)(e),[t])),()=>{o(e=>e.filter(i=>i!==t))}),[]);return[s,r]}var Hr=C(75878);const Br=(s,o)=>{let{afterClose:r,config:t}=s;var e;const[i,n]=p.useState(!0),[a,l]=p.useState(t),{direction:u,getPrefixCls:f}=p.useContext(zt.E_),h=f("modal"),d=f(),g=()=>{var b;r(),(b=a.afterClose)===null||b===void 0||b.call(a)},v=function(){n(!1);for(var b=arguments.length,_=new Array(b),S=0;S<b;S++)_[S]=arguments[S];const P=_.some(L=>L&&L.triggerCancel);a.onCancel&&P&&a.onCancel.apply(a,[()=>{}].concat((0,it.Z)(_.slice(1))))};p.useImperativeHandle(o,()=>({destroy:v,update:b=>{l(_=>Object.assign(Object.assign({},_),b))}}));const y=(e=a.okCancel)!==null&&e!==void 0?e:a.type==="confirm",[E]=(0,Vt.Z)("Modal",Hr.Z.Modal);return p.createElement(Zi,Object.assign({prefixCls:h,rootPrefixCls:d},a,{close:v,open:i,afterClose:g,okText:a.okText||(y?E==null?void 0:E.okText:E==null?void 0:E.justOkText),direction:a.direction||u,cancelText:a.cancelText||(E==null?void 0:E.cancelText)}))};var Ur=p.forwardRef(Br);let nn=0;const jr=p.memo(p.forwardRef((s,o)=>{const[r,t]=Fr();return p.useImperativeHandle(o,()=>({patchElement:t}),[]),p.createElement(p.Fragment,null,r)}));function Gr(){const s=p.useRef(null),[o,r]=p.useState([]);p.useEffect(()=>{o.length&&((0,it.Z)(o).forEach(n=>{n()}),r([]))},[o]);const t=p.useCallback(i=>function(a){var l;nn+=1;const u=p.createRef();let f;const h=p.createElement(Ur,{key:`modal-${nn}`,config:i(a),ref:u,afterClose:()=>{f==null||f()}});return f=(l=s.current)===null||l===void 0?void 0:l.patchElement(h),f&&ze.push(f),{destroy:()=>{function d(){var g;(g=u.current)===null||g===void 0||g.destroy()}u.current?d():r(g=>[].concat((0,it.Z)(g),[d]))},update:d=>{function g(){var v;(v=u.current)===null||v===void 0||v.update(d)}u.current?g():r(v=>[].concat((0,it.Z)(v),[g]))}}},[]);return[p.useMemo(()=>({info:t(Qi),success:t(qi),error:t(en),warning:t(Ji),confirm:t(tn)}),[]),p.createElement(jr,{key:"modal-holder",ref:s})]}var Vr=Gr;function rn(s){return ht(Ji(s))}const _e=Ki;_e.useModal=Vr,_e.info=function(o){return ht(Qi(o))},_e.success=function(o){return ht(qi(o))},_e.error=function(o){return ht(en(o))},_e.warning=rn,_e.warn=rn,_e.confirm=function(o){return ht(tn(o))},_e.destroyAll=function(){for(;ze.length;){const o=ze.pop();o&&o()}},_e.config=Rr,_e._InternalPanelDoNotUseOrYouWillBeFired=Mr;var Wr=_e,zr=C(40038),Yr=C(33729),Kt=C.n(Yr),Kr=C(96486),sn=C.n(Kr);function an(s,o){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(s);o&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable})),r.push.apply(r,t)}return r}function q(s){for(var o=1;o<arguments.length;o++){var r=arguments[o]!=null?arguments[o]:{};o%2?an(Object(r),!0).forEach(function(t){k(s,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach(function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(r,t))})}return s}function fe(s){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},fe(s)}function I(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function on(s,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,ln(t.key),t)}}function A(s,o,r){return o&&on(s.prototype,o),r&&on(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function k(s,o,r){return o=ln(o),o in s?Object.defineProperty(s,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[o]=r,s}function R(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&$t(s,o)}function D(s){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},D(s)}function $t(s,o){return $t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$t(s,o)}function $r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(s){return!1}}function m(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Zt(s,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(s)}function N(s){var o=$r();return function(){var t=D(s),e;if(o){var i=D(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Zt(this,e)}}function Zr(s,o){for(;!Object.prototype.hasOwnProperty.call(s,o)&&(s=D(s),s!==null););return s}function M(){return typeof Reflect!="undefined"&&Reflect.get?M=Reflect.get.bind():M=function(o,r,t){var e=Zr(o,r);if(e){var i=Object.getOwnPropertyDescriptor(e,r);return i.get?i.get.call(arguments.length<3?o:t):i.value}},M.apply(this,arguments)}function Fe(s){return Xr(s)||Jr(s)||Qr(s)||qr()}function Xr(s){if(Array.isArray(s))return Xt(s)}function Jr(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Qr(s,o){if(s){if(typeof s=="string")return Xt(s,o);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xt(s,o)}}function Xt(s,o){(o==null||o>s.length)&&(o=s.length);for(var r=0,t=new Array(o);r<o;r++)t[r]=s[r];return t}function qr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function es(s,o){if(typeof s!="object"||s===null)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var t=r.call(s,o||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}function ln(s){var o=es(s,"string");return typeof o=="symbol"?o:String(o)}var ts=C(26729),un=C.n(ts),is=typeof window!="undefined"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,Jt={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},Qt="%c[xgplayer]",W={config:{debug:is?3:0},logInfo:function(o){for(var r,t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.config.debug>=3&&(r=console).log.apply(r,[Qt,Jt.info,o].concat(e))},logWarn:function(o){for(var r,t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.config.debug>=1&&(r=console).warn.apply(r,[Qt,Jt.warn,o].concat(e))},logError:function(o){var r;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(r=console)[t].apply(r,[Qt,Jt.error,o].concat(i))}}};function ns(s){s.logInfo=W.logInfo.bind(s),s.logWarn=W.logWarn.bind(s),s.logError=W.logError.bind(s)}var rs=function(){function s(o){I(this,s),this.bufferedList=o}return A(s,[{key:"start",value:function(r){return this.bufferedList[r].start}},{key:"end",value:function(r){return this.bufferedList[r].end}},{key:"length",get:function(){return this.bufferedList.length}}]),s}(),c={};c.createDom=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(s);return e.className=t,e.innerHTML=o,Object.keys(r).forEach(function(i){var n=i,a=r[i];s==="video"||s==="audio"||s==="live-video"?a&&e.setAttribute(n,a):e.setAttribute(n,a)}),e},c.createDomFromHtml=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=s;var e=t.children;return t=null,e.length>0?(e=e[0],r&&c.addClass(e,r),o&&Object.keys(o).forEach(function(i){e.setAttribute(i,o[i])}),e):null}catch(i){return W.logError("util.createDomFromHtml",i),null}},c.hasClass=function(s,o){if(!s||!o)return!1;try{return Array.prototype.some.call(s.classList,function(t){return t===o})}catch(t){var r=s.className&&fe(s.className)==="object"?s.getAttribute("class"):s.className;return r&&!!r.match(new RegExp("(\\s|^)"+o+"(\\s|$)"))}},c.addClass=function(s,o){if(!(!s||!o))try{o.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&s.classList.add(r)})}catch(r){c.hasClass(s,o)||(s.className&&fe(s.className)==="object"?s.setAttribute("class",s.getAttribute("class")+" "+o):s.className+=" "+o)}},c.removeClass=function(s,o){if(!(!s||!o))try{o.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&s.classList.remove(r)})}catch(r){c.hasClass(s,o)&&o.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");s.className&&fe(s.className)==="object"?s.setAttribute("class",s.getAttribute("class").replace(e," ")):s.className=s.className.replace(e," ")})}},c.toggleClass=function(s,o){s&&o.split(/\s+/g).forEach(function(r){c.hasClass(s,r)?c.removeClass(s,r):c.addClass(s,r)})},c.classNames=function(){for(var s=arguments,o=[],r=function(i){c.typeOf(s[i])==="String"?o.push(s[i]):c.typeOf(s[i])==="Object"&&Object.keys(s[i]).map(function(n){s[i][n]&&o.push(n)})},t=0;t<arguments.length;t++)r(t);return o.join(" ")},c.findDom=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,o=arguments.length>1?arguments[1]:void 0,r;try{r=s.querySelector(o)}catch(t){W.logError("util.findDom",t),o.indexOf("#")===0&&(r=s.getElementById(o.slice(1)))}return r},c.getCss=function(s,o){return s.currentStyle?s.currentStyle[o]:document.defaultView.getComputedStyle(s,!1)[o]},c.padStart=function(s,o,r){for(var t=String(r),e=o>>0,i=Math.ceil(e/t.length),n=[],a=String(s);i--;)n.push(t);return n.join("").substring(0,e-a.length)+a},c.format=function(s){if(window.isNaN(s))return"";s=Math.round(s);var o=c.padStart(Math.floor(s/3600),2,0),r=c.padStart(Math.floor((s-o*3600)/60),2,0),t=c.padStart(Math.floor(s-o*3600-r*60),2,0);return(o==="00"?[r,t]:[o,r,t]).join(":")},c.event=function(s){if(s.touches){var o=s.touches[0]||s.changedTouches[0];s.clientX=o.clientX||0,s.clientY=o.clientY||0,s.offsetX=o.pageX-o.target.offsetLeft,s.offsetY=o.pageY-o.target.offsetTop}s._target=s.target||s.srcElement},c.typeOf=function(s){return Object.prototype.toString.call(s).match(/([^\s.*]+)(?=]$)/g)[0]},c.deepCopy=function(s,o){if(c.typeOf(o)==="Object"&&c.typeOf(s)==="Object")return Object.keys(o).forEach(function(r){c.typeOf(o[r])==="Object"&&!(o[r]instanceof Node)?s[r]===void 0||s[r]===void 0?s[r]=o[r]:c.deepCopy(s[r],o[r]):c.typeOf(o[r])==="Array"?s[r]=c.typeOf(s[r])==="Array"?s[r].concat(o[r]):o[r]:s[r]=o[r]}),s},c.deepMerge=function(s,o){return Object.keys(o).map(function(r){if(c.typeOf(o[r])==="Array"&&c.typeOf(s[r])==="Array"){if(c.typeOf(s[r])==="Array"){var t;(t=s[r]).push.apply(t,Fe(o[r]))}}else c.typeOf(s[r])===c.typeOf(o[r])&&s[r]!==null&&c.typeOf(s[r])==="Object"&&!(o[r]instanceof window.Node)?c.deepMerge(s[r],o[r]):o[r]!==null&&(s[r]=o[r])}),s},c.getBgImage=function(s){var o=(s.currentStyle||window.getComputedStyle(s,null)).backgroundImage;if(!o||o==="none")return"";var r=document.createElement("a");return r.href=o.replace(/url\("|"\)/g,""),r.href},c.copyDom=function(s){if(s&&s.nodeType===1){var o=document.createElement(s.tagName);return Array.prototype.forEach.call(s.attributes,function(r){o.setAttribute(r.name,r.value)}),s.innerHTML&&(o.innerHTML=s.innerHTML),o}else return""},c.setInterval=function(s,o,r,t){s._interval[o]||(s._interval[o]=window.setInterval(r.bind(s),t))},c.clearInterval=function(s,o){clearInterval(s._interval[o]),s._interval[o]=null},c.setTimeout=function(s,o,r){s._timers||(s._timers=[]);var t=setTimeout(function(){o(),c.clearTimeout(s,t)},r);return s._timers.push(t),t},c.clearTimeout=function(s,o){var r=s._timers;if(c.typeOf(r)==="Array"){for(var t=0;t<r.length;t++)if(r[t]===o){r.splice(t,1),clearTimeout(o);break}}else clearTimeout(o)},c.clearAllTimers=function(s){var o=s._timers;c.typeOf(o)==="Array"&&(o.map(function(r){clearTimeout(r)}),s._timerIds=[])},c.createImgBtn=function(s,o,r,t){var e=c.createDom("xg-".concat(s),"",{},"xgplayer-".concat(s,"-img"));if(e.style.backgroundImage='url("'.concat(o,'")'),r&&t){var i,n,a;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(l){return r.indexOf(l)>-1&&t.indexOf(l)>-1?(i=parseFloat(r.slice(0,r.indexOf(l)).trim()),n=parseFloat(t.slice(0,t.indexOf(l)).trim()),a=l,!1):!0}),e.style.width="".concat(i).concat(a),e.style.height="".concat(n).concat(a),e.style.backgroundSize="".concat(i).concat(a," ").concat(n).concat(a),s==="start"?e.style.margin="-".concat(n/2).concat(a," auto auto -").concat(i/2).concat(a):e.style.margin="auto 5px auto 5px"}return e},c.Hex2RGBA=function(s,o){var r=[];if(/^\#[0-9A-F]{3}$/i.test(s)){var t="#";s.replace(/[0-9A-F]/ig,function(e){t+=e+e}),s=t}return/^#[0-9A-F]{6}$/i.test(s)?(s.replace(/[0-9A-F]{2}/ig,function(e){r.push(parseInt(e,16))}),"rgba(".concat(r.join(","),", ").concat(o,")")):"rgba(255, 255, 255, 0.1)"},c.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},c.checkIsFunction=function(s){return s&&typeof s=="function"},c.checkIsObject=function(s){return s!==null&&fe(s)==="object"},c.hide=function(s){s.style.display="none"},c.show=function(s,o){s.style.display=o||"block"},c.isUndefined=function(s){if(typeof s=="undefined"||s===null)return!0},c.isNotNull=function(s){return s!=null},c.setStyleFromCsstext=function(s,o){if(o)if(c.typeOf(o)==="String"){var r=o.replace(/\s+/g,"").split(";");r.map(function(t){if(t){var e=t.split(":");e.length>1&&(s.style[e[0]]=e[1])}})}else Object.keys(o).map(function(t){s.style[t]=o[t]})};function ss(s,o){for(var r=0,t=o.length;r<t;r++)if(s.indexOf(o[r])>-1)return!0;return!1}c.filterStyleFromText=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],r=s.style.cssText;if(!r)return{};var t=r.replace(/\s+/g,"").split(";"),e={},i={};return t.map(function(n){if(n){var a=n.split(":");a.length>1&&(ss(a[0],o)?e[a[0]]=a[1]:i[a[0]]=a[1])}}),s.setAttribute("style",""),Object.keys(i).map(function(n){s.style[n]=i[n]}),e},c.getStyleFromCsstext=function(s){var o=s.style.cssText;if(!o)return{};var r=o.replace(/\s+/g,"").split(";"),t={};return r.map(function(e){if(e){var i=e.split(":");i.length>1&&(t[i[0]]=i[1])}}),t},c.preloadImg=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(s){var t=new window.Image;t.onload=function(e){t=null,o&&o(e)},t.onerror=function(e){t=null,r&&r(e)},t.src=s}},c.stopPropagation=function(s){s&&s.stopPropagation()},c.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},c.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},c.checkTouchSupport=function(){return"ontouchstart"in window},c.getBuffered2=function(s){for(var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,r=[],t=0;t<s.length;t++)r.push({start:s.start(t)<.5?0:s.start(t),end:s.end(t)});r.sort(function(l,u){var f=l.start-u.start;return f||u.end-l.end});var e=[];if(o)for(var i=0;i<r.length;i++){var n=e.length;if(n){var a=e[n-1].end;r[i].start-a<o?r[i].end>a&&(e[n-1].end=r[i].end):e.push(r[i])}else e.push(r[i])}else e=r;return new rs(e)},c.getEventPos=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return s.touches&&s.touches.length>0&&(s=s.touches[0]),{x:s.x/o,y:s.y/o,clientX:s.clientX/o,clientY:s.clientY/o,offsetX:s.offsetX/o,offsetY:s.offsetY/o,pageX:s.pageX/o,pageY:s.pageY/o}},c.requestAnimationFrame=function(s){var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(o)return o(s)},c.getHostFromUrl=function(s){if(c.typeOf(s)!=="String")return"";var o=s.split("/"),r="";return o.length>3&&o[2]&&(r=o[2]),r},c.cancelAnimationFrame=function(s){var o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;o&&o(s)},c.isMSE=function(s){return!s||!(s instanceof HTMLMediaElement)?!1:/^blob/.test(s.currentSrc)||/^blob/.test(s.src)},c.generateSessionId=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=new Date().getTime();try{s=parseInt(s)}catch(t){s=0}o+=s,window.performance&&typeof window.performance.now=="function"&&(o+=parseInt(window.performance.now()));var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(t==="x"?e:e&3|8).toString(16)});return r},c.createEvent=function(s){var o;return typeof window.Event=="function"?o=new Event(s):(o=document.createEvent("Event"),o.initEvent(s,!0,!0)),o},c.adjustTimeByDuration=function(s,o,r){return!o||!s?s:s>o||r&&s<o?o:s},c.createPositionBar=function(s,o){var r=c.createDom("xg-bar","",{"data-index":-1},s);return o.appendChild(r),r},c.getTransformStyle=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0};return"scale(".concat(s.scale||1,") translate(").concat(s.x||0,"%, ").concat(s.y||0,"%) rotate(").concat(s.rotate||0,"deg)")},c.convertDeg=function(s){return Math.abs(s)<=1?s*360:s%360};function cn(s){var o=fe(s);return s!==null&&(o==="object"||o==="function")}function as(s,o,r){var t,e,i,n,a,l,u=0,f=!1,h=!1,d=!0,g=!o&&o!==0&&typeof window.requestAnimationFrame=="function";if(typeof s!="function")throw new TypeError("Expected a function");o=+o||0,cn(r)&&(f=!!r.leading,h="maxWait"in r,i=h?Math.max(+r.maxWait||0,o):i,d="trailing"in r?!!r.trailing:d);function v(B){var re=t,oe=e;return t=e=void 0,u=B,n=s.apply(oe,re),n}function y(B,re){return g?(window.cancelAnimationFrame(a),window.requestAnimationFrame(B)):setTimeout(B,re)}function E(B){if(g)return window.cancelAnimationFrame(B);clearTimeout(B)}function b(B){return u=B,a=y(P,o),f?v(B):n}function _(B){var re=B-l,oe=B-u,ue=o-re;return h?Math.min(ue,i-oe):ue}function S(B){var re=B-l,oe=B-u;return l===void 0||re>=o||re<0||h&&oe>=i}function P(){var B=Date.now();if(S(B))return L(B);a=y(P,_(B))}function L(B){return a=void 0,d&&t?v(B):(t=e=void 0,n)}function U(){a!==void 0&&E(a),u=0,t=l=e=a=void 0}function Z(){return a===void 0?n:L(Date.now())}function ee(){return a!==void 0}function Q(){for(var B=Date.now(),re=S(B),oe=arguments.length,ue=new Array(oe),ne=0;ne<oe;ne++)ue[ne]=arguments[ne];if(t=ue,e=this,l=B,re){if(a===void 0)return b(l);if(h)return a=y(P,o),v(l)}return a===void 0&&(a=y(P,o)),n}return Q.cancel=U,Q.flush=Z,Q.pending=ee,Q}function os(s,o,r){var t=!0,e=!0;if(typeof s!="function")throw new TypeError("Expected a function");return cn(r)&&(t="leading"in r?!!r.leading:t,e="trailing"in r?!!r.trailing:e),as(s,o,{leading:t,trailing:e,maxWait:o})}function ls(){var s=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return s==="zh-cn"&&(s="zh"),s}function us(s,o,r){if(s){var t=s.getAttribute(r);return!!(t&&t===o&&(s.tagName==="VIDEO"||s.tagName==="AUDIO"))}}var fn={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},cs=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],G={get device(){var s=G.os;return s.isPc?"pc":"mobile"},get browser(){if(typeof navigator=="undefined")return"";var s=navigator.userAgent.toLowerCase(),o={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(o).filter(function(r){return o[r].test(s)}))[0]},get os(){if(typeof navigator=="undefined")return{};var s=navigator.userAgent,o=/(?:Windows Phone)/.test(s),r=/(?:SymbianOS)/.test(s)||o,t=/(?:Android)/.test(s),e=/(?:Firefox)/.test(s),i=/(?:iPad|PlayBook)/.test(s)||t&&!/(?:Mobile)/.test(s)||e&&/(?:Tablet)/.test(s),n=/(?:iPhone)/.test(s)&&!i,a=!n&&!t&&!r&&!i,l=/(?:iPad|PlayBook)/.test(s);return{isTablet:i,isPhone:n,isIpad:l,isIos:n||l,isAndroid:t,isPc:a,isSymbian:r,isWindowsPhone:o,isFireFox:e}},get osVersion(){if(typeof navigator=="undefined")return 0;var s=navigator.userAgent,o="";/(?:iPhone)|(?:iPad|PlayBook)/.test(s)?o=fn.ios:o=fn.android;var r=o?o.exec(s):[];if(r&&r.length>=3){var t=r[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator=="undefined")return!1;var s=/(micromessenger)\/([\d.]+)/,o=s.exec(navigator.userAgent.toLocaleLowerCase());return!!o},isSupportMP4:function(){var o={isSupport:!1,mime:""};if(typeof document=="undefined")return o;if(this.supportResult)return this.supportResult;var r=document.createElement("video");return typeof r.canPlayType=="function"&&cs.map(function(t){r.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(o.isSupport=!0,o.mime+="||".concat(t))}),this.supportResult=o,r=null,o},isMSESupport:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource=="undefined"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(o)}catch(r){return this._logger.error(o,r),!1}},isHevcSupported:function(){return typeof MediaSource=="undefined"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(o){var r={supported:!1,smooth:!1,powerEfficient:!1};if(!o||typeof navigator=="undefined")return Promise.resolve(r);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(o);var t=o.video||{},e=o.audio||{};try{var i=MediaSource.isTypeSupported(t.contentType),n=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:i&&n,smooth:!1,powerEfficient:!1})}catch(a){return Promise.resolve(r)}}},qt="3.0.7",hn={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},dn={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},bt=A(function s(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};I(this,s);var t=o&&o.i18n?o.i18n.ERROR_TYPES:null;if(o.media){var e=r.mediaError?r.mediaError:o.media.error||{},i=o.duration,n=o.currentTime,a=o.ended,l=o.src,u=o.currentSrc,f=o.media,h=f.readyState,d=f.networkState,g=r.errorCode||e.code;dn[g]&&(g=dn[g]);var v={playerVersion:qt,currentTime:n,duration:i,ended:a,readyState:h,networkState:d,src:l||u,errorType:r.errorType,errorCode:g,message:r.errorMessage||e.message,mediaError:e,originError:r.originError?r.originError.stack:"",host:c.getHostFromUrl(l||u)};return r.ext&&Object.keys(r.ext).map(function(_){v[_]=r.ext[_]}),v}else if(arguments.length>1){for(var y={playerVersion:qt,domain:document.domain},E=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],b=0;b<arguments.length;b++)y[E[b]]=arguments[b];return y.ex=t?(t[arguments[0]]||{}).msg:"",y}}),Ce="play",ei="playing",Ye="ended",nt="pause",dt="error",ti="seeking",He="seeked",Se="timeupdate",gt="waiting",Oe="canplay",fs="canplaythrough",Ke="durationchange",gn="volumechange",$e="loadeddata",vn="ratechange",pn="progress",ii="loadstart",rt="emptied",hs="stalled",ds="suspend",gs="abort",vs="bufferedChange",ni="focus",mn="blur",ri="ready",yn="urlNull",Ze="autoplay_started",si="autoplay_was_prevented",_t="complete",ai="replay",oi="destroy",St="urlchange",Cn="download_speed_change",De="fullscreen_change",xt="cssFullscreen_change",wt="mini_state_change",li="definition_change",ps="before_definition_change",ui="after_definition_change",ms="SEI_PARSED",ys="retry",Xe="video_resize",ci="pip_change",kn="rotate",En="screenShot",Pt="playnext",Tn="shortcut",bn="xglog",It="user_action",At="reset",_n="source_error",Sn="source_success",Cs="switch_subtitle",xn=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],wn={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Pn="fps_stuck";function fi(s,o){!this||!this.emit||(s==="error"?this.errorHandler(s,o.error):this.emit(s,o))}function ks(s,o){return function(r,t){var e={player:o,eventName:s,originalEvent:r,detail:r.detail||{},timeStamp:r.timeStamp,currentTime:o.currentTime,duration:o.duration,paused:o.paused,ended:o.ended,isInternalOp:!!o._internalOp[r.type],muted:o.muted,volume:o.volume,host:c.getHostFromUrl(o.currentSrc),vtype:o.vtype};if(o.removeInnerOP(r.type),s==="timeupdate"&&(o._currentTime=o.media&&o.media.currentTime),s==="ratechange"){var i=o.media?o.media.playbackRate:0;if(i&&o._rate===i)return;o._rate=o.media&&o.media.playbackRate}if(s==="durationchange"&&(o._duration=o.media.duration),s==="volumechange"&&(e.isMutedChange=o._lastMuted!==o.muted,o._lastMuted=o.muted),s==="error"&&(e.error=t||o.video.error),o.mediaEventMiddleware[s]){var n=fi.bind(o,s,e);try{o.mediaEventMiddleware[s].call(o,e,n)}catch(a){throw fi.call(o,s,e),a}}else fi.call(o,s,e)}}var Es=function(s){R(r,s);var o=N(r);function r(t){var e;I(this,r),e=o.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var i=t["x5-video-player-type"]||t.x5VideoPlayerType;return G.isWeixin&&G.os.isAndroid&&i&&(e.mediaConfig["x5-video-player-type"]=i,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),e.media=c.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),c.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return A(r,[{key:"setEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(n){i.mediaEventMiddleware[n]=e[n]})}},{key:"removeEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(n){delete i.mediaEventMiddleware[n]})}},{key:"attachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=xn.map(function(n){var a="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));return typeof e[a]=="function"&&e.on(n,e[a]),k({},n,ks(n,e))})),this._evHandlers.forEach(function(n){var a=Object.keys(n)[0];i.addEventListener(a,n[a],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(n){var a=Object.keys(n)[0];i.removeEventListener(a,n[a],!1)}),this._evHandlers.forEach(function(n){var a=Object.keys(n)[0],l="on".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));typeof e[l]=="function"&&e.off(a,e[l])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,i){var n=this;e.removeAttribute("src"),e.load(),i.forEach(function(h){n.media.appendChild(c.createDom("source","",{src:"".concat(h.src),type:"".concat(h.type||"")}))});var a=e.children;if(a){this._videoSourceCount=a.length,this._vLoadeddata=function(h){n.emit(Sn,{src:h.target.currentSrc,host:c.getHostFromUrl(h.target.currentSrc)})};for(var l=null,u=0;u<this._evHandlers.length;u++)if(Object.keys(this._evHandlers[u])[0]==="error"){l=this._evHandlers[u];break}!this._sourceError&&(this._sourceError=function(h){if(n._videoSourceCount--,n._videoSourceCount===0){var d={code:4,message:"sources_load_error"};l?l.error(h,d):n.errorHandler("error",d)}var g=hn[4];n.emit(_n,new bt(n,{errorType:g,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:h.target.src}))});for(var f=0;f<a.length;f++)a[f].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var i=e.children;if(!(!i||i.length===0||!this._sourceError)){for(var n=0;n<i.length;n++)i[n].removeEventListener("error",this._sourceError);for(;i.length>0;)e.removeChild(i[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||i)){var n=this.media.error||i,a=n.code?hn[n.code]:"other",l=n.message;this.media.currentSrc||(l="empty_src",n={code:6,message:l}),this.emit(e,new bt(this,{errorType:a,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var i=[0,0];if(!this.media)return i;e||(e=this.media.buffered);var n=this.media.currentTime;if(e)for(var a=0,l=e.length;a<l&&(i[0]=e.start(a),i[1]=e.end(a),!(i[0]<=n&&n<=i[1]));a++);return i[0]-n<=0&&n-i[1]<=0?i:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?c.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var i=this.media.buffered;if(!i||i.length===0)return e;for(var n=0;n<i.length;n++)if((i.start(n)<=this.currentTime||i.start(n)<.1)&&i.end(n)>=this.currentTime)return{start:i.start(n),end:i.end(n)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var i=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return i[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(St,e),this.emit(gt),this._currentTime=0,this._duration=0,/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src)){this.onWaiting();return}this._detachSourceEvents(this.media),c.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,i){for(var n,a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];(n=M(D(r.prototype),"emit",this)).call.apply(n,[this,e,i].concat(l))}},{key:"on",value:function(e,i){for(var n,a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];(n=M(D(r.prototype),"on",this)).call.apply(n,[this,e,i].concat(l))}},{key:"once",value:function(e,i){for(var n,a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];(n=M(D(r.prototype),"once",this)).call.apply(n,[this,e,i].concat(l))}},{key:"off",value:function(e,i){for(var n,a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];(n=M(D(r.prototype),"off",this)).call.apply(n,[this,e,i].concat(l))}},{key:"offAll",value:function(){M(D(r.prototype),"removeAllListeners",this).call(this)}}]),r}(un()),Ts=function(){function s(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};I(this,s),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=o}return A(s,[{key:"openDB",value:function(r){var t=this,e=this,i=this.myDB.version||1,n=e.indexedDB.open(e.myDB.name,i);n.onerror=function(a){},n.onsuccess=function(a){t.myDB.db=a.target.result,r.call(e)},n.onupgradeneeded=function(a){var l=a.target.result;a.target.transaction,l.objectStoreNames.contains(e.myDB.ojstore.name)||l.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var r=this;r.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(r,t){for(var e=this.myDB.db.transaction(r,"readwrite").objectStore(r),i,n=0;n<t.length;n++)i=e.add(t[n]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(r,t){for(var e=this.myDB.db.transaction(r,"readwrite").objectStore(r),i,n=0;n<t.length;n++)i=e.put(t[n]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(r,t,e){var i=this,n=this.myDB.db.transaction(r,"readwrite").objectStore(r),a=n.get(t);a.onerror=function(){e.call(i,null)},a.onsuccess=function(l){var u=l.target.result;e.call(i,u)}}},{key:"deleteData",value:function(r,t){var e=this.myDB.db.transaction(r,"readwrite").objectStore(r);e.delete(t)}},{key:"clearData",value:function(r){var t=this.myDB.db.transaction(r,"readwrite").objectStore(r);t.clear()}}]),s}(),In=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],An=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Ln=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Je="data-xgplayerid";function Lt(s,o,r){for(var t=arguments.length,e=new Array(t>3?t-3:0),i=3;i<t;i++)e[i-3]=arguments[i];var n=o.call.apply(o,[s].concat(e));!r||typeof r!="function"||(n&&n.then?n.then(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];r.call.apply(r,[s].concat(l))}):r.call.apply(r,[s].concat(e)))}function Ot(s,o){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[s]&&(this.__hooks[s]=null),function(){var t=arguments,e=this;if(r.pre)try{var i;(i=r.pre).call.apply(i,[this].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(s,":pre error] >> ").concat(l.message),l}if(this.__hooks&&this.__hooks[s])try{var n,a=(n=this.__hooks[s]).call.apply(n,[this,this].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then(function(l){l!==!1&&Lt.apply(void 0,[e,o,r.next].concat(Fe(t)))}).catch(function(l){throw l}):Lt.apply(void 0,[this,o,r.next].concat(Array.prototype.slice.call(arguments))):a===void 0&&Lt.apply(void 0,[this,o,r.next].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(s,"] >> ").concat(l.message),l}else Lt.apply(void 0,[this,o,r.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function Dt(s,o){var r=this.__hooks;if(r)return r.hasOwnProperty(s)?(r&&(r[s]=o),!0):(console.warn("has no supported hook which name [".concat(s,"]")),!1)}function Rt(s,o){var r=this.__hooks;r&&delete r[s]}function On(s){if(!(!this.plugins||!this.plugins[s.toLowerCase()])){for(var o=this.plugins[s.toLowerCase()],r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return o.useHooks&&o.useHooks.apply(o,t)}}function Dn(s){if(!(!this.plugins||!this.plugins[s.toLowerCase()])){var o=this.plugins[s.toLowerCase()];if(o){for(var r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return o.removeHooks&&o.removeHooks.apply(o,t)}}}function Rn(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];s.__hooks={},o&&o.map(function(r){s.__hooks[r]=null}),Object.defineProperty(s,"hooks",{get:function(){return s.__hooks&&Object.keys(s.__hooks).map(function(t){if(s.__hooks[t])return t})}})}function Nn(s){s.__hooks=null}function Re(s,o,r){for(var t=arguments.length,e=new Array(t>3?t-3:0),i=3;i<t;i++)e[i-3]=arguments[i];if(s.__hooks&&s.__hooks[o]){var n,a=(n=s.__hooks[o]).call.apply(n,[s,s].concat(e));if(a&&a.then)a.then(function(l){return l===!1?null:r.call.apply(r,[s,s].concat(e))}).catch(function(l){console.warn("[runHooks]".concat(o," reject"),l.message)});else if(a!==!1)return r.call.apply(r,[s,s].concat(e))}else return r.call.apply(r,[s,s].concat(e))}function hi(s,o){W.logError("[".concat(s,"] event or callback cant be undefined or null when call ").concat(o))}var Qe=function(){function s(o){I(this,s),c.checkIsFunction(this.beforeCreate)&&this.beforeCreate(o),Rn(this),this.__args=o,this.__events={},this.__onceEvents={},this.config=o.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(o)}return A(s,[{key:"beforeCreate",value:function(r){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(r){this.player=r.player,this.playerConfig=r.player&&r.player.config,this.pluginName=r.pluginName?r.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=r.player&&r.player.logger}},{key:"updateLang",value:function(r){r||(r=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var r=c.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(r=this.playerConfig.domEventType),r}},{key:"on",value:function(r,t){var e=this;if(!r||!t||!this.player){hi(this.pluginName,"plugin.on(event, callback)");return}typeof r=="string"?(this.__events[r]=t,this.player.on(r,t)):Array.isArray(r)&&r.forEach(function(i){e.__events[i]=t,e.player.on(i,t)})}},{key:"once",value:function(r,t){var e=this;if(!r||!t||!this.player){hi(this.pluginName,"plugin.once(event, callback)");return}typeof r=="string"?(this.__onceEvents[r]=t,this.player.once(r,t)):Array.isArray(r)&&r.forEach(function(i){e.__onceEvents[i]=t,e.player.once(r,t)})}},{key:"off",value:function(r,t){var e=this;if(!r||!t||!this.player){hi(this.pluginName,"plugin.off(event, callback)");return}typeof r=="string"?(delete this.__events[r],this.player.off(r,t)):Array.isArray(r)&&r.forEach(function(i){delete e.__events[r],e.player.off(i,t)})}},{key:"offAll",value:function(){var r=this;["__events","__onceEvents"].forEach(function(t){Object.keys(r[t]).forEach(function(e){r[t][e]&&r.off(e,r[t][e]),e&&delete r[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(r){var t;if(this.player){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(t=this.player).emit.apply(t,[r].concat(i))}}},{key:"emitUserAction",value:function(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var i=q(q({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(r,t,i)}}},{key:"hook",value:function(r,t){return Ot.call.apply(Ot,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(r,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),n=2;n<e;n++)i[n-2]=arguments[n];return Dt.call.apply(Dt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(r,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),n=2;n<e;n++)i[n-2]=arguments[n];return Rt.call.apply(Rt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:r,options:t})}},{key:"getPlugin",value:function(r){return this.player?this.player.getPlugin(r):null}},{key:"__destroy",value:function(){var r=this,t=this.player,e=this.pluginName;this.offAll(),c.clearAllTimers(this),c.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(i){r[i]=null}),t.unRegisterPlugin(e),Nn(this)}}],[{key:"defineGetterOrSetter",value:function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&Object.defineProperty(r,e,t[e])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),s}(),bs=C(99438),Mn=C.n(bs),_s={CONTROLS:"controls",ROOT:"root"},X={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function di(s){return s?s.indexOf&&/^(?:http|data:|\/)/.test(s):!1}function Ss(s,o){return fe(s)==="object"&&s.class&&typeof s.class=="string"?"".concat(o," ").concat(s.class):o}function xs(s,o){return fe(s)==="object"&&s.attr&&fe(s.attr)==="object"&&Object.keys(s.attr).map(function(r){o[r]=s.attr[r]}),o}function Fn(s,o){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",i=null;if(s instanceof window.Element)return c.addClass(s,r),Object.keys(t).map(function(n){s.setAttribute(n,t[n])}),s;if(di(s)||di(s.url))return t.src=di(s)?s:s.url||"",i=c.createDom(s.tag||"img","",t,"xg-img ".concat(r)),i;if(typeof s=="function")try{return i=s(),i instanceof window.Element?(c.addClass(i,r),Object.keys(t).map(function(n){i.setAttribute(n,t[n])}),i):(W.logWarn("warn>>icons.".concat(o," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(n){return W.logError("Plugin named [".concat(e,"]:createIcon"),n),null}return typeof s=="string"?c.createDomFromHtml(s,t,r):(W.logWarn("warn>>icons.".concat(o," in config of plugin named [").concat(e,"] is invalid")),null)}function ws(s,o){var r=o.config.icons||o.playerConfig.icons;Object.keys(s).map(function(t){var e=s[t],i=e&&e.class?e.class:"",n=e&&e.attr?e.attr:{},a=null;r&&r[t]&&(i=Ss(r[t],i),n=xs(r[t],n),a=Fn(r[t],t,i,n,o.pluginName)),!a&&e&&(a=Fn(e.icon?e.icon:e,n,i,{},o.pluginName)),o.icons[t]=a})}function Ps(s,o){Object.keys(s).map(function(r){Object.defineProperty(o.langText,r,{get:function(){var e=o.lang,i=o.i18n;return i[r]?i[r]:s[r]&&s[r][e]||""}})})}var $=function(s){R(r,s);var o=N(r);function r(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return I(this,r),t=o.call(this,e),t.__delegates=[],t}return A(r,[{key:"__init",value:function(e){if(M(D(r.prototype),"__init",this).call(this,e),!!e.root){var i=e.root,n=null;this.icons={},this.root=null,this.parent=null;var a=this.registerIcons()||{};ws(a,this),this.langText={};var l=this.registerLanguageTexts()||{};Ps(l,this);var u="";try{u=this.render()}catch(d){throw W.logError("Plugin:".concat(this.pluginName,":render"),d),new Error("Plugin:".concat(this.pluginName,":render:").concat(d.message))}if(u)n=r.insert(u,i,e.index),n.setAttribute("data-index",e.index);else if(e.tag)n=c.createDom(e.tag,"",e.attr,e.name),n.setAttribute("data-index",e.index),i.appendChild(n);else return;this.root=n,this.parent=i;var f=this.config.attr||{},h=this.config.style||{};this.setAttr(f),this.setStyle(h),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var i=this.children();i&&fe(i)==="object"&&Object.keys(i).length>0&&Object.keys(i).map(function(n){var a=n,l=i[a],u={root:e.root},f,h;typeof l=="function"?(f=e.config[a]||{},h=l):fe(l)==="object"&&typeof l.plugin=="function"&&(f=l.options?c.deepCopy(e.config[a]||{},l.options):e.config[a]||{},h=l.plugin),u.config=f,f.index!==void 0&&(u.index=f.index),f.root&&(u.root=f.root),e.registerPlugin(h,u,a)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function i(u,f){for(var h=0;h<u.children.length;h++)u.children[h].children.length>0?i(u.children[h],f):f(u.children[h])}var n=this.root,a=this.i18n,l=this.langText;n&&i(n,function(u){var f=u.getAttribute&&u.getAttribute("lang-key");if(f){var h=a[f.toUpperCase()]||l[f];h&&(u.innerHTML=typeof h=="function"?h(e):h)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=this.i18n||{},a=this.langText;e.setAttribute&&e.setAttribute("lang-key",i);var l=n[i]||a[i]||"";l&&(e.innerHTML=l)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";i.root=i.root||this.root;var a=M(D(r.prototype),"registerPlugin",this).call(this,e,i,n);return this._children.push(a),a}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,i,n){var a=this;if(arguments.length<3&&typeof i=="function")Array.isArray(e)?e.forEach(function(u){a.bindEL(u,i)}):this.bindEL(e,i);else{var l=r.delegate.call(this,this.root,e,i,n);this.__delegates=this.__delegates.concat(l)}}},{key:"unbind",value:function(e,i){var n=this;if(arguments.length<3&&typeof i=="function")Array.isArray(e)?e.forEach(function(u){n.unbindEL(u,i)}):this.unbindEL(e,i);else for(var a="".concat(e,"_").concat(i),l=0;l<this.__delegates.length;l++)if(this.__delegates[l].key===a){this.__delegates[l].destroy(),this.__delegates.splice(l,1);break}}},{key:"setStyle",value:function(e,i){var n=this;if(this.root){if(c.typeOf(e)==="String")return this.root.style[e]=i;c.typeOf(e)==="Object"&&Object.keys(e).map(function(a){n.root.style[a]=e[a]})}}},{key:"setAttr",value:function(e,i){var n=this;if(this.root){if(c.typeOf(e)==="String")return this.root.setAttribute(e,i);c.typeOf(e)==="Object"&&Object.keys(e).map(function(a){n.root.setAttribute(a,e[a])})}}},{key:"setHtml",value:function(e,i){this.root&&(this.root.innerHTML=e,typeof i=="function"&&i())}},{key:"bindEL",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof i=="function"&&this.root.addEventListener(e,i,n)}},{key:"unbindEL",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof i=="function"&&this.root.removeEventListener(e,i,n)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var i=window.getComputedStyle(this.root,null),n=i.getPropertyValue("display");if(n==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,i){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!i||!(i instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(i):e.appendChild(i)}catch(n){return W.logError("Plugin:appendChild",n),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,i=this.player;this.__delegates.map(function(n){n.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(n){i.unRegisterPlugin(n.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),M(D(r.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(n){e[n]=null})}}],[{key:"insert",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=i.children.length,l=Number(n),u=e instanceof window.Node;if(a){for(var f=0,h=null,d="";f<a;f++){h=i.children[f];var g=Number(h.getAttribute("data-index"));if(g>=l){d="beforebegin";break}else g<l&&(d="afterend")}return u?d==="afterend"?i.appendChild(e):i.insertBefore(e,h):h.insertAdjacentHTML(d,e),d==="afterend"?i.children[i.children.length-1]:i.children[f]}else return u?i.appendChild(e):i.insertAdjacentHTML("beforeend",e),i.children[i.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,i,n,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=[];if(e instanceof window.Node&&typeof a=="function")if(Array.isArray(n))n.forEach(function(h){var d=Mn()(e,i,h,a,l);d.key="".concat(i,"_").concat(h),u.push(d)});else{var f=Mn()(e,i,n,a,l);f.key="".concat(i,"_").concat(n),u.push(f)}return u}},{key:"ROOT_TYPES",get:function(){return _s}},{key:"POSITIONS",get:function(){return X}}]),r}(Qe),Is=function(){function s(){var o=this;if(I(this,s),k(this,"__trigger",function(r){var t=new Date().getTime();o.timeStamp=t;for(var e=0;e<r.length;e++)o.__runHandler(r[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(os(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(r){console.error(r)}}return A(s,[{key:"addObserver",value:function(r,t){if(this.observer){this.observer&&this.observer.observe(r);for(var e=r.getAttribute(Je),i=this.__handlers,n=-1,a=0;a<i.length;a++)i[a]&&r===i[a].target&&(n=a);n>-1?this.__handlers[n].handler=t:this.__handlers.push({target:r,handler:t,playerId:e})}}},{key:"unObserver",value:function(r){var t=-1;this.__handlers.map(function(e,i){r===e.target&&(t=i)});try{this.observer&&this.observer.unobserve(r)}catch(e){}this.observer&&this.observer.unobserve(r),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(r){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&r===t[e].target){try{t[e].handler(r)}catch(i){console.error(i)}return!0}return!1}}]),s}(),vt=null;function As(s,o){return vt||(vt=new Is),vt.addObserver(s,o),vt}function Ls(s,o){vt.unObserver(s,o)}var ie={pluginGroup:{},init:function(o){var r=o._pluginInfoId;r||(r=new Date().getTime(),o._pluginInfoId=r),!o.config.closeResizeObserver&&As(o.root,function(){o.resize()}),Object.keys(this.pluginGroup).length===0&&(o.isUserActive=!0),this.pluginGroup[r]={_player:o,_originalOptions:o.config||{},_plugins:{}}},checkPlayerRoot:function(o){if(this.pluginGroup){for(var r=Object.keys(this.pluginGroup),t=0;t<r.length;t++){var e=this.pluginGroup[r[t]]._player;if(e.root===o)return e}return null}return null},formatPluginInfo:function(o,r){var t=null,e=null;return o.plugin&&typeof o.plugin=="function"?(t=o.plugin,e=o.options):(t=o,e={}),r&&(e.config=r||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(o,r){for(var t=0;t<r.length;t++)if(o.toLowerCase()===r[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(o,r){for(var t=Object.keys(r),e=null,i=0;i<t.length;i++)if(o.toLowerCase()===t[i].toLowerCase()){e=r[t[i]];break}return c.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(o,r){var t=this,e=r.timeout||1500;return Promise.race([r.loader().then(function(i){var n;i&&i.__esModule?n=i.default:n=i,t.register(o,n,i.options)}),new Promise(function(i,n){setTimeout(function(){n(new Error("timeout"))},e)})])},register:function(o,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!o||!r||typeof r!="function"||r.prototype===void 0)){var e=o._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var i=this.pluginGroup[e]._plugins,n=this.pluginGroup[e]._originalOptions;t.player=this.pluginGroup[e]._player;var a=t.pluginName||r.pluginName;if(!a)throw new Error("The property pluginName is necessary");if(r.isSupported&&!r.isSupported(o.config.mediaType,o.config.codecType)){console.warn("not supported plugin [".concat(a,"]"));return}t.config||(t.config={});for(var l=Object.keys(n),u=0;u<l.length;u++)if(a.toLowerCase()===l[u].toLowerCase()){var f=n[l[u]];c.typeOf(f)==="Object"?t.config=Object.assign({},t.config,n[l[u]]):c.typeOf(f)==="Boolean"&&(t.config.disable=!f);break}r.defaultConfig&&Object.keys(r.defaultConfig).forEach(function(d){typeof t.config[d]=="undefined"&&(t.config[d]=r.defaultConfig[d])}),t.root?typeof t.root=="string"&&(t.root=o[t.root]):t.root=o.root,t.index=t.config.index||0;try{i[a.toLowerCase()]&&(this.unRegister(e,a.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(a,"] exist, destroy the old instance")));var h=new r(t);return i[a.toLowerCase()]=h,i[a.toLowerCase()].func=r,h&&typeof h.afterCreate=="function"&&h.afterCreate(),h}catch(d){throw console.error(d),d}}}},unRegister:function(o,r){o._pluginInfoId&&(o=o._pluginInfoId),r=r.toLowerCase();try{var t=this.pluginGroup[o]._plugins[r];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[o]._plugins[r])}catch(e){console.error("[unRegister:".concat(r,"] cgid:[").concat(o,"] error"),e)}},deletePlugin:function(o,r){var t=o._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[r]},getPlugins:function(o){var r=o._pluginInfoId;return r&&this.pluginGroup[r]?this.pluginGroup[r]._plugins:{}},findPlugin:function(o,r){var t=o._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=r.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(o){var r=this;function t(e){return!e||!e.then?new Promise(function(i){i()}):e}return new Promise(function(e){if(r.pluginGroup){var i;return o._loadingPlugins&&o._loadingPlugins.length?i=Promise.all(o._loadingPlugins):i=Promise.resolve(),i.then(function(){var n=o._pluginInfoId;if(!r.pluginGroup[n]){e();return}var a=r.pluginGroup[n]._plugins,l=[];Object.keys(a).forEach(function(u){if(a[u]&&a[u].beforePlayerInit)try{var f=a[u].beforePlayerInit();l.push(t(f))}catch(h){throw l.push(t(null)),h}}),Promise.all([].concat(l)).then(function(){e()}).catch(function(u){console.error(u),e()})})}})},afterInit:function(o){var r=o._pluginInfoId;if(!(!r||!this.pluginGroup[r])){var t=this.pluginGroup[r]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(o,r){var t=r._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(i){if(e[i].updateLang)e[i].updateLang(o);else try{e[i].lang=o}catch(n){console.warn("".concat(i," setLang"))}})}},reRender:function(o){var r=this,t=o._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],i=this.pluginGroup[t]._plugins;Object.keys(i).forEach(function(n){n!=="controls"&&i[n]&&(e.push({plugin:i[n].func,options:i[n].__args}),r.unRegister(t,n))}),e.forEach(function(n){r.register(o,n.plugin,n.options)})}},onPluginsReady:function(o){var r=o._pluginInfoId;if(!(!r||!this.pluginGroup[r])){var t=this.pluginGroup[r]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},setCurrentUserActive:function(o,r){if(this.pluginGroup[o]){if(!r)return this.pluginGroup[o]._player.isUserActive=r,o;for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var i=this.pluginGroup[t[e]];i&&i._player&&(this.pluginGroup[t[e]]._player.isUserActive=!1)}return this.pluginGroup[o]._player.isUserActive=r,o}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var o=Object.keys(this.pluginGroup),r=0;r<o.length;r++){var t=this.pluginGroup[o[r]];if(t&&t._player&&t._player.isUserActive)return o[r]}return null}},destroy:function(o){var r=o._pluginInfoId;if(this.pluginGroup[r]){Ls(o.root);for(var t=this.pluginGroup[r]._plugins,e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];this.unRegister(r,n)}var a=o.isUseActive;if(delete this.pluginGroup[r],delete o._pluginInfoId,a){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},T={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function Hn(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:ls(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var Os=function(o,r){var t,e,i;r.preset&&r.options?i=new r.preset(r.options,o.config):i=new r({},o.config);var n=i,a=n.plugins,l=a===void 0?[]:a,u=n.ignores,f=u===void 0?[]:u,h=n.icons,d=h===void 0?{}:h,g=n.i18n,v=g===void 0?[]:g;o.config.plugins||(o.config.plugins=[]),o.config.ignores||(o.config.ignores=[]),(t=o.config.plugins).push.apply(t,Fe(l)),(e=o.config.ignores).push.apply(e,Fe(f)),Object.keys(d).map(function(E){o.config.icons[E]||(o.config.icons[E]=d[E])});var y=o.config.i18n||[];v.push.apply(v,Fe(y)),o.config.i18n=v},Ds=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"onMouseEnter",function(a){var l=m(t),u=l.player,f=l.playerConfig;f.closeControlsBlur&&u.focus({autoHide:!1})}),k(m(t),"onMouseLeave",function(){var a=m(t),l=a.player;l.focus()}),t}return A(r,[{key:"beforeCreate",value:function(e){!e.config.mode&&G.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,i=this.config,n=i.disable,a=i.height,l=i.mode;if(!n){l==="flex"&&this.player.addClass(T.FLEX_CONTROLS);var u={height:"".concat(a,"px")};Object.keys(u).map(function(h){e.root.style[h]=u[h]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(wt,function(h){h?c.addClass(e.root,"mini-controls"):c.removeClass(e.root,"mini-controls")});var f=this.playerConfig.isMobileSimulateMode;G.device!=="mobile"&&f!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&c.addClass(this.root,T.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){c.removeClass(this.root,T.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){c.addClass(this.root,"show")}},{key:"hide",value:function(){c.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(this.root){var a=e.defaultConfig||{};if(!i.root){var l=i.position?i.position:i.config&&i.config.position?i.config.position:a.position;switch(l){case X.CONTROLS_LEFT:i.root=this.left;break;case X.CONTROLS_RIGHT:i.root=this.right;break;case X.CONTROLS_CENTER:i.root=this.center;break;case X.CONTROLS:i.root=this.root;break;default:i.root=this.left}return M(D(r.prototype),"registerPlugin",this).call(this,e,i,n)}}}},{key:"destroy",value:function(){G.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,i=e.mode,n=e.autoHide,a=e.initShow,l=e.disable;if(!l){var u=c.classNames({"xgplayer-controls":!0},{"flex-controls":i==="flex"},{"bottom-controls":i==="bottom"},k({},T.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":a||!n});return'<xg-controls class="'.concat(u,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),r}($),Rs={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},pe={lang:{},langKeys:[],textKeys:[]};function pt(s,o){return Object.keys(o).forEach(function(r){var t=c.typeOf(o[r]),e=c.typeOf(s[r]);if(t==="Array"){var i;e!=="Array"&&(s[r]=[]),(i=s[r]).push.apply(i,Fe(o[r]))}else t==="Object"?(e!=="Object"&&(s[r]={}),pt(s[r],o[r])):s[r]=o[r]}),s}function Bn(){Object.keys(pe.lang.en).map(function(s){pe.textKeys[s]=s})}function Ns(s,o){var r=[];if(o||(o=pe),!!o.lang){c.typeOf(s)!=="Array"?r=Object.keys(s).map(function(i){var n=i==="zh"?"zh-cn":i;return{LANG:n,TEXT:s[i]}}):r=s;var t=o,e=t.lang;r.map(function(i){i.LANG==="zh"&&(i.LANG="zh-cn"),e[i.LANG]?pt(e[i.LANG]||{},i.TEXT||{}):gi(i,o)}),Bn()}}function gi(s,o){var r=s.LANG;if(o||(o=pe),!!o.lang){var t=s.TEXT||{};r==="zh"&&(r="zh-cn"),o.lang[r]?pt(o.lang[r],t):(o.langKeys.push(r),o.lang[r]=t),Bn()}}function Ms(s){var o,r={lang:{},langKeys:[],textKeys:{},pId:s};return pt(r.lang,pe.lang),(o=r.langKeys).push.apply(o,Fe(pe.langKeys)),pt(r.textKeys,pe.textKeys),r}gi(Rs);var st={get textKeys(){return pe.textKeys},get langKeys(){return pe.langKeys},get lang(){var s={};return pe.langKeys.map(function(o){s[o]=pe.lang[o]}),pe.lang["zh-cn"]&&(s.zh=pe.lang["zh-cn"]||{}),s},extend:Ns,use:gi,init:Ms},K={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},Un=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Fs=["play","pause","replay","retry"],jn=0,Gn=0,vi=function(s){R(r,s);var o=N(r);function r(t){var e;I(this,r);var i=c.deepMerge(Hn(),t);e=o.call(this,i),k(m(e),"canPlayFunc",function(){if(e.config){var v=e.config,y=v.autoplay,E=v.startTime,b=v.defaultPlaybackRate;W.logInfo("player","canPlayFunc, startTime",E),E&&(e.currentTime=E>e.duration?e.duration:E,e.config.startTime=0),e.playbackRate=b,(y||e._useAutoplay)&&e.mediaPlay(),e.off(Oe,e.canPlayFunc),e.removeClass(T.ENTER)}}),k(m(e),"onFullscreenChange",function(v,y){var E=function(){c.setTimeout(m(e),function(){e.resize()},100)},b=c.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(It,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var _=us(b,e.playerId,Je);if(y||b&&(b===e._fullscreenEl||_))E(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,b,T.FULLSCREEN),e.emit(De,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){E();var S=m(e),P=S._fullScreenOffset,L=S.config;L.needFullscreenScroll?(window.scrollTo(P.left,P.top),c.setTimeout(m(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(T.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,T.FULLSCREEN),e._fullscreenEl=null,e.emit(De,!1)}}),k(m(e),"_onWebkitbeginfullscreen",function(v){e._fullscreenEl=e.media,e.onFullscreenChange(v,!0)}),k(m(e),"_onWebkitendfullscreen",function(v){e.onFullscreenChange(v,!1)}),Rn(m(e),Fs),e.config=i,e._pluginInfoId=c.generateSessionId(),ns(m(e));var n=e.constructor.defaultPreset;if(e.config.presets.length){var a=e.config.presets.indexOf("default");a>=0&&n&&(e.config.presets[a]=n)}else n&&e.config.presets.push(n);e.userTimer=null,e.waitTimer=null,e._state=K.INITIAL,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:0,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e._accPlayed={t:0,acc:0,loopAcc:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=st.init(e._pluginInfoId),G.os.isAndroid&&G.osVersion>0&&G.osVersion<6&&(e.config.autoplay=!1),e.database=new Ts,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0;var l=e._initDOM();if(!l)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),Zt(e);var u=e.config,f=u.definition,h=f===void 0?{}:f,d=u.url;if(!d&&h.list&&h.list.length>0){var g=h.list.find(function(v){return v.definition&&v.definition===h.defaultDefinition});g||(h.defaultDefinition=h.list[0].definition,g=h.list[0]),e.config.url=g.url,e.curDefinition=g}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),ie.onPluginsReady(m(e)),e.getInitDefinition(),e.setState(K.READY),c.setTimeout(m(e),function(){e.emit(ri)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<K.ATTACHED)&&e.start(),e}return A(r,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var i=this.config.el;if(i&&i.nodeType===1)this.root=i;else return this.emit(dt,new bt("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var n=ie.checkPlayerRoot(this.root);n&&(W.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this.root.setAttribute(Je,this.playerId),ie.init(this),this._initBaseDoms();var a=this.constructor.XgVideoProxy;if(a&&this.mediaConfig.mediaType===a.mediaType){var l=this.innerContainer||this.root;this.detachVideoEvents(this.media);var u=new a(l,this.config,this.mediaConfig);this.attachVideoEvents(u),this.media=u}if(this.media.setAttribute(Je,this.playerId),this.config.controls){var f=this.config.controls.root||null,h=ie.register(this,Ds,{root:f});this.controls=h}var d=this.config.isMobileSimulateMode==="mobile"?"mobile":G.device;if(this.addClass("".concat(T.DEFAULT," ").concat(T.INACTIVE," xgplayer-").concat(d," ").concat(this.config.controls?"":T.NO_CONTROLS)),this.config.autoplay?this.addClass(T.ENTER):this.addClass(T.NO_START),this.config.fluid){var g=this.config,v=g.width,y=g.height;(typeof v!="number"||typeof y!="number")&&(v=600,y=337.5);var E={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(y*100/v,"%")};Object.keys(E).forEach(function(b){e.root.style[b]=E[b]})}else["width","height"].forEach(function(b){e.config[b]&&(typeof e.config[b]!="number"?e.root.style[b]=e.config[b]:e.root.style[b]="".concat(e.config[b],"px"))});return!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=c.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(i){e.on(i,e["on"+i.charAt(0).toUpperCase()+i.slice(1)])}),In.forEach(function(i){document&&document.addEventListener(i,e.onFullscreenChange)}),G.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once($e,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(Ce,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),In.forEach(function(i){document.removeEventListener(i,e.onFullscreenChange)}),this.playFunc&&this.off(Ce,this.playFunc),this.off(Oe,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var i=this;if(this.media&&!((!e||e===""||c.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(yn),W.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this._detachSourceEvents(this.media),c.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src"),c.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var n=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!n.contains(this.media)&&n.insertBefore(this.media,n.firstChild);var a=this.media.readyState;W.logInfo("_startInit readyState",a),this.config.autoplay&&(!(/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src))&&this.load(),(G.os.isIpad||G.os.isPhone)&&this.mediaPlay()),a>=2?this.canPlayFunc():this.once(Oe,this.canPlayFunc),(!this.hasStart||this.state<K.ATTACHED)&&ie.afterInit(this),this.hasStart=!0,this.setState(K.ATTACHED),c.setTimeout(this,function(){i.emit(_t)},0)}}},{key:"_registerPlugins",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var n=this.config.ignores||[],a=this.config.plugins||[],l=this.config.i18n||[];i&&st.extend(l,this.__i18n);var u=n.join("||").toLowerCase().split("||"),f=this.plugins;a.forEach(function(h){try{var d=h.plugin?h.plugin.pluginName:h.pluginName;if(d&&u.indexOf(d.toLowerCase())>-1)return null;if(!i&&f[d.toLowerCase()])return;if(h.lazy&&h.loader){var g=ie.lazyRegister(e,h);h.forceBeforeInit&&(g.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(g),1)}).catch(function(v){W.logError("_registerPlugins:loadingPlugin",v),e._loadingPlugins.splice(e._loadingPlugins.indexOf(g),1)}),e._loadingPlugins.push(g));return}return e.registerPlugin(h)}catch(v){W.logError("_registerPlugins:",v)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(i){Os(e,i)})}},{key:"_getRootByPosition",value:function(e){var i=null;switch(e){case X.ROOT_RIGHT:this.rightBar||(this.rightBar=c.createPositionBar("xg-right-bar",this.root)),i=this.rightBar;break;case X.ROOT_LEFT:this.leftBar||(this.leftBar=c.createPositionBar("xg-left-bar",this.root)),i=this.leftBar;break;case X.ROOT_TOP:this.topBar||(this.topBar=c.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&c.addClass(this.topBar,T.TOP_BAR_AUTOHIDE)),i=this.topBar;break;default:i=this.innerContainer||this.root;break}return i}},{key:"registerPlugin",value:function(e,i){var n=ie.formatPluginInfo(e,i),a=n.PLUFGIN,l=n.options,u=this.config.plugins,f=ie.checkPluginIfExits(a.pluginName,u);!f&&u.push(a);var h=ie.getRootByConfig(a.pluginName,this.config);h.root&&(l.root=h.root),h.position&&(l.position=h.position);var d=l.position?l.position:l.config&&l.config.position||a.defaultConfig&&a.defaultConfig.position;return!l.root&&typeof d=="string"&&d.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(a,l,a.pluginName):(l.root||(l.root=this._getRootByPosition(d)),ie.register(this,a,l))}},{key:"deregister",value:function(e){typeof e=="string"?ie.unRegister(this,e):e instanceof Qe&&ie.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),i&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var i;if(typeof e=="string"?i=e:e instanceof Qe&&(i=e.pluginName),!!i)for(var n=this.config.plugins.length-1;n>-1;n--){var a=this.config.plugins[n];if(a.pluginName.toLowerCase()===i.toLowerCase()){this.config.plugins.splice(n,1);break}}}},{key:"plugins",get:function(){return ie.getPlugins(this)}},{key:"getPlugin",value:function(e){var i=ie.findPlugin(this,e);return i&&i.pluginName?i:null}},{key:"addClass",value:function(e){this.root&&(c.hasClass(this.root,e)||c.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&c.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return c.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,i){this.root&&this.root.setAttribute(e,i)}},{key:"removeAttribute",value:function(e,i){this.root&&this.root.removeAttribute(e,i)}},{key:"start",value:function(e){var i=this;if(!(this.state>K.ATTACHING))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(K.ATTACHING),this._registerPlugins(!1),ie.beforeInit(this).then(function(){if(i.config){e||(e=i.url||i.config.url);var n=i._startInit(e);return n}}).catch(function(n){throw n.fileName="player",n.lineNumber="236",W.logError("start:beforeInit:",n),n})}},{key:"switchURL",value:function(e,i){var n=this,a=e;c.typeOf(e)==="Object"&&(a=e.url);var l=this.currentTime,u=this.paused&&!this.isError;return this.src=a,new Promise(function(f,h){var d=function(y){n.off("timeupdate",g),n.off("canplay",g),h(y)},g=function(){n.currentTime=l,u&&n.pause(),n.off("error",d),f(!0)};if(n.once("error",d),!a){n.errorHandler("error",{code:6,message:"empty_src"});return}G.os.isAndroid?n.once("timeupdate",g):n.once("canplay",g),n.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<K.ATTACHED){this.removeClass(T.NO_START),this.addClass(T.ENTER),this.start(),this._useAutoplay=!0;return}this.state<K.RUNNING&&(this.removeClass(T.NO_START),!this.isCanplay&&this.addClass(T.ENTER));var i=M(D(r.prototype),"play",this).call(this);return i!==void 0&&i&&i.then?i.then(function(){e.removeClass(T.NOT_ALLOW_AUTOPLAY),e.addClass(T.PLAYING),e.state<K.RUNNING&&(W.logInfo(">>>>playPromise.then"),e.setState(K.RUNNING),e.emit(Ze))}).catch(function(n){if(W.logWarn(">>>>playPromise.catch",n.name),e.media&&e.media.error){e.onError(),e.removeClass(T.ENTER);return}n.name==="NotAllowedError"&&(e._errorTimer=c.setTimeout(e,function(){e._errorTimer=null,e.emit(si),e.addClass(T.NOT_ALLOW_AUTOPLAY),e.removeClass(T.ENTER),e.pause(),e.setState(K.NOTALLOW)},0))}):(W.logWarn("video.play not return promise"),this.state<K.RUNNING&&(this.setState(K.RUNNING),this.removeClass(T.NOT_ALLOW_AUTOPLAY),this.removeClass(T.NO_START),this.removeClass(T.ENTER),this.addClass(T.PLAYING),this.emit(Ze))),i}},{key:"mediaPause",value:function(){M(D(r.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){M(D(r.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(T.PAUSED),Re(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;Re(this,"pause",function(){M(D(r.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,i){var n=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var a=this.config,l=a.isSeekedPlay,u=a.seekedStatus,f=i||(l?"play":u);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(He,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(n.removeClass(T.ENTER),n.isSeeking=!1,f){case"play":n.play();break;case"pause":n.pause();break;default:n._isPauseBeforeSeek>1||n.paused?n.pause():n.play()}n._isPauseBeforeSeek=0,n._onceSeekCanplay=null},this.once(He,this._onceSeekCanplay),this.state<K.RUNNING?(this.removeClass(T.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,i=this.config,n=i.definition,a=i.url;!a&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map(function(l){l.definition===n.defaultDefinition&&(e.config.url=l.url,e.curDefinition=l)})}},{key:"changeDefinition",value:function(e,i){var n=this,a=this.config.definition;if(Array.isArray(a==null?void 0:a.list)&&a.list.forEach(function(u){(e==null?void 0:e.definition)===u.definition&&(n.curDefinition=u)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(li,{from:i,to:e}),!this.hasStart){this.config.url=e.url;return}var l=this.switchURL(e.url,q({seamless:a.seamless!==!1&&typeof MediaSource!="undefined"&&typeof MediaSource.isTypeSupported=="function"},e));l&&l.then?l.then(function(){n.emit(ui,{from:i,to:e})}):this.emit(ui,{from:i,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once($e,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,i=T.NOT_ALLOW_AUTOPLAY,n=T.PLAYING,a=T.NO_START,l=T.PAUSED,u=T.REPLAY,f=T.ENTER,h=T.ENDED,d=T.ERROR,g=T.LOADING,v=[i,n,a,l,u,f,h,d,g];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,v.forEach(function(y){e.removeClass(y)}),this.addClass(T.ENTER),this.emit(At)}},{key:"reset",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;this.resetState();var a=this.plugins;if(a&&(i.map(function(u){e.deregister(u)}),n)){var l=Hn();Object.keys(this.config).keys(function(u){e.config[u]!=="undefined"&&(u==="plugins"||u==="presets"||u==="el"||u==="id")&&(e.config[u]=l[u])})}}},{key:"destroy",value:function(){var e=this,i=this.innerContainer,n=this.root,a=this.media;if(!(!n||!a)){if(this.hasStart=!1,this._useAutoplay=!1,n.removeAttribute(Je),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),c.clearAllTimers(this),this.emit(oi),ie.destroy(this),Nn(this),M(D(r.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),i)for(var l=i.children,u=0;u<l.length;u++)i.removeChild(l[u]);!i&&a instanceof window.Node&&n.contains(a)&&n.removeChild(a),["topBar","leftBar","rightBar","innerContainer"].map(function(h){e[h]&&n.removeChild(e[h]),e[h]=null});var f=n.className.split(" ");f.length>0?n.className=f.filter(function(h){return h.indexOf("xgplayer")<0}).join(" "):n.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(h){e[h]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(T.ENDED),this.currentTime=0,this.isSeeking=!1,Re(this,"replay",function(){e.once(He,function(){var i=e.mediaPlay();i&&i.catch&&i.catch(function(n){console.log(n)})}),e.play(),e.emit(ai),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(T.ERROR),this.addClass(T.LOADING),Re(this,"retry",function(){var i=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=i),e.once(Oe,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,i,n,a){e&&(a||(a=T.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=c.filterStyleFromText(e)),c.addClass(e,n),i&&i!==e&&!this._orgPCss&&(this._orgPCss=c.filterStyleFromText(i),c.addClass(i,a),i.setAttribute(Je,this.playerId)))}},{key:"recoverFullStyle",value:function(e,i,n,a){a||(a=T.PARENT_FULLSCREEN),this._orgCss&&(c.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),c.removeClass(e,n),i&&i!==e&&this._orgPCss&&(c.setStyleFromCsstext(i,this._orgPCss),this._orgPCss="",c.removeClass(i,a),i.removeAttribute(Je))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,i=this.root,n=this.media;e||(e=i),this._fullScreenOffset={top:c.scrollTop(),left:c.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var a=c.getFullScreenEl();if(a===this._fullscreenEl){this.onFullscreenChange();return}try{for(var l=0;l<An.length;l++){var u=An[l];if(e[u]){var f=u==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[u]();return f&&f.then?f:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(h){return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!c.getFullScreenEl())){this.root;var i=this.media;this._fullActionFrom="exit";try{for(var n=0;n<Ln.length;n++){var a=Ln[n];if(document[a]){var l=document[a]();return l&&l.then?l:Promise.resolve()}}return i&&i.webkitSupportsFullscreen?(i.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(u){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var i=e?"".concat(T.INNER_FULLSCREEN," ").concat(T.CSS_FULLSCREEN):T.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,i);var n=this.config.fullscreen,a=n===void 0?{}:n,l=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();l&&(this.fullscreen=!0,this.emit(De,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(xt,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(T.INNER_FULLSCREEN," ").concat(T.CSS_FULLSCREEN):T.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var i=this.config.fullscreen,n=i===void 0?{}:i,a=n.useCssFullscreen===!0||typeof n.useCssFullscreen=="function"&&n.useCssFullscreen();a?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(De,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(xt,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var i=e?"".concat(T.INNER_FULLSCREEN," ").concat(T.ROTATE_FULLSCREEN):T.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,i,T.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(De,!0)}},{key:"exitRotateFullscreen",value:function(e){var i=this._fullscreenEl!==this.root?"".concat(T.INNER_FULLSCREEN," ").concat(T.ROTATE_FULLSCREEN):T.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,i,T.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(De,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(ni,q({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this.emit(mn,q({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=i.autoHide,a=n===void 0?!this.config.closePlayerBlur:n,l=i.delay,u=l===void 0?this.config.inactive:l;if(this.isActive=!0,this.removeClass(T.INACTIVE),this.userTimer&&(c.clearTimeout(this,this.userTimer),this.userTimer=null),!a){this.userTimer&&(c.clearTimeout(this,this.userTimer),this.userTimer=null);return}this.userTimer=c.setTimeout(this,function(){e.userTimer=null,e.blur()},u)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.ignorePaused,n=i===void 0?!1:i;if(this.isActive){var a=this.config.closePauseVideoFocus;this.isActive=!1,(n||a||!this.paused&&!this.ended)&&this.addClass(T.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(T.ENTER),this.removeClass(T.ERROR),this.removeClass(T.LOADING),this.isCanplay=!0,this.waitTimer&&c.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(T.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===K.ENDED&&this.setState(K.RUNNING),this.removeClass(T.PAUSED),this.ended&&this.removeClass(T.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(T.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(c.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(T.ENDED),this.setState(K.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(T.NOT_ALLOW_AUTOPLAY),this.removeClass(T.NO_START),this.removeClass(T.ENTER),this.removeClass(T.LOADING),this.addClass(T.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(T.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&c.clearTimeout(this,this.waitTimer),this.removeClass(T.LOADING),this.removeClass(T.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&c.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=c.setTimeout(this,function(){e.addClass(T.LOADING),c.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var i=T.NO_START,n=T.PAUSED,a=T.ENDED,l=T.ERROR,u=T.REPLAY,f=T.LOADING,h=[i,n,a,l,u,f];h.forEach(function(d){e.removeClass(d)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(T.LOADING))&&this.media.readyState>2&&(this.removeClass(T.LOADING),c.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<K.RUNNING&&this.duration&&(this.setState(K.RUNNING),this.emit(Ze)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){c.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,i,n){if(!(!this.media||!i||!e)){var a=c.typeOf(e)==="String"?e:e.type||"";n.props&&c.typeOf(n.props)!=="Array"&&(n.props=[n.props]),this.emit(It,q({eventType:a,action:i,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var i=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=i,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var i=this.media.buffered;if(!i||i.length===0||!this.duration)return!0;for(var n=e||this.media.currentTime||.2,a=i.length,l=0;l<a;l++)if(i.start(l)<=n&&i.end(l)>n)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,i=e.rotate,n=e.vy,a=e.vx,l=e.h,u=e.w,f=this.videoPos._pi;if(f||(f=this.media.videoWidth/this.media.videoHeight*100),!!f){this.videoPos.pi=f;var h={rotate:i},d=0,g=0,v=1,y=Math.abs(i/90),E=this.root,b=this.innerContainer,_=E.offsetWidth,S=b?b.offsetHeight:E.offsetHeight,P=S,L=_;if(y%2===0)v=l>0?100/l:u>0?100/u:1,h.scale=v,d=n>0?(100-l)/2-n:0,h.y=y===2?0-d:d,g=a>0?(100-u)/2-a:0,h.x=y===2?0-g:g,this.media.style.width="".concat(L,"px"),this.media.style.height="".concat(P,"px");else if(y%2===1){L=S,P=_;var U=S-_;g=-U/2/L*100,h.x=y===3?g+n/2:g-n/2,d=U/2/P*100,h.y=y===3?d+a/2:d-a/2,h.scale=v,this.media.style.width="".concat(L,"px"),this.media.style.height="".concat(P,"px")}var Z=c.getTransformStyle(h);this.media.style.transform=Z,this.media.style.webkitTransform=Z}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var i=this.videoPos;i.h=e.h*100||0,i.w=e.w*100||0,i.vx=e.x*100||0,i.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(n){if(n!=="plugins"){i.config[n]=e[n];var a=i.plugins[n.toLowerCase()];a&&c.typeOf(a.setConfig)==="Function"&&a.setConfig(e[n])}})}},{key:"playNext",value:function(e){var i=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,Re(this,"playnext",function(){i.start(),i.emit(Pt,e)})}},{key:"resize",value:function(){var e=this;if(this.media){var i=this.media,n=i.videoWidth,a=i.videoHeight,l=this.config,u=l.fitVideoSize,f=l.videoFillMode;if((f==="fill"||f==="cover")&&this.setAttribute("data-xgfill",f),!(!a||!n)){this._videoHeight=a,this._videoWidth=n;var h=this.root.getBoundingClientRect(),d=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,g=h.width,v=h.height-d,y=parseInt(n/a*1e3,10),E=parseInt(g/v*1e3,10),b=g,_=v,S={};u==="auto"&&E>y||u==="fixWidth"?(_=g/y*1e3,this.config.fluid?S.paddingTop="".concat(_*100/b,"%"):S.height="".concat(_+d,"px")):(u==="auto"&&E<y||u==="fixHeight")&&(b=y*v/1e3,S.width="".concat(b,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(S).forEach(function(L){e.root.style[L]=S[L]}),(f==="fillHeight"&&E<y||f==="fillWidth"&&E>y)&&this.setAttribute("data-xgfill","cover");var P={videoScale:y,vWidth:b,vHeight:_,cWidth:b,cHeight:_+d};this.resizePosition(),this.emit(Xe,P)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,i);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(i*100,"%")}},{key:"setState",value:function(e){W.logInfo("setState","state from:".concat(Un[this.state]," to:").concat(Un[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(K.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===K.RUNNING||this._state===K.ENDED},set:function(e){e?this.setState(K.RUNNING):this._state>=K.RUNNING&&this.setState(K.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var i=this,n=this.config.definition,a=null,l=null;n.list=e,this.emit("resourceReady",e),e.forEach(function(u){var f;((f=i.curDefinition)===null||f===void 0?void 0:f.definition)===u.definition&&(a=u),n.defaultDefinition===u.definition&&(l=u)}),!l&&e.length>0&&(l=e[0]),a?this.changeDefinition(a):l&&this.changeDefinition(l)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var i=this.media.getVideoPlaybackQuality();return e.dropped=i.droppedVideoFrames||0,e.total=i.totalVideoFrames||0,e.corrupted=i.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var i=st.langKeys.filter(function(n){return n===e});if(i.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(st.langKeys.join(),"] "));return}this.config.lang=e,ie.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return qt}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return M(D(r.prototype),"readyState",this)}},{key:"error",get:function(){var e=M(D(r.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return M(D(r.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=c.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return Gn},set:function(e){Gn=e}},{key:"realTimeSpeed",get:function(){return jn},set:function(e){jn=e}},{key:"hook",value:function(e,i){return Ot.call.apply(Ot,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,i){return Dt.call.apply(Dt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,i){return Rt.call.apply(Rt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,i,n){for(var a=arguments.length,l=new Array(a>3?a-3:0),u=3;u<a;u++)l[u-3]=arguments[u];return On.call.apply(On,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,i,n){for(var a=arguments.length,l=new Array(a>3?a-3:0),u=3;u<a;u++)l[u-3]=arguments[u];return Dn.call.apply(Dn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,i){typeof i=="boolean"&&i!==this.muted&&(this.addInnerOP("volumechange"),this.muted=i),ie.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return W.config.debug},set:function(e){W.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return ie.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,i){ie.setCurrentUserActive(e,i)}},{key:"isHevcSupported",value:function(){return G.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return G.probeConfigSupported(e)}},{key:"install",value:function(e,i){r.plugins||(r.plugins={}),r.plugins[e]||(r.plugins[e]=i)}},{key:"use",value:function(e,i){r.plugins||(r.plugins={}),r.plugins[e]=i}}]),r}(Es);k(vi,"defaultPreset",null),k(vi,"XgVideoProxy",null);function he(){return new Date().getTime()}var Be={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},Hs=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(W.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),k(m(t),"_onAutoplayStart",function(){W.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),k(m(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=he(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&c.clearTimeout(m(t),t._waitTimer),t._waittTimer&&c.clearTimeout(m(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),k(m(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=he(),t.emitLog(Be.SEEK_START,{start:he()}))}),k(m(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),k(m(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=he(),t.fixedWaitingStart=he(),t._waitType=1,t.emitLog(Be.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),k(m(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=he(),t._waitTimer=c.setTimeout(m(t),function(){t._isWaiting&&(t.waitingStart=he(),c.clearTimeout(m(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(Be.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),k(m(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),k(m(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return A(r,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=he(),this.loadedCostTime=0,this.startCostTime=0,this.on(ii,function(){var i=e._state,n=i.autoplayStart,a=i.isFFSend;e.startCostTime=he()-e.newPointTime,W.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(n," isFFSend:").concat(a," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!a&&(!i.isLs&&e.emitLog(Be.LOAD_START,{}),i.isLs=!0,i.isTimeUpdate=!1,i.isFFLoading=!0,e.pt=he(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on($e,function(){e.vt=he(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var i=e._state,n=i.isTimeUpdate,a=i.isFFSend,l=i.autoplayStart;W.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(n||l)&&e._sendFF("loadedData"),a||e.emitLog(Be.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(ti,this._onSeeking),this.on(He,this._onSeeked),this.on(oi,function(){e.endState("destroy")}),this.on(St,function(){e.endState("urlChange"),W.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([ei,Oe],this._onPlaying),this.on(gt,this._onWaiting),this.on(dt,this._onError),this.on(At,function(){W.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(Ze,this._onAutoplayStart),this.off(Se,this._onTimeupdate),this.once(Ze,this._onAutoplayStart),this.once(Se,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=he();var i=this._state,n=i.isFFLoading,a=i.isFFSend;W.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(n," !isFFSend:").concat(!a)),this.vt>0&&n&&!a&&(W.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(Be.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&c.clearTimeout(this,this._waittTimer),this._waittTimer=c.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),c.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var i=he(),n=i-this.seekingStart;this.seekingStart=0,this.emitLog(Be.SEEK_END,{end:i,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(c.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(c.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var i=he(),n=i-this.waitingStart,a=i-this.fixedWaitingStart,l=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(Be.WAIT_END,{fixedCostTime:a>l?l:a,costTime:n>l?l:n,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,i){var n=this.player;this.emit(bn,q({t:he(),host:c.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},i))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),r}($);function Bs(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Us=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"registerIcons",value:function(){return{replay:Bs}}},{key:"afterCreate",value:function(){var e=this;$.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(Ye,function(){if(e.playerConfig.loop||c.addClass(e.player.root,"replay"),!e.config.disable){e.show();var i=e.root.querySelector("path");if(i){var n=window.getComputedStyle(i).getPropertyValue("transform");if(typeof n=="string"&&n.indexOf("none")>-1)return null;i.setAttribute("transform",n)}}}),this.on(Ce,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),c.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),r}($),js=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){c.addClass(this.root,"hide")}},{key:"show",value:function(){c.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(Ye,function(){e.isEndedShow&&c.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(Se,function(){e.onTimeUpdate()}),this.on(St,function(){c.removeClass(e.root,"hide"),c.addClass(e.root,"xg-showplay"),e.once(Se,function(){e.onTimeUpdate()})})):this.on(Ce,function(){c.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?c.removeClass(this.root,"xg-showplay"):this.once(Se,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,i=e.poster,n=e.hideCanplay,a=i?"background-image:url(".concat(i,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(a,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),r}($);function pi(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function mi(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var Pe={};function Gs(s,o){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return Pe[s]&&window.clearTimeout(Pe[s].id),Pe[s]={},r.start&&r.start(),Pe[s].id=window.setTimeout(function(){r.end&&r.end(),window.clearTimeout(Pe[s].id),delete Pe[s]},o),Pe[s].id}function Vn(s){if(s){window.clearTimeout(s);return}Object.keys(Pe).map(function(o){window.clearTimeout(Pe[o].id),delete Pe[o]})}var Vs=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),k(m(e),"onPlayerReset",function(){e.autoPlayStart=!1;var i=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),c.removeClass(e.root,i),e.show()}),k(m(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var i=e.config.mode==="auto"?"auto-hide":"hide";c.addClass(e.root,i),e.autoPlayStart=!0,e.onPlayPause("play")}}),e.autoPlayStart=!1,e}return A(r,[{key:"afterCreate",value:function(){var e=this,i=this.player,n=this.playerConfig;this.initIcons(),this.once(ri,function(){n&&(n.lang&&n.lang==="en"?c.addClass(i.root,"lang-is-en"):n.lang==="jp"&&c.addClass(i.root,"lang-is-jp"))}),this.on(Ze,this.onAutoplayStart),n.autoplay||this.show(),this.on(si,function(){var a=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),c.removeClass(e.root,a),e.show()}),this.on(Ce,function(){e.onPlayPause("play")}),this.on(nt,function(){e.onPlayPause("pause")}),this.on(At,function(){e.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(l){l.cancelable&&l.preventDefault(),l.stopPropagation();var u=e.player.paused;e.emitUserAction(l,"switch_play_pause",{props:"paused",from:u,to:!u})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:pi,class:"xg-icon-play"},startPause:{icon:mi,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){c.addClass(this.root,"hide")}},{key:"show",value:function(){c.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){c.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){c.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var i=this;this._animateId=Gs("pauseplay",400,{start:function(){c.addClass(i.root,"interact"),i.show(),i.switchStatus(!0)},end:function(){c.removeClass(i.root,"interact"),!e&&i.hide(),i._animateId=null}})}},{key:"endAnimate",value:function(){c.removeClass(this.root,"interact"),Vn(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var i=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(i.state<K.READY)){var n=this.player.paused;!n&&i.state===K.RUNNING?i.pause():i.play()}}},{key:"onPlayPause",value:function(e){var i=this.config,n=this.player;if(!(!n||n.state<K.RUNNING||!this.autoPlayStart)){if(i.mode==="show"){this.switchStatus(),this.show();return}if(i.mode==="auto"){this.switchStatus();return}if(i.isShowPause&&n.paused&&!n.ended||i.isShowEnd&&n.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(i.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Vn(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),r}($),Ws=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"render",value:function(){var e=this.config.innerHtml,i=c.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)i.appendChild(e);else if(e&&typeof e=="string")i.innerHTML=e;else{for(var n="",a=1;a<=12;a++)n+='<div class="xgplayer-enter-bar'.concat(a,'"></div>');i.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return i}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),r}($);function Ue(s,o,r){try{return' <div class="xg-tips '.concat(r?"hide":" ",'" lang-key="').concat(s.i18nKeys[o],`">
    `).concat(s.i18n[o],`
    </div>`)}catch(t){return'<div class="xg-tips hide"></div>'}}var Wn=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:10}}}]),r}($);function zn(s){var o=parseFloat(s),r=s.indexOf("%")===-1&&!Number.isNaN(o);return r&&o}var yi=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Yn=yi.length;function zs(){for(var s={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},o=0;o<Yn;o++){var r=yi[o];s[r]=0}return s}function Ys(s){var o=window.getComputedStyle(s);return o}function Kn(s){if(typeof s=="string"&&(s=document.querySelector(s)),!(!s||fe(s)!=="object"||!s.nodeType)){var o=Ys(s);if(o.display==="none")return zs();var r={};r.width=s.offsetWidth,r.height=s.offsetHeight;for(var t=r.isBorderBox=o.boxSizing==="border-box",e=0;e<Yn;e++){var i=yi[e],n=o[i],a=parseFloat(n);r[i]=Number.isNaN(a)?0:a}var l=r.paddingLeft+r.paddingRight,u=r.paddingTop+r.paddingBottom,f=r.marginLeft+r.marginRight,h=r.marginTop+r.marginBottom,d=r.borderLeftWidth+r.borderRightWidth,g=r.borderTopWidth+r.borderBottomWidth,v=t,y=zn(o.width);y!==!1&&(r.width=y+(v?0:l+d));var E=zn(o.height);return E!==!1&&(r.height=E+(v?0:u+g)),r.innerWidth=r.width-(l+d),r.innerHeight=r.height-(u+g),r.outerWidth=r.width+f,r.outerHeight=r.height+h,r}}function Ci(s,o){for(var r=0;r<s.length;r++){var t=s[r];if(t.identifier===o)return t}}var ki={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},$n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Ks=function(s){R(r,s);var o=N(r);function r(t){var e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return I(this,r),e=o.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=i.handle instanceof Element?i.handle:document.querySelector(i.handle),!e._root||!e._handlerDom?Zt(e):(e._bindStartEvent(),e)}return A(r,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),$n[this._startKey].map(function(i){e["on".concat(i)]=e["on".concat(i)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var i=this;if(e){var n=$n[this._startKey];n.map(function(a){window.addEventListener(a,i["on".concat(a)])}),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(i){window.removeEventListener(i,e["on".concat(i)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var i=e.changedTouches[0];this.dragStart(e,i),this.touchIdentifier=i.pointerId!==void 0?i.pointerId:i.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var i=Ci(e.changedTouches,this.touchIdentifier);i&&this.dragMove(e,i)}},{key:"ontouchend",value:function(e){var i=Ci(e.changedTouches,this.touchIdentifier);i&&this.dragEnd(e,i),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var i=Ci(e.changedTouches,this.touchIdentifier);i&&this.dragCancel(e,i)}},{key:"dragStart",value:function(e,i){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=i,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=Kn(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,i){this.isDragging=!0,this.animate(),this.emit(ki.START,this.startPos)}},{key:"dragEnd",value:function(e,i){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(ki.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,i){var n={x:i.pageX-this.downPoint.pageX,y:i.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,i),n}},{key:"dragMove",value:function(e,i){if(e=e||window.event,!!this.isDown){var n=this.startPos,a=n.x,l=n.y,u=this._dragPointerMove(e,i),f=u.x,h=u.y;f=this.checkContain("x",f,a),h=this.checkContain("y",h,l),this.position.x=a+f,this.position.y=l+h,this.dragPoint.x=f,this.dragPoint.y=h,this.emit(ki.MOVE,this.position)}}},{key:"dragCancel",value:function(e,i){this.dragEnd(e,i)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,i,n){return i+n<0?0-n:e==="x"&&i+n>this.startPos.maxX?this.startPos.maxX-n:e==="y"&&i+n>this.startPos.maxY?this.startPos.maxY-n:i}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),i=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(i)?0:i,this.position.y=Number.isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var i=e.transform;if(i.indexOf("matrix")===0){var n=i.split(","),a=i.indexOf("matrix3d")===0?12:4,l=parseInt(n[a],10),u=parseInt(n[a+1],10);this.position.x+=l,this.position.y+=u}}},{key:"_getPositionCoord",value:function(e,i){if(e.indexOf("%")!==-1){var n=Kn(this._root.parentNode);return n?parseFloat(e)/100*n[i]:0}return parseInt(e,10)}}]),r}(un()),$s=function(s){R(r,s);var o=N(r);function r(t){var e;I(this,r),e=o.call(this,t),k(m(e),"onCancelClick",function(a){e.exitMini(),e.isClose=!0}),k(m(e),"onCenterClick",function(a){var l=m(e),u=l.player;u.paused?u.play():u.pause()}),k(m(e),"onScroll",function(a){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var l=parseInt(c.getCss(e.player.root,"height"));l+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>l+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=l&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var i=m(e),n=i.config;return e.pos={left:n.left<0?window.innerWidth-n.width-20:n.left,top:n.top<0?window.innerHeight-n.height-20:n.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return A(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(nt,function(){e.setAttr("data-state","pause")}),this.on(Ce,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,i=this.player,n=this.config;if(!n.disable){if(this.config.isShowIcon){var a={config:{onClick:function(){e.getMini()}}};i.controls.registerPlugin(Wn,a,Wn.pluginName)}var l=c.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",l,this.onCancelClick),this.bind(".play-icon",l,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Ks(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:pi,class:"xg-icon-play"},pause:{icon:mi,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var i=this.player,n=this.playerConfig,a=this.config.target||this.player.root;this.lastStyle={},c.addClass(i.root,"xgplayer-mini"),["width","height","top","left"].map(function(l){e.lastStyle[l]=a.style[l],a.style[l]="".concat(e.pos[l],"px")}),n.fluid&&(a.style["padding-top"]=""),this.emit(wt,!0),i.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var i=this.player,n=this.playerConfig,a=this.config.target||this.player.root;c.removeClass(i.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(l){a.style[l]=e.lastStyle[l]}),this.lastStyle=null,n.fluid&&(i.root.style.width="100%",i.root.style.height="0",i.root.style["padding-top"]="".concat(n.height*100/n.width,"%")),this.emit(wt,!1),this.isMini=i.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=c.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(Ue(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),r}($),Nt={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},Ei=["videoClick","videoDbClick"],Ti=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"onMouseMove",function(a){var l=m(t),u=l.player,f=l.playerConfig;u.isActive||(u.focus({autoHide:!f.closeDelayBlur}),!f.closeFocusVideoFocus&&u.media.focus())}),k(m(t),"onMouseEnter",function(a){var l=m(t),u=l.playerConfig,f=l.player;!u.closeFocusVideoFocus&&f.media.focus(),u.closeDelayBlur?f.focus({autoHide:!1}):f.focus()}),k(m(t),"onMouseLeave",function(a){var l=t.playerConfig,u=l.closePlayerBlur,f=l.leavePlayerTime,h=l.closeDelayBlur;!u&&!h&&(f?t.player.focus({autoHide:!0,delay:f}):t.player.blur())}),k(m(t),"onVideoClick",function(a){var l=m(t),u=l.player,f=l.playerConfig;a.target&&f.closeVideoClick||(a.target===u.root||a.target===u.media||a.target===u.innerContainer||a.target===u.media.__canvas)&&(a.preventDefault(),f.closeVideoStopPropagation||a.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,Re(m(t),Ei[0],function(h,d){t.switchPlayPause(d.e)},{e:a,paused:u.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),k(m(t),"onVideoDblClick",function(a){var l=m(t),u=l.player,f=l.playerConfig;if(!(f.closeVideoDblclick||!a.target||a.target!==u.media&&a.target!==u.media.__canvas)){if(!f.closeVideoClick&&t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),a.preventDefault(),a.stopPropagation(),Re(m(t),Ei[1],function(h,d){t.emitUserAction(d.e,"switch_fullscreen",{props:"fullscreen",from:u.fullscreen,to:!u.fullscreen}),u.fullscreen?u.exitFullscreen():u.getFullscreen()},{e:a,fullscreen:u.fullscreen})}}),t}return A(r,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,Ei.map(function(n){e.__hooks[n]=null});var i=this.playerConfig.isMobileSimulateMode;i==="mobile"||G.device==="mobile"&&!G.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,i=this.player,n=i.video,a=i.root,l=this.playerConfig.enableContextmenu;a&&a.addEventListener("click",this.onVideoClick,!1),a&&a.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(Nt).map(function(u){a.addEventListener(u,e[Nt[u]],!1)}),l&&n&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var i=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:i.paused,to:!i.paused}),i.ended?i.duration!==1/0&&i.duration>0&&i.replay():i.paused?i.play():i.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,i=this.player,n=i.video,a=i.root;this.clickTimer&&clearTimeout(this.clickTimer),a.removeEventListener("click",this.onVideoClick,!1),a.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(Nt).map(function(l){a.removeEventListener(l,e[Nt[l]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),r}(Qe),je={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},Zs={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Xs={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Zn(s){return s&&s.length>0?s[s.length-1]:null}function Js(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var Qs=function(){function s(o){var r=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};I(this,s),this._pos={moving:!1,start:!1,x:0,y:0},this.config=Js(),Object.keys(t).map(function(e){r.config[e]=t[e]}),this.root=o,this.events=t.eventType==="mouse"?Xs:Zs,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return A(s,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(r){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(je.PRESS,r),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(r){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(je.DOUBlE_CLICK,r);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(je.CLICK,r)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(r,t){this.__handlers[r]||(this.__handlers[r]=[]),this.__handlers[r].push(t)}},{key:"off",value:function(r,t){if(this.__handlers[r]){for(var e=this.__handlers[r],i=-1,n=0;n<e.length;n++)if(e[n]===t){i=n;break}i>=0&&this.__handlers[r].splice(i,1)}}},{key:"trigger",value:function(r,t){this.__handlers[r]&&this.__handlers[r].map(function(e){try{e(t)}catch(i){console.error("trigger>>:".concat(r),i)}})}},{key:"onTouchStart",value:function(r){var t=this._pos,e=this.root,i=Zn(r.touches);t.x=i?parseInt(i.pageX,10):r.pageX,t.y=i?parseInt(i.pageX,10):r.pageX,t.start=!0,this.__setPress(r),e.addEventListener(this.events.end,this.onTouchEnd),e.addEventListener(this.events.cancel,this.onTouchCancel),e.addEventListener(this.events.move,this.onTouchMove),this.trigger(je.TOUCH_START,r)}},{key:"onTouchCancel",value:function(r){this.onTouchEnd(r)}},{key:"onTouchEnd",value:function(r){var t=this._pos,e=this.root;this.__clearPress(),e.removeEventListener(this.events.cancel,this.onTouchCancel),e.removeEventListener(this.events.end,this.onTouchEnd),e.removeEventListener(this.events.move,this.onTouchMove),r.moving=t.moving,r.press=t.press,t.press&&this.trigger(je.PRESS_END,r),this.trigger(je.TOUCH_END,r),!t.press&&!t.moving&&this.__setDb(r),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(r){var t=this._pos,e=this.config,i=Zn(r.touches),n=i?parseInt(i.pageX,10):r.pageX,a=i?parseInt(i.pageY,10):r.pageX,l=n-t.x,u=a-t.y;Math.abs(u)<e.miniStep&&Math.abs(l)<e.miniStep||(this.__clearPress(),t.press&&this.trigger(je.PRESS_END,r),t.press=!1,t.moving=!0,this.trigger(je.TOUCH_MOVE,r))}},{key:"destroy",value:function(){var r=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map(function(e){r.root.removeEventListener("touchend",r[t[e]])})}}]),s}();function qs(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var at={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},bi=["videoClick","videoDbClick"],ea=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),k(m(e),"onTouchStart",function(i){var n=m(e),a=n.player,l=n.config,u=n.pos,f=n.playerConfig,h=e.getTouche(i);if(h&&!l.disableGesture&&e.duration>0&&!a.ended){u.isStart=!0,c.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),e.find(".xg-dur").innerHTML=c.format(e.duration);var d=e.root.getBoundingClientRect();a.rotateDeg===90?(u.top=d.left,u.left=d.top,u.width=d.height,u.height=d.width):(u.top=d.top,u.left=d.left,u.width=d.width,u.height=d.height);var g=parseInt(h.pageX-u.left,10),v=parseInt(h.pageY-u.top,10);u.x=a.rotateDeg===90?v:g,u.y=a.rotateDeg===90?g:v,u.scopeL=l.scopeL*u.width,u.scopeR=(1-l.scopeR)*u.width,u.scopeM1=u.width*(1-l.scopeM)/2,u.scopeM2=u.width-u.scopeM1}}),k(m(e),"onTouchMove",function(i){var n=e.getTouche(i),a=m(e),l=a.pos,u=a.config,f=a.player;if(!(!n||u.disableGesture||!e.duration||!l.isStart)){var h=u.miniMoveStep,d=u.hideControlsActive,g=parseInt(n.pageX-l.left,10),v=parseInt(n.pageY-l.top,10),y=f.rotateDeg===90?v:g,E=f.rotateDeg===90?g:v;if(Math.abs(y-l.x)>h||Math.abs(E-l.y)>h){var b=y-l.x,_=E-l.y,S=l.scope;if(S===-1&&(S=e.checkScope(y,E,b,_,l),S===0&&(d?f.blur():f.focus({autoHide:!1}),!l.time&&(l.time=parseInt(f.currentTime*1e3,10)+e.timeOffset*1e3)),l.scope=S),S===-1||S>0&&!u.gestureY||S===0&&!u.gestureX)return;i.cancelable&&i.preventDefault(),e.executeMove(b,_,S,l.width,l.height),l.x=y,l.y=E}}}),k(m(e),"onTouchEnd",function(i){var n=m(e),a=n.player,l=n.pos,u=n.playerConfig;if(l.isStart){l.scope>-1&&i.cancelable&&i.preventDefault();var f=e.config,h=f.disableGesture,d=f.gestureX;!h&&d?(e.endLastMove(l.scope),setTimeout(function(){a.getPlugin("progress")&&a.getPlugin("progress").resetSeekState()},10)):l.time=0,l.scope=-1,e.resetPos(),c.checkIsFunction(u.enableSwipeHandler)&&u.enableSwipeHandler(),e.changeAction(at.AUTO)}}),k(m(e),"onRootTouchMove",function(i){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(i)&&(i.stopPropagation(),e.pos.isStart?e.onTouchMove(i):e.onTouchStart(i))}),k(m(e),"onRootTouchEnd",function(i){e.pos.isStart&&e.checkIsRootTarget(i)&&(i.stopPropagation(),e.onTouchEnd(i))}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return A(r,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:qs,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;bi.map(function(h){e.__hooks[h]=null});var i=this.playerConfig,n=this.config,a=this.player;i.closeVideoDblclick===!0&&(n.closedbClick=!0),this.resetPos(),c.isUndefined(i.disableGesture)||(n.disableGesture=!!i.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=c.createDom("xg-mask","",{},"xgmask"),a.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var l=this.domEventType==="mouse"?"mouse":"touch";this.touch=new Qs(this.root,{eventType:l,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(h){h.preventDefault()}),a.root.addEventListener("touchmove",this.onRootTouchMove,!0),a.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(Ke,function(){var h=e.player,d=e.config;h.duration*1e3<d.moveDuration&&(d.moveDuration=h.duration*1e3)}),this.on([Oe,Ye],function(){var h=e.pos,d=h.time,g=h.isStart;!g&&d>0&&(e.pos.time=0)});var u={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(u).map(function(h){e.touch.on(h,function(d){e[u[h]](d)})}),!n.disableActive){var f=a.plugins.progress;f&&(f.addCallBack("dragmove",function(h){e.activeSeekNote(h.currentTime,h.forward)}),f.addCallBack("dragend",function(){e.changeAction(at.AUTO)}))}}},{key:"registerThumbnail",value:function(){var e=this.player,i=e.plugins.thumbnail;if(i&&i.usable){this.thumbnail=i.createThumbnail(null,"mobile-thumbnail");var n=this.find(".time-preview");n.insertBefore(this.thumbnail,n.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,n=i.playedColor,a=i.progressColor;n&&(this.find(".xg-curbar").style.backgroundColor=n,this.find(".xg-cur").style.color=n),a&&(this.find(".xg-bar").style.backgroundColor=a,this.find(".time-preview").style.color=a),this.config.disableTimeProgress&&c.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(i){e.pos[i]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var i=this.player,n=this.root;n.setAttribute("data-xg-action",e);var a=i.plugins.start;a&&a.recover()}},{key:"getTouche",value:function(e){var i=this.player.rotateDeg,n=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return i===0?{pageX:n.pageX,pageY:n.pageY}:{pageX:n.pageX,pageY:n.pageY}}},{key:"checkScope",value:function(e,i,n,a,l){var u=l.width,f=-1;if(e<0||e>u)return f;var h=Math.abs(a===0?n:n/a);return Math.abs(n)>0&&h>=1.73&&e>l.scopeM1&&e<l.scopeM2?f=0:(Math.abs(n)===0||h<=.57)&&(f=e<l.scopeL?1:e>l.scopeR?2:3),f}},{key:"executeMove",value:function(e,i,n,a,l){switch(n){case 0:this.updateTime(e/a*this.config.scopeM);break;case 1:this.updateBrightness(i/l);break;case 2:G.os.isIos||this.updateVolume(i/l);break}}},{key:"endLastMove",value:function(e){var i=this,n=this.pos,a=this.player,l=this.config,u=(n.time-this.timeOffset)/1e3;switch(e){case 0:a.seek(Number(u).toFixed(1)),l.hideControlsEnd?a.blur():a.focus(),this.timer=setTimeout(function(){i.pos.time=0},500);break}this.changeAction(at.AUTO)}},{key:"checkIsRootTarget",value:function(e){var i=this.player.plugins||{};return i.progress&&i.progress.root.contains(e.target)?!1:i.start&&i.start.root.contains(e.target)||i.controls&&i.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var i=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i,to:!i})}},{key:"clickHandler",value:function(e){var i=this.player,n=this.config,a=this.playerConfig;if(i.state<K.RUNNING){a.closeVideoClick||(this.sendUseAction(c.createEvent("click")),i.play());return}!n.closedbClick||a.closeVideoClick?i.isActive?i.blur():i.focus():a.closeVideoClick||((i.isActive||n.focusVideoClick)&&(this.sendUseAction(c.createEvent("click")),this.switchPlayPause()),i.focus())}},{key:"dbClickHandler",value:function(e){var i=this.config,n=this.player;!i.closedbClick&&n.state>=K.RUNNING&&(this.sendUseAction(c.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var i=this,n=this.player;Re(this,bi[0],function(a,l){i.clickHandler(l.e)},{e,paused:n.paused})}},{key:"onDbClick",value:function(e){var i=this,n=this.player;Re(this,bi[1],function(a,l){i.dbClickHandler(l.e)},{e,paused:n.paused})}},{key:"onPress",value:function(e){var i=this.pos,n=this.config,a=this.player;n.disablePress||(i.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:a.playbackRate,to:n.pressRate}),a.playbackRate=n.pressRate,this.changeAction(at.PLAYBACK))}},{key:"onPressEnd",value:function(e){var i=this.pos,n=this.config,a=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:a.playbackRate,to:i.rate}),a.playbackRate=i.rate,i.rate=1,this.changeAction(at.AUTO))}},{key:"updateTime",value:function(e){var i=this.player,n=this.config,a=this.player.duration;e=Number(e.toFixed(4));var l=parseInt(e*n.moveDuration,10)+this.timeOffset;l+=this.pos.time,l=l<0?0:l>a*1e3?a*1e3-200:l,i.getPlugin("time")&&i.getPlugin("time").updateTime(l/1e3),i.getPlugin("progress")&&i.getPlugin("progress").updatePercent(l/1e3/this.duration,!0),this.activeSeekNote(l/1e3,e>0),n.isTouchingSeek&&i.seek(Number((l-this.timeOffset)/1e3).toFixed(1)),this.pos.time=l}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.player,n=this.pos;if(e=parseInt(e*100,10),n.volume+=e,!(Math.abs(n.volume)<10)){var a=parseInt(i.volume*10,10)-parseInt(n.volume/10,10);a=a>10?10:a<1?0:a,i.volume=a/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.pos,n=this.config,a=this.xgMask,l=i.light+.8*e;l=l>n.maxDarkness?n.maxDarkness:l<0?0:l,a&&(a.style.backgroundColor="rgba(0,0,0,".concat(l,")")),i.light=l}},{key:"activeSeekNote",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this.player,a=this.config,l=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||l||a.disableActive)){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(at.SEEKING);var u=n.plugins.start;u&&u.focusHide(),this.find(".xg-dur").innerHTML=c.format(this.duration),this.find(".xg-cur").innerHTML=c.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),i?c.removeClass(this.find(".xg-seek-show"),"xg-back"):c.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var i=this.player,n=i.plugins.thumbnail;n&&n.usable&&this.thumbnail&&n.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<K.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),r}($);function Xn(s){s.preventDefault(),s.returnValue=!1}function ta(s){var o=s.tagName;return!!(o==="INPUT"||o==="TEXTAREA"||s.isContentEditable)}var Jn=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"onBodyKeyDown",function(a){var l=a||window.event;if(!(!t.player||!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(t.config.disable||t.config.disableBodyTrigger||!t.checkIsVisible()||l.metaKey||l.altKey||l.ctrlKey)){var u=l.keyCode;return(l.target===document.body||t.config.isGlobalTrigger&&!ta(l.target))&&t.checkCode(u,!0)&&(Xn(l),t.handleKeyCode(u,a)),!1}}),k(m(t),"onKeydown",function(a){var l=a||window.event;if(!(t.config.disable||t.config.disableRootTrigger||l.metaKey||l.altKey||l.ctrlKey)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)){if(l&&(l.keyCode===37||t.checkCode(l.keyCode))&&(l.target===t.player.root||l.target===t.player.video||l.target===t.player.controls.el))Xn(l);else return!0;t.handleKeyCode(l.keyCode,a)}}),t}return A(r,[{key:"mergekeyCodeMap",value:function(){var e=this,i=this.config.keyCodeMap;i&&Object.keys(i).map(function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map(function(a){i[n][a]&&(e.keyCodeMap[n][a]=i[n][a])}):e.keyCodeMap[n]=i[n]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),i=e.height,n=e.top,a=e.bottom,l=window.innerHeight;return!(n<0&&n<0-i*.9||a>0&&a-l>i*.9)}},{key:"checkCode",value:function(e,i){var n=this,a=!1;return Object.keys(this.keyCodeMap).map(function(l){n.keyCodeMap[l]&&e===n.keyCodeMap[l].keyCode&&!n.keyCodeMap[l].disable&&(a=!i||i&&!n.keyCodeMap[l].noBodyTarget)}),a}},{key:"downVolume",value:function(e){var i=this.player,n=parseFloat((i.volume-.1).toFixed(1)),a={volume:{from:i.volume,to:n}};this.emitUserAction(e,"change_volume",{props:a}),n>=0?i.volume=n:i.volume=0}},{key:"upVolume",value:function(e){var i=this.player,n=parseFloat((i.volume+.1).toFixed(1)),a={volume:{from:i.volume,to:n}};this.emitUserAction(e,"change_volume",{props:a}),n<=1?i.volume=n:i.volume=1}},{key:"seek",value:function(e){var i=this.player,n=i.currentTime,a=i.duration,l=n;n+this.seekStep<=a?l=n+this.seekStep:l=a;var u={currentTime:{from:n,to:l}};this.emitUserAction(e,"seek",{props:u}),this.player.currentTime=l}},{key:"seekBack",value:function(e){var i=this.player.currentTime,n=0;i-this.seekStep>=0&&(n=i-this.seekStep);var a={currentTime:{from:i,to:n}};this.emitUserAction(e,"seek",{props:a}),this.player.currentTime=n}},{key:"playPause",value:function(e){var i=this.player;i&&(this.emitUserAction(e,"switch_play_pause"),i.paused?i.play():i.pause())}},{key:"exitFullscreen",value:function(e){var i=this.player,n=i.fullscreen,a=i.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),i.exitFullscreen()),a&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:a,to:!a}),i.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,i){var n=this;Object.keys(this.keyCodeMap).map(function(a){var l=n.keyCodeMap[a],u=l.action,f=l.keyCode,h=l.disable;f===e&&!h&&(typeof u=="function"?u(i,n.player):typeof u=="string"&&typeof n[u]=="function"&&n[u](i,n.player),n.emit(Tn,q({key:a,target:i.target},n.keyCodeMap[a])))})}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),r}(Qe);function ia(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var na=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"registerIcons",value:function(){return{loadingIcon:ia}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:X.ROOT}}}]),r}($),ra=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],sa=function(){function s(o){I(this,s),this.fragments=o.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=o.actionCallback,this.fragConfig={fragFocusClass:o.fragFocusClass||"inner-focus-point",fragAutoFocus:!!o.fragAutoFocus,fragClass:o.fragClass||""},this.style=o.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return A(s,[{key:"updateDuration",value:function(r){var t=this;this.duration=r;var e=0,i=this.fragments;this.fragments=i.map(function(n){return n.start=parseInt(e,10),n.end=parseInt(e+n.percent*t.duration,10),n.duration=parseInt(n.percent*t.duration,10),e+=n.percent*t.duration,n})}},{key:"updateProgress",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,i=this.fragments;if(!(e.length<1)){var n=t.newIndex,a=t.curIndex,l=t.millisecond;n!==a&&e.map(function(h,d){d<n?h[r].style.width="100%":d>n&&(h[r].style.width=0)});var u=i[n],f=l===0?0:(l-u.start)/u.duration;e[n][r].style.width=f<0?0:"".concat(f*100,"%")}}},{key:"updateFocus",value:function(r){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!r){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(r.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var i={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(i)}}}},{key:"update",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,i=this.cachedIndex;if(c.typeOf(r.played)!=="Undefined"){var n=this.findIndex(r.played*1e3,e);if(n<0)return;this.updateProgress("played",{newIndex:n,curIndex:e,millisecond:parseInt(r.played*1e3,10)}),this.playedIndex=n}if(c.typeOf(r.cached)!=="Undefined"){var a=this.findIndex(r.cached*1e3,i);if(a<0)return;this.updateProgress("cached",{newIndex:a,curIndex:i,millisecond:parseInt(r.cached*1e3,10)}),this.cachedIndex=a}}},{key:"findIndex",value:function(r,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&r>e[t].start&&r<e[t].end)return t;if(r>e[e.length-1].start)return e.length-1;for(var i=0;i<e.length;i++)if(r>e[i].start&&r<=e[i].end){t=i;break}return t}},{key:"findHightLight",value:function(){for(var r=this.root.children,t=0;t<r.length;t++)if(c.hasClass(r[t],this.fragConfig.fragFocusClass))return{dom:r[t],pos:r[t].getBoundingClientRect()}}},{key:"findFragment",value:function(r){var t=this.root.children;return r<0||r>=t.length?null:{dom:t[r],pos:t[r].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var r=this.root.children,t=0;t<r.length;t++)c.removeClass(r[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(r){var t=this.root.children;if(r<t.length)return c.addClass(t[r],this.fragConfig.fragFocusClass),{dom:t[r],pos:t[r].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(r){var t=this;if(Object.keys(this.fragConfig).forEach(function(i){r[i]!==void 0&&(t.fragConfig[i]=r[i])}),r.fragments){if(this.fragments=r.fragments.length===0?[{percent:1}]:r.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var r=this,t=this.style.progressColor;if(this.root||(this.root=c.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,i=e.fragClass,n=e.fragFocusClass;this.progressList=this.fragments.map(function(a){var l=c.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(a.percent):"flex: ".concat(a.percent)},"".concat(a.isFocus?n:""," xgplayer-progress-inner ").concat(i));return r.root.appendChild(l),ra.forEach(function(u){l.appendChild(c.createDom(u.tag,"",{style:u.styleKey?"background: ".concat(r.style[u.styleKey],"; width:0;"):"width:0;"},u.className))}),{cached:l.children[0],played:l.children[1]}})}return this.root}}]),s}(),Qn={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},aa=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),k(m(e),"onMoveOnly",function(i,n){var a=m(e),l=a.pos,u=a.config,f=a.player,h=n;if(i){c.event(i);var d=c.getEventPos(i,f.zoom),g=f.rotateDeg===90?d.clientY:d.clientX;if(l.moving&&Math.abs(l.x-g)<u.miniMoveStep)return;l.moving=!0,l.x=g,h=e.computeTime(i,g)}e.triggerCallbacks("dragmove",h,i),e._updateInnerFocus(h)}),k(m(e),"onBodyClick",function(i){e.pos.isLocked&&(e.pos.isLocked=!1,i.preventDefault(),i.stopPropagation())}),k(m(e),"_mouseDownHandler",function(i,n){e._state.time=n.currentTime,e.updateWidth(n.currentTime,n.percent,0),e._updateInnerFocus(n)}),k(m(e),"_mouseUpHandler",function(i,n){var a=m(e),l=a.pos;l.moving&&e.updateWidth(n.currentTime,n.percent,2)}),k(m(e),"_mouseMoveHandler",function(i,n){var a=m(e),l=a._state,u=a.pos,f=a.config,h=a.player;l.time<n.currentTime?n.forward=!0:n.forward=!1,l.time=n.currentTime,u.isDown&&!u.moving&&(u.moving=!0,f.isPauseMoving&&h.pause(),e.triggerCallbacks("dragstart",n,i),e.emitUserAction("drag","dragstart",n)),e.updateWidth(n.currentTime,n.percent,1),e.triggerCallbacks("dragmove",n,i),e._updateInnerFocus(n)}),k(m(e),"onMouseDown",function(i){var n=m(e),a=n._state,l=n.player,u=n.pos,f=n.config,h=n.playerConfig,d=c.getEventPos(i,l.zoom),g=l.rotateDeg===90?d.clientY:d.clientX;if(!(l.isMini||f.closeMoveSeek||!h.allowSeekAfterEnded&&l.ended)){if(!l.duration&&!l.isPlaying){l.play();return}i.stopPropagation(),e.focus(),c.checkIsFunction(h.disableSwipeHandler)&&h.disableSwipeHandler(),c.checkIsFunction(f.onMoveStart)&&f.onMoveStart(),c.event(i),u.x=g,u.isDown=!0,u.moving=!1,a.prePlayTime=l.currentTime,l.focus({autoHide:!1}),e.isProgressMoving=!0,c.addClass(e.progressBtn,"active");var v=e.computeTime(i,g);v.prePlayTime=a.prePlayTime,e._mouseDownHandlerHook(i,v);var y=i.type;return y==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),k(m(e),"onMouseUp",function(i){var n=m(e),a=n.player,l=n.config,u=n.pos,f=n.playerConfig,h=n._state;i.stopPropagation(),i.preventDefault(),c.checkIsFunction(f.enableSwipeHandler)&&f.enableSwipeHandler(),c.checkIsFunction(l.onMoveEnd)&&l.onMoveEnd(),c.event(i),c.removeClass(e.progressBtn,"active");var d=e.computeTime(i,u.x);d.prePlayTime=h.prePlayTime,u.moving?(e.triggerCallbacks("dragend",d,i),e.emitUserAction("drag","dragend",d)):(e.triggerCallbacks("click",d,i),e.emitUserAction("click","click",d)),e._mouseUpHandlerHook(i,d),u.moving=!1,u.isDown=!1,u.x=0,u.y=0,u.isLocked=!0,h.prePlayTime=0,h.time=0;var g=i.type;g==="touchend"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),u.isEnter?f.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(i)),c.setTimeout(m(e),function(){e.resetSeekState()},10),a.focus()}),k(m(e),"onMouseMove",function(i){var n=m(e),a=n._state,l=n.pos,u=n.player,f=n.config;c.checkTouchSupport()&&i.preventDefault(),c.event(i);var h=c.getEventPos(i,u.zoom),d=u.rotateDeg===90?h.clientY:h.clientX,g=Math.abs(l.x-d);if(!(l.moving&&g<f.miniMoveStep||!l.moving&&g<f.miniStartStep)){l.x=d;var v=e.computeTime(i,d);v.prePlayTime=a.prePlayTime,e._mouseMoveHandlerHook(i,v)}}),k(m(e),"onMouseOut",function(i){e.triggerCallbacks("mouseout",null,i)}),k(m(e),"onMouseOver",function(i){e.triggerCallbacks("mouseover",null,i)}),k(m(e),"onMouseEnter",function(i){var n=m(e),a=n.player,l=n.pos;if(!(l.isDown||l.isEnter||a.isMini||!a.config.allowSeekAfterEnded&&a.ended)){l.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),c.event(i);var u=c.getEventPos(i,a.zoom),f=a.rotateDeg===90?u.clientY:u.clientX,h=e.computeTime(i,f);e.triggerCallbacks("mouseenter",h,i),e.focus()}}),k(m(e),"onMouseLeave",function(i){e.triggerCallbacks("mouseleave",null,i),e.unlock(),e._updateInnerFocus(null)}),k(m(e),"onVideoResize",function(){var i=e.pos,n=i.x,a=i.isDown,l=i.isEnter;if(l&&!a){var u=e.computeTime(null,n);e.onMoveOnly(null,u)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return A(r,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!i||i.length===0)&&(i=[{percent:1}]);var a=q(q({fragments:i},n),{},{actionCallback:function(u){e.emitUserAction("fragment_focus","fragment_focus",u)}});this.innerList?this.innerList.reset(a):(this.innerList=new sa(a),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(l){e[l]=e.innerList[l].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var i=this.config,n=i.fragFocusClass,a=i.fragAutoFocus,l=i.fragClass;this._initInner(this.config.fragments,{fragFocusClass:n,fragAutoFocus:a,fragClass:l,style:this.playerConfig.commonStyle||{}}),G.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(Ke,function(){e.onMouseLeave()}),this.on(Se,function(){e.onTimeupdate()}),this.on(He,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(pn,function(){e.onCacheUpdate()}),this.on(Ye,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(rt,function(){e.onReset()}),this.on(Xe,function(){e.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var i=this,n=null;Object.keys(e).forEach(function(a){i.config[a]=e[a],a==="fragments"&&(n=e[a])}),n&&this._initInner(n,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,n=i.sliderBtnStyle,a=this.progressBtn;n&&(typeof n=="string"?a.style.boxShadow=n:fe(n)==="object"&&Object.keys(n).map(function(l){a.style[l]=n[l]}))}},{key:"triggerCallbacks",value:function(e,i,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(a){if(a&&a.handler&&a.type===e)try{a.handler(i,n)}catch(l){console.error("[XGPLAYER][triggerCallbacks] ".concat(a," error"),l)}})}},{key:"addCallBack",value:function(e,i){i&&typeof i=="function"&&this.__dragCallBacks.push({type:e,handler:i})}},{key:"removeCallBack",value:function(e,i){var n=this.__dragCallBacks,a=-1;n.map(function(l,u){l&&l.type===e&&l.handler===i&&(a=u)}),a>-1&&n.splice(a,1)}},{key:"unlock",value:function(){var e=this.player,i=this.pos;if(i.isEnter=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),i.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player,i=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&(this.root.addEventListener("touchstart",this.onMouseDown),i&&(i.root&&i.root.addEventListener("touchmove",c.stopPropagation),i.center&&i.center.addEventListener("touchend",c.stopPropagation))),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),n.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),c.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),c.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,i,n){var a=this.config,l=this.player;if(!(a.isCloseClickSeek&&n===0)){var u=e>=l.duration?l.duration-a.endedDiff:Number(e).toFixed(1);this.updatePercent(i),this.updateTime(e),!(n===1&&(!a.isDragingSeek||l.config.mediaType==="audio"))&&(this._state.now=u,this._state.direc=u>l.currentTime?0:1,l.seek(u))}}},{key:"computeTime",value:function(e,i){var n=this.player,a=this.root.getBoundingClientRect(),l=a.width,u=a.height,f=a.top,h=a.left,d,g,v=i;n.rotateDeg===90?(d=u,g=f):(d=l,g=h);var y=v-g;y=y>d?d:y<0?0:y;var E=y/d;E=E<0?0:E>1?1:E;var b=parseInt(E*this.duration*1e3,10)/1e3;return{percent:E,currentTime:b,offset:y,width:d,left:g,e}}},{key:"updateTime",value:function(e){var i=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var a=i.plugins.time;a&&a.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,i){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(e){var i=this.player,n=this._state,a=this.duration;if(!(i.isSeeking||this.isProgressMoving)){if(n.now>-1){var l=parseInt(n.now*1e3,10)-parseInt(i.currentTime*1e3,10);if(n.direc===0&&l>300||n.direc===1&&l>-300){n.now=-1;return}else n.now=-1}var u=this.timeOffset+i.currentTime;u=c.adjustTimeByDuration(u,a,e),this.innerList.update({played:u},a),this.progressBtn.style.left="".concat(u/a*100,"%");var f=this.player.plugins.miniprogress;f&&f.update({played:u},a)}}},{key:"onCacheUpdate",value:function(e){var i=this.player,n=this.duration;if(i){var a=i.bufferedPoint.end;a=c.adjustTimeByDuration(a,n,e),this.innerList.update({cached:a},n);var l=this.player.plugins.miniprogress;l&&l.update({cached:a},n)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,i=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var n=this.domEventType;(n==="touch"||n==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),i&&(i.root&&i.root.removeEventListener("touchmove",c.stopPropagation),i.center&&i.center.removeEventListener("touchend",c.stopPropagation))),(n==="mouse"||n==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",i=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(i,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:Qn.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return Qn}}]),r}($),qe=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"_onMouseenter",function(a){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),k(m(t),"_onMouseLeave",function(a){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return A(r,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),r}($),oa=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"afterCreate",value:function(){var e=this;M(D(r.prototype),"afterCreate",this).call(this);var i=this.player,n=this.config;n.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([nt,dt,rt],function(){e.animate(i.paused)}),this.on(Ce,function(){e.animate(i.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:pi,class:"xg-icon-play"},pause:{icon:mi,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i.paused,to:!i.paused}),i.ended?i.replay():i.paused?(i.play(),this.animate(!1)):(i.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var i=this.i18nKeys,n=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),n&&this.changeLangTextKey(n,i.PLAY_TIPS)):(this.setAttr("data-state","play"),n&&this.changeLangTextKey(n,i.PAUSE_TIPS))}}},{key:"destroy",value:function(){M(D(r.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(Ue(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_LEFT,index:0,disable:!1}}}]),r}(qe);function la(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var ua=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(i){i.preventDefault(),i.stopPropagation(),e.config.onClick(i)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:la,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){c.addClass(this.root,"show")}},{key:"hide",value:function(){c.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:X.ROOT_TOP,index:0}}}]),r}($);function ca(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function fa(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var ha=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"_onOrientationChange",function(a){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return A(r,[{key:"afterCreate",value:function(){var e=this;M(D(r.prototype),"afterCreate",this).call(this);var i=this.config,n=this.playerConfig;if(!i.disable){i.target&&(this.playerConfig.fullscreenTarget=this.config.target);var a=c.getFullScreenEl();n.fullscreenTarget===a&&this.player.getFullscreen().catch(function(l){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(u){var f=e.player.fullscreen;e.emitUserAction(u,"switch_fullscreen",{prop:"fullscreen",from:f,to:!f})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(De,function(l){var u=e.find(".xg-tips");u&&e.changeLangTextKey(u,l?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(l)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:ua,options:{config:{onClick:function(u){e.handleFullscreen(u)}}}})),G.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:ca,class:"xg-get-fullscreen"},exitFullscreen:{icon:fa,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){M(D(r.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",G.device==="mobile"?"touchend":"click",this.handleFullscreen),G.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var i=this.player,n=this.config,a=n.useCssFullscreen===!0||typeof n.useCssFullscreen=="function"&&n.useCssFullscreen();a?(i.fullscreen?i.exitCssFullscreen():i.getCssFullscreen(),this.animate(i.fullscreen)):n.rotateFullscreen?(i.fullscreen?i.exitRotateFullscreen():i.getRotateFullscreen(),this.animate(i.fullscreen)):n.switchCallback&&typeof n.switchCallback=="function"?n.switchCallback(i.fullscreen):i.fullscreen?i.exitFullscreen():i.getFullscreen().catch(function(l){})}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){M(D(r.prototype),"show",this).call(this)}},{key:"hide",value:function(){M(D(r.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(Ue(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),r}(qe),da=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),e.isActiving=!1,e}return A(r,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,i=this.player.controls.config.mode;this.mode=i==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(Ke,function(){e.onTimeUpdate()}),this.on(Se,function(){e.onTimeUpdate()}),this.on(Ye,function(){e.onTimeUpdate(!0)}),this.on(rt,function(){e.onReset()}))}},{key:"show",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var i=this.player,n=this.config,a=this.duration;if(!(n.disable||this.isActiving||!i.hasStart)){var l=i.currentTime+this.timeOffset;l=c.adjustTimeByDuration(l,a,e),this.mode==="flex"?(this.centerCurDom.innerHTML=c.format(l),a!==1/0&&a>0&&(this.centerDurDom.innerHTML=c.format(a))):(this.timeDom.innerHTML=c.format(l),a!==1/0&&a>0&&(this.durationDom.innerHTML=c.format(a)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=c.format(0),this.centerDurDom.innerHTML=c.format(0)):(this.timeDom.innerHTML=c.format(0),this.durationDom.innerHTML=c.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var i=e.controls.center;this.centerCurDom=c.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=c.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),i.children.length>0?i.insertBefore(this.centerCurDom,i.children[0]):i.appendChild(this.centerCurDom),i.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(c.hide(this.durationDom),c.hide(this.timeDom),c.hide(this.find(".time-separator")),c.show(this.find(".time-live-tag"))):c.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(c.hide(this.durationDom),c.hide(this.timeDom),c.hide(this.find(".time-separator")),c.show(this.find(".time-live-tag"))):(c.hide(this.find(".time-live-tag")),c.show(this.find(".time-separator")),c.show(this.durationDom),c.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=c.format(e);return}this.timeDom.innerHTML=c.format(e)}}},{key:"resetActive",value:function(){var e=this,i=this.player,n=function(){e.isActiving=!1};this.off(He,n),i.isSeeking?this.once(He,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_LEFT,index:2,disable:!1}}}]),r}($);function ga(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function va(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function pa(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var ma=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"onBarMousedown",function(a){var l=m(t),u=l.player,f=t.find(".xgplayer-bar");c.event(a);var h=f.getBoundingClientRect(),d=c.getEventPos(a,u.zoom),g=h.height-(d.clientY-h.top);if(d.h=g,d.barH=h.height,t.pos=d,!(g<-2))return t.updateVolumePos(g,a),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),k(m(t),"onBarMouseMove",function(a){var l=m(t),u=l._d;if(u.isStart){var f=m(t),h=f.pos,d=f.player;a.preventDefault(),a.stopPropagation(),c.event(a);var g=c.getEventPos(a,d.zoom);u.isMoving=!0;var v=h.h-g.clientY+h.clientY;v>h.barH||t.updateVolumePos(v,a)}}),k(m(t),"onBarMouseUp",function(a){c.event(a),document.removeEventListener("mouseup",t.onBarMouseUp);var l=m(t),u=l._d;u.isStart=!1,u.isMoving=!1}),k(m(t),"onMouseenter",function(a){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),k(m(t),"onMouseleave",function(a){t._d.isActive=!1,t.unFocus(100,!1,a),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),k(m(t),"onVolumeChange",function(a){if(t.player){var l=t.player,u=l.muted,f=l.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=u||f===0?"4px":"".concat(f*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(u,f)}}),t}return A(r,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:va,class:"xg-volume-small"},volumeLarge:{icon:ga,class:"xg-volume"},volumeMuted:{icon:pa,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var i=this.playerConfig,n=i.commonStyle,a=i.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(l){e.changeMuted(l)},{pre:function(u){u.preventDefault(),u.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),G.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(gn,this.onVolumeChange),this.once($e,this.onVolumeChange),c.typeOf(a)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,i){var n=this.player,a=this.find(".xgplayer-drag"),l=this.find(".xgplayer-bar");if(!(!l||!a)){var u=parseInt(e/l.getBoundingClientRect().height*1e3,10);a.style.height="".concat(e,"px");var f=Math.max(Math.min(u/1e3,1),0),h={volume:{from:n.volume,to:f}};n.muted&&(h.muted={from:!0,to:!1}),this.emitUserAction(i,"change_volume",{muted:n.muted,volume:n.volume,props:h}),n.volume=Math.max(Math.min(u/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,i=e.volume,n=e.muted,a=this.find(".xgplayer-value-label"),l=Math.max(Math.min(i,1),0);a.innerText=n?0:Math.ceil(l*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(c.clearTimeout(this,this._timerId),this._timerId=null),c.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2?arguments[2]:void 0,l=this._d,u=this.player;l.isActive||(this._timerId&&(c.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=c.setTimeout(this,function(){l.isActive||(n?u.blur():u.focus(),c.removeClass(e.root,"slide-show"),l.isStart&&e.onBarMouseUp(a)),e._timerId=null},i))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var i=this.player,n=this._d;n.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:i.muted,volume:i.volume,props:{muted:{from:i.muted,to:!i.muted}}}),i.volume>0&&(i.muted=!i.muted),i.volume<.01&&(i.volume=this.config.miniVolume)}},{key:"animate",value:function(e,i){e||i===0?this.setAttr("data-state","mute"):i<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(c.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",G.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,i=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(i?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),r}($);function ya(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g clip-path="url(#clip0)">
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath id="clip0">
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var Ca=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return A(r,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(M(D(r.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Xe,function(){e.rotateDeg&&c.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)}),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){M(D(r.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,i){var n=this.player;if(e||(e=0),i){this.player.videoRotateDeg=e;return}var a=this.player,l=a.root,u=a.innerContainer,f=this.player.media,h=l.offsetWidth,d=u&&i?u.offsetHeight:l.offsetHeight,g="100%",v="100%",y=0,E=0;(e===.75||e===.25)&&(g="".concat(d,"px"),v="".concat(h,"px"),y=-(d-h)/2,E=-(h-d)/2);var b="translate(".concat(y,"px,").concat(E,"px) rotate(").concat(e,"turn)"),_={transformOrigin:"center center",transform:b,webKitTransform:b,height:v,width:g},S=i?f:l,P=i?n.getPlugin("poster"):null;Object.keys(_).map(function(L){S.style[L]=_[L],P&&P.root&&(P.root.style[L]=_[L])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=this.player;this.rotateDeg||(this.rotateDeg=0);var l=e?1:-1;this.rotateDeg=(this.rotateDeg+1+l*.25*n)%1,this.updateRotateDeg(this.rotateDeg,i),a.emit(kn,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:ya}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(Ue(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),r}(qe);function ka(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function Ea(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var ot={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},Ta=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"switchPIP",function(a){if(!t.isPIPAvailable())return!1;a.stopPropagation&&a.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(a,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(a,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return A(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(M(D(r.prototype),"afterCreate",this).call(this),this.pMode=ot.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(_t,function(){e.config.showIcon&&(c.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:ka,class:"xg-get-pip"},pipIconExit:{icon:Ea,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,i=this.player;this.leavePIPCallback=function(){var n=i.paused;c.setTimeout(e,function(){!n&&i.mediaPlay()},0),!n&&i.mediaPlay(),e.setAttr("data-state","normal"),i.emit(ci,!1)},this.enterPIPCallback=function(n){i.emit(ci,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var a=i.media.webkitPresentationMode;e.pMode===ot.FULLSCREEN&&a!==ot.FULLSCREEN&&i.onFullscreenChange(null,!1),e.pMode=a,a===ot.PIP?e.enterPIPCallback(n):a===ot.INLINE&&e.leavePIPCallback(n)},i.media&&(i.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),i.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),r.checkWebkitSetPresentationMode(i.media)&&i.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,i=this.playerConfig;if(!(!this.isPIPAvailable()||this.isPip))try{var n=i.poster;return n&&(e.media.poster=c.typeOf(n)==="String"?n:n.poster),r.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(a){return console.error("requestPiP",a),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(r.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(i){return console.error("exitPIP",i),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===ot.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,i=c.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!0;return i&&(c.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&c.typeOf(e.webkitSetPresentationMode)==="Function")}},{key:"destroy",value:function(){M(D(r.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),r.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(Ue(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),r}(qe);function ba(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var _a=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),k(m(e),"playNext",function(i){var n=m(e),a=n.player;i.preventDefault(),i.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),a.emit(Pt,e.idx+1)):(e.nextHandler(),a.emit(Pt))}),e.idx=-1,e}return A(r,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:ba}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=G.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var i=this.player;e&&(i.pause(),i.currentTime=0,i.switchURL?i.switchURL(e):i.src=e,i.config.url=e,i.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(Ue(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),r}($);function Sa(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var xa=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),k(m(e),"download",function(i){if(!e.isLock){e.emitUserAction(i,"download");var n=e.getAbsoluteURL(e.player.src);Kt()(n),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return A(r,[{key:"afterCreate",value:function(){M(D(r.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(i){i.preventDefault(),i.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:Sa}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var i=document.createElement("div");i.innerHTML='<a href="'.concat(e,'">x</a>'),e=i.firstChild.href}return e}},{key:"destroy",value:function(){M(D(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(Ue(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:3,disable:!0}}}]),r}(qe),wa=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){M(D(r.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(i){e.fitVideo&&(e.width=i.vWidth,e.height=i.vHeight)},this.once(Xe,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,i){var n=document.createElement("a");n.href=e,n.download=i;var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(a)}},{key:"createCanvas",value:function(e,i){var n=document.createElement("canvas"),a=n.getContext("2d");this.canvasCtx=a,this.canvas=n,n.width=e||this.config.width,n.height=i||this.config.height,a.imageSmoothingEnabled=!0,a.imageSmoothingEnabled&&(a.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var i=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(n){i.emit(En,n),i.saveScreenShot(n,i.config.name+i.config.format)})}},{key:"shot",value:function(e,i){var n=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},l=this.config,u=this.player,f=a.quality||l.quality,h=a.type||l.type;return new Promise(function(d,g){var v=null,y;if(u.media.canvas)v=u.media.canvas;else{n.canvas?(n.canvas.width=e||l.width,n.canvas.height=i||l.height):n.createCanvas(e,i),v=n.canvas,y=n.canvasCtx;var E=u.media.videoWidth/u.media.videoHeight,b=v.width/v.height,_=0,S=0,P=u.media.videoWidth,L=u.media.videoHeight,U,Z,ee,Q;E>b?(ee=v.width,Q=v.width/E,U=0,Z=Math.round((v.height-Q)/2)):E===b?(ee=v.width,Q=v.height,U=0,Z=0):E<b&&(ee=v.height*E,Q=v.height,U=Math.round((v.width-ee)/2),Z=0),y.drawImage(u.media,_,S,P,L,U,Z,ee,Q)}var B=v.toDataURL(h,f).replace(h,"image/octet-stream");B=B.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),d(B)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){M(D(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(Xe,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",i="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[i],'">').concat(this.i18n[i],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),r}(qe),Pa=function(){function s(o){I(this,s),this.config=o.config,this.parent=o.root,this.root=c.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),o.root.appendChild(this.root);var r=this.config.maxHeight;r&&this.setStyle({maxHeight:r}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var t=G.device==="mobile"?"touchend":"click";this._delegates=$.delegate.call(this,this.root,"li",t,this.onItemClick)}return A(s,[{key:"renderItemList",value:function(r){var t=this,e=this.config,i=this.root;r?e.data=r:r=e.data,e.style&&Object.keys(e.style).map(function(n){i.style[n]=e[n]}),r.length>0&&(this.attrKeys=Object.keys(r[0])),this.root.innerHTML="",r.map(function(n,a){var l=n.selected?"option-item selected":"option-item";n["data-index"]=a,t.root.appendChild(c.createDom("li","<span>".concat(n.showText,"</span>"),n,l))})}},{key:"onItemClick",value:function(r){r.delegateTarget||(r.delegateTarget=r.target);var t=r.delegateTarget;if(t&&c.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,i=this.root.querySelector(".selected");c.addClass(t,"selected"),i&&c.removeClass(i,"selected"),e(r,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(r,t){if(!r||!t)return{};var e={};t.map(function(n){e[n]=r.getAttribute(n)});var i=r.getAttribute("data-index");return i&&(e.index=Number(i)),e}},{key:"show",value:function(){c.removeClass(this.root,"hide"),c.addClass(this.root,"active")}},{key:"hide",value:function(){c.removeClass(this.root,"active"),c.addClass(this.root,"hide")}},{key:"setStyle",value:function(r){var t=this;Object.keys(r).forEach(function(e){t.root.style[e]=r[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(r){r.destroy&&r.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),s}(),Ie={SIDE:"side",MIDDLE:"middle"},lt={CLICK:"click",HOVER:"hover"};function Ia(s,o){return s===Ie.SIDE?o===X.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var Mt=G.device==="mobile",Ft=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),k(m(e),"onEnter",function(i){i.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(i)}),k(m(e),"switchActiveState",function(i){i.stopPropagation();var n=e.config.toggleMode;n===lt.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),k(m(e),"onLeave",function(i){i.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==Ie.SIDE&&e.isActive&&e.toggle(!1)}),k(m(e),"onListEnter",function(i){e.enterType=2}),k(m(e),"onListLeave",function(i){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return A(r,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,i=this.config;this.initIcons(),Mt&&i.listType!==Ie.MIDDLE&&(i.listType=Ie.SIDE),i.hidePortrait&&c.addClass(this.root,"portrait"),this.on([Xe,De],function(){e._resizeList()}),this.once(Oe,function(){i.list&&i.list.length>0&&(e.renderItemList(i.list),e.show())}),Mt&&this.on(ni,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),Mt?(i.toggleMode=lt.CLICK,this.activeEvent="touchend"):this.activeEvent=i.toggleMode===lt.CLICK?"click":"mouseenter",i.toggleMode===lt.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,i=this.icons,n=Object.keys(i),a=!1;n.length>0&&(n.forEach(function(l){e.appendChild(".xgplayer-icon",i[l]),!a&&(a=i[l])}),this.isIcons=a),!a&&(this.appendChild(".xgplayer-icon",c.createDom("span","",{},"icon-text")),c.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||c.addClass(this.root,"show")}},{key:"hide",value:function(){c.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,i,n){if(e===void 0)return"";var a=this.config.list;!n&&(n=this.player.lang),i=!i||c.isUndefined(e[i])?"text":i,typeof e=="number"&&(e=a[e]);try{return fe(e[i])==="object"?e[i][n]||e[i].en:e[i]}catch(l){return console.warn(l),""}}},{key:"toggle",value:function(e){if(e!==this.isActive){var i=this.player.controls,n=this.config.listType;e?(n===Ie.SIDE?i.blur():i.focus(),this.optionsList&&this.optionsList.show()):(n===Ie.SIDE?i.focus():i.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,i){e.stopPropagation();var n=this.config,a=n.listType,l=n.list;this.curIndex=i.to.index,this.curItem=l[this.curIndex],this.changeCurrentText();var u=this.config.isItemClickHide;(u||Mt||a===Ie.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,n=e[i];n&&(this.find(".icon-text").innerHTML=this.getTextByLang(n,"iconText"))}}},{key:"renderItemList",value:function(e,i){var n=this,a=this.config,l=this.optionsList,u=this.player;if(typeof i=="number"&&(this.curIndex=i,this.curItem=a.list[i]),l){l.renderItemList(e),this.changeCurrentText();return}var f={config:{data:e||[],className:Ia(a.listType,a.position),onItemClick:function(y,E){n.onItemClick(y,E)}},root:a.listType===Ie.SIDE?u.innerContainer||u.root:this.root};if(this.config.isShowIcon){var h=this.player.root.getBoundingClientRect(),d=h.height,g=a.listType===Ie.MIDDLE?d-50:d;g&&(f.config.maxHeight="".concat(g,"px")),this.optionsList=new Pa(f),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){var e=this.player.root.getBoundingClientRect(),i=e.height,n=this.config.listType===Ie.MIDDLE?i-50:i;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(n,"px")})}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===lt.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:lt.HOVER}}}]),r}($),Aa=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),e.curTime=0,e.isPaused=!0,e}return A(r,[{key:"beforeCreate",value:function(e){var i=e.config.list;Array.isArray(i)&&i.length>0&&(e.config.list=i.map(function(n){return!n.text&&n.name&&(n.text=n.name),n.text||(n.text=n.definition),n}))}},{key:"afterCreate",value:function(){var e=this;M(D(r.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(i){e.changeDefinitionList(i)}),this.on(li,function(i){e.renderItemList(e.config.list,i.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||c.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,i=e.list,n=e.defaultDefinition;if(i.length>0){var a=null;i.map(function(l){l.definition===n&&(a=l)}),a||(a=i[0]),this.changeDefinition(a)}}},{key:"renderItemList",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],n=arguments.length>1?arguments[1]:void 0,a=n&&n.definition?n.definition:this.config.defaultDefinition;n&&i.forEach(function(f){f.selected=!1});var l=0,u=i.map(function(f,h){var d=q(q({},f),{},{showText:e.getTextByLang(f)||f.definition,selected:!1});return(f.selected||f.definition&&f.definition==a)&&(d.selected=!0,l=h),d});M(D(r.prototype),"renderItemList",this).call(this,u,l)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(i){return!i.text&&i.name&&(i.text=i.name),i.text||(i.text=i.definition),i}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,i){this.player.changeDefinition(e,i)}},{key:"onItemClick",value:function(e,i){var n=this.player.definitionList;M(D(r.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:i.from,to:i.to});for(var a=0;a<n.length;a++)i.to&&n[a].definition===i.to.definition&&(i.to.url=n[a].url),i.from&&n[a].definition===i.from.definition&&(i.from.url=n[a].url);this.player.changeDefinition(i.to,i.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return q(q({},Ft.defaultConfig),{},{position:X.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),r}(Ft),La=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),e.curRate=1,e}return A(r,[{key:"beforeCreate",value:function(e){var i=e.player.config.playbackRate,n=i?Array.isArray(i)?i:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map(function(a){return typeof a=="number"?a={rate:a,text:"".concat(a,"x")}:!a.text&&a.rate&&(a.text="".concat(a.rate,"x")),a}))}},{key:"afterCreate",value:function(){var e=this;M(D(r.prototype),"afterCreate",this).call(this),this.on(vn,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){!this.config.list||this.config.list.length===0||M(D(r.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,i){M(D(r.prototype),"onItemClick",this).apply(this,arguments);var n=e.delegateTarget,a=Number(n.getAttribute("rate"));if(!a||a===this.curValue)return!1;var l={playbackRate:{from:this.player.playbackRate,to:a}};this.emitUserAction(e,"change_rate",{props:l}),this.curValue=a,this.player.playbackRate=a}},{key:"renderItemList",value:function(){var e=this,i=this.player.playbackRate||1;this.curValue=i;var n=-1,a=this.config.list.map(function(l,u){var f={rate:l.rate};return f.rate===i&&(f.selected=!0,n=u),f.showText=e.getTextByLang(l),f});M(D(r.prototype),"renderItemList",this).call(this,a,n)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,n=e[i],a="";!n||this.curIndex<0?a="".concat(this.player.playbackRate,"x"):a=this.getTextByLang(n,"iconText"),this.find(".icon-text").innerHTML=a}}},{key:"destroy",value:function(){M(D(r.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return q(q({},Ft.defaultConfig),{},{position:X.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),r}(Ft);function Oa(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function Da(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var qn=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;M(D(r.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(xt,function(i){e.animate(i)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,i=this.find(".xgplayer-icon");i.appendChild(e.cssFullscreen),i.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:i}),i?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var i=this.i18nKeys,n=this.find(".xg-tips");n&&this.changeLangTextKey(n,e?i.EXITCSSFULLSCREEN_TIPS:i.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Oa,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Da,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){M(D(r.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(Ue(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:X.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),r}(qe),Ra=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(dt,function(i){e.onError(i)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.player,n=e.errorType,a=i.errorNote?this.i18n[i.errorNote]:"";if(!a)switch(n){case"decoder":a=this.i18n.MEDIA_ERR_DECODE;break;case"network":a=this.i18n.MEDIA_ERR_NETWORK;break;default:a=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=a,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),r}($),Na=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(i){(e.config.onClick||e.customOnClick)&&(i.preventDefault(),i.stopPropagation(),e.customOnClick?e.customOnClick(i):e.config.onClick(i))}),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var i=this;Object.keys(e).map(function(n){i.root.style[n]=e[n]})}},{key:"show",value:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=a;var l=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),c.addClass(this.root,"show"),n.mode==="arrow"&&c.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var u=typeof n.autoHide=="boolean"?n.autoHide:this.config.autoHide;if(u){var f=n.interval||l;this.intervalId=setTimeout(function(){i.hide()},f)}}}},{key:"hide",value:function(){c.removeClass(this.root,"show"),c.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(T.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),r}($),er={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function tr(s){Object.keys(er).map(function(o){s[o]===void 0&&(s[o]=er[o])})}var ir={_updateDotDom:function(o,r){if(r){var t=this.calcuPosition(o.time,o.duration),e=o.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),r.setAttribute("data-text",o.text),r.setAttribute("data-time",o.time),t.isMini?c.addClass(r,"mini"):c.removeClass(r,"mini"),Object.keys(e).map(function(i){r.style[i]=e[i]})}},initDots:function(){var o=this;this._ispots.map(function(r){o.createDot(r,!1)}),this.ispotsInit=!0},createDot:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(r&&(tr(o),this._ispots.push(o)),!(!this.ispotsInit&&r))){var e=this.calcuPosition(o.time,o.duration),i=o.style||{};i.left="".concat(e.left,"%"),i.width="".concat(e.width,"%");var n="xgspot_".concat(o.id," xgplayer-spot");e.isMini&&(n+=" mini");var a=c.createDom("xg-spot",o.template||"",{"data-text":o.text,"data-time":o.time,"data-id":o.id},n);Object.keys(i).map(function(l){a.style[l]=i[l]}),t.outer&&t.outer.appendChild(a)}},findDot:function(o){if(this.player.plugins.progress){var r=this._ispots.filter(function(t,e){return t.id===o});return r.length>0?r[0]:null}},updateDot:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(o.id);if(e&&Object.keys(o).map(function(n){e[n]=o[n]}),!!this.ispotsInit){var i=t.find('xg-spot[data-id="'.concat(o.id,'"]'));i&&(this._updateDotDom(o,i),r&&this.showDot(o.id))}}},deleteDot:function(o){var r=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],i=0;i<r.length;i++)r[i].id===o&&e.push(i);for(var n=e.length,a=n-1;a>=0;a--)if(r.splice(e[a],1),this.ispotsInit){var l=t.find('xg-spot[data-id="'.concat(o,'"]'));l&&l.parentElement.removeChild(l)}}},deleteAllDots:function(){var o=this.player.plugins.progress;if(o){if(!this.ispotsInit){this._ispots=[];return}for(var r=o.root.getElementsByTagName("xg-spot"),t=r.length-1;t>=0;t--)o.outer.removeChild(r[t]);this._ispots=[]}},updateAllDots:function(){var o=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=r;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),i=e.length;if(i>r.length)for(var n=i-1;n>r.length-1;n--)t.outer.removeChild(e[n]);r.forEach(function(a,l){l<i?(e[l].setAttribute("data-id","".concat(a.id)),o._ispots.push(a),o.updateDot(a)):o.createDot(a)})}},updateDuration:function(){var o=this,r=this.player.plugins.progress;if(r){var t=this._ispots;t.forEach(function(e){var i=r.find('xg-spot[data-id="'.concat(e.id,'"]'));o._updateDotDom(e,i)})}},getAllDotsDom:function(){var o=this.player.plugins.progress;if(!o)return[];var r=o.root.getElementsByTagName("xg-spot");return r},getDotDom:function(o){var r=this.player.plugins.progress;if(r)return r.find('xg-spot[data-id="'.concat(o,'"]'))}};function Ma(s){var o=s.config,r=s.player;Object.keys(ir).map(function(e){s[e]=ir[e].bind(s)});var t=r.config.progressDot||o.ispots||[];s._ispots=t.map(function(e){return tr(e),e}),s.ispotsInit=!1,s.on(Ke,function(){s.ispotsInit?s.updateDuration():s.initDots()})}var ut={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},Fa=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),k(m(e),"onMousemove",function(i){if(!e.config.disable){if(c.hasClass(i.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(i);return}(e._state.f||c.hasClass(i.target,"xg-spot-content"))&&(c.event(i),i.stopPropagation())}}),k(m(e),"onMousedown",function(i){e.config.disable||(e._state.f||c.hasClass(i.target,"xg-spot-content"))&&(c.event(i),i.stopPropagation())}),k(m(e),"onMouseup",function(i){if(e.isDrag){var n=e.player.plugins.progress;n&&n.pos&&(n.onMouseUp(i),!n.pos.isEnter&&n.onMouseLeave(i))}}),k(m(e),"onDotMouseLeave",function(i){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(i.target),e._curDot=null;var n=e.player.plugins.progress;n&&n.enableBlur(),e.show()}}),k(m(e),"onProgressMouseOver",function(i,n){if(!e.config.disable&&c.hasClass(n.target,"xgplayer-spot")&&!e._curDot){e._curDot=n.target,e.focusDot(n.target),e._curDot.children.length>0&&e.hide();var a=e.player.plugins.progress;a&&a.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return A(r,[{key:"beforeCreate",value:function(e){var i=e.player.plugins.progress;i&&(e.root=i.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(i,n){n.currentTime&&e.player.seek(n.currentTime)}),this.transformTimeHook=this.hook("transformTime",function(i){e.setTimeContent(c.format(i))}),Ma(this),this.on(Ke,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(n){i.config[n]=e[n]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,i=this.player.plugins.progress;if(i&&(Object.keys(ut).map(function(a){e[ut[a]]=e[ut[a]].bind(e),i.addCallBack(a,e[ut[a]])}),G.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var n=this.hook("previewClick",function(){});this.handlerPreviewClick=function(a){a.stopPropagation(),n(parseInt(e._state.now*1e3,10)/1e3,a)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,i){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&c.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&c.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,i){this.config.disable||c.hasClass(i.target,"xgplayer-spot")&&(i.stopPropagation(),i.preventDefault(),["time","id","text"].map(function(n){e[n]=i.target.getAttribute("data-".concat(n))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(i,e))}},{key:"updateLinePos",value:function(e,i){var n=this.root,a=this.previewLine,l=this.player,u=this.config,f=l.controls.mode,h=f==="flex",d=n.getBoundingClientRect().width;if(d){d=this._hasThumnail&&d<u.width?u.width:d;var g=e-d/2,v;g<0&&!h?(g=0,v=e-d/2):g>i-d&&!h?(v=g-(i-d),g=i-d):v=0,v!==void 0&&(a.style.transform="translateX(".concat(v.toFixed(2),"px)")),n.style.transform="translateX(".concat(g.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var i=this.timeText,n=this.timePoint;i.innerHTML=e,!this.thumbnail&&(n.innerHTML=e)}},{key:"updatePosition",value:function(e,i,n,a){var l=this.root,u=this.config,f=this._state;if(l){f.now=n,this.transformTimeHook(n);var h=this.timeStr;a&&a.target&&c.hasClass(a.target,"xgplayer-spot")?(this.showTips(a.target.getAttribute("data-text"),!1,h),this.focusDot(a.target),f.f=!0,u.isFocusDots&&f.f&&(f.now=parseInt(a.target.getAttribute("data-time"),10))):u.defaultText?(f.f=!1,this.showTips(u.defaultText,!0,h)):(f.f=!1,this.hideTips("")),this.updateTimeText(h),this.updateThumbnails(f.now),this.updateLinePos(e,i)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var i=this.player,n=this.videoPreview,a=this.config,l=i.plugins.thumbnail;if(l&&l.usable){this.thumbnail&&l.update(this.thumbnail,e,a.width,a.height);var u=n&&n.getBoundingClientRect();this.videothumbnail&&l.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(G.device!=="mobile"){var i=this.player,n=this.config,a=i.getPlugin("thumbnail");if(a&&a.setConfig(e),!a||!a.usable||!n.isShowThumbnail){c.addClass(this.root,"short-line no-thumbnail");return}else c.removeClass(this.root,"short-line no-thumbnail");n.mode==="short"&&c.addClass(this.root,"short-line"),this._hasThumnail=!0;var l=this.find(".xg-spot-thumbnail");this.thumbnail=a.createThumbnail(l,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=c.createDom("xg-video-preview","",{},"xgvideo-preview"),i.root.appendChild(this.videoPreview),this.videothumbnail=a.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,i){var n=this.player.plugins.progress,a=this.player,l=n.root.getBoundingClientRect().width,u=a.duration/l*6;return e+i>a.duration&&(i=a.duration-e),e/a.duration*100,i/a.duration,{left:e/a.duration*100,width:i/a.duration*100,isMini:i<u}}},{key:"showDot",value:function(e){var i=this.findDot(e);if(i){var n=this.root.getBoundingClientRect(),a=n.width,l=i.time/this.player.duration*a;this.updatePosition(l,a,i.time)}}},{key:"focusDot",value:function(e,i){e&&(i||(i=e.getAttribute("data-id")),c.addClass(e,"active"),this._activeDotId=i)}},{key:"blurDot",value:function(e){if(!e){var i=this._activeDotId;e=this.getDotDom(i)}e&&(c.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";c.addClass(this.root,"no-timepoint"),e&&(c.addClass(this.find(".xg-spot-content"),"show-text"),i&&this.config.mode==="production"?(c.addClass(this.root,"product"),this.tipText.textContent=e):(c.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){c.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",c.removeClass(this.find(".xg-spot-content"),"show-text"),c.removeClass(this.root,"product")}},{key:"hide",value:function(){c.addClass(this.root,"hide")}},{key:"show",value:function(){c.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,i=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(i.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,i=this.player.plugins.progress;i&&Object.keys(ut).map(function(n){i.removeCallBack(n,e[ut[n]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return G.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),r}($),Ha=function(s){R(r,s);var o=N(r);function r(t){var e;return I(this,r),e=o.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return A(r,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([Ke],function(){var i=e.config,n=i.pic_num,a=i.interval;e.usable&&(e.interval=a>0?a:Math.round(e.player.duration*1e3/n)/1e3)})}},{key:"setConfig",value:function(e){var i=this;if(e){var n=Object.keys(e);n.length<1||(n.forEach(function(a){i.config[a]=e[a]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,i=e.urls,n=e.pic_num;return i&&i.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,i=e.width,n=e.height,a=e.pic_num,l=e.interval;this.ratio=i/n*100,this.interval=l||Math.round(this.player.duration/a),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var i=this;if(!this._preloadMark[e]){var n=this.config.urls,a=n.length,l=[];e>0&&l.push(e-1),l.push(e),e>0&&e<a-1&&l.push(e+1),l.map(function(u){!i._preloadMark[u]&&u>=0&&u<a&&(i._preloadMark[u]=1,c.preloadImg(n[u],function(){i._preloadMark[u]=2}))})}}},{key:"getPosition",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=this.config,l=a.pic_num,u=a.row,f=a.col,h=a.width,d=a.height;this.interval=Math.round(this.player.duration/l);var g=Math.ceil(e/this.interval);g=g>l?l:g;var v=g<u*f?0:Math.ceil(g/(u*f))-1,y=g-v*(f*u),E=y>0?Math.ceil(y/f)-1:0,b=y>0?y-E*f-1:0,_=0,S=0;if(i&&n){var P=i/n;P<h/d?(S=n,_=S*(h/d)):(_=i,S=_/(h/d))}else n?i||(S=n||d,_=S*(h/d)):(_=i||h,S=_/(h/d));var L=this.getUrlByIndex(v);return{urlIndex:v,rowIndex:E,colIndex:b,url:L,height:S,width:_,style:{backgroundImage:"url(".concat(L,")"),backgroundSize:"".concat(_*f,"px auto"),backgroundPosition:"-".concat(b*_,"px -").concat(E*S,"px"),width:"".concat(_,"px"),height:"".concat(S,"px")}}}},{key:"update",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=this.config,f=u.pic_num,h=u.urls;if(!(f<=0||!h||h.length===0)){var d=this.getPosition(i,n,a);this.preload(d.urlIndex),Object.keys(d.style).map(function(g){e.style[g]=d.style[g]}),Object.keys(l).map(function(g){e.style[g]=l[g]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,i){var n=c.createDom("xg-thumbnail","",{},"thumbnail ".concat(i));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),r}($),Ba=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},i=arguments.length>1?arguments[1]:void 0;!i||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/i*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/i*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress))return`<xg-mini-progress class="xg-mini-progress">
    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>
    </xg-mini-progress>`}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),r}($),mt={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function Ua(){try{return parseInt(window.performance.now(),10)}catch(s){return new Date().getTime()}}function ja(){try{var s=document.createElement("canvas").getContext;return!!s}catch(o){return!1}}var Ht=null,Ga=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"onLoadedData",function(a){t.player&&(t._frameCount=t.config.startFrameCount,t.renderOnTimeupdate(a),t.off(Se,t.renderOnTimeupdate),t.on(Se,t.renderOnTimeupdate))}),k(m(t),"renderOnTimeupdate",function(a){t._frameCount>0?(t.renderOnce(),t._frameCount--):(t._isLoaded=!0,t.off(Se,t.renderOnTimeupdate),!t.player.paused&&t._checkIfCanStart()&&t.start())}),k(m(t),"start",function(){var a=t.player.media,l=Ua(),u=t.checkVideoIsSupport(a);!u||!t.canvasCtx||(t.stop(),a.videoWidth&&a.videoHeight&&(t.videoPI=a.videoHeight>0?parseInt(a.videoWidth/a.videoHeight*100,10):0,(t.config.mode===mt.REAL_TIME||l-t.preTime>=t.interval)&&(a&&a.videoWidth&&t.update(u,t.videoPI),t.preTime=l)),t.frameId=c.requestAnimationFrame(t.start))}),k(m(t),"stop",function(){t.frameId&&(c.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return A(r,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),r.isSupport||(this.config.disable=!0);var i=this.config,n=i.disable,a=i.mode,l=i.frameRate;n||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/l,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(_t,function(){e.player&&(e.init(),e.player.paused||e.start())}),a!==mt.POSTER&&(a!==mt.FIRST_FRAME&&(this.on(rt,function(){e.stop()}),this.on(Ce,function(){e._checkIfCanStart()&&e.start()}),this.on(nt,function(){e.stop()})),this.on($e,this.onLoadedData),this.on(ii,function(){e._isLoaded=!1,e.stop()})))}},{key:"init",value:function(){var e=this.player,i=this.config;this.canvasFilter=r.supportCanvasFilter();try{var n=this.config.isInnerRender&&e.innerContainer||e.root;n.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(i.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=n.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=i.filter,this.canvas.style.webkitFilter=i.filter),this.mask=this.find("xgmask"),i.addMask&&(this.mask.style.background=i.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(a){W.logError("plugin:DynamicBg",a)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var i=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(i&&!(G.browser==="safari"&&(/^blob/.test(i.currentSrc)||/^blob/.test(i.src))))return i;var n=i?i.tagName.toLowerCase():"";return n==="canvas"||n==="img"?i:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var i=c.typeOf(e)==="String"?e:c.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(i)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==mt.FIRST_FRAME&&e!==mt.POSTER}},{key:"renderOnce",value:function(){var e=this.player.media;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var i=this.checkVideoIsSupport(e);i&&e.videoWidth&&this.update(i,this.videoPI)}}},{key:"updateImg",value:function(e){var i=this;if(e){var n=this.canvas.getBoundingClientRect(),a=n.width,l=n.height,u=new window.Image;u.onload=function(){if(!(!i.canvas||i.frameId||i.isStart)){i.canvas.height=l,i.canvas.width=a;var f=parseInt(a/l*100,10);i.update(u,f),u=null}},u.src=e}}},{key:"update",value:function(e,i){if(!(!this.canvas||!this.canvasCtx||!i))try{var n=this._pos,a=this.config,l=this.canvas.getBoundingClientRect(),u=l.width,f=l.height;if(u!==n.width||f!==n.height||n.pi!==i){var h=parseInt(u/f*100,10);n.pi=i,n.width=this.canvas.width=u,n.height=this.canvas.height=f;var d=f,g=u;h<i?g=parseInt(f*i/100,10):h>i&&(d=parseInt(u*100/i,10)),n.rwidth=g*a.multiple,n.rheight=d*a.multiple,n.x=(u-n.rwidth)/2,n.y=(f-n.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=a.filter),this.canvasCtx.drawImage(e,n.x,n.y,n.rwidth,n.rheight)}catch(v){W.logError("plugin:DynamicBg",v)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof Ht=="boolean"||(Ht=ja()),Ht}},{key:"supportCanvasFilter",value:function(){return!(G.browser==="safari"||G.browser==="firefox")}}]),r}($),Va={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u89C6\u9891\u4E0B\u8F7D\u9519\u8BEF"},mse:{code:2,msg:"\u6D41\u8FFD\u52A0\u9519\u8BEF"},parse:{code:3,msg:"\u89E3\u6790\u9519\u8BEF"},format:{code:4,msg:"\u683C\u5F0F\u9519\u8BEF"},decoder:{code:5,msg:"\u89E3\u7801\u9519\u8BEF"},runtime:{code:6,msg:"\u8BED\u6CD5\u9519\u8BEF"},timeout:{code:7,msg:"\u64AD\u653E\u8D85\u65F6"},other:{code:8,msg:"\u5176\u4ED6\u9519\u8BEF"}},HAVE_NOTHING:"\u6CA1\u6709\u5173\u4E8E\u97F3\u9891/\u89C6\u9891\u662F\u5426\u5C31\u7EEA\u7684\u4FE1\u606F",HAVE_METADATA:"\u97F3\u9891/\u89C6\u9891\u7684\u5143\u6570\u636E\u5DF2\u5C31\u7EEA",HAVE_CURRENT_DATA:"\u5173\u4E8E\u5F53\u524D\u64AD\u653E\u4F4D\u7F6E\u7684\u6570\u636E\u662F\u53EF\u7528\u7684\uFF0C\u4F46\u6CA1\u6709\u8DB3\u591F\u7684\u6570\u636E\u6765\u64AD\u653E\u4E0B\u4E00\u5E27/\u6BEB\u79D2",HAVE_FUTURE_DATA:"\u5F53\u524D\u53CA\u81F3\u5C11\u4E0B\u4E00\u5E27\u7684\u6570\u636E\u662F\u53EF\u7528\u7684",HAVE_ENOUGH_DATA:"\u53EF\u7528\u6570\u636E\u8DB3\u4EE5\u5F00\u59CB\u64AD\u653E",NETWORK_EMPTY:"\u97F3\u9891/\u89C6\u9891\u5C1A\u672A\u521D\u59CB\u5316",NETWORK_IDLE:"\u97F3\u9891/\u89C6\u9891\u662F\u6D3B\u52A8\u7684\u4E14\u5DF2\u9009\u53D6\u8D44\u6E90\uFF0C\u4F46\u5E76\u672A\u4F7F\u7528\u7F51\u7EDC",NETWORK_LOADING:"\u6D4F\u89C8\u5668\u6B63\u5728\u4E0B\u8F7D\u6570\u636E",NETWORK_NO_SOURCE:"\u672A\u627E\u5230\u97F3\u9891/\u89C6\u9891\u6765\u6E90",MEDIA_ERR_ABORTED:"\u53D6\u56DE\u8FC7\u7A0B\u88AB\u7528\u6237\u4E2D\u6B62",MEDIA_ERR_NETWORK:"\u7F51\u7EDC\u9519\u8BEF",MEDIA_ERR_DECODE:"\u89E3\u7801\u9519\u8BEF",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4E0D\u652F\u6301\u7684\u97F3\u9891/\u89C6\u9891\u683C\u5F0F",REPLAY:"\u91CD\u64AD",ERROR:"\u7F51\u7EDC\u8FDE\u63A5\u4F3C\u4E4E\u51FA\u73B0\u4E86\u95EE\u9898",PLAY_TIPS:"\u64AD\u653E",PAUSE_TIPS:"\u6682\u505C",PLAYNEXT_TIPS:"\u4E0B\u4E00\u96C6",DOWNLOAD_TIPS:"\u4E0B\u8F7D",ROTATE_TIPS:"\u65CB\u8F6C",RELOAD_TIPS:"\u91CD\u65B0\u8F7D\u5165",FULLSCREEN_TIPS:"\u8FDB\u5165\u5168\u5C4F",EXITFULLSCREEN_TIPS:"\u9000\u51FA\u5168\u5C4F",CSSFULLSCREEN_TIPS:"\u8FDB\u5165\u6837\u5F0F\u5168\u5C4F",EXITCSSFULLSCREEN_TIPS:"\u9000\u51FA\u6837\u5F0F\u5168\u5C4F",TEXTTRACK:"\u5B57\u5E55",PIP:"\u753B\u4E2D\u753B",SCREENSHOT:"\u622A\u56FE",LIVE:"\u6B63\u5728\u76F4\u64AD",OFF:"\u5173\u95ED",OPEN:"\u5F00\u542F",MINI_DRAG:"\u70B9\u51FB\u6309\u4F4F\u53EF\u62D6\u52A8\u89C6\u9891",MINISCREEN:"\u5C0F\u5C4F\u5E55",REFRESH_TIPS:"\u8BF7\u8BD5\u8BD5",REFRESH:"\u5237\u65B0",FORWARD:"\u5FEB\u8FDB\u4E2D",LIVE_TIP:"\u76F4\u64AD"}},yt="info",_i=wn,Wa=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"_recordUserActions",function(a){var l=t._getTime(),u=Object.assign({},a,{msg:a.msg||a.action});t._stats[yt].push(q(q({type:"userAction"},l),{},{payload:u}))}),k(m(t),"_onReset",function(){t.reset()}),k(m(t),"_recordInfo",function(a){t.info(a)}),k(m(t),"_downloadStats",function(){var a=t.getStats(),l=new Blob([JSON.stringify(a)],{type:"application/json"}),u=window.URL.createObjectURL(l),f=document.createElement("a");f.style.display="none",f.href=u,f.download="player.txt",f.disabled=!1,f.click()}),t}return A(r,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(It,this._recordUserActions),this.on(_i.STATS_INFO,this._recordInfo),this.on(_i.STATS_DOWNLOAD,this._downloadStats),this.on(_i.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var i=this._getTime();this._stats[yt].push(q(q({},i),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var i=Date.now(),n=i-e.startMs,a=q({cat:"function",dur:n,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(a)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},k(e,yt,[]),k(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,i=e.media,n=[],a=0;a<i.buffered.length;a++)n.push({start:i.buffered.start(a),end:i.buffered.end(a)});var l={currentTime:i.currentTime,readyState:i.readyState,buffered:n,paused:i.paused,ended:i.ended};return this._stats.media=l,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[yt],i=e.map(function(n){var a=n.payload.data,l="";try{a instanceof Error?l=a.msg:a!==void 0&&(l=JSON.stringify(a))}catch(u){console.log("err",u)}return"[".concat(n.timeFormat,"] : ").concat(n.payload.msg," ").concat(l," ")});return i}},{key:"_getProfile",value:function(){var e={traceEvents:[]},i=this._stats[yt];return i.forEach(function(n){n.payload.profile&&e.traceEvents.push(n.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),r}(Qe),nr=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"onGapJump",function(){var a=m(t),l=a.player,u=a.config;if(l.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(l.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){var f=l.media.buffered,h=u.smallGapLimit||.5,d=u.gapDetectionThreshold||.3,g=l.media.currentTime,v=t._getIndex(f,g,d);if(!(v===null||v===0)){console.log("GapJump  bufferRange ",f.start(v),f.end(v));var y=f.start(v)+.1,E=l.media.duration;if(!(y>E)){var b=y-g,_=b<=h;b<r.BROWSER_GAP_TOLERANCE||_&&(u.useGapJump!==!1&&(l.media.currentTime=t.isSafari?y+.1:y),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",v," isGapSamll:",_," currentTime:",l.media.currentTime," jumpSize:",g-l.media.currentTime),y!==.08&&l&&l.emit("log",{type:"oneevent",end_type:"gap",vid:l.config.vid,ext:{video_postion:Math.floor(y*1e3)}}))}}}}}),t}return A(r,[{key:"afterCreate",value:function(){var e=this,i=this.config.useGapJump;i!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(gt,this.onGapJump),this.on(Ce,function(){e.hasPlayed=!0}),this.on(ti,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,i,n){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var a=this._getBuffered(e),l=null,u=0;u<a.length;u++){var f=a[u];if(f.start>i&&(u===0||a[u-1].end-i<=n)){l=u;break}}return l}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var i=[],n=0;n<e.length;n++)i.push({start:e.start(n),end:e.end(n)});return i}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),r}($);nr.BROWSER_GAP_TOLERANCE=.001;var za=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"onWaiting",function(){var a=m(t),l=a.config;t.jumpCnt>l.jumpCntMax||t.timer||l.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,l.waitingTime*1e3))}),k(m(t),"onJump",function(){var a=m(t),l=a.player,u=a.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>u.jumpCntMax||u.useWaitingTimeoutJump===!1)&&!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=u.jumpSize*(t.jumpCnt+1),t.jumpCnt===u.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var f=l.currentTime+t.jumpSize,h=l.media.duration;f>h||(console.log("waitintTimeout, currentTime:",l.currentTime,", jumpTo:",f),t.jumpCnt++,l.currentTime=f)}}),t}return A(r,[{key:"afterCreate",value:function(){var e=this,i=this.config,n=i.useWaitingTimeoutJump,a=i.jumpSize;n!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=a,this.on(gt,this.onWaiting),this.on([ei,Oe],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(Ce,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),r}($),Ya=function(s){R(r,s);var o=N(r);function r(){var t;I(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=o.call.apply(o,[this].concat(i)),k(m(t),"getSpeed",function(a){if(t.speedListCache.length<=0)return 0;var l=0;return t.speedListCache.map(function(u){l+=u}),Math.floor(l/t.speedListCache.length)}),k(m(t),"_onRealSpeedChange",function(a){a.speed&&t.appendList(a.speed)}),k(m(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var a=t.config,l=a.url,u=a.loadSize,f=a.testCnt,h=a.testTimeStep,d=l+(l.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=f)){t.cnt++;try{var g=new Date().getTime(),v=null,y=new XMLHttpRequest;t.xhr=y,y.open("GET",d);var E={},b=Math.floor(Math.random()*10);E.Range="bytes="+b+"-"+(u+b),E&&Object.keys(E).forEach(function(_){y.setRequestHeader(_,E[_])}),y.onreadystatechange=function(){if(y.readyState===4){t.xhr=null,v=new Date().getTime();var _=y.getResponseHeader("Content-Length")/1024*8,S=Math.round(_*1e3/(v-g));t.appendList(S),t.timer=setTimeout(t.testSpeed,h)}},y.send()}catch(_){console.error(_)}}}}),k(m(t),"appendList",function(a){var l=t.config.saveSpeedMax;t.speedListCache.length>=l&&t.speedListCache.shift(),t.speedListCache.push(a),t.player&&(t.player.realTimeSpeed=a),t.updateSpeed()}),k(m(t),"updateSpeed",function(){var a=t.getSpeed(),l=m(t),u=l.player;u&&(!u.avgSpeed||a!==u.avgSpeed)&&(u.avgSpeed=a,u.emit(Cn,{speed:a,realTimeSpeed:u.realTimeSpeed}))}),t}return A(r,[{key:"afterCreate",value:function(){var e=this;this.speedListCache=[];var i=this.config,n=i.openSpeed,a=i.testTimeStep;this.timer=null,this.cnt=0,this.xhr=null,n&&(this.on("real_time_speed",this._onRealSpeedChange),this.on([$e,ai],function(){c.isMSE(e.player.video)||(e.speedListCache=[],e.cnt=0,e.timer=setTimeout(e.testSpeed,a))}))}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5}}}]),r}($),Ka=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r,[{key:"afterCreate",value:function(){var e=this,i=this.player,n=this.config;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!n.disabled){var a=i.media.getVideoPlaybackQuality;a&&(this.on(Ce,function(){e._startTick()}),this.on(nt,function(){e._stopTick()}),this.on(Ye,function(){e._stopTick()}),this.on(rt,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e,i,n,a){var l=this.player.media,u=document.hidden,f=l.paused;if(typeof u=="boolean"&&!u&&!f){for(var h=l.currentTime,d=l.buffered,g=!1,v=[],y=0;y<d.length;y++){var E=d.start(y),b=d.end(y);if(v.push({start:E,end:b}),E<=h&&h<=b-1){g=!0;break}}l.readyState===4&&g&&(this._currentStuckCount>this.config.stuckCount?(this.emit(Pn,this._payload),this._reset()):e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:v,currentTime:l.currentTime,curDecodedFrames:e,totalVideoFrames:i,droppedVideoFrames:n,checkInterval:a})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){if(this.player.media){var e=this.player.media.getVideoPlaybackQuality(),i=e.totalVideoFrames,n=e.droppedVideoFrames,a=performance.now();if(i&&this._lastCheckPoint){var l=i-this._lastDecodedFrames,u=a-this._lastCheckPoint;this._checkStuck(l,i,n,u)}this._lastDecodedFrames=i,this._lastCheckPoint=a}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),r}($);st.use(Va);var $a=A(function s(o,r){var t,e,i;I(this,s);var n=r&&r.isMobileSimulateMode==="mobile",a=r.isLive,l=a?[]:[aa,Ba,Fa,da],u=[].concat(l,[oa,ha,Ca,_a,Aa,La,xa,wa,ma,Ta]),f=[Us,js,Vs,na,Ws,Ra,Na,Ha,$s];this.plugins=[Wa,Hs].concat(Fe(u),f,[nr,za]);var h=n?"mobile":G.device;switch(h){case"pc":(t=this.plugins).push.apply(t,[Jn,Ti,qn,Ya,Ka]);break;case"mobile":(e=this.plugins).push.apply(e,[ea]);break;default:(i=this.plugins).push.apply(i,[Jn,Ti,qn])}(G.os.isIpad||h==="pc")&&this.plugins.push(Ga),G.os.isIpad&&this.plugins.push(Ti),this.ignores=[],this.i18n=[]}),Ae=function(s){R(r,s);var o=N(r);function r(){return I(this,r),o.apply(this,arguments)}return A(r)}(vi);k(Ae,"defaultPreset",$a),k(Ae,"Util",c),k(Ae,"Sniffer",G),k(Ae,"Errors",bt),k(Ae,"Events",le),k(Ae,"Plugin",$),k(Ae,"BasePlugin",Qe),k(Ae,"I18N",st),k(Ae,"STATE_CLASS",T);var z=C(85893),rr=new Worker(new URL("./transcode.worker.js",location.origin)),Si,xi;function Za(){var s=ar.ZP.useMessage(),o=x()(s,2),r=o[0],t=o[1],e=(0,p.useState)(),i=x()(e,2),n=i[0],a=i[1],l=(0,p.useState)(),u=x()(l,2),f=u[0],h=u[1],d=(0,p.useState)(!1),g=x()(d,2),v=g[0],y=g[1],E=(0,p.useState)(O[0].ext),b=x()(E,2),_=b[0],S=b[1],P=(0,p.useState)(),L=x()(P,2),U=L[0],Z=L[1],ee=(0,p.useState)(""),Q=x()(ee,2),B=Q[0],re=Q[1],oe=function(ye,ke){return new Ae({id:ye,width:"100%",lang:(0,Te.getLocale)().toLowerCase(),url:ke})};(0,p.useEffect)(function(){if(Si&&Si.destroy(),n){var se=URL.createObjectURL(n);Si=oe("original_video",se)}},[n]),(0,p.useEffect)(function(){xi&&xi.destroy(),f&&(xi=oe("output_video",URL.createObjectURL(f)))},[f]);var ue=function(){h(void 0),Z(0)},ne=function(ye){var ke=ye.type.startsWith("video/"),et=ye.size<=w.q.convertToBytes(2,"GB");return ke||r.error((0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.format_error"})),et||r.error((0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.size_limit"})),ke&&et||Pi.Z.LIST_IGNORE},me=function(ye){var ke=ye.file;ue(),a(ke.originFileObj)},de=function(){var se=V()(ge()().mark(function ye(){var ke,et,Ut,Ge;return ge()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(!n){Le.next=6;break}return ke=w.P.getFileName(n.name),et=ke.ext,Ut=ke.name,Le.next=4,n.arrayBuffer();case 4:Ge=Le.sent,Ge&&(rr.postMessage({name:Ut,inType:et,outType:_,buffer:Ge},[Ge]),rr.onmessage=function(wi){var jt=wi.data,Ne=jt.data,ct=jt.type;if(ct==="logger"&&Ne.type&&Ne.message){var ae="[".concat(Ne.type,"] ").concat(Ne.message,`
`);re(function(Et){return Et+ae})}ct==="error"?r.error((0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.transcode_failed"})):(ct==="progress"&&Z(Ne),ct==="result"&&h(new Blob([Ne],{type:_})))});case 6:case"end":return Le.stop()}},ye)}));return function(){return se.apply(this,arguments)}}(),Bt=function(){Kt()(f,"video.".concat(_))},Ct=function(){Kt()(B,"log.txt","text/plain")};return(0,z.jsxs)(sr._z,{children:[(0,z.jsxs)(ft.Z,{split:"horizontal",children:[t,(0,z.jsxs)(ft.Z,{children:[(0,z.jsxs)(or.Z,{children:[(0,z.jsx)(Pi.Z,{accept:"video/*",maxCount:1,showUploadList:!1,multiple:!1,onChange:me,beforeUpload:ne,children:(0,z.jsxs)(tt.ZP,{disabled:!sn().isNil(U)&&U!==0&&U!==1,icon:(0,z.jsx)(Y.Z,{}),children:["",(0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.upload"})]})}),(0,z.jsxs)(tt.ZP,{disabled:!n||U!==0&&U!==1,icon:(0,z.jsx)(J,{}),onClick:function(){return y(!0)},children:["",(0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.transcode"})]}),(0,z.jsxs)(tt.ZP,{disabled:U!==1,icon:(0,z.jsx)(Gt.Z,{}),onClick:Bt,children:["",(0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.download"})]}),(0,z.jsxs)(tt.ZP,{disabled:U!==1,icon:(0,z.jsx)(Ve.Z,{}),onClick:Ct,children:["",(0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.logger"})]})]}),(0,z.jsx)("div",{id:"video_player"})]}),(0,z.jsxs)(ft.Z,{split:"vertical",children:[(0,z.jsx)(ft.Z,{colSpan:12,title:(0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.original"}),children:n?(0,z.jsx)("div",{id:"original_video"}):(0,z.jsx)(Ii.Z,{})}),(0,z.jsx)(ft.Z,{layout:"center",colSpan:12,title:(0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.result"}),children:!sn().isNil(U)&&U>=0&&U<1?(0,z.jsx)(lr.Z,{percent:Math.floor(U*100),type:"circle"}):f?(0,z.jsx)("div",{id:"output_video"}):(0,z.jsx)(Ii.Z,{})})]})]}),(0,z.jsx)(Wr,{onCancel:function(){return y(!1)},open:v,title:(0,z.jsx)(Te.FormattedMessage,{id:"page.video.transcoding.placeholder"}),onOk:function(){y(!1),de()},children:(0,z.jsx)(zr.Z,{value:_,onChange:function(ye){S(ye)},style:{width:"100%"},options:O.map(function(se){return{value:se.ext,label:se.ext}})})})]})}var Xa=Za},1930:function(Me,Ee,C){"use strict";C.d(Ee,{q:function(){return V},P:function(){return F}});var le=C(12444),te=C.n(le),ge=C(72004),ve=C.n(ge),V=function(){function x(){te()(this,x)}return ve()(x,null,[{key:"convertToBytes",value:function(w,Y){var H=["B","kB","MB","GB","TB"],p=H.indexOf(Y);return w*Math.pow(1024,p)}},{key:"convertFromBytes",value:function(w){var Y=["B","kB","MB","GB","TB"],H=Math.floor(Math.log(w)/Math.log(1024)),p=Y[H],ce=w/Math.pow(1024,H);return"".concat(ce.toFixed(2)," ").concat(p)}}]),x}(),F=function(){function x(){te()(this,x)}return ve()(x,null,[{key:"getBase64",value:function(w){return new Promise(function(Y,H){var p=new FileReader;p.readAsDataURL(w),p.onload=function(){return Y(p.result)},p.onerror=function(ce){return H(ce)}})}},{key:"getFileName",value:function(w){var Y=w.split("."),H=Y.pop()||"";return Y=Y.join(),{name:Y,ext:H}}}]),x}()},69760:function(Me,Ee,C){"use strict";C.d(Ee,{Z:function(){return ve}});var le=C(62208),te=C(67294);function ge(V,F,x){return typeof V=="boolean"?V:F===void 0?!!x:F!==!1&&F!==null}function ve(V,F,x){let O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:te.createElement(le.Z,null),w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(!ge(V,F,w))return[!1,null];const H=typeof F=="boolean"||F===void 0||F===null?O:F;return[!0,x?x(H):H]}},92828:function(Me){var Ee=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var C=Element.prototype;C.matches=C.matchesSelector||C.mozMatchesSelector||C.msMatchesSelector||C.oMatchesSelector||C.webkitMatchesSelector}function le(te,ge){for(;te&&te.nodeType!==Ee;){if(typeof te.matches=="function"&&te.matches(ge))return te;te=te.parentNode}}Me.exports=le},99438:function(Me,Ee,C){var le=C(92828);function te(V,F,x,O,w){var Y=ve.apply(this,arguments);return V.addEventListener(x,Y,w),{destroy:function(){V.removeEventListener(x,Y,w)}}}function ge(V,F,x,O,w){return typeof V.addEventListener=="function"?te.apply(null,arguments):typeof x=="function"?te.bind(null,document).apply(null,arguments):(typeof V=="string"&&(V=document.querySelectorAll(V)),Array.prototype.map.call(V,function(Y){return te(Y,F,x,O,w)}))}function ve(V,F,x,O){return function(w){w.delegateTarget=le(w.target,F),w.delegateTarget&&O.call(V,w)}}Me.exports=ge},26729:function(Me){"use strict";var Ee=Object.prototype.hasOwnProperty,C="~";function le(){}Object.create&&(le.prototype=Object.create(null),new le().__proto__||(C=!1));function te(F,x,O){this.fn=F,this.context=x,this.once=O||!1}function ge(F,x,O,w,Y){if(typeof O!="function")throw new TypeError("The listener must be a function");var H=new te(O,w||F,Y),p=C?C+x:x;return F._events[p]?F._events[p].fn?F._events[p]=[F._events[p],H]:F._events[p].push(H):(F._events[p]=H,F._eventsCount++),F}function ve(F,x){--F._eventsCount===0?F._events=new le:delete F._events[x]}function V(){this._events=new le,this._eventsCount=0}V.prototype.eventNames=function(){var x=[],O,w;if(this._eventsCount===0)return x;for(w in O=this._events)Ee.call(O,w)&&x.push(C?w.slice(1):w);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(O)):x},V.prototype.listeners=function(x){var O=C?C+x:x,w=this._events[O];if(!w)return[];if(w.fn)return[w.fn];for(var Y=0,H=w.length,p=new Array(H);Y<H;Y++)p[Y]=w[Y].fn;return p},V.prototype.listenerCount=function(x){var O=C?C+x:x,w=this._events[O];return w?w.fn?1:w.length:0},V.prototype.emit=function(x,O,w,Y,H,p){var ce=C?C+x:x;if(!this._events[ce])return!1;var j=this._events[ce],xe=arguments.length,we,J;if(j.fn){switch(j.once&&this.removeListener(x,j.fn,void 0,!0),xe){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,O),!0;case 3:return j.fn.call(j.context,O,w),!0;case 4:return j.fn.call(j.context,O,w,Y),!0;case 5:return j.fn.call(j.context,O,w,Y,H),!0;case 6:return j.fn.call(j.context,O,w,Y,H,p),!0}for(J=1,we=new Array(xe-1);J<xe;J++)we[J-1]=arguments[J];j.fn.apply(j.context,we)}else{var Gt=j.length,Ve;for(J=0;J<Gt;J++)switch(j[J].once&&this.removeListener(x,j[J].fn,void 0,!0),xe){case 1:j[J].fn.call(j[J].context);break;case 2:j[J].fn.call(j[J].context,O);break;case 3:j[J].fn.call(j[J].context,O,w);break;case 4:j[J].fn.call(j[J].context,O,w,Y);break;default:if(!we)for(Ve=1,we=new Array(xe-1);Ve<xe;Ve++)we[Ve-1]=arguments[Ve];j[J].fn.apply(j[J].context,we)}}return!0},V.prototype.on=function(x,O,w){return ge(this,x,O,w,!1)},V.prototype.once=function(x,O,w){return ge(this,x,O,w,!0)},V.prototype.removeListener=function(x,O,w,Y){var H=C?C+x:x;if(!this._events[H])return this;if(!O)return ve(this,H),this;var p=this._events[H];if(p.fn)p.fn===O&&(!Y||p.once)&&(!w||p.context===w)&&ve(this,H);else{for(var ce=0,j=[],xe=p.length;ce<xe;ce++)(p[ce].fn!==O||Y&&!p[ce].once||w&&p[ce].context!==w)&&j.push(p[ce]);j.length?this._events[H]=j.length===1?j[0]:j:ve(this,H)}return this},V.prototype.removeAllListeners=function(x){var O;return x?(O=C?C+x:x,this._events[O]&&ve(this,O)):(this._events=new le,this._eventsCount=0),this},V.prototype.off=V.prototype.removeListener,V.prototype.addListener=V.prototype.on,V.prefixed=C,V.EventEmitter=V,Me.exports=V}}]);
