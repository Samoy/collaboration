(self.webpackChunkcollaboration=self.webpackChunkcollaboration||[]).push([[305],{69753:function(Ne,At,Rt){"use strict";var tt=Rt(1413),dt=Rt(67294),at=Rt(49495),mt=Rt(91146),O=function(g,x){return dt.createElement(mt.Z,(0,tt.Z)((0,tt.Z)({},g),{},{ref:x,icon:at.Z}))};O.displayName="DownloadOutlined",At.Z=dt.forwardRef(O)},88484:function(Ne,At,Rt){"use strict";Rt.d(At,{Z:function(){return g}});var tt=Rt(1413),dt=Rt(67294),at={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},mt=at,O=Rt(91146),z=function(f,l){return dt.createElement(O.Z,(0,tt.Z)((0,tt.Z)({},f),{},{ref:l,icon:mt}))};z.displayName="UploadOutlined";var g=dt.forwardRef(z)},80262:function(Ne,At,Rt){(function(){var tt={9406:function(O,z,g){O.exports=g(4877)},381:function(O,z,g){O.exports=g(5603)},8005:function(O,z,g){O.exports=g(4741)},7870:function(O,z,g){O.exports=g(4194)},7601:function(O,z,g){O.exports=g(2854)},651:function(O,z,g){O.exports=g(2)},2461:function(O,z,g){O.exports=g(5636)},9146:function(O,z,g){O.exports=g(5279)},6623:function(O,z,g){O.exports=g(9297)},7077:function(O,z,g){O.exports=g(8026)},9856:function(O,z,g){O.exports=g(2044)},4230:function(O,z,g){O.exports=g(2214)},184:function(O,z,g){O.exports=g(9256)},3742:function(O,z,g){O.exports=g(5659)},6135:function(O,z,g){g(9106);var x=g(5607);O.exports=x("Array").concat},3971:function(O,z,g){g(3436);var x=g(5607);O.exports=x("Array").filter},2671:function(O,z,g){g(5818);var x=g(5607);O.exports=x("Array").slice},1484:function(O,z,g){var x=g(6135),f=Array.prototype;O.exports=function(l){var I=l.concat;return l===f||l instanceof Array&&I===f.concat?x:I}},3669:function(O,z,g){var x=g(3971),f=Array.prototype;O.exports=function(l){var I=l.filter;return l===f||l instanceof Array&&I===f.filter?x:I}},7663:function(O,z,g){var x=g(2671),f=Array.prototype;O.exports=function(l){var I=l.slice;return l===f||l instanceof Array&&I===f.slice?x:I}},3213:function(O,z,g){g(3113);var x=g(7545).Object;O.exports=function(f,l){return x.create(f,l)}},3512:function(O,z,g){g(297);var x=g(7545).Object,f=O.exports=function(l,I,b){return x.defineProperty(l,I,b)};x.defineProperty.sham&&(f.sham=!0)},632:function(O,z,g){g(9189);var x=g(7545).Object,f=O.exports=function(l,I){return x.getOwnPropertyDescriptor(l,I)};x.getOwnPropertyDescriptor.sham&&(f.sham=!0)},1056:function(O,z,g){g(2509);var x=g(7545);O.exports=x.Object.getOwnPropertyDescriptors},2921:function(O,z,g){g(6187);var x=g(7545);O.exports=x.Object.getOwnPropertySymbols},8168:function(O,z,g){g(9234);var x=g(7545);O.exports=x.Object.getPrototypeOf},8651:function(O,z,g){g(2647);var x=g(7545);O.exports=x.Object.keys},3083:function(O,z,g){g(3222);var x=g(7545);O.exports=x.Object.setPrototypeOf},6577:function(O,z,g){g(5397);var x=g(7545);O.exports=x.Reflect.construct},5008:function(O,z,g){g(9106),g(6663),g(6187),g(9781),g(492),g(6681),g(9594),g(3665),g(9017),g(1250),g(9786),g(503),g(6565),g(9322),g(3610),g(6886),g(3514),g(8671),g(8556),g(1367);var x=g(7545);O.exports=x.Symbol},994:function(O,z,g){g(8939),g(6663),g(5454),g(3665);var x=g(9207);O.exports=x.f("iterator")},9297:function(O,z,g){var x=g(4963);O.exports=x},8026:function(O,z,g){var x=g(7820);O.exports=x},2044:function(O,z,g){var x=g(8980);O.exports=x},2214:function(O,z,g){var x=g(6672);O.exports=x},9256:function(O,z,g){var x=g(2285);g(177),g(9031),g(6658),g(1875),g(8658),g(4592),g(6680),O.exports=x},5659:function(O,z,g){var x=g(8535);O.exports=x},6235:function(O,z,g){var x=g(6447),f=g(9288);O.exports=function(l){if(x(l))return l;throw TypeError(f(l)+" is not a function")}},1404:function(O,z,g){var x=g(2091),f=g(9288);O.exports=function(l){if(x(l))return l;throw TypeError(f(l)+" is not a constructor")}},7757:function(O,z,g){var x=g(6447);O.exports=function(f){if(typeof f=="object"||x(f))return f;throw TypeError("Can't set "+String(f)+" as a prototype")}},7423:function(O){O.exports=function(){}},1138:function(O,z,g){var x=g(5744);O.exports=function(f){if(x(f))return f;throw TypeError(String(f)+" is not an object")}},8180:function(O,z,g){var x=g(101),f=g(7739),l=g(4104),I=function(b){return function(w,k,j){var p,a=x(w),d=l(a),u=f(j,d);if(b&&k!=k){for(;d>u;)if((p=a[u++])!=p)return!0}else for(;d>u;u++)if((b||u in a)&&a[u]===k)return b||u||0;return!b&&-1}};O.exports={includes:I(!0),indexOf:I(!1)}},454:function(O,z,g){var x=g(8043),f=g(2202),l=g(1795),I=g(4104),b=g(1321),w=[].push,k=function(j){var p=j==1,a=j==2,d=j==3,u=j==4,t=j==6,e=j==7,i=j==5||t;return function(s,m,o,y){for(var C,M,T=l(s),D=f(T),L=x(m,o,3),R=I(D),F=0,W=y||b,ot=p?W(s,R):a||e?W(s,0):void 0;R>F;F++)if((i||F in D)&&(M=L(C=D[F],F,T),j))if(p)ot[F]=M;else if(M)switch(j){case 3:return!0;case 5:return C;case 6:return F;case 2:w.call(ot,C)}else switch(j){case 4:return!1;case 7:w.call(ot,C)}return t?-1:d||u?u:ot}};O.exports={forEach:k(0),map:k(1),filter:k(2),some:k(3),every:k(4),find:k(5),findIndex:k(6),filterReject:k(7)}},242:function(O,z,g){var x=g(6192),f=g(8182),l=g(4218),I=f("species");O.exports=function(b){return l>=51||!x(function(){var w=[];return(w.constructor={})[I]=function(){return{foo:1}},w[b](Boolean).foo!==1})}},3712:function(O,z,g){var x=g(4770),f=g(2091),l=g(5744),I=g(8182)("species");O.exports=function(b){var w;return x(b)&&(w=b.constructor,(f(w)&&(w===Array||x(w.prototype))||l(w)&&(w=w[I])===null)&&(w=void 0)),w===void 0?Array:w}},1321:function(O,z,g){var x=g(3712);O.exports=function(f,l){return new(x(f))(l===0?0:l)}},9272:function(O){var z={}.toString;O.exports=function(g){return z.call(g).slice(8,-1)}},4696:function(O,z,g){var x=g(3471),f=g(6447),l=g(9272),I=g(8182)("toStringTag"),b=l(function(){return arguments}())=="Arguments";O.exports=x?l:function(w){var k,j,p;return w===void 0?"Undefined":w===null?"Null":typeof(j=function(a,d){try{return a[d]}catch(u){}}(k=Object(w),I))=="string"?j:b?l(k):(p=l(k))=="Object"&&f(k.callee)?"Arguments":p}},4635:function(O,z,g){var x=g(6192);O.exports=!x(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},5148:function(O,z,g){"use strict";var x=g(4413).IteratorPrototype,f=g(2853),l=g(774),I=g(1284),b=g(7771),w=function(){return this};O.exports=function(k,j,p){var a=j+" Iterator";return k.prototype=f(x,{next:l(1,p)}),I(k,a,!1,!0),b[a]=w,k}},8711:function(O,z,g){var x=g(69),f=g(2760),l=g(774);O.exports=x?function(I,b,w){return f.f(I,b,l(1,w))}:function(I,b,w){return I[b]=w,I}},774:function(O){O.exports=function(z,g){return{enumerable:!(1&z),configurable:!(2&z),writable:!(4&z),value:g}}},9361:function(O,z,g){"use strict";var x=g(77),f=g(2760),l=g(774);O.exports=function(I,b,w){var k=x(b);k in I?f.f(I,k,l(0,w)):I[k]=w}},7218:function(O,z,g){"use strict";var x=g(3085),f=g(5546),l=g(2282),I=g(6447),b=g(5148),w=g(9341),k=g(4469),j=g(1284),p=g(8711),a=g(9482),d=g(8182),u=g(7771),t=g(4413),e=l.PROPER,i=l.CONFIGURABLE,s=t.IteratorPrototype,m=t.BUGGY_SAFARI_ITERATORS,o=d("iterator"),y="keys",C="values",M="entries",T=function(){return this};O.exports=function(D,L,R,F,W,ot,it){b(R,L,F);var Mt,$,bt,U=function(G){if(G===W&&q)return q;if(!m&&G in Nt)return Nt[G];switch(G){case y:case C:case M:return function(){return new R(this,G)}}return function(){return new R(this)}},jt=L+" Iterator",gt=!1,Nt=D.prototype,V=Nt[o]||Nt["@@iterator"]||W&&Nt[W],q=!m&&V||U(W),Q=L=="Array"&&Nt.entries||V;if(Q&&(Mt=w(Q.call(new D)))!==Object.prototype&&Mt.next&&(f||w(Mt)===s||(k?k(Mt,s):I(Mt[o])||a(Mt,o,T)),j(Mt,jt,!0,!0),f&&(u[jt]=T)),e&&W==C&&V&&V.name!==C&&(!f&&i?p(Nt,"name",C):(gt=!0,q=function(){return V.call(this)})),W)if($={values:U(C),keys:ot?q:U(y),entries:U(M)},it)for(bt in $)(m||gt||!(bt in Nt))&&a(Nt,bt,$[bt]);else x({target:L,proto:!0,forced:m||gt},$);return f&&!it||Nt[o]===q||a(Nt,o,q,{name:W}),u[L]=q,$}},1488:function(O,z,g){var x=g(7545),f=g(4500),l=g(9207),I=g(2760).f;O.exports=function(b){var w=x.Symbol||(x.Symbol={});f(w,b)||I(w,b,{value:l.f(b)})}},69:function(O,z,g){var x=g(6192);O.exports=!x(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(O,z,g){var x=g(8576),f=g(5744),l=x.document,I=f(l)&&f(l.createElement);O.exports=function(b){return I?l.createElement(b):{}}},7365:function(O){O.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8989:function(O,z,g){var x=g(150);O.exports=x("navigator","userAgent")||""},4218:function(O,z,g){var x,f,l=g(8576),I=g(8989),b=l.process,w=l.Deno,k=b&&b.versions||w&&w.version,j=k&&k.v8;j?f=(x=j.split("."))[0]<4?1:x[0]+x[1]:I&&(!(x=I.match(/Edge\/(\d+)/))||x[1]>=74)&&(x=I.match(/Chrome\/(\d+)/))&&(f=x[1]),O.exports=f&&+f},5607:function(O,z,g){var x=g(7545);O.exports=function(f){return x[f+"Prototype"]}},2952:function(O){O.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(O,z,g){"use strict";var x=g(8576),f=g(6447),l=g(5141).f,I=g(9245),b=g(7545),w=g(8043),k=g(8711),j=g(4500),p=function(a){var d=function(u,t,e){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(u);case 2:return new a(u,t)}return new a(u,t,e)}return a.apply(this,arguments)};return d.prototype=a.prototype,d};O.exports=function(a,d){var u,t,e,i,s,m,o,y,C=a.target,M=a.global,T=a.stat,D=a.proto,L=M?x:T?x[C]:(x[C]||{}).prototype,R=M?b:b[C]||k(b,C,{})[C],F=R.prototype;for(e in d)u=!I(M?e:C+(T?".":"#")+e,a.forced)&&L&&j(L,e),s=R[e],u&&(m=a.noTargetGet?(y=l(L,e))&&y.value:L[e]),i=u&&m?m:d[e],u&&typeof s==typeof i||(o=a.bind&&u?w(i,x):a.wrap&&u?p(i):D&&f(i)?w(Function.call,i):i,(a.sham||i&&i.sham||s&&s.sham)&&k(o,"sham",!0),k(R,e,o),D&&(j(b,t=C+"Prototype")||k(b,t,{}),k(b[t],e,i),a.real&&F&&!F[e]&&k(F,e,i)))}},6192:function(O){O.exports=function(z){try{return!!z()}catch(g){return!0}}},8043:function(O,z,g){var x=g(6235);O.exports=function(f,l,I){if(x(f),l===void 0)return f;switch(I){case 0:return function(){return f.call(l)};case 1:return function(b){return f.call(l,b)};case 2:return function(b,w){return f.call(l,b,w)};case 3:return function(b,w,k){return f.call(l,b,w,k)}}return function(){return f.apply(l,arguments)}}},6782:function(O,z,g){"use strict";var x=g(6235),f=g(5744),l=[].slice,I={},b=function(w,k,j){if(!(k in I)){for(var p=[],a=0;a<k;a++)p[a]="a["+a+"]";I[k]=Function("C,a","return new C("+p.join(",")+")")}return I[k](w,j)};O.exports=Function.bind||function(w){var k=x(this),j=l.call(arguments,1),p=function(){var a=j.concat(l.call(arguments));return this instanceof p?b(k,a.length,a):k.apply(w,a)};return f(k.prototype)&&(p.prototype=k.prototype),p}},2282:function(O,z,g){var x=g(69),f=g(4500),l=Function.prototype,I=x&&Object.getOwnPropertyDescriptor,b=f(l,"name"),w=b&&function(){}.name==="something",k=b&&(!x||x&&I(l,"name").configurable);O.exports={EXISTS:b,PROPER:w,CONFIGURABLE:k}},150:function(O,z,g){var x=g(7545),f=g(8576),l=g(6447),I=function(b){return l(b)?b:void 0};O.exports=function(b,w){return arguments.length<2?I(x[b])||I(f[b]):x[b]&&x[b][w]||f[b]&&f[b][w]}},5037:function(O,z,g){var x=g(6235);O.exports=function(f,l){var I=f[l];return I==null?void 0:x(I)}},8576:function(O,z,g){var x=function(f){return f&&f.Math==Math&&f};O.exports=x(typeof globalThis=="object"&&globalThis)||x(typeof window=="object"&&window)||x(typeof self=="object"&&self)||x(typeof g.g=="object"&&g.g)||function(){return this}()||Function("return this")()},4500:function(O,z,g){var x=g(1795),f={}.hasOwnProperty;O.exports=Object.hasOwn||function(l,I){return f.call(x(l),I)}},4535:function(O){O.exports={}},7403:function(O,z,g){var x=g(150);O.exports=x("document","documentElement")},188:function(O,z,g){var x=g(69),f=g(6192),l=g(7449);O.exports=!x&&!f(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(O,z,g){var x=g(6192),f=g(9272),l="".split;O.exports=x(function(){return!Object("z").propertyIsEnumerable(0)})?function(I){return f(I)=="String"?l.call(I,""):Object(I)}:Object},9516:function(O,z,g){var x=g(6447),f=g(6434),l=Function.toString;x(f.inspectSource)||(f.inspectSource=function(I){return l.call(I)}),O.exports=f.inspectSource},3326:function(O,z,g){var x,f,l,I=g(8921),b=g(8576),w=g(5744),k=g(8711),j=g(4500),p=g(6434),a=g(9766),d=g(4535),u="Object already initialized",t=b.WeakMap;if(I||p.state){var e=p.state||(p.state=new t),i=e.get,s=e.has,m=e.set;x=function(y,C){if(s.call(e,y))throw new TypeError(u);return C.facade=y,m.call(e,y,C),C},f=function(y){return i.call(e,y)||{}},l=function(y){return s.call(e,y)}}else{var o=a("state");d[o]=!0,x=function(y,C){if(j(y,o))throw new TypeError(u);return C.facade=y,k(y,o,C),C},f=function(y){return j(y,o)?y[o]:{}},l=function(y){return j(y,o)}}O.exports={set:x,get:f,has:l,enforce:function(y){return l(y)?f(y):x(y,{})},getterFor:function(y){return function(C){var M;if(!w(C)||(M=f(C)).type!==y)throw TypeError("Incompatible receiver, "+y+" required");return M}}}},4770:function(O,z,g){var x=g(9272);O.exports=Array.isArray||function(f){return x(f)=="Array"}},6447:function(O){O.exports=function(z){return typeof z=="function"}},2091:function(O,z,g){var x=g(6192),f=g(6447),l=g(4696),I=g(150),b=g(9516),w=[],k=I("Reflect","construct"),j=/^\s*(?:class|function)\b/,p=j.exec,a=!j.exec(function(){}),d=function(u){if(!f(u))return!1;try{return k(Object,w,u),!0}catch(t){return!1}};O.exports=!k||x(function(){var u;return d(d.call)||!d(Object)||!d(function(){u=!0})||u})?function(u){if(!f(u))return!1;switch(l(u)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return a||!!p.call(j,b(u))}:d},9245:function(O,z,g){var x=g(6192),f=g(6447),l=/#|\.prototype\./,I=function(p,a){var d=w[b(p)];return d==j||d!=k&&(f(a)?x(a):!!a)},b=I.normalize=function(p){return String(p).replace(l,".").toLowerCase()},w=I.data={},k=I.NATIVE="N",j=I.POLYFILL="P";O.exports=I},5744:function(O,z,g){var x=g(6447);O.exports=function(f){return typeof f=="object"?f!==null:x(f)}},5546:function(O){O.exports=!0},3236:function(O,z,g){var x=g(6447),f=g(150),l=g(615);O.exports=l?function(I){return typeof I=="symbol"}:function(I){var b=f("Symbol");return x(b)&&Object(I)instanceof b}},4413:function(O,z,g){"use strict";var x,f,l,I=g(6192),b=g(6447),w=g(2853),k=g(9341),j=g(9482),p=g(8182),a=g(5546),d=p("iterator"),u=!1;[].keys&&("next"in(l=[].keys())?(f=k(k(l)))!==Object.prototype&&(x=f):u=!0),x==null||I(function(){var t={};return x[d].call(t)!==t})?x={}:a&&(x=w(x)),b(x[d])||j(x,d,function(){return this}),O.exports={IteratorPrototype:x,BUGGY_SAFARI_ITERATORS:u}},7771:function(O){O.exports={}},4104:function(O,z,g){var x=g(8445);O.exports=function(f){return x(f.length)}},3045:function(O,z,g){var x=g(4218),f=g(6192);O.exports=!!Object.getOwnPropertySymbols&&!f(function(){var l=Symbol();return!String(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&x&&x<41})},8921:function(O,z,g){var x=g(8576),f=g(6447),l=g(9516),I=x.WeakMap;O.exports=f(I)&&/native code/.test(l(I))},2853:function(O,z,g){var x,f=g(1138),l=g(1187),I=g(2952),b=g(4535),w=g(7403),k=g(7449),j=g(9766)("IE_PROTO"),p=function(){},a=function(t){return"<script>"+t+"<\/script>"},d=function(t){t.write(a("")),t.close();var e=t.parentWindow.Object;return t=null,e},u=function(){try{x=new ActiveXObject("htmlfile")}catch(s){}var t,e;u=typeof document!="undefined"?document.domain&&x?d(x):((e=k("iframe")).style.display="none",w.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write(a("document.F=Object")),t.close(),t.F):d(x);for(var i=I.length;i--;)delete u.prototype[I[i]];return u()};b[j]=!0,O.exports=Object.create||function(t,e){var i;return t!==null?(p.prototype=f(t),i=new p,p.prototype=null,i[j]=t):i=u(),e===void 0?i:l(i,e)}},1187:function(O,z,g){var x=g(69),f=g(2760),l=g(1138),I=g(7653);O.exports=x?Object.defineProperties:function(b,w){l(b);for(var k,j=I(w),p=j.length,a=0;p>a;)f.f(b,k=j[a++],w[k]);return b}},2760:function(O,z,g){var x=g(69),f=g(188),l=g(1138),I=g(77),b=Object.defineProperty;z.f=x?b:function(w,k,j){if(l(w),k=I(k),l(j),f)try{return b(w,k,j)}catch(p){}if("get"in j||"set"in j)throw TypeError("Accessors not supported");return"value"in j&&(w[k]=j.value),w}},5141:function(O,z,g){var x=g(69),f=g(6007),l=g(774),I=g(101),b=g(77),w=g(4500),k=g(188),j=Object.getOwnPropertyDescriptor;z.f=x?j:function(p,a){if(p=I(p),a=b(a),k)try{return j(p,a)}catch(d){}if(w(p,a))return l(!f.f.call(p,a),p[a])}},4052:function(O,z,g){var x=g(101),f=g(2092).f,l={}.toString,I=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];O.exports.f=function(b){return I&&l.call(b)=="[object Window]"?function(w){try{return f(w)}catch(k){return I.slice()}}(b):f(x(b))}},2092:function(O,z,g){var x=g(7934),f=g(2952).concat("length","prototype");z.f=Object.getOwnPropertyNames||function(l){return x(l,f)}},4750:function(O,z){z.f=Object.getOwnPropertySymbols},9341:function(O,z,g){var x=g(4500),f=g(6447),l=g(1795),I=g(9766),b=g(4635),w=I("IE_PROTO"),k=Object.prototype;O.exports=b?Object.getPrototypeOf:function(j){var p=l(j);if(x(p,w))return p[w];var a=p.constructor;return f(a)&&p instanceof a?a.prototype:p instanceof Object?k:null}},7934:function(O,z,g){var x=g(4500),f=g(101),l=g(8180).indexOf,I=g(4535);O.exports=function(b,w){var k,j=f(b),p=0,a=[];for(k in j)!x(I,k)&&x(j,k)&&a.push(k);for(;w.length>p;)x(j,k=w[p++])&&(~l(a,k)||a.push(k));return a}},7653:function(O,z,g){var x=g(7934),f=g(2952);O.exports=Object.keys||function(l){return x(l,f)}},6007:function(O,z){"use strict";var g={}.propertyIsEnumerable,x=Object.getOwnPropertyDescriptor,f=x&&!g.call({1:2},1);z.f=f?function(l){var I=x(this,l);return!!I&&I.enumerable}:g},4469:function(O,z,g){var x=g(1138),f=g(7757);O.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l,I=!1,b={};try{(l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(b,[]),I=b instanceof Array}catch(w){}return function(w,k){return x(w),f(k),I?l.call(w,k):w.__proto__=k,w}}():void 0)},158:function(O,z,g){"use strict";var x=g(3471),f=g(4696);O.exports=x?{}.toString:function(){return"[object "+f(this)+"]"}},380:function(O,z,g){var x=g(6447),f=g(5744);O.exports=function(l,I){var b,w;if(I==="string"&&x(b=l.toString)&&!f(w=b.call(l))||x(b=l.valueOf)&&!f(w=b.call(l))||I!=="string"&&x(b=l.toString)&&!f(w=b.call(l)))return w;throw TypeError("Can't convert object to primitive value")}},3011:function(O,z,g){var x=g(150),f=g(2092),l=g(4750),I=g(1138);O.exports=x("Reflect","ownKeys")||function(b){var w=f.f(I(b)),k=l.f;return k?w.concat(k(b)):w}},7545:function(O){O.exports={}},9482:function(O,z,g){var x=g(8711);O.exports=function(f,l,I,b){b&&b.enumerable?f[l]=I:x(f,l,I)}},3209:function(O){O.exports=function(z){if(z==null)throw TypeError("Can't call method on "+z);return z}},7613:function(O,z,g){var x=g(8576);O.exports=function(f,l){try{Object.defineProperty(x,f,{value:l,configurable:!0,writable:!0})}catch(I){x[f]=l}return l}},1284:function(O,z,g){var x=g(3471),f=g(2760).f,l=g(8711),I=g(4500),b=g(158),w=g(8182)("toStringTag");O.exports=function(k,j,p,a){if(k){var d=p?k:k.prototype;I(d,w)||f(d,w,{configurable:!0,value:j}),a&&!x&&l(d,"toString",b)}}},9766:function(O,z,g){var x=g(8717),f=g(2759),l=x("keys");O.exports=function(I){return l[I]||(l[I]=f(I))}},6434:function(O,z,g){var x=g(8576),f=g(7613),l="__core-js_shared__",I=x[l]||f(l,{});O.exports=I},8717:function(O,z,g){var x=g(5546),f=g(6434);(O.exports=function(l,I){return f[l]||(f[l]=I!==void 0?I:{})})("versions",[]).push({version:"3.18.2",mode:x?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},863:function(O,z,g){var x=g(1941),f=g(4845),l=g(3209),I=function(b){return function(w,k){var j,p,a=f(l(w)),d=x(k),u=a.length;return d<0||d>=u?b?"":void 0:(j=a.charCodeAt(d))<55296||j>56319||d+1===u||(p=a.charCodeAt(d+1))<56320||p>57343?b?a.charAt(d):j:b?a.slice(d,d+2):p-56320+(j-55296<<10)+65536}};O.exports={codeAt:I(!1),charAt:I(!0)}},7739:function(O,z,g){var x=g(1941),f=Math.max,l=Math.min;O.exports=function(I,b){var w=x(I);return w<0?f(w+b,0):l(w,b)}},101:function(O,z,g){var x=g(2202),f=g(3209);O.exports=function(l){return x(f(l))}},1941:function(O){var z=Math.ceil,g=Math.floor;O.exports=function(x){var f=+x;return f!=f||f===0?0:(f>0?g:z)(f)}},8445:function(O,z,g){var x=g(1941),f=Math.min;O.exports=function(l){return l>0?f(x(l),9007199254740991):0}},1795:function(O,z,g){var x=g(3209);O.exports=function(f){return Object(x(f))}},7888:function(O,z,g){var x=g(5744),f=g(3236),l=g(5037),I=g(380),b=g(8182)("toPrimitive");O.exports=function(w,k){if(!x(w)||f(w))return w;var j,p=l(w,b);if(p){if(k===void 0&&(k="default"),j=p.call(w,k),!x(j)||f(j))return j;throw TypeError("Can't convert object to primitive value")}return k===void 0&&(k="number"),I(w,k)}},77:function(O,z,g){var x=g(7888),f=g(3236);O.exports=function(l){var I=x(l,"string");return f(I)?I:String(I)}},3471:function(O,z,g){var x={};x[g(8182)("toStringTag")]="z",O.exports=String(x)==="[object z]"},4845:function(O,z,g){var x=g(4696);O.exports=function(f){if(x(f)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(f)}},9288:function(O){O.exports=function(z){try{return String(z)}catch(g){return"Object"}}},2759:function(O){var z=0,g=Math.random();O.exports=function(x){return"Symbol("+String(x===void 0?"":x)+")_"+(++z+g).toString(36)}},615:function(O,z,g){var x=g(3045);O.exports=x&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(O,z,g){var x=g(8182);z.f=x},8182:function(O,z,g){var x=g(8576),f=g(8717),l=g(4500),I=g(2759),b=g(3045),w=g(615),k=f("wks"),j=x.Symbol,p=w?j:j&&j.withoutSetter||I;O.exports=function(a){return l(k,a)&&(b||typeof k[a]=="string")||(b&&l(j,a)?k[a]=j[a]:k[a]=p("Symbol."+a)),k[a]}},9106:function(O,z,g){"use strict";var x=g(3085),f=g(6192),l=g(4770),I=g(5744),b=g(1795),w=g(4104),k=g(9361),j=g(1321),p=g(242),a=g(8182),d=g(4218),u=a("isConcatSpreadable"),t=9007199254740991,e="Maximum allowed index exceeded",i=d>=51||!f(function(){var o=[];return o[u]=!1,o.concat()[0]!==o}),s=p("concat"),m=function(o){if(!I(o))return!1;var y=o[u];return y!==void 0?!!y:l(o)};x({target:"Array",proto:!0,forced:!i||!s},{concat:function(o){var y,C,M,T,D,L=b(this),R=j(L,0),F=0;for(y=-1,M=arguments.length;y<M;y++)if(m(D=y===-1?L:arguments[y])){if(F+(T=w(D))>t)throw TypeError(e);for(C=0;C<T;C++,F++)C in D&&k(R,F,D[C])}else{if(F>=t)throw TypeError(e);k(R,F++,D)}return R.length=F,R}})},3436:function(O,z,g){"use strict";var x=g(3085),f=g(454).filter;x({target:"Array",proto:!0,forced:!g(242)("filter")},{filter:function(l){return f(this,l,arguments.length>1?arguments[1]:void 0)}})},8939:function(O,z,g){"use strict";var x=g(101),f=g(7423),l=g(7771),I=g(3326),b=g(7218),w="Array Iterator",k=I.set,j=I.getterFor(w);O.exports=b(Array,"Array",function(p,a){k(this,{type:w,target:x(p),index:0,kind:a})},function(){var p=j(this),a=p.target,d=p.kind,u=p.index++;return!a||u>=a.length?(p.target=void 0,{value:void 0,done:!0}):d=="keys"?{value:u,done:!1}:d=="values"?{value:a[u],done:!1}:{value:[u,a[u]],done:!1}},"values"),l.Arguments=l.Array,f("keys"),f("values"),f("entries")},5818:function(O,z,g){"use strict";var x=g(3085),f=g(4770),l=g(2091),I=g(5744),b=g(7739),w=g(4104),k=g(101),j=g(9361),p=g(8182),a=g(242)("slice"),d=p("species"),u=[].slice,t=Math.max;x({target:"Array",proto:!0,forced:!a},{slice:function(e,i){var s,m,o,y=k(this),C=w(y),M=b(e,C),T=b(i===void 0?C:i,C);if(f(y)&&(s=y.constructor,(l(s)&&(s===Array||f(s.prototype))||I(s)&&(s=s[d])===null)&&(s=void 0),s===Array||s===void 0))return u.call(y,M,T);for(m=new(s===void 0?Array:s)(t(T-M,0)),o=0;M<T;M++,o++)M in y&&j(m,o,y[M]);return m.length=o,m}})},8671:function(O,z,g){var x=g(8576);g(1284)(x.JSON,"JSON",!0)},8556:function(){},3113:function(O,z,g){g(3085)({target:"Object",stat:!0,sham:!g(69)},{create:g(2853)})},297:function(O,z,g){var x=g(3085),f=g(69);x({target:"Object",stat:!0,forced:!f,sham:!f},{defineProperty:g(2760).f})},9189:function(O,z,g){var x=g(3085),f=g(6192),l=g(101),I=g(5141).f,b=g(69),w=f(function(){I(1)});x({target:"Object",stat:!0,forced:!b||w,sham:!b},{getOwnPropertyDescriptor:function(k,j){return I(l(k),j)}})},2509:function(O,z,g){var x=g(3085),f=g(69),l=g(3011),I=g(101),b=g(5141),w=g(9361);x({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(k){for(var j,p,a=I(k),d=b.f,u=l(a),t={},e=0;u.length>e;)(p=d(a,j=u[e++]))!==void 0&&w(t,j,p);return t}})},9234:function(O,z,g){var x=g(3085),f=g(6192),l=g(1795),I=g(9341),b=g(4635);x({target:"Object",stat:!0,forced:f(function(){I(1)}),sham:!b},{getPrototypeOf:function(w){return I(l(w))}})},2647:function(O,z,g){var x=g(3085),f=g(1795),l=g(7653);x({target:"Object",stat:!0,forced:g(6192)(function(){l(1)})},{keys:function(I){return l(f(I))}})},3222:function(O,z,g){g(3085)({target:"Object",stat:!0},{setPrototypeOf:g(4469)})},6663:function(){},5397:function(O,z,g){var x=g(3085),f=g(150),l=g(1404),I=g(1138),b=g(5744),w=g(2853),k=g(6782),j=g(6192),p=f("Reflect","construct"),a=j(function(){function t(){}return!(p(function(){},[],t)instanceof t)}),d=!j(function(){p(function(){})}),u=a||d;x({target:"Reflect",stat:!0,forced:u,sham:u},{construct:function(t,e){l(t),I(e);var i=arguments.length<3?t:l(arguments[2]);if(d&&!a)return p(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var s=[null];return s.push.apply(s,e),new(k.apply(t,s))}var m=i.prototype,o=w(b(m)?m:Object.prototype),y=Function.apply.call(t,o,e);return b(y)?y:o}})},1367:function(){},5454:function(O,z,g){"use strict";var x=g(863).charAt,f=g(4845),l=g(3326),I=g(7218),b="String Iterator",w=l.set,k=l.getterFor(b);I(String,"String",function(j){w(this,{type:b,string:f(j),index:0})},function(){var j,p=k(this),a=p.string,d=p.index;return d>=a.length?{value:void 0,done:!0}:(j=x(a,d),p.index+=j.length,{value:j,done:!1})})},9781:function(O,z,g){g(1488)("asyncIterator")},492:function(){},6681:function(O,z,g){g(1488)("hasInstance")},9594:function(O,z,g){g(1488)("isConcatSpreadable")},3665:function(O,z,g){g(1488)("iterator")},6187:function(O,z,g){"use strict";var x=g(3085),f=g(8576),l=g(150),I=g(5546),b=g(69),w=g(3045),k=g(6192),j=g(4500),p=g(4770),a=g(6447),d=g(5744),u=g(3236),t=g(1138),e=g(1795),i=g(101),s=g(77),m=g(4845),o=g(774),y=g(2853),C=g(7653),M=g(2092),T=g(4052),D=g(4750),L=g(5141),R=g(2760),F=g(6007),W=g(9482),ot=g(8717),it=g(9766),Mt=g(4535),$=g(2759),bt=g(8182),U=g(9207),jt=g(1488),gt=g(1284),Nt=g(3326),V=g(454).forEach,q=it("hidden"),Q="Symbol",G=bt("toPrimitive"),rt=Nt.set,H=Nt.getterFor(Q),Y=Object.prototype,X=f.Symbol,Z=l("JSON","stringify"),yt=L.f,ht=R.f,It=T.f,Tt=F.f,xt=ot("symbols"),st=ot("op-symbols"),K=ot("string-to-symbol-registry"),et=ot("symbol-to-string-registry"),ct=ot("wks"),ft=f.QObject,Ct=!ft||!ft.prototype||!ft.prototype.findChild,Pt=b&&k(function(){return y(ht({},"a",{get:function(){return ht(this,"a",{value:7}).a}})).a!=7})?function(Wt,Gt,$t){var ne=yt(Y,Gt);ne&&delete Y[Gt],ht(Wt,Gt,$t),ne&&Wt!==Y&&ht(Y,Gt,ne)}:ht,Zt=function(Wt,Gt){var $t=xt[Wt]=y(X.prototype);return rt($t,{type:Q,tag:Wt,description:Gt}),b||($t.description=Gt),$t},Xt=function(Wt,Gt,$t){Wt===Y&&Xt(st,Gt,$t),t(Wt);var ne=s(Gt);return t($t),j(xt,ne)?($t.enumerable?(j(Wt,q)&&Wt[q][ne]&&(Wt[q][ne]=!1),$t=y($t,{enumerable:o(0,!1)})):(j(Wt,q)||ht(Wt,q,o(1,{})),Wt[q][ne]=!0),Pt(Wt,ne,$t)):ht(Wt,ne,$t)},St=function(Wt,Gt){t(Wt);var $t=i(Gt),ne=C($t).concat(ve($t));return V(ne,function(ce){b&&!Jt.call($t,ce)||Xt(Wt,ce,$t[ce])}),Wt},Jt=function(Wt){var Gt=s(Wt),$t=Tt.call(this,Gt);return!(this===Y&&j(xt,Gt)&&!j(st,Gt))&&(!($t||!j(this,Gt)||!j(xt,Gt)||j(this,q)&&this[q][Gt])||$t)},Kt=function(Wt,Gt){var $t=i(Wt),ne=s(Gt);if($t!==Y||!j(xt,ne)||j(st,ne)){var ce=yt($t,ne);return!ce||!j(xt,ne)||j($t,q)&&$t[q][ne]||(ce.enumerable=!0),ce}},ae=function(Wt){var Gt=It(i(Wt)),$t=[];return V(Gt,function(ne){j(xt,ne)||j(Mt,ne)||$t.push(ne)}),$t},ve=function(Wt){var Gt=Wt===Y,$t=It(Gt?st:i(Wt)),ne=[];return V($t,function(ce){!j(xt,ce)||Gt&&!j(Y,ce)||ne.push(xt[ce])}),ne};if(w||(X=function(){if(this instanceof X)throw TypeError("Symbol is not a constructor");var Wt=arguments.length&&arguments[0]!==void 0?m(arguments[0]):void 0,Gt=$(Wt),$t=function(ne){this===Y&&$t.call(st,ne),j(this,q)&&j(this[q],Gt)&&(this[q][Gt]=!1),Pt(this,Gt,o(1,ne))};return b&&Ct&&Pt(Y,Gt,{configurable:!0,set:$t}),Zt(Gt,Wt)},W(X.prototype,"toString",function(){return H(this).tag}),W(X,"withoutSetter",function(Wt){return Zt($(Wt),Wt)}),F.f=Jt,R.f=Xt,L.f=Kt,M.f=T.f=ae,D.f=ve,U.f=function(Wt){return Zt(bt(Wt),Wt)},b&&(ht(X.prototype,"description",{configurable:!0,get:function(){return H(this).description}}),I||W(Y,"propertyIsEnumerable",Jt,{unsafe:!0}))),x({global:!0,wrap:!0,forced:!w,sham:!w},{Symbol:X}),V(C(ct),function(Wt){jt(Wt)}),x({target:Q,stat:!0,forced:!w},{for:function(Wt){var Gt=m(Wt);if(j(K,Gt))return K[Gt];var $t=X(Gt);return K[Gt]=$t,et[$t]=Gt,$t},keyFor:function(Wt){if(!u(Wt))throw TypeError(Wt+" is not a symbol");if(j(et,Wt))return et[Wt]},useSetter:function(){Ct=!0},useSimple:function(){Ct=!1}}),x({target:"Object",stat:!0,forced:!w,sham:!b},{create:function(Wt,Gt){return Gt===void 0?y(Wt):St(y(Wt),Gt)},defineProperty:Xt,defineProperties:St,getOwnPropertyDescriptor:Kt}),x({target:"Object",stat:!0,forced:!w},{getOwnPropertyNames:ae,getOwnPropertySymbols:ve}),x({target:"Object",stat:!0,forced:k(function(){D.f(1)})},{getOwnPropertySymbols:function(Wt){return D.f(e(Wt))}}),Z&&x({target:"JSON",stat:!0,forced:!w||k(function(){var Wt=X();return Z([Wt])!="[null]"||Z({a:Wt})!="{}"||Z(Object(Wt))!="{}"})},{stringify:function(Wt,Gt,$t){for(var ne,ce=[Wt],wt=1;arguments.length>wt;)ce.push(arguments[wt++]);if(ne=Gt,(d(Gt)||Wt!==void 0)&&!u(Wt))return p(Gt)||(Gt=function(_t,Ut){if(a(ne)&&(Ut=ne.call(this,_t,Ut)),!u(Ut))return Ut}),ce[1]=Gt,Z.apply(null,ce)}}),!X.prototype[G]){var ue=X.prototype.valueOf;W(X.prototype,G,function(){return ue.apply(this,arguments)})}gt(X,Q),Mt[q]=!0},1250:function(O,z,g){g(1488)("matchAll")},9017:function(O,z,g){g(1488)("match")},9786:function(O,z,g){g(1488)("replace")},503:function(O,z,g){g(1488)("search")},6565:function(O,z,g){g(1488)("species")},9322:function(O,z,g){g(1488)("split")},3610:function(O,z,g){g(1488)("toPrimitive")},6886:function(O,z,g){g(1488)("toStringTag")},3514:function(O,z,g){g(1488)("unscopables")},177:function(O,z,g){g(1488)("asyncDispose")},9031:function(O,z,g){g(1488)("dispose")},6658:function(O,z,g){g(1488)("matcher")},1875:function(O,z,g){g(1488)("metadata")},8658:function(O,z,g){g(1488)("observable")},4592:function(O,z,g){g(1488)("patternMatch")},6680:function(O,z,g){g(1488)("replaceAll")},162:function(O,z,g){g(8939);var x=g(7365),f=g(8576),l=g(4696),I=g(8711),b=g(7771),w=g(8182)("toStringTag");for(var k in x){var j=f[k],p=j&&j.prototype;p&&l(p)!==w&&I(p,w,k),b[k]=b.Array}},4877:function(O,z,g){var x=g(1484);O.exports=x},5603:function(O,z,g){var x=g(3669);O.exports=x},4741:function(O,z,g){var x=g(7663);O.exports=x},4963:function(O,z,g){var x=g(3213);O.exports=x},7820:function(O,z,g){var x=g(3512);O.exports=x},4194:function(O,z,g){var x=g(632);O.exports=x},2854:function(O,z,g){var x=g(1056);O.exports=x},2:function(O,z,g){var x=g(2921);O.exports=x},8980:function(O,z,g){var x=g(8168);O.exports=x},5636:function(O,z,g){var x=g(8651);O.exports=x},6672:function(O,z,g){var x=g(3083);O.exports=x},5279:function(O,z,g){var x=g(6577);O.exports=x},2285:function(O,z,g){var x=g(5008);g(162),O.exports=x},8535:function(O,z,g){var x=g(994);g(162),O.exports=x}},dt={};function at(O){var z=dt[O];if(z!==void 0)return z.exports;var g=dt[O]={exports:{}};return tt[O](g,g.exports,at),g.exports}at.n=function(O){var z=O&&O.__esModule?function(){return O.default}:function(){return O};return at.d(z,{a:z}),z},at.d=function(O,z){for(var g in z)at.o(z,g)&&!at.o(O,g)&&Object.defineProperty(O,g,{enumerable:!0,get:z[g]})},at.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(O){if(typeof window=="object")return window}}(),at.o=function(O,z){return Object.prototype.hasOwnProperty.call(O,z)},at.r=function(O){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})};var mt={};(function(){"use strict";at.r(mt),at.d(mt,{default:function(){return U}});var O=at(9146),z=at.n(O),g=at(651),x=at.n(g),f=at(7870),l=at.n(f),I=at(7601),b=at.n(I);function w(jt,gt){if(!(jt instanceof gt))throw new TypeError("Cannot call a class as a function")}var k=at(7077);function j(jt,gt){for(var Nt=0;Nt<gt.length;Nt++){var V=gt[Nt];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),k(jt,V.key,V)}}function p(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}var a=at(6623),d=at(4230);function u(jt,gt){return u=d||function(Nt,V){return Nt.__proto__=V,Nt},u(jt,gt)}var t=at(184),e=at(3742);function i(jt){return i=typeof t=="function"&&typeof e=="symbol"?function(gt){return typeof gt}:function(gt){return gt&&typeof t=="function"&&gt.constructor===t&&gt!==t.prototype?"symbol":typeof gt},i(jt)}function s(jt,gt){if(gt&&(i(gt)==="object"||typeof gt=="function"))return gt;if(gt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(jt)}var m=at(9856);function o(jt){return o=d?m:function(gt){return gt.__proto__||m(gt)},o(jt)}function y(jt,gt,Nt){return gt in jt?k(jt,gt,{value:Nt,enumerable:!0,configurable:!0,writable:!0}):jt[gt]=Nt,jt}var C=at(9406),M=at.n(C),T=at(381),D=at.n(T),L=at(2461),R=at.n(L),F=at(8005),W=at.n(F),ot=Rt(67294),it=at.n(ot),Mt=Rt(8618),$=at.n(Mt);function bt(jt,gt){var Nt=R()(jt);if(x()){var V=x()(jt);gt&&(V=D()(V).call(V,function(q){return l()(jt,q).enumerable})),Nt.push.apply(Nt,V)}return Nt}var U=function(jt){(function(rt,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");rt.prototype=a(H&&H.prototype,{constructor:{value:rt,writable:!0,configurable:!0}}),H&&u(rt,H)})(G,jt);var gt,Nt,V,q,Q=(V=G,q=function(){if(typeof Reflect=="undefined"||!z()||z().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(z()(Boolean,[],function(){})),!0}catch(rt){return!1}}(),function(){var rt,H=o(V);if(q){var Y=o(this).constructor;rt=z()(H,arguments,Y)}else rt=H.apply(this,arguments);return s(this,rt)});function G(){var rt,H;w(this,G);for(var Y=arguments.length,X=new Array(Y),Z=0;Z<Y;Z++)X[Z]=arguments[Z];return y(p(H=Q.call.apply(Q,M()(rt=[this]).call(rt,X))),"rootEl",it().createRef()),y(p(H),"imageEditorInst",null),H}return gt=G,Nt=[{key:"componentDidMount",value:function(){this.imageEditorInst=new($())(this.rootEl.current,function(rt){for(var H=1;H<arguments.length;H++){var Y=arguments[H]!=null?arguments[H]:{};H%2?bt(Object(Y),!0).forEach(function(X){y(rt,X,Y[X])}):b()?Object.defineProperties(rt,b()(Y)):bt(Object(Y)).forEach(function(X){Object.defineProperty(rt,X,l()(Y,X))})}return rt}({},this.props)),this.bindEventHandlers(this.props)}},{key:"componentWillUnmount",value:function(){this.unbindEventHandlers(),this.imageEditorInst.destroy(),this.imageEditorInst=null}},{key:"shouldComponentUpdate",value:function(rt){return this.bindEventHandlers(this.props,rt),!1}},{key:"getInstance",value:function(){return this.imageEditorInst}},{key:"getRootElement",value:function(){return this.rootEl.current}},{key:"bindEventHandlers",value:function(rt,H){var Y,X=this;D()(Y=R()(rt)).call(Y,this.isEventHandlerKeys).forEach(function(Z){var yt=Z[2].toLowerCase()+W()(Z).call(Z,3);H&&H[Z]!==rt[Z]&&X.imageEditorInst.off(yt),X.imageEditorInst.on(yt,rt[Z])})}},{key:"unbindEventHandlers",value:function(){var rt,H=this;D()(rt=R()(this.props)).call(rt,this.isEventHandlerKeys).forEach(function(Y){var X=Y[2].toLowerCase()+W()(Y).call(Y,3);H.imageEditorInst.off(X)})}},{key:"isEventHandlerKeys",value:function(rt){return/on[A-Z][a-zA-Z]+/.test(rt)}},{key:"render",value:function(){return it().createElement("div",{ref:this.rootEl})}}],Nt&&j(gt.prototype,Nt),G}(it().Component)})(),Ne.exports=mt})()},88606:function(Ne,At,Rt){"use strict";Rt.r(At),Rt.d(At,{default:function(){return R}});var tt=Rt(97857),dt=Rt.n(tt),at=Rt(5574),mt=Rt.n(at),O=Rt(68400),z=Rt.n(O),g=Rt(80854),x=Rt(11774),f=Rt(85322),l=Rt(67294),I=Rt(85893),b,w=function(W){return(0,I.jsx)(x._z,dt()(dt()({},W),{},{children:(0,I.jsx)(f.Z,{children:W.children})}))},k=(0,g.styled)(w)(b||(b=z()([`
  .tui-image-editor-menu {
    background-color: `,`;
  }
  .tui-image-editor-container {
    .tui-image-editor-main-container {
      .tui-image-editor-submenu-style {
        background-color: `,` !important;
      }
      .tui-image-editor-header-logo,
      .tui-image-editor-header-buttons {
        display: none;
      }
      background-image: `,`;
    }
    .tui-image-editor-menu > .tui-image-editor-item.active,
    .tui-image-editor-help-menu > .tui-image-editor-item.active {
      background-color: `,`;
      use .normal,
      .active,
      .hover {
        fill: #fff !important;
        stroke: #fff !important;
      }
    }
  }
`])),function(F){return F.theme==="light"?"#fff":"inherit"},function(F){return F.theme==="light"?"#ccc":"#1e1e1e"},function(F){return F.theme==="light"?"url(".concat(Rt(95878),") !important;"):"none"},function(F){return F.primary}),j=k,p={Load:"\u52A0\u8F7D\u56FE\u7247",Download:"\u4E0B\u8F7D\u56FE\u7247",ZoomIn:"\u653E\u5927",ZoomOut:"\u7F29\u5C0F",Hand:"\u624B\u638C",History:"\u5386\u53F2",Resize:"\u8C03\u6574\u5BBD\u9AD8",Crop:"\u88C1\u526A",DeleteAll:"\u5168\u90E8\u5220\u9664",Delete:"\u5220\u9664",Undo:"\u64A4\u9500",Redo:"\u91CD\u505A",Reset:"\u91CD\u7F6E",Flip:"\u955C\u50CF",Rotate:"\u65CB\u8F6C",Draw:"\u7ED8\u5236",Shape:"\u5F62\u72B6\u6807\u6CE8",Icon:"\u56FE\u6807\u6807\u6CE8",Text:"\u6587\u5B57\u6807\u6CE8",Mask:"\u906E\u7F69",Filter:"\u6EE4\u955C",Bold:"\u52A0\u7C97",Italic:"\u659C\u4F53",Underline:"\u4E0B\u5212\u7EBF",Left:"\u5DE6\u5BF9\u9F50",Center:"\u5C45\u4E2D",Right:"\u53F3\u5BF9\u9F50",Color:"\u989C\u8272","Text size":"\u5B57\u4F53\u5927\u5C0F",Custom:"\u81EA\u5B9A\u4E49",Square:"\u6B63\u65B9\u5F62",Apply:"\u5E94\u7528",Cancel:"\u53D6\u6D88","Flip X":"\u6C34\u5E73\u7FFB\u8F6C","Flip Y":"\u5782\u76F4\u7FFB\u8F6C",Range:"\u533A\u95F4",Stroke:"\u63CF\u8FB9",Fill:"\u586B\u5145",Circle:"\u5706",Triangle:"\u4E09\u89D2",Rectangle:"\u77E9\u5F62",Free:"\u66F2\u7EBF",Straight:"\u76F4\u7EBF",Arrow:"\u7BAD\u5934","Arrow-2":"\u7BAD\u59342","Arrow-3":"\u7BAD\u59343","Star-1":"\u661F\u661F1","Star-2":"\u661F\u661F2",Polygon:"\u591A\u8FB9\u5F62",Location:"\u5B9A\u4F4D",Heart:"\u5FC3\u5F62",Bubble:"\u6C14\u6CE1","Custom icon":"\u81EA\u5B9A\u4E49\u56FE\u6807","Load Mask Image":"\u52A0\u8F7D\u8499\u5C42\u56FE\u7247",Grayscale:"\u7070\u5EA6",Blur:"\u6A21\u7CCA",Sharpen:"\u9510\u5316",Emboss:"\u6D6E\u96D5","Remove White":"\u9664\u53BB\u767D\u8272",Distance:"\u8DDD\u79BB",Brightness:"\u4EAE\u5EA6",Noise:"\u566A\u97F3","Color Filter":"\u5F69\u8272\u6EE4\u955C",Sepia:"\u68D5\u8272",Sepia2:"\u68D5\u82722",Invert:"\u8D1F\u7247",Pixelate:"\u50CF\u7D20\u5316",Threshold:"\u9608\u503C",Tint:"\u8272\u8C03",Multiply:"\u6B63\u7247\u53E0\u5E95",Blend:"\u6DF7\u5408\u8272",Width:"\u5BBD\u5EA6",Height:"\u9AD8\u5EA6","Lock Aspect Ratio":"\u9501\u5B9A\u5BBD\u9AD8\u6BD4\u4F8B","Double Click":"\u53CC\u51FB\u6B64\u5904\u6DFB\u52A0"},a=p,d=Rt(88484),u=Rt(69753),t=Rt(80262),e=Rt.n(t),i=Rt(9361),s=Rt(45360),m=Rt(42075),o=Rt(82922),y=Rt(71577),C=Rt(33729),M=Rt.n(C),T={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},D="";function L(){var F,W=(0,g.useModel)("@@initialState"),ot=W.initialState,it=i.Z.useToken(),Mt=it.token,$=s.ZP.useMessage(),bt=mt()($,2),U=bt[0],jt=bt[1],gt=(0,l.useRef)(),Nt=function(Q){if(!Q.type.startsWith("image"))U.error((0,I.jsx)(g.FormattedMessage,{id:"page.image.edit.format.error"}));else{var G=gt.current.getInstance();Q.uid!==D&&G.getActions().main.load(Q),D=Q.uid}return!1},V=function(){var Q=gt.current.getInstance();M()(Q.toDataURL())};return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(j,{theme:ot==null||(F=ot.settings)===null||F===void 0?void 0:F.navTheme,primary:Mt.colorPrimary,children:[(0,I.jsx)(m.Z,{style:{marginBottom:Mt.margin},children:(0,I.jsxs)(I.Fragment,{children:[jt,(0,I.jsx)(o.Z,{accept:"image/*",multiple:!1,showUploadList:!1,maxCount:1,beforeUpload:Nt,children:(0,I.jsxs)(y.ZP,{icon:(0,I.jsx)(d.Z,{}),children:["",(0,I.jsx)(g.FormattedMessage,{id:"page.image.edit.upload"})]})}),(0,I.jsxs)(y.ZP,{icon:(0,I.jsx)(u.Z,{}),onClick:V,children:["",(0,I.jsx)(g.FormattedMessage,{id:"page.image.edit.download"})]})]})}),(0,I.jsx)(e(),{ref:gt,includeUI:{theme:dt()(dt()({},T),{},{"common.bi.image":""}),locale:(0,g.getLocale)()==="zh-CN"?a:{},menuBarPosition:"bottom",uiSize:{width:"100%",height:"500px"}},usageStatistics:!1})]})})}var R=L},33729:function(Ne,At){var Rt,tt,dt;(function(at,mt){tt=[],Rt=mt,dt=typeof Rt=="function"?Rt.apply(At,tt):Rt,dt!==void 0&&(Ne.exports=dt)})(this,function(){return function at(mt,O,z){var g=window,x="application/octet-stream",f=z||x,l=mt,I=!O&&!z&&l,b=document.createElement("a"),w=function(m){return String(m)},k=g.Blob||g.MozBlob||g.WebKitBlob||w,j=O||"download",p,a;if(k=k.call?k.bind(g):Blob,String(this)==="true"&&(l=[l,f],f=l[0],l=l[1]),I&&I.length<2048&&(j=I.split("/").pop().split("?")[0],b.href=I,b.href.indexOf(I)!==-1)){var d=new XMLHttpRequest;return d.open("GET",I,!0),d.responseType="blob",d.onload=function(m){at(m.target.response,j,x)},setTimeout(function(){d.send()},0),d}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l))if(l.length>1024*1024*1.999&&k!==w)l=i(l),f=l.type||x;else return navigator.msSaveBlob?navigator.msSaveBlob(i(l),j):s(l);else if(/([\x80-\xff])/.test(l)){var u=0,t=new Uint8Array(l.length),e=t.length;for(u;u<e;++u)t[u]=l.charCodeAt(u);l=new k([t],{type:f})}p=l instanceof k?l:new k([l],{type:f});function i(m){var o=m.split(/[:;,]/),y=o[1],C=o[2]=="base64"?atob:decodeURIComponent,M=C(o.pop()),T=M.length,D=0,L=new Uint8Array(T);for(D;D<T;++D)L[D]=M.charCodeAt(D);return new k([L],{type:y})}function s(m,o){if("download"in b)return b.href=m,b.setAttribute("download",j),b.className="download-js-link",b.innerHTML="downloading...",b.style.display="none",document.body.appendChild(b),setTimeout(function(){b.click(),document.body.removeChild(b),o===!0&&setTimeout(function(){g.URL.revokeObjectURL(b.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(m)&&(m="data:"+m.replace(/^data:([\w\/\-\+]+)/,x)),window.open(m)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=m),!0;var y=document.createElement("iframe");document.body.appendChild(y),!o&&/^data:/.test(m)&&(m="data:"+m.replace(/^data:([\w\/\-\+]+)/,x)),y.src=m,setTimeout(function(){document.body.removeChild(y)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(p,j);if(g.URL)s(g.URL.createObjectURL(p),!0);else{if(typeof p=="string"||p.constructor===w)try{return s("data:"+f+";base64,"+g.btoa(p))}catch(m){return s("data:"+f+","+encodeURIComponent(p))}a=new FileReader,a.onload=function(m){s(this.result)},a.readAsDataURL(p)}return!0}})},98525:function(Ne){(function(Rt,tt){Ne.exports=tt()})(window,function(){return function(At){var Rt={};function tt(dt){if(Rt[dt])return Rt[dt].exports;var at=Rt[dt]={i:dt,l:!1,exports:{}};return At[dt].call(at.exports,at,at.exports,tt),at.l=!0,at.exports}return tt.m=At,tt.c=Rt,tt.d=function(dt,at,mt){tt.o(dt,at)||Object.defineProperty(dt,at,{enumerable:!0,get:mt})},tt.r=function(dt){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(dt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(dt,"__esModule",{value:!0})},tt.t=function(dt,at){if(at&1&&(dt=tt(dt)),at&8||at&4&&typeof dt=="object"&&dt&&dt.__esModule)return dt;var mt=Object.create(null);if(tt.r(mt),Object.defineProperty(mt,"default",{enumerable:!0,value:dt}),at&2&&typeof dt!="string")for(var O in dt)tt.d(mt,O,function(z){return dt[z]}.bind(null,O));return mt},tt.n=function(dt){var at=dt&&dt.__esModule?function(){return dt.default}:function(){return dt};return tt.d(at,"a",at),at},tt.o=function(dt,at){return Object.prototype.hasOwnProperty.call(dt,at)},tt.p="dist",tt(tt.s=33)}([function(At,Rt,tt){"use strict";function dt(at,mt){var O=Object.prototype.hasOwnProperty,z,g,x,f;for(x=1,f=arguments.length;x<f;x+=1){z=arguments[x];for(g in z)O.call(z,g)&&(at[g]=z[g])}return at}At.exports=dt},function(At,Rt,tt){"use strict";function dt(at){return at instanceof Array}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(1),at=tt(6),mt=tt(7);function O(z,g,x){dt(z)?at(z,g,x):mt(z,g,x)}At.exports=O},function(At,Rt,tt){"use strict";function dt(at){return at===void 0}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(22),at=tt(2),mt=tt(6),O=tt(7),z=tt(37),g=0,x={getLength:function(f){var l=0;return O(f,function(){l+=1}),l},map:function(f,l,I){var b=[];return at(f,function(){b.push(l.apply(I||null,arguments))}),b},filter:function(f,l,I){var b=[];return mt(f,function(w){l.apply(I||null,arguments)&&b.push(w)}),b},generateId:function(){return g+=1,g},isOldBrowser:function(){return dt.msie&&dt.version<9}(),sendHostName:function(){z("color-picker","UA-129987462-1")}};At.exports=x},function(At,Rt,tt){"use strict";var dt=tt(1);function at(mt,O,z){var g,x;if(z=z||0,!dt(O))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(O,mt,z);for(x=O.length,g=z;z>=0&&g<x;g+=1)if(O[g]===mt)return g;return-1}At.exports=at},function(At,Rt,tt){"use strict";function dt(at,mt,O){var z=0,g=at.length;for(O=O||null;z<g&&mt.call(O,at[z],z,at)!==!1;z+=1);}At.exports=dt},function(At,Rt,tt){"use strict";function dt(at,mt,O){var z;O=O||null;for(z in at)if(at.hasOwnProperty(z)&&mt.call(O,at[z],z,at)===!1)break}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(39),at=tt(13),mt=tt(41),O=tt(3),z=tt(9),g=tt(19),x=tt(4);function f(l,I){var b=x.generateId();l=l||{},O(I)&&(I=z.appendHTMLElement("div")),dt(I,"tui-view-"+b),this.id=b,this.container=I,this.childs=new g(function(w){return w.id}),this.parent=null}f.prototype.addChild=function(l,I){I&&I.call(l,this),l.parent=this,this.childs.add(l)},f.prototype.removeChild=function(l,I){var b=mt(l)?this.childs.items[l]:l;I&&I.call(b,this),this.childs.remove(b.id)},f.prototype.render=function(){this.childs.each(function(l){l.render()})},f.prototype.recursive=function(l,I){at(l)&&(I||l(this),this.childs.each(function(b){b.recursive(l)}))},f.prototype.resize=function(){for(var l=Array.prototype.slice.call(arguments),I=this.parent;I;)at(I._onResize)&&I._onResize.apply(I,l),I=I.parent},f.prototype._beforeDestroy=function(){},f.prototype._destroy=function(){this._beforeDestroy(),this.container.innerHTML="",this.id=this.parent=this.childs=this.container=null},f.prototype.destroy=function(l){this.childs&&(this.childs.each(function(I){I.destroy(!0),I._destroy()}),this.childs.clear()),!l&&this._destroy()},f.prototype.getViewBound=function(){var l=this.container.getBoundingClientRect();return{x:l.left,y:l.top,width:l.right-l.left,height:l.bottom-l.top}},At.exports=f},function(At,Rt,tt){"use strict";var dt={appendHTMLElement:function(at,mt,O){var z=document.createElement(at);return z.className=O||"",mt?mt.appendChild(z):document.body.appendChild(z),z}};At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(0),at=tt(20),mt=tt(11),O=tt(21),z=tt(1),g=tt(13),x=tt(2),f=/\s+/g;function l(){this.events=null,this.contexts=null}l.mixin=function(I){dt(I.prototype,l.prototype)},l.prototype._getHandlerItem=function(I,b){var w={handler:I};return b&&(w.context=b),w},l.prototype._safeEvent=function(I){var b=this.events,w;return b||(b=this.events={}),I&&(w=b[I],w||(w=[],b[I]=w),b=w),b},l.prototype._safeContext=function(){var I=this.contexts;return I||(I=this.contexts=[]),I},l.prototype._indexOfContext=function(I){for(var b=this._safeContext(),w=0;b[w];){if(I===b[w][0])return w;w+=1}return-1},l.prototype._memorizeContext=function(I){var b,w;at(I)&&(b=this._safeContext(),w=this._indexOfContext(I),w>-1?b[w][1]+=1:b.push([I,1]))},l.prototype._forgetContext=function(I){var b,w;at(I)&&(b=this._safeContext(),w=this._indexOfContext(I),w>-1&&(b[w][1]-=1,b[w][1]<=0&&b.splice(w,1)))},l.prototype._bindEvent=function(I,b,w){var k=this._safeEvent(I);this._memorizeContext(w),k.push(this._getHandlerItem(b,w))},l.prototype.on=function(I,b,w){var k=this;mt(I)?(I=I.split(f),x(I,function(j){k._bindEvent(j,b,w)})):O(I)&&(w=b,x(I,function(j,p){k.on(p,j,w)}))},l.prototype.once=function(I,b,w){var k=this;if(O(I)){w=b,x(I,function(p,a){k.once(a,p,w)});return}function j(){b.apply(w,arguments),k.off(I,j,w)}this.on(I,j,w)},l.prototype._spliceMatches=function(I,b){var w=0,k;if(z(I))for(k=I.length;w<k;w+=1)b(I[w])===!0&&(I.splice(w,1),k-=1,w-=1)},l.prototype._matchHandler=function(I){var b=this;return function(w){var k=I===w.handler;return k&&b._forgetContext(w.context),k}},l.prototype._matchContext=function(I){var b=this;return function(w){var k=I===w.context;return k&&b._forgetContext(w.context),k}},l.prototype._matchHandlerAndContext=function(I,b){var w=this;return function(k){var j=I===k.handler,p=b===k.context,a=j&&p;return a&&w._forgetContext(k.context),a}},l.prototype._offByEventName=function(I,b){var w=this,k=g(b),j=w._matchHandler(b);I=I.split(f),x(I,function(p){var a=w._safeEvent(p);k?w._spliceMatches(a,j):(x(a,function(d){w._forgetContext(d.context)}),w.events[p]=[])})},l.prototype._offByHandler=function(I){var b=this,w=this._matchHandler(I);x(this._safeEvent(),function(k){b._spliceMatches(k,w)})},l.prototype._offByObject=function(I,b){var w=this,k;this._indexOfContext(I)<0?x(I,function(j,p){w.off(p,j)}):mt(b)?(k=this._matchContext(I),w._spliceMatches(this._safeEvent(b),k)):g(b)?(k=this._matchHandlerAndContext(b,I),x(this._safeEvent(),function(j){w._spliceMatches(j,k)})):(k=this._matchContext(I),x(this._safeEvent(),function(j){w._spliceMatches(j,k)}))},l.prototype.off=function(I,b){mt(I)?this._offByEventName(I,b):arguments.length?g(I)?this._offByHandler(I):O(I)&&this._offByObject(I,b):(this.events={},this.contexts=[])},l.prototype.fire=function(I){this.invoke.apply(this,arguments)},l.prototype.invoke=function(I){var b,w,k,j;if(!this.hasListener(I))return!0;for(b=this._safeEvent(I),w=Array.prototype.slice.call(arguments,1),k=0;b[k];){if(j=b[k],j.handler.apply(j.context,w)===!1)return!1;k+=1}return!0},l.prototype.hasListener=function(I){return this.getListenerLength(I)>0},l.prototype.getListenerLength=function(I){var b=this._safeEvent(I);return b.length},At.exports=l},function(At,Rt,tt){"use strict";function dt(at){return typeof at=="string"||at instanceof String}At.exports=dt},function(At,Rt,tt){"use strict";var dt=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,at={leadingZero:function(mt,O){var z="",g=0;if((mt+"").length>O)return mt+"";for(;g<O-1;g+=1)z+="0";return(z+mt).slice(O*-1)},isValidRGB:function(mt){return dt.test(mt)},hexToRGB:function(mt){var O,z,g;return at.isValidRGB(mt)?(mt=mt.substring(1),O=parseInt(mt.substr(0,2),16),z=parseInt(mt.substr(2,2),16),g=parseInt(mt.substr(4,2),16),[O,z,g]):!1},rgbToHEX:function(mt,O,z){var g="#"+at.leadingZero(mt.toString(16),2)+at.leadingZero(O.toString(16),2)+at.leadingZero(z.toString(16),2);return at.isValidRGB(g)?g:!1},rgbToHSV:function(mt,O,z){var g,x,f,l,I,b;if(mt/=255,O/=255,z/=255,g=Math.max(mt,O,z),x=Math.min(mt,O,z),I=g,b=g-x,l=g===0?0:b/g,g===x)f=0;else{switch(g){case mt:f=(O-z)/b+(O<z?6:0);break;case O:f=(z-mt)/b+2;break;case z:f=(mt-O)/b+4;break}f/=6}return[Math.round(f*360),Math.round(l*100),Math.round(I*100)]},hsvToRGB:function(mt,O,z){var g,x,f,l,I,b,w,k;if(mt=Math.max(0,Math.min(360,mt)),O=Math.max(0,Math.min(100,O)),z=Math.max(0,Math.min(100,z)),O/=100,z/=100,O===0)return g=x=f=z,[Math.round(g*255),Math.round(x*255),Math.round(f*255)];switch(mt/=60,l=Math.floor(mt),I=mt-l,b=z*(1-O),w=z*(1-O*I),k=z*(1-O*(1-I)),l){case 0:g=z,x=k,f=b;break;case 1:g=w,x=z,f=b;break;case 2:g=b,x=z,f=k;break;case 3:g=b,x=w,f=z;break;case 4:g=k,x=b,f=z;break;default:g=z,x=b,f=w;break}return[Math.round(g*255),Math.round(x*255),Math.round(f*255)]}};At.exports=at},function(At,Rt,tt){"use strict";function dt(at){return at instanceof Function}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(11),at=tt(2),mt=tt(26);function O(x,f,l,I){if(dt(f)){at(f.split(/\s+/g),function(b){z(x,b,l,I)});return}at(f,function(b,w){z(x,w,b,l)})}function z(x,f,l,I){function b(w){l.call(I||x,w||window.event)}"addEventListener"in x?x.addEventListener(f,b):"attachEvent"in x&&x.attachEvent("on"+f,b),g(x,f,l,b)}function g(x,f,l,I){var b=mt(x,f),w=!1;at(b,function(k){return k.handler===l?(w=!0,!1):!0}),w||b.push({handler:l,wrappedHandler:I})}At.exports=O},function(At,Rt,tt){"use strict";function dt(at){if(at.preventDefault){at.preventDefault();return}at.returnValue=!1}At.exports=dt},function(At,Rt,tt){"use strict";function dt(at){return at.replace(/([A-Z])/g,function(mt){return"-"+mt.toLowerCase()})}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(11),at=tt(2),mt=tt(26);function O(x,f,l){if(dt(f)){at(f.split(/\s+/g),function(I){z(x,I,l)});return}at(f,function(I,b){z(x,b,I)})}function z(x,f,l){var I=mt(x,f),b;l?(at(I,function(w,k){return l===w.handler?(g(x,f,w.wrappedHandler),b=k,!1):!0}),I.splice(b,1)):(at(I,function(w){g(x,f,w.wrappedHandler)}),I.splice(0,I.length))}function g(x,f,l){"removeEventListener"in x?x.removeEventListener(f,l):"detachEvent"in x&&x.detachEvent("on"+f,l)}At.exports=O},function(At,Rt,tt){"use strict";var dt=tt(50);function at(mt,O){var z=dt(O.prototype);z.constructor=mt,mt.prototype=z}At.exports=at},function(At,Rt,tt){"use strict";var dt=tt(6),at=tt(7),mt=tt(0),O=tt(1),z=tt(20),g=tt(13),x=tt(21),f=tt(4),l=Array.prototype.slice;function I(b){this.items={},this.length=0,g(b)&&(this.getItemID=b)}I.and=function(b){var w;return b=l.call(arguments),w=b.length,function(k){for(var j=0;j<w;j+=1)if(!b[j].call(null,k))return!1;return!0}},I.or=function(b){var w;return b=l.call(arguments),w=b.length,function(k){for(var j=1,p=b[0].call(null,k);j<w;j+=1)p=p||b[j].call(null,k);return p}},I.merge=function(b){var w={},k=new I(b.getItemID);return dt(arguments,function(j){mt(w,j.items)}),k.items=w,k.length=f.getLength(k.items),k},I.prototype.getItemID=function(b){return b._id+""},I.prototype.add=function(b){var w,k;if(arguments.length>1){dt(l.call(arguments),function(j){this.add(j)},this);return}w=this.getItemID(b),k=this.items,k[w]||(this.length+=1),k[w]=b},I.prototype.remove=function(b){var w=[],k,j;return this.length?arguments.length>1?(w=f.map(l.call(arguments),function(p){return this.remove(p)},this),w):(k=this.items,x(b)&&(b=this.getItemID(b)),k[b]?(this.length-=1,j=k[b],delete k[b],j):w):w},I.prototype.clear=function(){this.items={},this.length=0},I.prototype.has=function(b){var w,k;return this.length?(w=g(b),k=!1,w?this.each(function(j){return b(j)===!0?(k=!0,!1):!0}):(b=x(b)?this.getItemID(b):b,k=z(this.items[b])),k):!1},I.prototype.doWhenHas=function(b,w,k){var j=this.items[b];z(j)&&w.call(k||this,j)},I.prototype.find=function(b){var w=new I;return this.hasOwnProperty("getItemID")&&(w.getItemID=this.getItemID),this.each(function(k){b(k)===!0&&w.add(k)}),w},I.prototype.groupBy=function(b,w){var k={},j=g(b),p=this.getItemID,a,d;if(O(b)){if(dt(b,function(u){k[u+""]=new I(p)}),!w)return k;b=w,j=!0}return this.each(function(u){j?d=b(u):(d=u[b],g(d)&&(d=d.apply(u))),a=k[d],a||(a=k[d]=new I(p)),a.add(u)}),k},I.prototype.single=function(){var b;return this.each(function(w){return b=w,!1},this),b},I.prototype.sort=function(b){var w=[];return this.each(function(k){w.push(k)}),g(b)&&(w=w.sort(b)),w},I.prototype.each=function(b,w){at(this.items,b,w||this)},I.prototype.toArray=function(){return this.length?f.map(this.items,function(b){return b}):[]},At.exports=I},function(At,Rt,tt){"use strict";var dt=tt(3),at=tt(36);function mt(O){return!dt(O)&&!at(O)}At.exports=mt},function(At,Rt,tt){"use strict";function dt(at){return at===Object(at)}At.exports=dt},function(At,Rt,tt){"use strict";var dt={chrome:!1,firefox:!1,safari:!1,msie:!1,edge:!1,others:!1,version:0};typeof window!="undefined"&&window.navigator&&at();function at(){var mt=window.navigator,O=mt.appName.replace(/\s/g,"_"),z=mt.userAgent,g=/MSIE\s([0-9]+[.0-9]*)/,x=/Trident.*rv:11\./,f=/Edge\/(\d+)\./,l={firefox:/Firefox\/(\d+)\./,chrome:/Chrome\/(\d+)\./,safari:/Version\/([\d.]+).*Safari\/(\d+)/},I,b,w={Microsoft_Internet_Explorer:function(){var j=z.match(g);j?(dt.msie=!0,dt.version=parseFloat(j[1])):dt.others=!0},Netscape:function(){var j=!1;if(x.exec(z))dt.msie=!0,dt.version=11,j=!0;else if(f.exec(z))dt.edge=!0,dt.version=z.match(f)[1],j=!0;else for(I in l)if(l.hasOwnProperty(I)&&(b=z.match(l[I]),b&&b.length>1)){dt[I]=j=!0,dt.version=parseFloat(b[1]||0);break}j||(dt.others=!0)}},k=w[O];k&&w[O]()}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(3);function at(mt){return!mt||!mt.className?"":dt(mt.className.baseVal)?mt.className:mt.className.baseVal}At.exports=at},function(At,Rt,tt){"use strict";(function(dt){var at=tt(10),mt=tt(42),O=tt(44),z=tt(47),g=tt(28),x=tt(17),f=tt(14),l=tt(15),I=tt(0);function b(w,k){f(k,"mousedown",this._onMouseDown,this),this.options=I({distance:10},w),this.container=k,this._isMoved=!1,this._distance=0,this._dragStartFired=!1,this._dragStartEventData=null}b.prototype.destroy=function(){x(this.container,"mousedown",this._onMouseDown),this.options=this.container=this._isMoved=this._distance=this._dragStartFired=this._dragStartEventData=null},b.prototype._toggleDragEvent=function(w){var k=this.container;w?(mt(k),f(window,"dragstart",l),f(dt.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)):(O(k),x(window,"dragstart",l),x(dt.document,{mousemove:this._onMouseMove,mouseup:this._onMouseUp}))},b.prototype._getEventData=function(w){return{target:g(w),originEvent:w}},b.prototype._onMouseDown=function(w){z(w)===0&&(this._distance=0,this._dragStartFired=!1,this._dragStartEventData=this._getEventData(w),this._toggleDragEvent(!0))},b.prototype._onMouseMove=function(w){var k=this.options.distance;if(l(w),this._isMoved=!0,this._distance<k){this._distance+=1;return}if(!this._dragStartFired&&(this._dragStartFired=!0,!this.invoke("dragStart",this._dragStartEventData))){this._toggleDragEvent(!1);return}this.fire("drag",this._getEventData(w))},b.prototype._onMouseUp=function(w){if(this._toggleDragEvent(!1),this._isMoved){this._isMoved=!1,this.fire("dragEnd",this._getEventData(w));return}this.fire("click",this._getEventData(w))},at.mixin(b),At.exports=b}).call(this,tt(25))},function(At,Rt){var tt;tt=function(){return this}();try{tt=tt||new Function("return this")()}catch(dt){typeof window=="object"&&(tt=window)}At.exports=tt},function(At,Rt,tt){"use strict";var dt="_feEventKey";function at(mt,O){var z=mt[dt],g;return z||(z=mt[dt]={}),g=z[O],g||(g=z[O]=[]),g}At.exports=at},function(At,Rt,tt){"use strict";function dt(at){var mt=document.documentElement.style,O,z;for(O=0,z=at.length;O<z;O+=1)if(at[O]in mt)return at[O];return!1}At.exports=dt},function(At,Rt,tt){"use strict";function dt(at){return at.target||at.srcElement}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(10),at=tt(28),mt=tt(17),O=tt(14),z=tt(30),g=tt(0),x=tt(18),f=tt(9),l=tt(12),I=tt(8),b=tt(51);function w(k,j){this.options=g({cssPrefix:"tui-colorpicker-",preset:["#181818","#282828","#383838","#585858","#B8B8B8","#D8D8D8","#E8E8E8","#F8F8F8","#AB4642","#DC9656","#F7CA88","#A1B56C","#86C1B9","#7CAFC2","#BA8BAF","#A16946"],detailTxt:"Detail"},k),j=f.appendHTMLElement("div",j,this.options.cssPrefix+"palette-container"),I.call(this,k,j)}x(w,I),w.prototype._onClick=function(k){var j=this.options,p=at(k),a={};if(z(p,j.cssPrefix+"palette-button")){a.color=p.value,this.fire("_selectColor",a);return}z(p,j.cssPrefix+"palette-toggle-slider")&&this.fire("_toggleSlider")},w.prototype._onChange=function(k){var j=this.options,p=at(k),a={};z(p,j.cssPrefix+"palette-hex")&&(a.color=p.value,this.fire("_selectColor",a))},w.prototype._beforeDestroy=function(){this._toggleEvent(!1)},w.prototype._toggleEvent=function(k){var j=this.options,p=this.container,a=k?O:mt,d;a(p,"click",this._onClick,this),d=p.querySelector("."+j.cssPrefix+"palette-hex",p),d&&a(d,"change",this._onChange,this)},w.prototype.render=function(k){var j=this.options,p="";this._toggleEvent(!1),p=b({cssPrefix:j.cssPrefix,preset:j.preset,detailTxt:j.detailTxt,color:k,isValidRGB:l.isValidRGB,getItemClass:function(a){return a?"":" "+j.cssPrefix+"color-transparent"},isSelected:function(a){return a===k?" "+j.cssPrefix+"selected":""}}),this.container.innerHTML=p,this._toggleEvent(!0)},dt.mixin(w),At.exports=w},function(At,Rt,tt){"use strict";var dt=tt(5),at=tt(23);function mt(O,z){var g;return O.classList?O.classList.contains(z):(g=at(O).split(/\s+/),dt(z,g)>-1)}At.exports=mt},function(At,Rt,tt){"use strict";var dt=tt(10),at=tt(53),mt=tt(54),O=tt(30),z=tt(0),g=tt(18),x=tt(9),f=tt(32),l=tt(12),I=tt(8),b=tt(24),w=tt(57),k=-7,j=112,p=-3,a=115,d=359.99;function u(t,e){e=x.appendHTMLElement("div",e,t.cssPrefix+"slider-container"),e.style.display="none",I.call(this,t,e),this.options=z({color:"#f8f8f8",cssPrefix:"tui-colorpicker-"},t),this._dragDataCache={},this.sliderHandleElement=null,this.huebarHandleElement=null,this.baseColorElement=null,this.drag=new b({distance:0},e),this.colorSliderPosLimitRange=[k,j],this.huebarPosLimitRange=[p,a],this.drag.on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd,click:this._onClick},this)}g(u,I),u.prototype._beforeDestroy=function(){this.drag.off(),this.drag=this.options=this._dragDataCache=this.sliderHandleElement=this.huebarHandleElement=this.baseColorElement=null},u.prototype.toggle=function(t){this.container.style.display=t?"block":"none"},u.prototype.isVisible=function(){return this.container.style.display==="block"},u.prototype.render=function(t){var e=this.container,i=this.options,s=w.layout,m,o;l.isValidRGB(t)&&(s=s.replace(/{{slider}}/,w.slider),s=s.replace(/{{huebar}}/,w.huebar),s=s.replace(/{{cssPrefix}}/g,i.cssPrefix),s=s.replace(/{{id}}/g,i.id),this.container.innerHTML=s,this.sliderSvgElement=e.querySelector("."+i.cssPrefix+"svg-slider"),this.huebarSvgElement=e.querySelector("."+i.cssPrefix+"svg-huebar"),this.sliderHandleElement=e.querySelector("."+i.cssPrefix+"slider-handle"),this.huebarHandleElement=e.querySelector("."+i.cssPrefix+"huebar-handle"),this.baseColorElement=e.querySelector("."+i.cssPrefix+"slider-basecolor"),m=l.hexToRGB(t),o=l.rgbToHSV.apply(null,m),this.moveHue(o[0],!0),this.moveSaturationAndValue(o[1],o[2],!0))},u.prototype._setColorSliderPosMax=function(){var t=this.sliderSvgElement.getClientRects()[0];t&&(this.colorSliderPosLimitRange[1]=t.height-10)},u.prototype._moveColorSliderHandle=function(t,e,i){var s=this.sliderHandleElement,m;e=Math.max(this.colorSliderPosLimitRange[0],e),e=Math.min(this.colorSliderPosLimitRange[1],e),t=Math.max(this.colorSliderPosLimitRange[0],t),t=Math.min(this.colorSliderPosLimitRange[1],t),f.setTranslateXY(s,t,e),m=e>50?"white":"black",f.setStrokeColor(s,m),i||this.fire("_selectColor",{color:l.rgbToHEX.apply(null,this.getRGB())})},u.prototype.moveSaturationAndValue=function(t,e,i){var s,m,o,y;t=t||0,e=e||0,s=Math.abs(this.colorSliderPosLimitRange[0]),m=this.colorSliderPosLimitRange[1],o=t*m/100-s,y=m-e*m/100-s,this._moveColorSliderHandle(o,y,i)},u.prototype._moveColorSliderByPosition=function(t,e){var i=this.colorSliderPosLimitRange[0];this._moveColorSliderHandle(t+i,e+i)},u.prototype.getSaturationAndValue=function(){var t=Math.abs(this.colorSliderPosLimitRange[0]),e=t+this.colorSliderPosLimitRange[1],i=f.getTranslateXY(this.sliderHandleElement),s,m;return s=(i[1]+t)/e*100,m=100-(i[0]+t)/e*100,[s,m]},u.prototype._setHueBarPosMax=function(){var t=this.huebarSvgElement.getClientRects()[0];t&&(this.huebarPosLimitRange[1]=t.height-7)},u.prototype._moveHueHandle=function(t,e){var i=this.huebarHandleElement,s=this.baseColorElement,m,o;t=Math.max(this.huebarPosLimitRange[0],t),t=Math.min(this.huebarPosLimitRange[1],t),f.setTranslateY(i,t),m=l.hsvToRGB(this.getHue(),100,100),o=l.rgbToHEX.apply(null,m),f.setGradientColorStop(s,o),e||this.fire("_selectColor",{color:l.rgbToHEX.apply(null,this.getRGB())})},u.prototype.moveHue=function(t,e){var i=0,s,m;s=Math.abs(this.huebarPosLimitRange[0]),m=s+this.huebarPosLimitRange[1],t=t||0,i=m*t/d-s,this._moveHueHandle(i,e)},u.prototype._moveHueByPosition=function(t){var e=this.huebarPosLimitRange[0];this._moveHueHandle(t+e)},u.prototype.getHue=function(){var t=this.huebarHandleElement,e=f.getTranslateXY(t),i,s;return i=Math.abs(this.huebarPosLimitRange[0]),s=i+this.huebarPosLimitRange[1],(e[0]+i)*d/s},u.prototype.getHSV=function(){var t=this.getSaturationAndValue(),e=this.getHue();return[e].concat(t)},u.prototype.getRGB=function(){return l.hsvToRGB.apply(null,this.getHSV())},u.prototype._prepareColorSliderForMouseEvent=function(t){var e=this.options,i=mt(t.target,"."+e.cssPrefix+"slider-part"),s;return s=this._dragDataCache={isColorSlider:O(i,e.cssPrefix+"slider-left"),parentElement:i},s},u.prototype._onClick=function(t){var e=this._prepareColorSliderForMouseEvent(t),i=at(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(i[0],i[1]):this._moveHueByPosition(i[1]),this._dragDataCache=null},u.prototype._onDragStart=function(t){this._setColorSliderPosMax(),this._setHueBarPosMax(),this._prepareColorSliderForMouseEvent(t)},u.prototype._onDrag=function(t){var e=this._dragDataCache,i=at(t.originEvent,e.parentElement);e.isColorSlider?this._moveColorSliderByPosition(i[0],i[1]):this._moveHueByPosition(i[1])},u.prototype._onDragEnd=function(){this._dragDataCache=null},dt.mixin(u),At.exports=u},function(At,Rt,tt){"use strict";var dt=tt(4).isOldBrowser,at=/[\.\-0-9]+/g,mt=-6,O={getTranslateXY:function(z){var g;return dt?(g=z.style,[parseFloat(g.top),parseFloat(g.left)]):(g=z.getAttribute("transform"),g?(g=g.match(at),[parseFloat(g[1]),parseFloat(g[0])]):[0,0])},setTranslateXY:function(z,g,x){dt?(z.style.left=g+"px",z.style.top=x+"px"):z.setAttribute("transform","translate("+g+","+x+")")},setTranslateY:function(z,g){dt?z.style.top=g+"px":z.setAttribute("transform","translate("+mt+","+g+")")},setStrokeColor:function(z,g){dt?z.strokecolor=g:z.setAttribute("stroke",g)},setGradientColorStop:function(z,g){dt?z.color=g:z.setAttribute("stop-color",g)}};At.exports=O},function(At,Rt,tt){tt(34),At.exports=tt(35)},function(At,Rt,tt){},function(At,Rt,tt){"use strict";var dt=tt(19),at=tt(8),mt=tt(24),O=tt(48),z=tt(29),g=tt(31),x=tt(12),f=tt(32),l={Collection:dt,View:at,Drag:mt,create:O,Palette:z,Slider:g,colorutil:x,svgvml:f};At.exports=l},function(At,Rt,tt){"use strict";function dt(at){return at===null}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(3),at=tt(38),mt=7*24*60*60*1e3;function O(g){var x=new Date().getTime();return x-g>mt}function z(g,x){var f="https://www.google-analytics.com/collect",l=location.hostname,I="event",b="use",w="TOAST UI "+g+" for "+l+": Statistics",k=window.localStorage.getItem(w);!dt(window.tui)&&window.tui.usageStatistics===!1||k&&!O(k)||(window.localStorage.setItem(w,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&at(f,{v:1,t:I,tid:x,cid:l,dp:l,dh:g,el:g,ec:b})},1e3))}At.exports=z},function(At,Rt,tt){"use strict";var dt=tt(7);function at(mt,O){var z=document.createElement("img"),g="";return dt(O,function(x,f){g+="&"+f+"="+x}),g=g.substring(1),z.src=mt+"?"+g,z.style.display="none",document.body.appendChild(z),document.body.removeChild(z),z}At.exports=at},function(At,Rt,tt){"use strict";var dt=tt(2),at=tt(5),mt=tt(23),O=tt(40);function z(g){var x=Array.prototype.slice.call(arguments,1),f=g.classList,l=[],I;if(f){dt(x,function(b){g.classList.add(b)});return}I=mt(g),I&&(x=[].concat(I.split(/\s+/),x)),dt(x,function(b){at(b,l)<0&&l.push(b)}),O(g,l)}At.exports=z},function(At,Rt,tt){"use strict";var dt=tt(1),at=tt(3);function mt(O,z){if(z=dt(z)?z.join(" "):z,z=z.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),at(O.className.baseVal)){O.className=z;return}O.className.baseVal=z}At.exports=mt},function(At,Rt,tt){"use strict";function dt(at){return typeof at=="number"||at instanceof Number}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(14),at=tt(15),mt=tt(43),O=tt(27),z="onselectstart"in document,g="prevUserSelect",x=O(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function f(l){l||(l=document),z?dt(l,"selectstart",at):(l=l===document?document.documentElement:l,mt(l,g,l.style[x]),l.style[x]="none")}At.exports=f},function(At,Rt,tt){"use strict";var dt=tt(16);function at(mt,O,z){if(mt.dataset){mt.dataset[O]=z;return}mt.setAttribute("data-"+dt(O),z)}At.exports=at},function(At,Rt,tt){"use strict";var dt=tt(17),at=tt(15),mt=tt(45),O=tt(46),z=tt(27),g="onselectstart"in document,x="prevUserSelect",f=z(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);function l(I){I||(I=document),g?dt(I,"selectstart",at):(I=I===document?document.documentElement:I,I.style[f]=mt(I,x)||"auto",O(I,x))}At.exports=l},function(At,Rt,tt){"use strict";var dt=tt(16);function at(mt,O){return mt.dataset?mt.dataset[O]:mt.getAttribute("data-"+dt(O))}At.exports=at},function(At,Rt,tt){"use strict";var dt=tt(16);function at(mt,O){if(mt.dataset){delete mt.dataset[O];return}mt.removeAttribute("data-"+dt(O))}At.exports=at},function(At,Rt,tt){"use strict";var dt=tt(22),at=tt(5),mt=["0","1","3","5","7"],O=["2","6"],z=["4"];function g(f){return dt.msie&&dt.version<=8?x(f):f.button}function x(f){var l=String(f.button);return at(l,mt)>-1?0:at(l,O)>-1?2:at(l,z)>-1?1:null}At.exports=g},function(At,Rt,tt){"use strict";var dt=tt(10),at=tt(0),mt=tt(4),O=tt(12),z=tt(49),g=tt(29),x=tt(31),f=0;function l(){return f+=1,f}function I(b){var w;if(!(this instanceof I))return new I(b);if(b=this.options=at({container:null,color:"#f8f8f8",preset:["#181818","#282828","#383838","#585858","#b8b8b8","#d8d8d8","#e8e8e8","#f8f8f8","#ab4642","#dc9656","#f7ca88","#a1b56c","#86c1b9","#7cafc2","#ba8baf","#a16946"],cssPrefix:"tui-colorpicker-",detailTxt:"Detail",id:l(),usageStatistics:!0},b),!b.container)throw new Error("ColorPicker(): need container option.");w=this.layout=new z(b,b.container),this.palette=new g(b,w.container),this.palette.on({_selectColor:this._onSelectColorInPalette,_toggleSlider:this._onToggleSlider},this),this.slider=new x(b,w.container),this.slider.on("_selectColor",this._onSelectColorInSlider,this),w.addChild(this.palette),w.addChild(this.slider),this.render(b.color),b.usageStatistics&&mt.sendHostName()}I.prototype._onSelectColorInPalette=function(b){var w=b.color,k=this.options;if(!O.isValidRGB(w)&&w!==""){this.render();return}this.fire("selectColor",{color:w,origin:"palette"}),k.color!==w&&(k.color=w,this.render(w))},I.prototype._onToggleSlider=function(){this.slider.toggle(!this.slider.isVisible())},I.prototype._onSelectColorInSlider=function(b){var w=b.color,k=this.options;this.fire("selectColor",{color:w,origin:"slider"}),k.color!==w&&(k.color=w,this.palette.render(w))},I.prototype.setColor=function(b){if(!O.isValidRGB(b))throw new Error("ColorPicker#setColor(): need valid hex string color value");this.options.color=b,this.render(b)},I.prototype.getColor=function(){return this.options.color},I.prototype.toggle=function(b){this.layout.container.style.display=b?"block":"none"},I.prototype.render=function(b){this.layout.render(b||this.options.color)},I.prototype.destroy=function(){this.layout.destroy(),this.options.container.innerHTML="",this.layout=this.slider=this.palette=this.options=null},dt.mixin(I),At.exports=I},function(At,Rt,tt){"use strict";var dt=tt(0),at=tt(18),mt=tt(9),O=tt(8);function z(g,x){this.options=dt({cssPrefix:"tui-colorpicker-"},g),x=mt.appendHTMLElement("div",x,this.options.cssPrefix+"container"),O.call(this,g,x),this.render()}at(z,O),z.prototype.render=function(g){this.recursive(function(x){x.render(g)},!0)},At.exports=z},function(At,Rt,tt){"use strict";function dt(at){function mt(){}return mt.prototype=at,new mt}At.exports=dt},function(At,Rt,tt){"use strict";var dt=tt(52);At.exports=function(at){var mt=['<li><input class="{{cssPrefix}}palette-button{{isSelected @this}}{{getItemClass @this}}" type="button"',"{{if isValidRGB @this}}",' style="background-color:{{@this}};color:{{@this}}"',"{{/if}}",' title="{{@this}}" value="{{@this}}" /></li>'].join(""),O=['<ul class="{{cssPrefix}}clearfix">',"{{each preset}}",mt,"{{/each}}","</ul>",'<div class="{{cssPrefix}}clearfix" style="overflow:hidden">','<input type="button" class="{{cssPrefix}}palette-toggle-slider" value="{{detailTxt}}" />','<input type="text" class="{{cssPrefix}}palette-hex" value="{{color}}" maxlength="7" />','<span class="{{cssPrefix}}palette-preview" style="background-color:{{color}};color:{{color}}">{{color}}</span>',"</div>"].join(`
`);return dt(O,at)}},function(At,Rt,tt){"use strict";var dt=tt(5),at=tt(2),mt=tt(1),O=tt(11),z=tt(0),g=/{{\s?|\s?}}/g,x=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,f=/\[\s?|\s?\]/,l=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,I=/\./,b=/^["']\w+["']$/,w=/"|'/g,k=/^-?\d+\.?\d*$/,j=2,p={if:e,each:i,with:s},a="a".split(/a/).length===3,d=function(){return a?function(D,L){return D.split(L)}:function(D,L){var R=[],F=0,W,ot;for(L.global||(L=new RegExp(L,"g")),W=L.exec(D);W!==null;)ot=W.index,R.push(D.slice(F,ot)),F=ot+W[0].length,W=L.exec(D);return R.push(D.slice(F)),R}}();function u(D,L){var R,F=L[D];return D==="true"?F=!0:D==="false"?F=!1:b.test(D)?F=D.replace(w,""):x.test(D)?(R=D.split(f),F=u(R[0],L)[u(R[1],L)]):l.test(D)?(R=D.split(I),F=u(R[0],L)[R[1]]):k.test(D)&&(F=parseFloat(D)),F}function t(D,L){var R=[D],F=[],W=0,ot=0;return at(L,function(it,Mt){it.indexOf("if")===0?W+=1:it==="/if"?W-=1:!W&&(it.indexOf("elseif")===0||it==="else")&&(R.push(it==="else"?["true"]:it.split(" ").slice(1)),F.push(L.slice(ot,Mt)),ot=Mt+1)}),F.push(L.slice(ot)),{exps:R,sourcesInsideIf:F}}function e(D,L,R){var F=t(D,L),W=!1,ot="";return at(F.exps,function(it,Mt){return W=y(it,R),W&&(ot=M(F.sourcesInsideIf[Mt],R)),!W}),ot}function i(D,L,R){var F=y(D,R),W=mt(F)?"@index":"@key",ot={},it="";return at(F,function(Mt,$){ot[W]=$,ot["@this"]=Mt,z(R,ot),it+=M(L.slice(),R)}),it}function s(D,L,R){var F=dt("as",D),W=D[F+1],ot=y(D.slice(0,F),R),it={};return it[W]=ot,M(L,z(R,it))||""}function m(D,L,R){var F=D.splice(L+1,R-L);return F.pop(),F}function o(D,L,R){for(var F=p[D],W=1,ot=0,it,Mt=ot+j,$=L[Mt];W&&O($);)$.indexOf(D)===0?W+=1:$.indexOf("/"+D)===0&&(W-=1,it=Mt),Mt+=j,$=L[Mt];if(W)throw Error(D+" needs {{/"+D+"}} expression.");return L[ot]=F(L[ot].split(" ").slice(1),m(L,ot,it),R),L}function y(D,L){var R=u(D[0],L);return R instanceof Function?C(R,D.slice(1),L):R}function C(D,L,R){var F=[];return at(L,function(W){F.push(u(W,R))}),D.apply(null,F)}function M(D,L){for(var R=1,F=D[R],W,ot,it;O(F);)W=F.split(" "),ot=W[0],p[ot]?(it=o(ot,D.splice(R,D.length-R),L),D=D.concat(it)):D[R]=y(W,L),R+=j,F=D[R];return D.join("")}function T(D,L){return M(d(D,g),L)}At.exports=T},function(At,Rt,tt){"use strict";var dt=tt(1);function at(mt,O){var z=dt(mt),g=z?mt[0]:mt.clientX,x=z?mt[1]:mt.clientY,f;return O?(f=O.getBoundingClientRect(),[g-f.left-O.clientLeft,x-f.top-O.clientTop]):[g,x]}At.exports=at},function(At,Rt,tt){"use strict";var dt=tt(55);function at(mt,O){var z=mt.parentNode;if(dt(mt,O))return mt;for(;z&&z!==document;){if(dt(z,O))return z;z=z.parentNode}return null}At.exports=at},function(At,Rt,tt){"use strict";var dt=tt(5),at=tt(56),mt=Element.prototype,O=mt.matches||mt.webkitMatchesSelector||mt.mozMatchesSelector||mt.msMatchesSelector||function(g){var x=this.document||this.ownerDocument;return dt(this,at(x.querySelectorAll(g)))>-1};function z(g,x){return O.call(g,x)}At.exports=z},function(At,Rt,tt){"use strict";var dt=tt(6);function at(mt){var O;try{O=Array.prototype.slice.call(mt)}catch(z){O=[],dt(mt,function(g){O.push(g)})}return O}At.exports=at},function(At,Rt,tt){"use strict";(function(dt){var at=tt(4).isOldBrowser,mt=['<div class="{{cssPrefix}}slider-left {{cssPrefix}}slider-part">{{slider}}</div>','<div class="{{cssPrefix}}slider-right {{cssPrefix}}slider-part">{{huebar}}</div>'].join(`
`),O=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-slider">',"<defs>",'<linearGradient id="{{cssPrefix}}svg-fill-color-{{id}}" x1="0%" y1="0%" x2="100%" y2="0%">','<stop offset="0%" stop-color="rgb(255,255,255)" />','<stop class="{{cssPrefix}}slider-basecolor" offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>",'<linearGradient id="{{cssPrefix}}svn-fill-black-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" style="stop-color:rgb(0,0,0);stop-opacity:0" />','<stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:1" />',"</linearGradient>","</defs>",'<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svg-fill-color-{{id}})"></rect>','<rect width="100%" height="100%" fill="url(#{{cssPrefix}}svn-fill-black-{{id}})"></rect>','<path transform="translate(0,0)" class="{{cssPrefix}}slider-handle" d="M0 7.5 L15 7.5 M7.5 15 L7.5 0 M2 7 a5.5 5.5 0 1 1 0 1 Z" stroke="black" stroke-width="0.75" fill="none" />',"</svg>"].join(`
`),z=['<div class="{{cssPrefix}}vml-slider">','<v:rect strokecolor="none" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill class="{{cssPrefix}}vml {{cssPrefix}}slider-basecolor" type="gradient" method="none" color="#ff0000" color2="#fff" angle="90" />',"</v:rect>",'<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-slider-bg">','<v:fill type="gradient" method="none" color="black" color2="white" o:opacity2="0%" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}slider-handle" coordsize="1 1" style="width:1px;height:1px;"path="m 0,7 l 14,7 m 7,14 l 7,0 ar 12,12 2,2 z" filled="false" stroked="true" />',"</div>"].join(`
`),g=['<svg class="{{cssPrefix}}svg {{cssPrefix}}svg-huebar">',"<defs>",'<linearGradient id="g-{{id}}" x1="0%" y1="0%" x2="0%" y2="100%">','<stop offset="0%" stop-color="rgb(255,0,0)" />','<stop offset="16.666%" stop-color="rgb(255,255,0)" />','<stop offset="33.333%" stop-color="rgb(0,255,0)" />','<stop offset="50%" stop-color="rgb(0,255,255)" />','<stop offset="66.666%" stop-color="rgb(0,0,255)" />','<stop offset="83.333%" stop-color="rgb(255,0,255)" />','<stop offset="100%" stop-color="rgb(255,0,0)" />',"</linearGradient>","</defs>",'<rect width="18px" height="100%" fill="url(#g-{{id}})"></rect>','<path transform="translate(-6,-3)" class="{{cssPrefix}}huebar-handle" d="M0 0 L4 4 L0 8 L0 0 Z" fill="black" stroke="none" />',"</svg>"].join(`
`),x=['<div class="{{cssPrefix}}vml-huebar">','<v:rect strokecolor="#ccc" class="{{cssPrefix}}vml {{cssPrefix}}vml-huebar-bg">','<v:fill type="gradient" method="none" colors="0% rgb(255,0,0), 16.666% rgb(255,255,0), 33.333% rgb(0,255,0), 50% rgb(0,255,255), 66.666% rgb(0,0,255), 83.333% rgb(255,0,255), 100% rgb(255,0,0)" angle="180" class="{{cssPrefix}}vml" />',"</v:rect>",'<v:shape class="{{cssPrefix}}vml {{cssPrefix}}huebar-handle" coordsize="1 1" style="width:1px;height:1px;position:absolute;z-index:1;right:22px;top:-3px;"path="m 0,0 l 4,4 l 0,8 l 0,0 z" filled="true" fillcolor="black" stroked="false" />',"</div>"].join(`
`);at&&dt.document.namespaces.add("v","urn:schemas-microsoft-com:vml"),At.exports={layout:mt,slider:at?z:O,huebar:at?x:g}}).call(this,tt(25))}])})},8618:function(Ne,At,Rt){var tt=Rt(48764).lW;(function(at,mt){Ne.exports=mt(Rt(98525))})(self,function(dt){return function(){var at={2777:function(g,x,f){var l=l||{version:"4.6.0"};if(x.fabric=l,typeof document!="undefined"&&typeof window!="undefined")document instanceof(typeof HTMLDocument!="undefined"?HTMLDocument:Document)?l.document=document:l.document=document.implementation.createHTMLDocument(""),l.window=window;else{var I=f(4960),b=new I.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;l.document=b.document,l.jsdomImplForWrapper=f(6759).implForWrapper,l.nodeCanvas=f(6272).Canvas,l.window=b,DOMParser=l.window.DOMParser}l.isTouchSupported="ontouchstart"in l.window||"ontouchstart"in l.document||l.window&&l.window.navigator&&l.window.navigator.maxTouchPoints>0,l.isLikelyNode=typeof tt!="undefined"&&typeof window=="undefined",l.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],l.DPI=96,l.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",l.commaWsp="(?:\\s+,?\\s*|,\\s*)",l.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,l.reNonWord=/[ \n\.,;!\?\-]/,l.fontPaths={},l.iMatrix=[1,0,0,1,0,0],l.svgNS="http://www.w3.org/2000/svg",l.perfLimitSizeTotal=2097152,l.maxCacheSideLimit=4096,l.minCacheSideLimit=256,l.charWidthsCache={},l.textureSize=2048,l.disableStyleCopyPaste=!1,l.enableGLFiltering=!0,l.devicePixelRatio=l.window.devicePixelRatio||l.window.webkitDevicePixelRatio||l.window.mozDevicePixelRatio||1,l.browserShadowBlurConstant=1,l.arcToSegmentsCache={},l.boundsOfCurveCache={},l.cachesBoundsOfCurve=!0,l.forceGLPutImageData=!1,l.initFilterBackend=function(){if(l.enableGLFiltering&&l.isWebglSupported&&l.isWebglSupported(l.textureSize))return console.log("max texture size: "+l.maxTextureSize),new l.WebglFilterBackend({tileSize:l.textureSize});if(l.Canvas2dFilterBackend)return new l.Canvas2dFilterBackend},typeof document!="undefined"&&typeof window!="undefined"&&(window.fabric=l),function(){function p(i,s){if(this.__eventListeners[i]){var m=this.__eventListeners[i];s?m[m.indexOf(s)]=!1:l.util.array.fill(m,!1)}}function a(i,s){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in i)this.on(m,i[m]);else this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(s);return this}function d(i,s){var m=function(){s.apply(this,arguments),this.off(i,m)}.bind(this);this.on(i,m)}function u(i,s){if(arguments.length===1)for(var m in i)d.call(this,m,i[m]);else d.call(this,i,s);return this}function t(i,s){if(!this.__eventListeners)return this;if(arguments.length===0)for(i in this.__eventListeners)p.call(this,i);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in i)p.call(this,m,i[m]);else p.call(this,i,s);return this}function e(i,s){if(!this.__eventListeners)return this;var m=this.__eventListeners[i];if(!m)return this;for(var o=0,y=m.length;o<y;o++)m[o]&&m[o].call(this,s||{});return this.__eventListeners[i]=m.filter(function(C){return C!==!1}),this}l.Observable={fire:e,on:a,once:u,off:t}}(),l.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var p=0,a=arguments.length;p<a;p++)this._onObjectAdded(arguments[p]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(p,a,d){var u=this._objects;return d?u[a]=p:u.splice(a,0,p),this._onObjectAdded&&this._onObjectAdded(p),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var p=this._objects,a,d=!1,u=0,t=arguments.length;u<t;u++)a=p.indexOf(arguments[u]),a!==-1&&(d=!0,p.splice(a,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&d&&this.requestRenderAll(),this},forEachObject:function(p,a){for(var d=this.getObjects(),u=0,t=d.length;u<t;u++)p.call(a,d[u],u,d);return this},getObjects:function(p){return typeof p=="undefined"?this._objects.concat():this._objects.filter(function(a){return a.type===p})},item:function(p){return this._objects[p]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(p,a){return this._objects.indexOf(p)>-1?!0:a?this._objects.some(function(d){return typeof d.contains=="function"&&d.contains(p,!0)}):!1},complexity:function(){return this._objects.reduce(function(p,a){return p+=a.complexity?a.complexity():0,p},0)}},l.CommonMethods={_setOptions:function(p){for(var a in p)this.set(a,p[a])},_initGradient:function(p,a){p&&p.colorStops&&!(p instanceof l.Gradient)&&this.set(a,new l.Gradient(p))},_initPattern:function(p,a,d){p&&p.source&&!(p instanceof l.Pattern)?this.set(a,new l.Pattern(p,d)):d&&d()},_setObject:function(p){for(var a in p)this._set(a,p[a])},set:function(p,a){return typeof p=="object"?this._setObject(p):this._set(p,a),this},_set:function(p,a){this[p]=a},toggle:function(p){var a=this.get(p);return typeof a=="boolean"&&this.set(p,!a),this},get:function(p){return this[p]}},function(p){var a=Math.sqrt,d=Math.atan2,u=Math.pow,t=Math.PI/180,e=Math.PI/2;l.util={cos:function(i){if(i===0)return 1;i<0&&(i=-i);var s=i/e;switch(s){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},sin:function(i){if(i===0)return 0;var s=i/e,m=1;switch(i<0&&(m=-1),s){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(i)},removeFromArray:function(i,s){var m=i.indexOf(s);return m!==-1&&i.splice(m,1),i},getRandomInt:function(i,s){return Math.floor(Math.random()*(s-i+1))+i},degreesToRadians:function(i){return i*t},radiansToDegrees:function(i){return i/t},rotatePoint:function(i,s,m){var o=new l.Point(i.x-s.x,i.y-s.y),y=l.util.rotateVector(o,m);return new l.Point(y.x,y.y).addEquals(s)},rotateVector:function(i,s){var m=l.util.sin(s),o=l.util.cos(s),y=i.x*o-i.y*m,C=i.x*m+i.y*o;return{x:y,y:C}},transformPoint:function(i,s,m){return m?new l.Point(s[0]*i.x+s[2]*i.y,s[1]*i.x+s[3]*i.y):new l.Point(s[0]*i.x+s[2]*i.y+s[4],s[1]*i.x+s[3]*i.y+s[5])},makeBoundingBoxFromPoints:function(i,s){if(s)for(var m=0;m<i.length;m++)i[m]=l.util.transformPoint(i[m],s);var o=[i[0].x,i[1].x,i[2].x,i[3].x],y=l.util.array.min(o),C=l.util.array.max(o),M=C-y,T=[i[0].y,i[1].y,i[2].y,i[3].y],D=l.util.array.min(T),L=l.util.array.max(T),R=L-D;return{left:y,top:D,width:M,height:R}},invertTransform:function(i){var s=1/(i[0]*i[3]-i[1]*i[2]),m=[s*i[3],-s*i[1],-s*i[2],s*i[0]],o=l.util.transformPoint({x:i[4],y:i[5]},m,!0);return m[4]=-o.x,m[5]=-o.y,m},toFixed:function(i,s){return parseFloat(Number(i).toFixed(s))},parseUnit:function(i,s){var m=/\D{0,2}$/.exec(i),o=parseFloat(i);switch(s||(s=l.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return o*l.DPI/25.4;case"cm":return o*l.DPI/2.54;case"in":return o*l.DPI;case"pt":return o*l.DPI/72;case"pc":return o*l.DPI/72*12;case"em":return o*s;default:return o}},falseFunction:function(){return!1},getKlass:function(i,s){return i=l.util.string.camelize(i.charAt(0).toUpperCase()+i.slice(1)),l.util.resolveNamespace(s)[i]},getSvgAttributes:function(i){var s=["instantiated_by_use","style","id","class"];switch(i){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"]);break}return s},resolveNamespace:function(i){if(!i)return l;var s=i.split("."),m=s.length,o,y=p||l.window;for(o=0;o<m;++o)y=y[s[o]];return y},loadImage:function(i,s,m,o){if(!i){s&&s.call(m,i);return}var y=l.util.createImage(),C=function(){s&&s.call(m,y,!1),y=y.onload=y.onerror=null};y.onload=C,y.onerror=function(){l.log("Error loading "+y.src),s&&s.call(m,null,!0),y=y.onload=y.onerror=null},i.indexOf("data")!==0&&o!==void 0&&o!==null&&(y.crossOrigin=o),i.substring(0,14)==="data:image/svg"&&(y.onload=null,l.util.loadImageInDom(y,C)),y.src=i},loadImageInDom:function(i,s){var m=l.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(i),l.document.querySelector("body").appendChild(m),i.onload=function(){s(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(i,s,m,o){i=i||[];var y=[],C=0,M=i.length;function T(){++C===M&&s&&s(y.filter(function(D){return D}))}if(!M){s&&s(y);return}i.forEach(function(D,L){if(!D||!D.type){T();return}var R=l.util.getKlass(D.type,m);R.fromObject(D,function(F,W){W||(y[L]=F),o&&o(D,F,W),T()})})},enlivenPatterns:function(i,s){i=i||[];function m(){++y===C&&s&&s(o)}var o=[],y=0,C=i.length;if(!C){s&&s(o);return}i.forEach(function(M,T){M&&M.source?new l.Pattern(M,function(D){o[T]=D,m()}):(o[T]=M,m())})},groupSVGElements:function(i,s,m){var o;return i&&i.length===1?i[0]:(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),o=new l.Group(i,s),typeof m!="undefined"&&(o.sourcePath=m),o)},populateWithProperties:function(i,s,m){if(m&&Object.prototype.toString.call(m)==="[object Array]")for(var o=0,y=m.length;o<y;o++)m[o]in i&&(s[m[o]]=i[m[o]])},drawDashedLine:function(i,s,m,o,y,C){var M=o-s,T=y-m,D=a(M*M+T*T),L=d(T,M),R=C.length,F=0,W=!0;for(i.save(),i.translate(s,m),i.moveTo(0,0),i.rotate(L),s=0;D>s;)s+=C[F++%R],s>D&&(s=D),i[W?"lineTo":"moveTo"](s,0),W=!W;i.restore()},createCanvasElement:function(){return l.document.createElement("canvas")},copyCanvasElement:function(i){var s=l.util.createCanvasElement();return s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),s},toDataURL:function(i,s,m){return i.toDataURL("image/"+s,m)},createImage:function(){return l.document.createElement("img")},multiplyTransformMatrices:function(i,s,m){return[i[0]*s[0]+i[2]*s[1],i[1]*s[0]+i[3]*s[1],i[0]*s[2]+i[2]*s[3],i[1]*s[2]+i[3]*s[3],m?0:i[0]*s[4]+i[2]*s[5]+i[4],m?0:i[1]*s[4]+i[3]*s[5]+i[5]]},qrDecompose:function(i){var s=d(i[1],i[0]),m=u(i[0],2)+u(i[1],2),o=a(m),y=(i[0]*i[3]-i[2]*i[1])/o,C=d(i[0]*i[2]+i[1]*i[3],m);return{angle:s/t,scaleX:o,scaleY:y,skewX:C/t,skewY:0,translateX:i[4],translateY:i[5]}},calcRotateMatrix:function(i){if(!i.angle)return l.iMatrix.concat();var s=l.util.degreesToRadians(i.angle),m=l.util.cos(s),o=l.util.sin(s);return[m,o,-o,m,0,0]},calcDimensionsMatrix:function(i){var s=typeof i.scaleX=="undefined"?1:i.scaleX,m=typeof i.scaleY=="undefined"?1:i.scaleY,o=[i.flipX?-s:s,0,0,i.flipY?-m:m,0,0],y=l.util.multiplyTransformMatrices,C=l.util.degreesToRadians;return i.skewX&&(o=y(o,[1,0,Math.tan(C(i.skewX)),1],!0)),i.skewY&&(o=y(o,[1,Math.tan(C(i.skewY)),0,1],!0)),o},composeMatrix:function(i){var s=[1,0,0,1,i.translateX||0,i.translateY||0],m=l.util.multiplyTransformMatrices;return i.angle&&(s=m(s,l.util.calcRotateMatrix(i))),(i.scaleX!==1||i.scaleY!==1||i.skewX||i.skewY||i.flipX||i.flipY)&&(s=m(s,l.util.calcDimensionsMatrix(i))),s},resetObjectTransform:function(i){i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},saveObjectTransform:function(i){return{scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}},isTransparent:function(i,s,m,o){o>0&&(s>o?s-=o:s=0,m>o?m-=o:m=0);var y=!0,C,M,T=i.getImageData(s,m,o*2||1,o*2||1),D=T.data.length;for(C=3;C<D&&(M=T.data[C],y=M<=0,y!==!1);C+=4);return T=null,y},parsePreserveAspectRatioAttribute:function(i){var s="meet",m="Mid",o="Mid",y=i.split(" "),C;return y&&y.length&&(s=y.pop(),s!=="meet"&&s!=="slice"?(C=s,s="meet"):y.length&&(C=y.pop())),m=C!=="none"?C.slice(1,4):"none",o=C!=="none"?C.slice(5,8):"none",{meetOrSlice:s,alignX:m,alignY:o}},clearFabricFontCache:function(i){i=(i||"").toLowerCase(),i?l.charWidthsCache[i]&&delete l.charWidthsCache[i]:l.charWidthsCache={}},limitDimsByArea:function(i,s){var m=Math.sqrt(s*i),o=Math.floor(s/m);return{x:Math.floor(m),y:o}},capValue:function(i,s,m){return Math.max(i,Math.min(s,m))},findScaleToFit:function(i,s){return Math.min(s.width/i.width,s.height/i.height)},findScaleToCover:function(i,s){return Math.max(s.width/i.width,s.height/i.height)},matrixToSVG:function(i){return"matrix("+i.map(function(s){return l.util.toFixed(s,l.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(i,s){var m=l.util.invertTransform(s),o=l.util.multiplyTransformMatrices(m,i.calcOwnMatrix());l.util.applyTransformToObject(i,o)},addTransformToObject:function(i,s){l.util.applyTransformToObject(i,l.util.multiplyTransformMatrices(s,i.calcOwnMatrix()))},applyTransformToObject:function(i,s){var m=l.util.qrDecompose(s),o=new l.Point(m.translateX,m.translateY);i.flipX=!1,i.flipY=!1,i.set("scaleX",m.scaleX),i.set("scaleY",m.scaleY),i.skewX=m.skewX,i.skewY=m.skewY,i.angle=m.angle,i.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(i,s,m){var o=i/2,y=s/2,C=[{x:-o,y:-y},{x:o,y:-y},{x:-o,y},{x:o,y}],M=l.util.calcDimensionsMatrix(m),T=l.util.makeBoundingBoxFromPoints(C,M);return{x:T.width,y:T.height}}}}(x),function(){var p=Array.prototype.join,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},d={m:"l",M:"L"};function u(Q,G,rt,H,Y,X,Z,yt,ht,It,Tt){var xt=l.util.cos(Q),st=l.util.sin(Q),K=l.util.cos(G),et=l.util.sin(G),ct=rt*Y*K-H*X*et+Z,ft=H*Y*K+rt*X*et+yt,Ct=It+ht*(-rt*Y*st-H*X*xt),Pt=Tt+ht*(-H*Y*st+rt*X*xt),Zt=ct+ht*(rt*Y*et+H*X*K),Xt=ft+ht*(H*Y*et-rt*X*K);return["C",Ct,Pt,Zt,Xt,ct,ft]}function t(Q,G,rt,H,Y,X,Z){var yt=Math.PI,ht=Z*yt/180,It=l.util.sin(ht),Tt=l.util.cos(ht),xt=0,st=0;rt=Math.abs(rt),H=Math.abs(H);var K=-Tt*Q*.5-It*G*.5,et=-Tt*G*.5+It*Q*.5,ct=rt*rt,ft=H*H,Ct=et*et,Pt=K*K,Zt=ct*ft-ct*Ct-ft*Pt,Xt=0;if(Zt<0){var St=Math.sqrt(1-Zt/(ct*ft));rt*=St,H*=St}else Xt=(Y===X?-1:1)*Math.sqrt(Zt/(ct*Ct+ft*Pt));var Jt=Xt*rt*et/H,Kt=-Xt*H*K/rt,ae=Tt*Jt-It*Kt+Q*.5,ve=It*Jt+Tt*Kt+G*.5,ue=e(1,0,(K-Jt)/rt,(et-Kt)/H),Wt=e((K-Jt)/rt,(et-Kt)/H,(-K-Jt)/rt,(-et-Kt)/H);X===0&&Wt>0?Wt-=2*yt:X===1&&Wt<0&&(Wt+=2*yt);for(var Gt=Math.ceil(Math.abs(Wt/yt*2)),$t=[],ne=Wt/Gt,ce=8/3*Math.sin(ne/4)*Math.sin(ne/4)/Math.sin(ne/2),wt=ue+ne,_t=0;_t<Gt;_t++)$t[_t]=u(ue,wt,Tt,It,rt,H,ae,ve,ce,xt,st),xt=$t[_t][5],st=$t[_t][6],ue=wt,wt+=ne;return $t}function e(Q,G,rt,H){var Y=Math.atan2(G,Q),X=Math.atan2(H,rt);return X>=Y?X-Y:2*Math.PI-(Y-X)}function i(Q,G,rt,H,Y,X,Z,yt){var ht;if(l.cachesBoundsOfCurve&&(ht=p.call(arguments),l.boundsOfCurveCache[ht]))return l.boundsOfCurveCache[ht];var It=Math.sqrt,Tt=Math.min,xt=Math.max,st=Math.abs,K=[],et=[[],[]],ct,ft,Ct,Pt,Zt,Xt,St,Jt;ft=6*Q-12*rt+6*Y,ct=-3*Q+9*rt-9*Y+3*Z,Ct=3*rt-3*Q;for(var Kt=0;Kt<2;++Kt){if(Kt>0&&(ft=6*G-12*H+6*X,ct=-3*G+9*H-9*X+3*yt,Ct=3*H-3*G),st(ct)<1e-12){if(st(ft)<1e-12)continue;Pt=-Ct/ft,0<Pt&&Pt<1&&K.push(Pt);continue}St=ft*ft-4*Ct*ct,!(St<0)&&(Jt=It(St),Zt=(-ft+Jt)/(2*ct),0<Zt&&Zt<1&&K.push(Zt),Xt=(-ft-Jt)/(2*ct),0<Xt&&Xt<1&&K.push(Xt))}for(var ae,ve,ue=K.length,Wt=ue,Gt;ue--;)Pt=K[ue],Gt=1-Pt,ae=Gt*Gt*Gt*Q+3*Gt*Gt*Pt*rt+3*Gt*Pt*Pt*Y+Pt*Pt*Pt*Z,et[0][ue]=ae,ve=Gt*Gt*Gt*G+3*Gt*Gt*Pt*H+3*Gt*Pt*Pt*X+Pt*Pt*Pt*yt,et[1][ue]=ve;et[0][Wt]=Q,et[1][Wt]=G,et[0][Wt+1]=Z,et[1][Wt+1]=yt;var $t=[{x:Tt.apply(null,et[0]),y:Tt.apply(null,et[1])},{x:xt.apply(null,et[0]),y:xt.apply(null,et[1])}];return l.cachesBoundsOfCurve&&(l.boundsOfCurveCache[ht]=$t),$t}function s(Q,G,rt){for(var H=rt[1],Y=rt[2],X=rt[3],Z=rt[4],yt=rt[5],ht=rt[6],It=rt[7],Tt=t(ht-Q,It-G,H,Y,Z,yt,X),xt=0,st=Tt.length;xt<st;xt++)Tt[xt][1]+=Q,Tt[xt][2]+=G,Tt[xt][3]+=Q,Tt[xt][4]+=G,Tt[xt][5]+=Q,Tt[xt][6]+=G;return Tt}function m(Q){var G=0,rt=0,H=Q.length,Y=0,X=0,Z,yt,ht,It=[],Tt,xt,st;for(yt=0;yt<H;++yt){switch(ht=!1,Z=Q[yt].slice(0),Z[0]){case"l":Z[0]="L",Z[1]+=G,Z[2]+=rt;case"L":G=Z[1],rt=Z[2];break;case"h":Z[1]+=G;case"H":Z[0]="L",Z[2]=rt,G=Z[1];break;case"v":Z[1]+=rt;case"V":Z[0]="L",rt=Z[1],Z[1]=G,Z[2]=rt;break;case"m":Z[0]="M",Z[1]+=G,Z[2]+=rt;case"M":G=Z[1],rt=Z[2],Y=Z[1],X=Z[2];break;case"c":Z[0]="C",Z[1]+=G,Z[2]+=rt,Z[3]+=G,Z[4]+=rt,Z[5]+=G,Z[6]+=rt;case"C":xt=Z[3],st=Z[4],G=Z[5],rt=Z[6];break;case"s":Z[0]="S",Z[1]+=G,Z[2]+=rt,Z[3]+=G,Z[4]+=rt;case"S":Tt==="C"?(xt=2*G-xt,st=2*rt-st):(xt=G,st=rt),G=Z[3],rt=Z[4],Z[0]="C",Z[5]=Z[3],Z[6]=Z[4],Z[3]=Z[1],Z[4]=Z[2],Z[1]=xt,Z[2]=st,xt=Z[3],st=Z[4];break;case"q":Z[0]="Q",Z[1]+=G,Z[2]+=rt,Z[3]+=G,Z[4]+=rt;case"Q":xt=Z[1],st=Z[2],G=Z[3],rt=Z[4];break;case"t":Z[0]="T",Z[1]+=G,Z[2]+=rt;case"T":Tt==="Q"?(xt=2*G-xt,st=2*rt-st):(xt=G,st=rt),Z[0]="Q",G=Z[1],rt=Z[2],Z[1]=xt,Z[2]=st,Z[3]=G,Z[4]=rt;break;case"a":Z[0]="A",Z[6]+=G,Z[7]+=rt;case"A":ht=!0,It=It.concat(s(G,rt,Z)),G=Z[6],rt=Z[7];break;case"z":case"Z":G=Y,rt=X;break;default:}ht||It.push(Z),Tt=Z[0]}return It}function o(Q,G,rt,H){return Math.sqrt((rt-Q)*(rt-Q)+(H-G)*(H-G))}function y(Q){return Q*Q*Q}function C(Q){return 3*Q*Q*(1-Q)}function M(Q){return 3*Q*(1-Q)*(1-Q)}function T(Q){return(1-Q)*(1-Q)*(1-Q)}function D(Q,G,rt,H,Y,X,Z,yt){return function(ht){var It=y(ht),Tt=C(ht),xt=M(ht),st=T(ht);return{x:Z*It+Y*Tt+rt*xt+Q*st,y:yt*It+X*Tt+H*xt+G*st}}}function L(Q,G,rt,H,Y,X,Z,yt){return function(ht){var It=1-ht,Tt=3*It*It*(rt-Q)+6*It*ht*(Y-rt)+3*ht*ht*(Z-Y),xt=3*It*It*(H-G)+6*It*ht*(X-H)+3*ht*ht*(yt-X);return Math.atan2(xt,Tt)}}function R(Q){return Q*Q}function F(Q){return 2*Q*(1-Q)}function W(Q){return(1-Q)*(1-Q)}function ot(Q,G,rt,H,Y,X){return function(Z){var yt=R(Z),ht=F(Z),It=W(Z);return{x:Y*yt+rt*ht+Q*It,y:X*yt+H*ht+G*It}}}function it(Q,G,rt,H,Y,X){return function(Z){var yt=1-Z,ht=2*yt*(rt-Q)+2*Z*(Y-rt),It=2*yt*(H-G)+2*Z*(X-H);return Math.atan2(It,ht)}}function Mt(Q,G,rt){var H={x:G,y:rt},Y,X=0,Z;for(Z=1;Z<=100;Z+=1)Y=Q(Z/100),X+=o(H.x,H.y,Y.x,Y.y),H=Y;return X}function $(Q,G){for(var rt=0,H=0,Y=Q.iterator,X={x:Q.x,y:Q.y},Z,yt,ht=.01,It=Q.angleFinder,Tt;H<G&&rt<=1&&ht>1e-4;)Z=Y(rt),Tt=rt,yt=o(X.x,X.y,Z.x,Z.y),yt+H>G?(ht/=2,rt-=ht):(X=Z,rt+=ht,H+=yt);return Z.angle=It(Tt),Z}function bt(Q){for(var G=0,rt=Q.length,H,Y=0,X=0,Z=0,yt=0,ht=[],It,Tt,xt,st=0;st<rt;st++){switch(H=Q[st],Tt={x:Y,y:X,command:H[0]},H[0]){case"M":Tt.length=0,Z=Y=H[1],yt=X=H[2];break;case"L":Tt.length=o(Y,X,H[1],H[2]),Y=H[1],X=H[2];break;case"C":It=D(Y,X,H[1],H[2],H[3],H[4],H[5],H[6]),xt=L(Y,X,H[1],H[2],H[3],H[4],H[5],H[6]),Tt.iterator=It,Tt.angleFinder=xt,Tt.length=Mt(It,Y,X),Y=H[5],X=H[6];break;case"Q":It=ot(Y,X,H[1],H[2],H[3],H[4]),xt=it(Y,X,H[1],H[2],H[3],H[4]),Tt.iterator=It,Tt.angleFinder=xt,Tt.length=Mt(It,Y,X),Y=H[3],X=H[4];break;case"Z":case"z":Tt.destX=Z,Tt.destY=yt,Tt.length=o(Y,X,Z,yt),Y=Z,X=yt;break}G+=Tt.length,ht.push(Tt)}return ht.push({length:G,x:Y,y:X}),ht}function U(Q,G,rt){rt||(rt=bt(Q));for(var H=0;G-rt[H].length>0&&H<rt.length-2;)G-=rt[H].length,H++;var Y=rt[H],X=G/Y.length,Z=Y.command,yt=Q[H],ht;switch(Z){case"M":return{x:Y.x,y:Y.y,angle:0};case"Z":case"z":return ht=new l.Point(Y.x,Y.y).lerp(new l.Point(Y.destX,Y.destY),X),ht.angle=Math.atan2(Y.destY-Y.y,Y.destX-Y.x),ht;case"L":return ht=new l.Point(Y.x,Y.y).lerp(new l.Point(yt[1],yt[2]),X),ht.angle=Math.atan2(yt[2]-Y.y,yt[1]-Y.x),ht;case"C":return $(Y,G);case"Q":return $(Y,G)}}function jt(Q){var G=[],rt=[],H,Y,X=l.rePathCommand,Z="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",yt="("+Z+")"+l.commaWsp,ht="([01])"+l.commaWsp+"?",It=yt+"?"+yt+"?"+yt+ht+ht+yt+"?("+Z+")",Tt=new RegExp(It,"g"),xt,st,K;if(!Q||!Q.match)return G;K=Q.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var et=0,ct,ft=K.length;et<ft;et++){H=K[et],st=H.slice(1).trim(),rt.length=0;var Ct=H.charAt(0);if(ct=[Ct],Ct.toLowerCase()==="a")for(var Pt;Pt=Tt.exec(st);)for(var Zt=1;Zt<Pt.length;Zt++)rt.push(Pt[Zt]);else for(;xt=X.exec(st);)rt.push(xt[0]);for(var Zt=0,Xt=rt.length;Zt<Xt;Zt++)Y=parseFloat(rt[Zt]),isNaN(Y)||ct.push(Y);var St=a[Ct.toLowerCase()],Jt=d[Ct]||Ct;if(ct.length-1>St)for(var Kt=1,ae=ct.length;Kt<ae;Kt+=St)G.push([Ct].concat(ct.slice(Kt,Kt+St))),Ct=Jt;else G.push(ct)}return G}function gt(Q,G){var rt=[],H,Y=new l.Point(Q[0].x,Q[0].y),X=new l.Point(Q[1].x,Q[1].y),Z=Q.length,yt=1,ht=0,It=Z>2;for(G=G||0,It&&(yt=Q[2].x<X.x?-1:Q[2].x===X.x?0:1,ht=Q[2].y<X.y?-1:Q[2].y===X.y?0:1),rt.push(["M",Y.x-yt*G,Y.y-ht*G]),H=1;H<Z;H++){if(!Y.eq(X)){var Tt=Y.midPointFrom(X);rt.push(["Q",Y.x,Y.y,Tt.x,Tt.y])}Y=Q[H],H+1<Q.length&&(X=Q[H+1])}return It&&(yt=Y.x>Q[H-2].x?1:Y.x===Q[H-2].x?0:-1,ht=Y.y>Q[H-2].y?1:Y.y===Q[H-2].y?0:-1),rt.push(["L",Y.x+yt*G,Y.y+ht*G]),rt}function Nt(Q,G,rt){return rt&&(G=l.util.multiplyTransformMatrices(G,[1,0,0,1,-rt.x,-rt.y])),Q.map(function(H){for(var Y=H.slice(0),X={},Z=1;Z<H.length-1;Z+=2)X.x=H[Z],X.y=H[Z+1],X=l.util.transformPoint(X,G),Y[Z]=X.x,Y[Z+1]=X.y;return Y})}function V(Q,G,rt,H,Y,X,Z,yt,ht){for(var It=0,Tt=0,xt,st=[],K=t(yt-Q,ht-G,rt,H,X,Z,Y),et=0,ct=K.length;et<ct;et++)xt=i(It,Tt,K[et][1],K[et][2],K[et][3],K[et][4],K[et][5],K[et][6]),st.push({x:xt[0].x+Q,y:xt[0].y+G}),st.push({x:xt[1].x+Q,y:xt[1].y+G}),It=K[et][5],Tt=K[et][6];return st}function q(Q,G,rt,H){H=H.slice(0).unshift("X");var Y=s(G,rt,H);Y.forEach(function(X){Q.bezierCurveTo.apply(Q,X.slice(1))})}l.util.joinPath=function(Q){return Q.map(function(G){return G.join(" ")}).join(" ")},l.util.parsePath=jt,l.util.makePathSimpler=m,l.util.getSmoothPathFromPoints=gt,l.util.getPathSegmentsInfo=bt,l.util.getBoundsOfCurve=i,l.util.getPointOnPath=U,l.util.transformPath=Nt,l.util.fromArcToBeizers=s,l.util.getBoundsOfArc=V,l.util.drawArc=q}(),function(){var p=Array.prototype.slice;function a(i,s){for(var m=p.call(arguments,2),o=[],y=0,C=i.length;y<C;y++)o[y]=m.length?i[y][s].apply(i[y],m):i[y][s].call(i[y]);return o}function d(i,s){return e(i,s,function(m,o){return m>=o})}function u(i,s){return e(i,s,function(m,o){return m<o})}function t(i,s){for(var m=i.length;m--;)i[m]=s;return i}function e(i,s,m){if(!(!i||i.length===0)){var o=i.length-1,y=s?i[o][s]:i[o];if(s)for(;o--;)m(i[o][s],y)&&(y=i[o][s]);else for(;o--;)m(i[o],y)&&(y=i[o]);return y}}l.util.array={fill:t,invoke:a,min:u,max:d}}(),function(){function p(d,u,t){if(t)if(!l.isLikelyNode&&u instanceof Element)d=u;else if(u instanceof Array){d=[];for(var e=0,i=u.length;e<i;e++)d[e]=p({},u[e],t)}else if(u&&typeof u=="object")for(var s in u)s==="canvas"||s==="group"?d[s]=null:u.hasOwnProperty(s)&&(d[s]=p({},u[s],t));else d=u;else for(var s in u)d[s]=u[s];return d}function a(d,u){return p({},d,u)}l.util.object={extend:p,clone:a},l.util.object.extend(l.util,l.Observable)}(),function(){function p(e){return e.replace(/-+(.)?/g,function(i,s){return s?s.toUpperCase():""})}function a(e,i){return e.charAt(0).toUpperCase()+(i?e.slice(1):e.slice(1).toLowerCase())}function d(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e){var i=0,s,m=[];for(i=0,s;i<e.length;i++)(s=t(e,i))!==!1&&m.push(s);return m}function t(e,i){var s=e.charCodeAt(i);if(isNaN(s))return"";if(s<55296||s>57343)return e.charAt(i);if(55296<=s&&s<=56319){if(e.length<=i+1)throw"High surrogate without following low surrogate";var m=e.charCodeAt(i+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return e.charAt(i)+e.charAt(i+1)}if(i===0)throw"Low surrogate without preceding high surrogate";var o=e.charCodeAt(i-1);if(55296>o||o>56319)throw"Low surrogate without preceding high surrogate";return!1}l.util.string={camelize:p,capitalize:a,escapeXml:d,graphemeSplit:u}}(),function(){var p=Array.prototype.slice,a=function(){},d=function(){for(var s in{toString:1})if(s==="toString")return!1;return!0}(),u=function(s,m,o){for(var y in m)y in s.prototype&&typeof s.prototype[y]=="function"&&(m[y]+"").indexOf("callSuper")>-1?s.prototype[y]=function(C){return function(){var M=this.constructor.superclass;this.constructor.superclass=o;var T=m[C].apply(this,arguments);if(this.constructor.superclass=M,C!=="initialize")return T}}(y):s.prototype[y]=m[y],d&&(m.toString!==Object.prototype.toString&&(s.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(s.prototype.valueOf=m.valueOf))};function t(){}function e(s){for(var m=null,o=this;o.constructor.superclass;){var y=o.constructor.superclass.prototype[s];if(o[s]!==y){m=y;break}o=o.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,p.call(arguments,1)):m.call(this):console.log("tried to callSuper "+s+", method not found in prototype chain",this)}function i(){var s=null,m=p.call(arguments,0);typeof m[0]=="function"&&(s=m.shift());function o(){this.initialize.apply(this,arguments)}o.superclass=s,o.subclasses=[],s&&(t.prototype=s.prototype,o.prototype=new t,s.subclasses.push(o));for(var y=0,C=m.length;y<C;y++)u(o,m[y],s);return o.prototype.initialize||(o.prototype.initialize=a),o.prototype.constructor=o,o.prototype.callSuper=e,o}l.util.createClass=i}(),function(){var p=!!l.document.createElement("div").attachEvent,a=["touchstart","touchmove","touchend"];l.util.addListener=function(u,t,e,i){u&&u.addEventListener(t,e,p?!1:i)},l.util.removeListener=function(u,t,e,i){u&&u.removeEventListener(t,e,p?!1:i)};function d(u){var t=u.changedTouches;return t&&t[0]?t[0]:u}l.util.getPointer=function(u){var t=u.target,e=l.util.getScrollLeftTop(t),i=d(u);return{x:i.clientX+e.left,y:i.clientY+e.top}},l.util.isTouchEvent=function(u){return a.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function p(i,s){var m=i.style;if(!m)return i;if(typeof s=="string")return i.style.cssText+=";"+s,s.indexOf("opacity")>-1?e(i,s.match(/opacity:\s*(\d?\.?\d*)/)[1]):i;for(var o in s)if(o==="opacity")e(i,s[o]);else{var y=o==="float"||o==="cssFloat"?typeof m.styleFloat=="undefined"?"cssFloat":"styleFloat":o;m[y]=s[o]}return i}var a=l.document.createElement("div"),d=typeof a.style.opacity=="string",u=typeof a.style.filter=="string",t=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,e=function(i){return i};d?e=function(i,s){return i.style.opacity=s,i}:u&&(e=function(i,s){var m=i.style;return i.currentStyle&&!i.currentStyle.hasLayout&&(m.zoom=1),t.test(m.filter)?(s=s>=.9999?"":"alpha(opacity="+s*100+")",m.filter=m.filter.replace(t,s)):m.filter+=" alpha(opacity="+s*100+")",i}),l.util.setStyle=p}(),function(){var p=Array.prototype.slice;function a(T){return typeof T=="string"?l.document.getElementById(T):T}var d,u=function(T){return p.call(T,0)};try{d=u(l.document.childNodes)instanceof Array}catch(T){}d||(u=function(T){for(var D=new Array(T.length),L=T.length;L--;)D[L]=T[L];return D});function t(T,D){var L=l.document.createElement(T);for(var R in D)R==="class"?L.className=D[R]:R==="for"?L.htmlFor=D[R]:L.setAttribute(R,D[R]);return L}function e(T,D){T&&(" "+T.className+" ").indexOf(" "+D+" ")===-1&&(T.className+=(T.className?" ":"")+D)}function i(T,D,L){return typeof D=="string"&&(D=t(D,L)),T.parentNode&&T.parentNode.replaceChild(D,T),D.appendChild(T),D}function s(T){for(var D=0,L=0,R=l.document.documentElement,F=l.document.body||{scrollLeft:0,scrollTop:0};T&&(T.parentNode||T.host)&&(T=T.parentNode||T.host,T===l.document?(D=F.scrollLeft||R.scrollLeft||0,L=F.scrollTop||R.scrollTop||0):(D+=T.scrollLeft||0,L+=T.scrollTop||0),!(T.nodeType===1&&T.style.position==="fixed")););return{left:D,top:L}}function m(T){var D,L=T&&T.ownerDocument,R={left:0,top:0},F={left:0,top:0},W,ot={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!L)return F;for(var it in ot)F[ot[it]]+=parseInt(o(T,it),10)||0;return D=L.documentElement,typeof T.getBoundingClientRect!="undefined"&&(R=T.getBoundingClientRect()),W=s(T),{left:R.left+W.left-(D.clientLeft||0)+F.left,top:R.top+W.top-(D.clientTop||0)+F.top}}var o;l.document.defaultView&&l.document.defaultView.getComputedStyle?o=function(T,D){var L=l.document.defaultView.getComputedStyle(T,null);return L?L[D]:void 0}:o=function(T,D){var L=T.style[D];return!L&&T.currentStyle&&(L=T.currentStyle[D]),L},function(){var T=l.document.documentElement.style,D="userSelect"in T?"userSelect":"MozUserSelect"in T?"MozUserSelect":"WebkitUserSelect"in T?"WebkitUserSelect":"KhtmlUserSelect"in T?"KhtmlUserSelect":"";function L(F){return typeof F.onselectstart!="undefined"&&(F.onselectstart=l.util.falseFunction),D?F.style[D]="none":typeof F.unselectable=="string"&&(F.unselectable="on"),F}function R(F){return typeof F.onselectstart!="undefined"&&(F.onselectstart=null),D?F.style[D]="":typeof F.unselectable=="string"&&(F.unselectable=""),F}l.util.makeElementUnselectable=L,l.util.makeElementSelectable=R}();function y(T){var D=l.jsdomImplForWrapper(T);return D._canvas||D._image}function C(T){if(l.isLikelyNode){var D=l.jsdomImplForWrapper(T);D&&(D._image=null,D._canvas=null,D._currentSrc=null,D._attributes=null,D._classList=null)}}function M(T,D){T.imageSmoothingEnabled=T.imageSmoothingEnabled||T.webkitImageSmoothingEnabled||T.mozImageSmoothingEnabled||T.msImageSmoothingEnabled||T.oImageSmoothingEnabled,T.imageSmoothingEnabled=D}l.util.setImageSmoothing=M,l.util.getById=a,l.util.toArray=u,l.util.addClass=e,l.util.makeElement=t,l.util.wrapElement=i,l.util.getScrollLeftTop=s,l.util.getElementOffset=m,l.util.getNodeCanvas=y,l.util.cleanUpJsdomNode=C}(),function(){function p(u,t){return u+(/\?/.test(u)?"&":"?")+t}function a(){}function d(u,t){t||(t={});var e=t.method?t.method.toUpperCase():"GET",i=t.onComplete||function(){},s=new l.window.XMLHttpRequest,m=t.body||t.parameters;return s.onreadystatechange=function(){s.readyState===4&&(i(s),s.onreadystatechange=a)},e==="GET"&&(m=null,typeof t.parameters=="string"&&(u=p(u,t.parameters))),s.open(e,u,!0),(e==="POST"||e==="PUT")&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(m),s}l.util.request=d}(),l.log=console.log,l.warn=console.warn,function(){function p(){return!1}function a(s,m,o,y){return-o*Math.cos(s/y*(Math.PI/2))+o+m}function d(s){var m=!1;return e(function(o){s||(s={});var y=o||+new Date,C=s.duration||500,M=y+C,T,D=s.onChange||p,L=s.abort||p,R=s.onComplete||p,F=s.easing||a,W="startValue"in s?s.startValue:0,ot="endValue"in s?s.endValue:100,it=s.byValue||ot-W;s.onStart&&s.onStart(),function Mt($){T=$||+new Date;var bt=T>M?C:T-y,U=bt/C,jt=F(bt,W,it,C),gt=Math.abs((jt-W)/it);if(!m){if(L(jt,gt,U)){R(ot,1,1);return}if(T>M){D(ot,1,1),R(ot,1,1);return}else D(jt,gt,U),e(Mt)}}(y)}),function(){m=!0}}var u=l.window.requestAnimationFrame||l.window.webkitRequestAnimationFrame||l.window.mozRequestAnimationFrame||l.window.oRequestAnimationFrame||l.window.msRequestAnimationFrame||function(s){return l.window.setTimeout(s,1e3/60)},t=l.window.cancelAnimationFrame||l.window.clearTimeout;function e(){return u.apply(l.window,arguments)}function i(){return t.apply(l.window,arguments)}l.util.animate=d,l.util.requestAnimFrame=e,l.util.cancelAnimFrame=i}(),function(){function p(d,u,t){var e="rgba("+parseInt(d[0]+t*(u[0]-d[0]),10)+","+parseInt(d[1]+t*(u[1]-d[1]),10)+","+parseInt(d[2]+t*(u[2]-d[2]),10);return e+=","+(d&&u?parseFloat(d[3]+t*(u[3]-d[3])):1),e+=")",e}function a(d,u,t,e){var i=new l.Color(d).getSource(),s=new l.Color(u).getSource(),m=e.onComplete,o=e.onChange;return e=e||{},l.util.animate(l.util.object.extend(e,{duration:t||500,startValue:i,endValue:s,byValue:s,easing:function(y,C,M,T){var D=e.colorEasing?e.colorEasing(y,T):1-Math.cos(y/T*(Math.PI/2));return p(C,M,D)},onComplete:function(y,C,M){if(m)return m(p(s,s,0),C,M)},onChange:function(y,C,M){if(o){if(Array.isArray(y))return o(p(y,y,0),C,M);o(y,C,M)}}}))}l.util.animateColor=a}(),function(){function p(V,q,Q,G){return V<Math.abs(q)?(V=q,G=Q/4):q===0&&V===0?G=Q/(2*Math.PI)*Math.asin(1):G=Q/(2*Math.PI)*Math.asin(q/V),{a:V,c:q,p:Q,s:G}}function a(V,q,Q){return V.a*Math.pow(2,10*(q-=1))*Math.sin((q*Q-V.s)*(2*Math.PI)/V.p)}function d(V,q,Q,G){return Q*((V=V/G-1)*V*V+1)+q}function u(V,q,Q,G){return V/=G/2,V<1?Q/2*V*V*V+q:Q/2*((V-=2)*V*V+2)+q}function t(V,q,Q,G){return Q*(V/=G)*V*V*V+q}function e(V,q,Q,G){return-Q*((V=V/G-1)*V*V*V-1)+q}function i(V,q,Q,G){return V/=G/2,V<1?Q/2*V*V*V*V+q:-Q/2*((V-=2)*V*V*V-2)+q}function s(V,q,Q,G){return Q*(V/=G)*V*V*V*V+q}function m(V,q,Q,G){return Q*((V=V/G-1)*V*V*V*V+1)+q}function o(V,q,Q,G){return V/=G/2,V<1?Q/2*V*V*V*V*V+q:Q/2*((V-=2)*V*V*V*V+2)+q}function y(V,q,Q,G){return-Q*Math.cos(V/G*(Math.PI/2))+Q+q}function C(V,q,Q,G){return Q*Math.sin(V/G*(Math.PI/2))+q}function M(V,q,Q,G){return-Q/2*(Math.cos(Math.PI*V/G)-1)+q}function T(V,q,Q,G){return V===0?q:Q*Math.pow(2,10*(V/G-1))+q}function D(V,q,Q,G){return V===G?q+Q:Q*(-Math.pow(2,-10*V/G)+1)+q}function L(V,q,Q,G){return V===0?q:V===G?q+Q:(V/=G/2,V<1?Q/2*Math.pow(2,10*(V-1))+q:Q/2*(-Math.pow(2,-10*--V)+2)+q)}function R(V,q,Q,G){return-Q*(Math.sqrt(1-(V/=G)*V)-1)+q}function F(V,q,Q,G){return Q*Math.sqrt(1-(V=V/G-1)*V)+q}function W(V,q,Q,G){return V/=G/2,V<1?-Q/2*(Math.sqrt(1-V*V)-1)+q:Q/2*(Math.sqrt(1-(V-=2)*V)+1)+q}function ot(V,q,Q,G){var rt=1.70158,H=0,Y=Q;if(V===0)return q;if(V/=G,V===1)return q+Q;H||(H=G*.3);var X=p(Y,Q,H,rt);return-a(X,V,G)+q}function it(V,q,Q,G){var rt=1.70158,H=0,Y=Q;if(V===0)return q;if(V/=G,V===1)return q+Q;H||(H=G*.3);var X=p(Y,Q,H,rt);return X.a*Math.pow(2,-10*V)*Math.sin((V*G-X.s)*(2*Math.PI)/X.p)+X.c+q}function Mt(V,q,Q,G){var rt=1.70158,H=0,Y=Q;if(V===0)return q;if(V/=G/2,V===2)return q+Q;H||(H=G*.44999999999999996);var X=p(Y,Q,H,rt);return V<1?-.5*a(X,V,G)+q:X.a*Math.pow(2,-10*(V-=1))*Math.sin((V*G-X.s)*(2*Math.PI)/X.p)*.5+X.c+q}function $(V,q,Q,G,rt){return rt===void 0&&(rt=1.70158),Q*(V/=G)*V*((rt+1)*V-rt)+q}function bt(V,q,Q,G,rt){return rt===void 0&&(rt=1.70158),Q*((V=V/G-1)*V*((rt+1)*V+rt)+1)+q}function U(V,q,Q,G,rt){return rt===void 0&&(rt=1.70158),V/=G/2,V<1?Q/2*(V*V*(((rt*=1.525)+1)*V-rt))+q:Q/2*((V-=2)*V*(((rt*=1.525)+1)*V+rt)+2)+q}function jt(V,q,Q,G){return Q-gt(G-V,0,Q,G)+q}function gt(V,q,Q,G){return(V/=G)<.36363636363636365?Q*(7.5625*V*V)+q:V<.7272727272727273?Q*(7.5625*(V-=.5454545454545454)*V+.75)+q:V<.9090909090909091?Q*(7.5625*(V-=.8181818181818182)*V+.9375)+q:Q*(7.5625*(V-=.9545454545454546)*V+.984375)+q}function Nt(V,q,Q,G){return V<G/2?jt(V*2,0,Q,G)*.5+q:gt(V*2-G,0,Q,G)*.5+Q*.5+q}l.util.ease={easeInQuad:function(V,q,Q,G){return Q*(V/=G)*V+q},easeOutQuad:function(V,q,Q,G){return-Q*(V/=G)*(V-2)+q},easeInOutQuad:function(V,q,Q,G){return V/=G/2,V<1?Q/2*V*V+q:-Q/2*(--V*(V-2)-1)+q},easeInCubic:function(V,q,Q,G){return Q*(V/=G)*V*V+q},easeOutCubic:d,easeInOutCubic:u,easeInQuart:t,easeOutQuart:e,easeInOutQuart:i,easeInQuint:s,easeOutQuint:m,easeInOutQuint:o,easeInSine:y,easeOutSine:C,easeInOutSine:M,easeInExpo:T,easeOutExpo:D,easeInOutExpo:L,easeInCirc:R,easeOutCirc:F,easeInOutCirc:W,easeInElastic:ot,easeOutElastic:it,easeInOutElastic:Mt,easeInBack:$,easeOutBack:bt,easeInOutBack:U,easeInBounce:jt,easeOutBounce:gt,easeInOutBounce:Nt}}(),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.extend,u=a.util.object.clone,t=a.util.toFixed,e=a.util.parseUnit,i=a.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],o=["pattern","defs","symbol","metadata","clipPath","mask","desc"],y=["symbol","g","a","svg","clipPath","defs"],C={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},M={stroke:"strokeOpacity",fill:"fillOpacity"},T="font-size",D="clip-path";a.svgValidTagNamesRegEx=F(s),a.svgViewBoxElementsRegEx=F(m),a.svgInvalidAncestorsRegEx=F(o),a.svgValidParentsRegEx=F(y),a.cssRules={},a.gradientDefs={},a.clipPaths={};function L(H){return H in C?C[H]:H}function R(H,Y,X,Z){var yt=Object.prototype.toString.call(Y)==="[object Array]",ht;if((H==="fill"||H==="stroke")&&Y==="none")Y="";else{if(H==="strokeUniform")return Y==="non-scaling-stroke";if(H==="strokeDashArray")Y==="none"?Y=null:Y=Y.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(H==="transformMatrix")X&&X.transformMatrix?Y=i(X.transformMatrix,a.parseTransformAttribute(Y)):Y=a.parseTransformAttribute(Y);else if(H==="visible")Y=Y!=="none"&&Y!=="hidden",X&&X.visible===!1&&(Y=!1);else if(H==="opacity")Y=parseFloat(Y),X&&typeof X.opacity!="undefined"&&(Y*=X.opacity);else if(H==="textAnchor")Y=Y==="start"?"left":Y==="end"?"right":"center";else if(H==="charSpacing")ht=e(Y,Z)/Z*1e3;else if(H==="paintFirst"){var It=Y.indexOf("fill"),Tt=Y.indexOf("stroke"),Y="fill";(It>-1&&Tt>-1&&Tt<It||It===-1&&Tt>-1)&&(Y="stroke")}else{if(H==="href"||H==="xlink:href"||H==="font")return Y;if(H==="imageSmoothing")return Y==="optimizeQuality";ht=yt?Y.map(e):e(Y,Z)}}return!yt&&isNaN(ht)?Y:ht}function F(H){return new RegExp("^("+H.join("|")+")\\b","i")}function W(H){for(var Y in M)if(!(typeof H[M[Y]]=="undefined"||H[Y]==="")){if(typeof H[Y]=="undefined"){if(!a.Object.prototype[Y])continue;H[Y]=a.Object.prototype[Y]}if(H[Y].indexOf("url(")!==0){var X=new a.Color(H[Y]);H[Y]=X.setAlpha(t(X.getAlpha()*H[M[Y]],2)).toRgba()}}return H}function ot(H,Y){var X,Z=[],yt,ht,It;for(ht=0,It=Y.length;ht<It;ht++)X=Y[ht],yt=H.getElementsByTagName(X),Z=Z.concat(Array.prototype.slice.call(yt));return Z}a.parseTransformAttribute=function(){function H(St,Jt){var Kt=a.util.cos(Jt[0]),ae=a.util.sin(Jt[0]),ve=0,ue=0;Jt.length===3&&(ve=Jt[1],ue=Jt[2]),St[0]=Kt,St[1]=ae,St[2]=-ae,St[3]=Kt,St[4]=ve-(Kt*ve-ae*ue),St[5]=ue-(ae*ve+Kt*ue)}function Y(St,Jt){var Kt=Jt[0],ae=Jt.length===2?Jt[1]:Jt[0];St[0]=Kt,St[3]=ae}function X(St,Jt,Kt){St[Kt]=Math.tan(a.util.degreesToRadians(Jt[0]))}function Z(St,Jt){St[4]=Jt[0],Jt.length===2&&(St[5]=Jt[1])}var yt=a.iMatrix,ht=a.reNum,It=a.commaWsp,Tt="(?:(skewX)\\s*\\(\\s*("+ht+")\\s*\\))",xt="(?:(skewY)\\s*\\(\\s*("+ht+")\\s*\\))",st="(?:(rotate)\\s*\\(\\s*("+ht+")(?:"+It+"("+ht+")"+It+"("+ht+"))?\\s*\\))",K="(?:(scale)\\s*\\(\\s*("+ht+")(?:"+It+"("+ht+"))?\\s*\\))",et="(?:(translate)\\s*\\(\\s*("+ht+")(?:"+It+"("+ht+"))?\\s*\\))",ct="(?:(matrix)\\s*\\(\\s*("+ht+")"+It+"("+ht+")"+It+"("+ht+")"+It+"("+ht+")"+It+"("+ht+")"+It+"("+ht+")\\s*\\))",ft="(?:"+ct+"|"+et+"|"+K+"|"+st+"|"+Tt+"|"+xt+")",Ct="(?:"+ft+"(?:"+It+"*"+ft+")*)",Pt="^\\s*(?:"+Ct+"?)\\s*$",Zt=new RegExp(Pt),Xt=new RegExp(ft,"g");return function(St){var Jt=yt.concat(),Kt=[];if(!St||St&&!Zt.test(St))return Jt;St.replace(Xt,function(ve){var ue=new RegExp(ft).exec(ve).filter(function($t){return!!$t}),Wt=ue[1],Gt=ue.slice(2).map(parseFloat);switch(Wt){case"translate":Z(Jt,Gt);break;case"rotate":Gt[0]=a.util.degreesToRadians(Gt[0]),H(Jt,Gt);break;case"scale":Y(Jt,Gt);break;case"skewX":X(Jt,Gt,2);break;case"skewY":X(Jt,Gt,1);break;case"matrix":Jt=Gt;break}Kt.push(Jt.concat()),Jt=yt.concat()});for(var ae=Kt[0];Kt.length>1;)Kt.shift(),ae=a.util.multiplyTransformMatrices(ae,Kt[0]);return ae}}();function it(H,Y){var X,Z;H.replace(/;\s*$/,"").split(";").forEach(function(yt){var ht=yt.split(":");X=ht[0].trim().toLowerCase(),Z=ht[1].trim(),Y[X]=Z})}function Mt(H,Y){var X,Z;for(var yt in H)typeof H[yt]!="undefined"&&(X=yt.toLowerCase(),Z=H[yt],Y[X]=Z)}function $(H,Y){var X={};for(var Z in a.cssRules[Y])if(bt(H,Z.split(" ")))for(var yt in a.cssRules[Y][Z])X[yt]=a.cssRules[Y][Z][yt];return X}function bt(H,Y){var X,Z=!0;return X=jt(H,Y.pop()),X&&Y.length&&(Z=U(H,Y)),X&&Z&&Y.length===0}function U(H,Y){for(var X,Z=!0;H.parentNode&&H.parentNode.nodeType===1&&Y.length;)Z&&(X=Y.pop()),H=H.parentNode,Z=jt(H,X);return Y.length===0}function jt(H,Y){var X=H.nodeName,Z=H.getAttribute("class"),yt=H.getAttribute("id"),ht,It;if(ht=new RegExp("^"+X,"i"),Y=Y.replace(ht,""),yt&&Y.length&&(ht=new RegExp("#"+yt+"(?![a-zA-Z\\-]+)","i"),Y=Y.replace(ht,"")),Z&&Y.length)for(Z=Z.split(" "),It=Z.length;It--;)ht=new RegExp("\\."+Z[It]+"(?![a-zA-Z\\-]+)","i"),Y=Y.replace(ht,"");return Y.length===0}function gt(H,Y){var X;if(H.getElementById&&(X=H.getElementById(Y)),X)return X;var Z,yt,ht,It=H.getElementsByTagName("*");for(yt=0,ht=It.length;yt<ht;yt++)if(Z=It[yt],Y===Z.getAttribute("id"))return Z}function Nt(H){for(var Y=ot(H,["use","svg:use"]),X=0;Y.length&&X<Y.length;){var Z=Y[X],yt=Z.getAttribute("xlink:href")||Z.getAttribute("href");if(yt===null)return;var ht=yt.substr(1),It=Z.getAttribute("x")||0,Tt=Z.getAttribute("y")||0,xt=gt(H,ht).cloneNode(!0),st=(xt.getAttribute("transform")||"")+" translate("+It+", "+Tt+")",K,et=Y.length,ct,ft,Ct,Pt,Zt=a.svgNS;if(q(xt),/^svg$/i.test(xt.nodeName)){var Xt=xt.ownerDocument.createElementNS(Zt,"g");for(ft=0,Ct=xt.attributes,Pt=Ct.length;ft<Pt;ft++)ct=Ct.item(ft),Xt.setAttributeNS(Zt,ct.nodeName,ct.nodeValue);for(;xt.firstChild;)Xt.appendChild(xt.firstChild);xt=Xt}for(ft=0,Ct=Z.attributes,Pt=Ct.length;ft<Pt;ft++)ct=Ct.item(ft),!(ct.nodeName==="x"||ct.nodeName==="y"||ct.nodeName==="xlink:href"||ct.nodeName==="href")&&(ct.nodeName==="transform"?st=ct.nodeValue+" "+st:xt.setAttribute(ct.nodeName,ct.nodeValue));xt.setAttribute("transform",st),xt.setAttribute("instantiated_by_use","1"),xt.removeAttribute("id"),K=Z.parentNode,K.replaceChild(xt,Z),Y.length===et&&X++}}var V=new RegExp("^\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*$");function q(H){if(!a.svgViewBoxElementsRegEx.test(H.nodeName))return{};var Y=H.getAttribute("viewBox"),X=1,Z=1,yt=0,ht=0,It,Tt,xt,st,K=H.getAttribute("width"),et=H.getAttribute("height"),ct=H.getAttribute("x")||0,ft=H.getAttribute("y")||0,Ct=H.getAttribute("preserveAspectRatio")||"",Pt=!Y||!(Y=Y.match(V)),Zt=!K||!et||K==="100%"||et==="100%",Xt=Pt&&Zt,St={},Jt="",Kt=0,ae=0;if(St.width=0,St.height=0,St.toBeParsed=Xt,Pt&&(ct||ft)&&H.parentNode&&H.parentNode.nodeName!=="#document"&&(Jt=" translate("+e(ct)+" "+e(ft)+") ",xt=(H.getAttribute("transform")||"")+Jt,H.setAttribute("transform",xt),H.removeAttribute("x"),H.removeAttribute("y")),Xt)return St;if(Pt)return St.width=e(K),St.height=e(et),St;if(yt=-parseFloat(Y[1]),ht=-parseFloat(Y[2]),It=parseFloat(Y[3]),Tt=parseFloat(Y[4]),St.minX=yt,St.minY=ht,St.viewBoxWidth=It,St.viewBoxHeight=Tt,Zt?(St.width=It,St.height=Tt):(St.width=e(K),St.height=e(et),X=St.width/It,Z=St.height/Tt),Ct=a.util.parsePreserveAspectRatioAttribute(Ct),Ct.alignX!=="none"&&(Ct.meetOrSlice==="meet"&&(Z=X=X>Z?Z:X),Ct.meetOrSlice==="slice"&&(Z=X=X>Z?X:Z),Kt=St.width-It*X,ae=St.height-Tt*X,Ct.alignX==="Mid"&&(Kt/=2),Ct.alignY==="Mid"&&(ae/=2),Ct.alignX==="Min"&&(Kt=0),Ct.alignY==="Min"&&(ae=0)),X===1&&Z===1&&yt===0&&ht===0&&ct===0&&ft===0)return St;if((ct||ft)&&H.parentNode.nodeName!=="#document"&&(Jt=" translate("+e(ct)+" "+e(ft)+") "),xt=Jt+" matrix("+X+" 0 0 "+Z+" "+(yt*X+Kt)+" "+(ht*Z+ae)+") ",H.nodeName==="svg"){for(st=H.ownerDocument.createElementNS(a.svgNS,"g");H.firstChild;)st.appendChild(H.firstChild);H.appendChild(st)}else st=H,st.removeAttribute("x"),st.removeAttribute("y"),xt=st.getAttribute("transform")+xt;return st.setAttribute("transform",xt),St}function Q(H,Y){for(;H&&(H=H.parentNode);)if(H.nodeName&&Y.test(H.nodeName.replace("svg:",""))&&!H.getAttribute("instantiated_by_use"))return!0;return!1}a.parseSVGDocument=function(H,Y,X,Z){if(H){Nt(H);var yt=a.Object.__uid++,ht,It,Tt=q(H),xt=a.util.toArray(H.getElementsByTagName("*"));if(Tt.crossOrigin=Z&&Z.crossOrigin,Tt.svgUid=yt,xt.length===0&&a.isLikelyNode){xt=H.selectNodes('//*[name(.)!="svg"]');var st=[];for(ht=0,It=xt.length;ht<It;ht++)st[ht]=xt[ht];xt=st}var K=xt.filter(function(ct){return q(ct),a.svgValidTagNamesRegEx.test(ct.nodeName.replace("svg:",""))&&!Q(ct,a.svgInvalidAncestorsRegEx)});if(!K||K&&!K.length){Y&&Y([],{});return}var et={};xt.filter(function(ct){return ct.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ct){var ft=ct.getAttribute("id");et[ft]=a.util.toArray(ct.getElementsByTagName("*")).filter(function(Ct){return a.svgValidTagNamesRegEx.test(Ct.nodeName.replace("svg:",""))})}),a.gradientDefs[yt]=a.getGradientDefs(H),a.cssRules[yt]=a.getCSSRules(H),a.clipPaths[yt]=et,a.parseElements(K,function(ct,ft){Y&&(Y(ct,Tt,ft,xt),delete a.gradientDefs[yt],delete a.cssRules[yt],delete a.clipPaths[yt])},u(Tt),X,Z)}};function G(H,Y){var X=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Z="xlink:href",yt=Y.getAttribute(Z).substr(1),ht=gt(H,yt);if(ht&&ht.getAttribute(Z)&&G(H,ht),X.forEach(function(Tt){ht&&!Y.hasAttribute(Tt)&&ht.hasAttribute(Tt)&&Y.setAttribute(Tt,ht.getAttribute(Tt))}),!Y.children.length)for(var It=ht.cloneNode(!0);It.firstChild;)Y.appendChild(It.firstChild);Y.removeAttribute(Z)}var rt=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+a.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+a.reNum+"))?\\s+(.*)");d(a,{parseFontDeclaration:function(H,Y){var X=H.match(rt);if(X){var Z=X[1],yt=X[3],ht=X[4],It=X[5],Tt=X[6];Z&&(Y.fontStyle=Z),yt&&(Y.fontWeight=isNaN(parseFloat(yt))?yt:parseFloat(yt)),ht&&(Y.fontSize=e(ht)),Tt&&(Y.fontFamily=Tt),It&&(Y.lineHeight=It==="normal"?1:It)}},getGradientDefs:function(H){var Y=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],X=ot(H,Y),Z,yt=0,ht={};for(yt=X.length;yt--;)Z=X[yt],Z.getAttribute("xlink:href")&&G(H,Z),ht[Z.getAttribute("id")]=Z;return ht},parseAttributes:function(H,Y,X){if(H){var Z,yt={},ht,It;typeof X=="undefined"&&(X=H.getAttribute("svgUid")),H.parentNode&&a.svgValidParentsRegEx.test(H.parentNode.nodeName)&&(yt=a.parseAttributes(H.parentNode,Y,X));var Tt=Y.reduce(function(Ct,Pt){return Z=H.getAttribute(Pt),Z&&(Ct[Pt]=Z),Ct},{}),xt=d($(H,X),a.parseStyleAttribute(H));Tt=d(Tt,xt),xt[D]&&H.setAttribute(D,xt[D]),ht=It=yt.fontSize||a.Text.DEFAULT_SVG_FONT_SIZE,Tt[T]&&(Tt[T]=ht=e(Tt[T],It));var st,K,et={};for(var ct in Tt)st=L(ct),K=R(st,Tt[ct],yt,ht),et[st]=K;et&&et.font&&a.parseFontDeclaration(et.font,et);var ft=d(yt,et);return a.svgValidParentsRegEx.test(H.nodeName)?ft:W(ft)}},parseElements:function(H,Y,X,Z,yt){new a.ElementsParser(H,Y,X,Z,yt).parse()},parseStyleAttribute:function(H){var Y={},X=H.getAttribute("style");return X&&(typeof X=="string"?it(X,Y):Mt(X,Y)),Y},parsePointsAttribute:function(H){if(!H)return null;H=H.replace(/,/g," ").trim(),H=H.split(/\s+/);var Y=[],X,Z;for(X=0,Z=H.length;X<Z;X+=2)Y.push({x:parseFloat(H[X]),y:parseFloat(H[X+1])});return Y},getCSSRules:function(H){var Y=H.getElementsByTagName("style"),X,Z,yt={},ht;for(X=0,Z=Y.length;X<Z;X++){var It=Y[X].textContent;It=It.replace(/\/\*[\s\S]*?\*\//g,""),It.trim()!==""&&(ht=It.match(/[^{]*\{[\s\S]*?\}/g),ht=ht.map(function(Tt){return Tt.trim()}),ht.forEach(function(Tt){var xt=Tt.match(/([\s\S]*?)\s*\{([^}]*)\}/),st={},K=xt[2].trim(),et=K.replace(/;$/,"").split(/\s*;\s*/);for(X=0,Z=et.length;X<Z;X++){var ct=et[X].split(/\s*:\s*/),ft=ct[0],Ct=ct[1];st[ft]=Ct}Tt=xt[1],Tt.split(",").forEach(function(Pt){Pt=Pt.replace(/^svg/i,"").trim(),Pt!==""&&(yt[Pt]?a.util.object.extend(yt[Pt],st):yt[Pt]=a.util.object.clone(st))})}))}return yt},loadSVGFromURL:function(H,Y,X,Z){H=H.replace(/^\n\s*/,"").trim(),new a.util.request(H,{method:"get",onComplete:yt});function yt(ht){var It=ht.responseXML;if(!It||!It.documentElement)return Y&&Y(null),!1;a.parseSVGDocument(It.documentElement,function(Tt,xt,st,K){Y&&Y(Tt,xt,st,K)},X,Z)}},loadSVGFromString:function(H,Y,X,Z){var yt=new a.window.DOMParser,ht=yt.parseFromString(H.trim(),"text/xml");a.parseSVGDocument(ht.documentElement,function(It,Tt,xt,st){Y(It,Tt,xt,st)},X,Z)}})}(x),l.ElementsParser=function(p,a,d,u,t,e){this.elements=p,this.callback=a,this.options=d,this.reviver=u,this.svgUid=d&&d.svgUid||0,this.parsingOptions=t,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=e},function(p){p.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},p.createObjects=function(){var a=this;this.elements.forEach(function(d,u){d.setAttribute("svgUid",a.svgUid),a.createObject(d,u)})},p.findTag=function(a){return l[l.util.string.capitalize(a.tagName.replace("svg:",""))]},p.createObject=function(a,d){var u=this.findTag(a);if(u&&u.fromElement)try{u.fromElement(a,this.createCallback(d,a),this.options)}catch(t){l.log(t)}else this.checkIfDone()},p.createCallback=function(a,d){var u=this;return function(t){var e;u.resolveGradient(t,d,"fill"),u.resolveGradient(t,d,"stroke"),t instanceof l.Image&&t._originalElement&&(e=t.parsePreserveAspectRatioAttribute(d)),t._removeTransformMatrix(e),u.resolveClipPath(t,d),u.reviver&&u.reviver(d,t),u.instances[a]=t,u.checkIfDone()}},p.extractPropertyDefinition=function(a,d,u){var t=a[d],e=this.regexUrl;if(e.test(t)){e.lastIndex=0;var i=e.exec(t)[1];return e.lastIndex=0,l[u][this.svgUid][i]}},p.resolveGradient=function(a,d,u){var t=this.extractPropertyDefinition(a,u,"gradientDefs");if(t){var e=d.getAttribute(u+"-opacity"),i=l.Gradient.fromElement(t,a,e,this.options);a.set(u,i)}},p.createClipPathCallback=function(a,d){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,d.push(u)}},p.resolveClipPath=function(a,d){var u=this.extractPropertyDefinition(a,"clipPath","clipPaths"),t,e,i,s,m,o;if(u){s=[],i=l.util.invertTransform(a.calcTransformMatrix());for(var y=u[0].parentNode,C=d;C.parentNode&&C.getAttribute("clip-path")!==a.clipPath;)C=C.parentNode;C.parentNode.appendChild(y);for(var M=0;M<u.length;M++)t=u[M],e=this.findTag(t),e.fromElement(t,this.createClipPathCallback(a,s),this.options);s.length===1?u=s[0]:u=new l.Group(s),m=l.util.multiplyTransformMatrices(i,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,C);var o=l.util.qrDecompose(m);u.flipX=!1,u.flipY=!1,u.set("scaleX",o.scaleX),u.set("scaleY",o.scaleY),u.angle=o.angle,u.skewX=o.skewX,u.skewY=0,u.setPositionByOrigin({x:o.translateX,y:o.translateY},"center","center"),a.clipPath=u}else delete a.clipPath},p.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(a){return a!=null}),this.callback(this.instances,this.elements))}}(l.ElementsParser.prototype),function(p){"use strict";var a=p.fabric||(p.fabric={});if(a.Point){a.warn("fabric.Point is already defined");return}a.Point=d;function d(u,t){this.x=u,this.y=t}d.prototype={type:"point",constructor:d,add:function(u){return new d(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new d(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new d(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new d(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new d(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new d(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,t){return typeof t=="undefined"&&(t=.5),t=Math.max(Math.min(1,t),0),new d(this.x+(u.x-this.x)*t,this.y+(u.y-this.y)*t)},distanceFrom:function(u){var t=this.x-u.x,e=this.y-u.y;return Math.sqrt(t*t+e*e)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new d(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new d(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,t){return this.x=u,this.y=t,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var t=this.x,e=this.y;this.x=u.x,this.y=u.y,u.x=t,u.y=e},clone:function(){return new d(this.x,this.y)}}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={});if(a.Intersection){a.warn("fabric.Intersection is already defined");return}function d(u){this.status=u,this.points=[]}a.Intersection=d,a.Intersection.prototype={constructor:d,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},a.Intersection.intersectLineLine=function(u,t,e,i){var s,m=(i.x-e.x)*(u.y-e.y)-(i.y-e.y)*(u.x-e.x),o=(t.x-u.x)*(u.y-e.y)-(t.y-u.y)*(u.x-e.x),y=(i.y-e.y)*(t.x-u.x)-(i.x-e.x)*(t.y-u.y);if(y!==0){var C=m/y,M=o/y;0<=C&&C<=1&&0<=M&&M<=1?(s=new d("Intersection"),s.appendPoint(new a.Point(u.x+C*(t.x-u.x),u.y+C*(t.y-u.y)))):s=new d}else m===0||o===0?s=new d("Coincident"):s=new d("Parallel");return s},a.Intersection.intersectLinePolygon=function(u,t,e){var i=new d,s=e.length,m,o,y,C;for(C=0;C<s;C++)m=e[C],o=e[(C+1)%s],y=d.intersectLineLine(u,t,m,o),i.appendPoints(y.points);return i.points.length>0&&(i.status="Intersection"),i},a.Intersection.intersectPolygonPolygon=function(u,t){var e=new d,i=u.length,s;for(s=0;s<i;s++){var m=u[s],o=u[(s+1)%i],y=d.intersectLinePolygon(m,o,t);e.appendPoints(y.points)}return e.points.length>0&&(e.status="Intersection"),e},a.Intersection.intersectPolygonRectangle=function(u,t,e){var i=t.min(e),s=t.max(e),m=new a.Point(s.x,i.y),o=new a.Point(i.x,s.y),y=d.intersectLinePolygon(i,m,u),C=d.intersectLinePolygon(m,s,u),M=d.intersectLinePolygon(s,o,u),T=d.intersectLinePolygon(o,i,u),D=new d;return D.appendPoints(y.points),D.appendPoints(C.points),D.appendPoints(M.points),D.appendPoints(T.points),D.points.length>0&&(D.status="Intersection"),D}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={});if(a.Color){a.warn("fabric.Color is already defined.");return}function d(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}a.Color=d,a.Color.prototype={_tryParsingColor:function(t){var e;t in d.colorNameMap&&(t=d.colorNameMap[t]),t==="transparent"&&(e=[255,255,255,0]),e||(e=d.sourceFromHex(t)),e||(e=d.sourceFromRgb(t)),e||(e=d.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var s,m,o,y=a.util.array.max([t,e,i]),C=a.util.array.min([t,e,i]);if(o=(y+C)/2,y===C)s=m=0;else{var M=y-C;switch(m=o>.5?M/(2-y-C):M/(y+C),y){case t:s=(e-i)/M+(e<i?6:0);break;case e:s=(i-t)/M+2;break;case i:s=(t-e)/M+4;break}s/=6}return[Math.round(s*360),Math.round(m*100),Math.round(o*100)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t=this.getSource(),e,i,s;return e=t[0].toString(16),e=e.length===1?"0"+e:e,i=t[1].toString(16),i=i.length===1?"0"+i:i,s=t[2].toString(16),s=s.length===1?"0"+s:s,e.toUpperCase()+i.toUpperCase()+s.toUpperCase()},toHexa:function(){var t=this.getSource(),e;return e=Math.round(t[3]*255),e=e.toString(16),e=e.length===1?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((t[0]*.3+t[1]*.59+t[2]*.11).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(e[0]*.3+e[1]*.59+e[2]*.11).toFixed(0),s=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,s]),this},overlayWith:function(t){t instanceof d||(t=new d(t));var e=[],i=this.getAlpha(),s=.5,m=this.getSource(),o=t.getSource(),y;for(y=0;y<3;y++)e.push(Math.round(m[y]*(1-s)+o[y]*s));return e[3]=i,this.setSource(e),this}},a.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,a.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,a.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,a.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<.16666666666666666?t+(e-t)*6*i:i<.5?e:i<.6666666666666666?t+(e-t)*(.6666666666666666-i)*6:t}a.Color.fromRgb=function(t){return d.fromSource(d.sourceFromRgb(t))},a.Color.sourceFromRgb=function(t){var e=t.match(d.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),s=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),m=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(s,10),parseInt(m,10),e[4]?parseFloat(e[4]):1]}},a.Color.fromRgba=d.fromRgb,a.Color.fromHsl=function(t){return d.fromSource(d.sourceFromHsl(t))},a.Color.sourceFromHsl=function(t){var e=t.match(d.reHSLa);if(e){var i=(parseFloat(e[1])%360+360)%360/360,s=parseFloat(e[2])/(/%$/.test(e[2])?100:1),m=parseFloat(e[3])/(/%$/.test(e[3])?100:1),o,y,C;if(s===0)o=y=C=m;else{var M=m<=.5?m*(s+1):m+s-m*s,T=m*2-M;o=u(T,M,i+.3333333333333333),y=u(T,M,i),C=u(T,M,i-.3333333333333333)}return[Math.round(o*255),Math.round(y*255),Math.round(C*255),e[4]?parseFloat(e[4]):1]}},a.Color.fromHsla=d.fromHsl,a.Color.fromHex=function(t){return d.fromSource(d.sourceFromHex(t))},a.Color.sourceFromHex=function(t){if(t.match(d.reHex)){var e=t.slice(t.indexOf("#")+1),i=e.length===3||e.length===4,s=e.length===8||e.length===4,m=i?e.charAt(0)+e.charAt(0):e.substring(0,2),o=i?e.charAt(1)+e.charAt(1):e.substring(2,4),y=i?e.charAt(2)+e.charAt(2):e.substring(4,6),C=s?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(m,16),parseInt(o,16),parseInt(y,16),parseFloat((parseInt(C,16)/255).toFixed(2))]}},a.Color.fromSource=function(t){var e=new d;return e.setSource(t),e}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],t={},e="left",i="top",s="right",m="bottom",o="center",y={top:m,bottom:i,left:s,right:e,center:o},C=a.util.radiansToDegrees,M=Math.sign||function(st){return(st>0)-(st<0)||+st};function T(st,K){var et=st.angle+C(Math.atan2(K.y,K.x))+360;return Math.round(et%360/45)}function D(st,K){var et=K.transform.target,ct=et.canvas,ft=a.util.object.clone(K);ft.target=et,ct&&ct.fire("object:"+st,ft),et.fire(st,K)}function L(st,K){var et=K.canvas,ct=et.uniScaleKey,ft=st[ct];return et.uniformScaling&&!ft||!et.uniformScaling&&ft}function R(st){return st.originX===o&&st.originY===o}function F(st,K,et){var ct=st.lockScalingX,ft=st.lockScalingY;return!!(ct&&ft||!K&&(ct||ft)&&et||ct&&K==="x"||ft&&K==="y")}function W(st,K,et){var ct="not-allowed",ft=L(st,et),Ct="";if(K.x!==0&&K.y===0?Ct="x":K.x===0&&K.y!==0&&(Ct="y"),F(et,Ct,ft))return ct;var Pt=T(et,K);return d[Pt]+"-resize"}function ot(st,K,et){var ct="not-allowed";if(K.x!==0&&et.lockSkewingY||K.y!==0&&et.lockSkewingX)return ct;var ft=T(et,K)%4;return u[ft]+"-resize"}function it(st,K,et){return st[et.canvas.altActionKey]?t.skewCursorStyleHandler(st,K,et):t.scaleCursorStyleHandler(st,K,et)}function Mt(st,K,et){var ct=st[et.canvas.altActionKey];if(K.x===0)return ct?"skewX":"scaleY";if(K.y===0)return ct?"skewY":"scaleX"}function $(st,K,et){return et.lockRotation?"not-allowed":K.cursorStyle}function bt(st,K,et,ct){return{e:st,transform:K,pointer:{x:et,y:ct}}}function U(st){return function(K,et,ct,ft){var Ct=et.target,Pt=Ct.getCenterPoint(),Zt=Ct.translateToOriginPoint(Pt,et.originX,et.originY),Xt=st(K,et,ct,ft);return Ct.setPositionByOrigin(Zt,et.originX,et.originY),Xt}}function jt(st,K){return function(et,ct,ft,Ct){var Pt=K(et,ct,ft,Ct);return Pt&&D(st,bt(et,ct,ft,Ct)),Pt}}function gt(st,K,et,ct,ft){var Ct=st.target,Pt=Ct.controls[st.corner],Zt=Ct.canvas.getZoom(),Xt=Ct.padding/Zt,St=Ct.toLocalPoint(new a.Point(ct,ft),K,et);return St.x>=Xt&&(St.x-=Xt),St.x<=-Xt&&(St.x+=Xt),St.y>=Xt&&(St.y-=Xt),St.y<=Xt&&(St.y+=Xt),St.x-=Pt.offsetX,St.y-=Pt.offsetY,St}function Nt(st){return st.flipX!==st.flipY}function V(st,K,et,ct,ft){if(st[K]!==0){var Ct=st._getTransformedDimensions()[ct],Pt=ft/Ct*st[et];st.set(et,Pt)}}function q(st,K,et,ct){var ft=K.target,Ct=ft._getTransformedDimensions(0,ft.skewY),Pt=gt(K,K.originX,K.originY,et,ct),Zt=Math.abs(Pt.x*2)-Ct.x,Xt=ft.skewX,St;Zt<2?St=0:(St=C(Math.atan2(Zt/ft.scaleX,Ct.y/ft.scaleY)),K.originX===e&&K.originY===m&&(St=-St),K.originX===s&&K.originY===i&&(St=-St),Nt(ft)&&(St=-St));var Jt=Xt!==St;if(Jt){var Kt=ft._getTransformedDimensions().y;ft.set("skewX",St),V(ft,"skewY","scaleY","y",Kt)}return Jt}function Q(st,K,et,ct){var ft=K.target,Ct=ft._getTransformedDimensions(ft.skewX,0),Pt=gt(K,K.originX,K.originY,et,ct),Zt=Math.abs(Pt.y*2)-Ct.y,Xt=ft.skewY,St;Zt<2?St=0:(St=C(Math.atan2(Zt/ft.scaleY,Ct.x/ft.scaleX)),K.originX===e&&K.originY===m&&(St=-St),K.originX===s&&K.originY===i&&(St=-St),Nt(ft)&&(St=-St));var Jt=Xt!==St;if(Jt){var Kt=ft._getTransformedDimensions().x;ft.set("skewY",St),V(ft,"skewX","scaleX","x",Kt)}return Jt}function G(st,K,et,ct){var ft=K.target,Ct=ft.skewX,Pt,Zt=K.originY;if(ft.lockSkewingX)return!1;if(Ct===0){var Xt=gt(K,o,o,et,ct);Xt.x>0?Pt=e:Pt=s}else Ct>0&&(Pt=Zt===i?e:s),Ct<0&&(Pt=Zt===i?s:e),Nt(ft)&&(Pt=Pt===e?s:e);K.originX=Pt;var St=jt("skewing",U(q));return St(st,K,et,ct)}function rt(st,K,et,ct){var ft=K.target,Ct=ft.skewY,Pt,Zt=K.originX;if(ft.lockSkewingY)return!1;if(Ct===0){var Xt=gt(K,o,o,et,ct);Xt.y>0?Pt=i:Pt=m}else Ct>0&&(Pt=Zt===e?i:m),Ct<0&&(Pt=Zt===e?m:i),Nt(ft)&&(Pt=Pt===i?m:i);K.originY=Pt;var St=jt("skewing",U(Q));return St(st,K,et,ct)}function H(st,K,et,ct){var ft=K,Ct=ft.target,Pt=Ct.translateToOriginPoint(Ct.getCenterPoint(),ft.originX,ft.originY);if(Ct.lockRotation)return!1;var Zt=Math.atan2(ft.ey-Pt.y,ft.ex-Pt.x),Xt=Math.atan2(ct-Pt.y,et-Pt.x),St=C(Xt-Zt+ft.theta),Jt=!0;if(Ct.snapAngle>0){var Kt=Ct.snapAngle,ae=Ct.snapThreshold||Kt,ve=Math.ceil(St/Kt)*Kt,ue=Math.floor(St/Kt)*Kt;Math.abs(St-ue)<ae?St=ue:Math.abs(St-ve)<ae&&(St=ve)}return St<0&&(St=360+St),St%=360,Jt=Ct.angle!==St,Ct.angle=St,Jt}function Y(st,K,et,ct,ft){ft=ft||{};var Ct=K.target,Pt=Ct.lockScalingX,Zt=Ct.lockScalingY,Xt=ft.by,St,Jt,Kt,ae,ve=L(st,Ct),ue=F(Ct,Xt,ve),Wt,Gt,$t=K.gestureScale;if(ue)return!1;if($t)Jt=K.scaleX*$t,Kt=K.scaleY*$t;else{if(St=gt(K,K.originX,K.originY,et,ct),Wt=Xt!=="y"?M(St.x):1,Gt=Xt!=="x"?M(St.y):1,K.signX||(K.signX=Wt),K.signY||(K.signY=Gt),Ct.lockScalingFlip&&(K.signX!==Wt||K.signY!==Gt))return!1;if(ae=Ct._getTransformedDimensions(),ve&&!Xt){var ne=Math.abs(St.x)+Math.abs(St.y),ce=K.original,wt=Math.abs(ae.x*ce.scaleX/Ct.scaleX)+Math.abs(ae.y*ce.scaleY/Ct.scaleY),_t=ne/wt;Jt=ce.scaleX*_t,Kt=ce.scaleY*_t}else Jt=Math.abs(St.x*Ct.scaleX/ae.x),Kt=Math.abs(St.y*Ct.scaleY/ae.y);R(K)&&(Jt*=2,Kt*=2),K.signX!==Wt&&Xt!=="y"&&(K.originX=y[K.originX],Jt*=-1,K.signX=Wt),K.signY!==Gt&&Xt!=="x"&&(K.originY=y[K.originY],Kt*=-1,K.signY=Gt)}var Ut=Ct.scaleX,Vt=Ct.scaleY;return Xt?(Xt==="x"&&Ct.set("scaleX",Jt),Xt==="y"&&Ct.set("scaleY",Kt)):(!Pt&&Ct.set("scaleX",Jt),!Zt&&Ct.set("scaleY",Kt)),Ut!==Ct.scaleX||Vt!==Ct.scaleY}function X(st,K,et,ct){return Y(st,K,et,ct)}function Z(st,K,et,ct){return Y(st,K,et,ct,{by:"x"})}function yt(st,K,et,ct){return Y(st,K,et,ct,{by:"y"})}function ht(st,K,et,ct){return st[K.target.canvas.altActionKey]?t.skewHandlerX(st,K,et,ct):t.scalingY(st,K,et,ct)}function It(st,K,et,ct){return st[K.target.canvas.altActionKey]?t.skewHandlerY(st,K,et,ct):t.scalingX(st,K,et,ct)}function Tt(st,K,et,ct){var ft=K.target,Ct=gt(K,K.originX,K.originY,et,ct),Pt=ft.strokeWidth/(ft.strokeUniform?ft.scaleX:1),Zt=R(K)?2:1,Xt=ft.width,St=Math.abs(Ct.x*Zt/ft.scaleX)-Pt;return ft.set("width",Math.max(St,0)),Xt!==St}function xt(st,K,et,ct){var ft=K.target,Ct=et-K.offsetX,Pt=ct-K.offsetY,Zt=!ft.get("lockMovementX")&&ft.left!==Ct,Xt=!ft.get("lockMovementY")&&ft.top!==Pt;return Zt&&ft.set("left",Ct),Xt&&ft.set("top",Pt),(Zt||Xt)&&D("moving",bt(st,K,et,ct)),Zt||Xt}t.scaleCursorStyleHandler=W,t.skewCursorStyleHandler=ot,t.scaleSkewCursorStyleHandler=it,t.rotationWithSnapping=jt("rotating",U(H)),t.scalingEqually=jt("scaling",U(X)),t.scalingX=jt("scaling",U(Z)),t.scalingY=jt("scaling",U(yt)),t.scalingYOrSkewingX=ht,t.scalingXOrSkewingY=It,t.changeWidth=jt("resizing",U(Tt)),t.skewHandlerX=G,t.skewHandlerY=rt,t.dragHandler=xt,t.scaleOrSkewActionName=Mt,t.rotationStyleHandler=$,t.fireEvent=D,t.wrapWithFixedAnchor=U,t.wrapWithFireEvent=jt,t.getLocalPoint=gt,a.controlsUtils=t}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.degreesToRadians,u=a.controlsUtils;function t(i,s,m,o,y){o=o||{};var C=this.sizeX||o.cornerSize||y.cornerSize,M=this.sizeY||o.cornerSize||y.cornerSize,T=typeof o.transparentCorners!="undefined"?o.transparentCorners:y.transparentCorners,D=T?"stroke":"fill",L=!T&&(o.cornerStrokeColor||y.cornerStrokeColor),R=s,F=m,W;i.save(),i.fillStyle=o.cornerColor||y.cornerColor,i.strokeStyle=o.cornerStrokeColor||y.cornerStrokeColor,C>M?(W=C,i.scale(1,M/C),F=m*C/M):M>C?(W=M,i.scale(C/M,1),R=s*M/C):W=C,i.lineWidth=1,i.beginPath(),i.arc(R,F,W/2,0,2*Math.PI,!1),i[D](),L&&i.stroke(),i.restore()}function e(i,s,m,o,y){o=o||{};var C=this.sizeX||o.cornerSize||y.cornerSize,M=this.sizeY||o.cornerSize||y.cornerSize,T=typeof o.transparentCorners!="undefined"?o.transparentCorners:y.transparentCorners,D=T?"stroke":"fill",L=!T&&(o.cornerStrokeColor||y.cornerStrokeColor),R=C/2,F=M/2;i.save(),i.fillStyle=o.cornerColor||y.cornerColor,i.strokeStyle=o.cornerStrokeColor||y.cornerStrokeColor,i.lineWidth=1,i.translate(s,m),i.rotate(d(y.angle)),i[D+"Rect"](-R,-F,C,M),L&&i.strokeRect(-R,-F,C,M),i.restore()}u.renderCircleControl=t,u.renderSquareControl=e}(x),function(p){"use strict";var a=p.fabric||(p.fabric={});function d(u){for(var t in u)this[t]=u[t]}a.Control=d,a.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,t){return t.cursorStyle},getActionName:function(u,t){return t.actionName},getVisibility:function(u,t){var e=u._controlsVisibility;return e&&typeof e[t]!="undefined"?e[t]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,t){var e=a.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},t);return e},calcCornerCoords:function(u,t,e,i,s){var m,o,y,C,M=s?this.touchSizeX:this.sizeX,T=s?this.touchSizeY:this.sizeY;if(M&&T&&M!==T){var D=Math.atan2(T,M),L=Math.sqrt(M*M+T*T)/2,R=D-a.util.degreesToRadians(u),F=Math.PI/2-D-a.util.degreesToRadians(u);m=L*a.util.cos(R),o=L*a.util.sin(R),y=L*a.util.cos(F),C=L*a.util.sin(F)}else{var W=M&&T?M:t;L=W*.7071067812;var R=a.util.degreesToRadians(45-u);m=y=L*a.util.cos(R),o=C=L*a.util.sin(R)}return{tl:{x:e-C,y:i-y},tr:{x:e+m,y:i-o},bl:{x:e-m,y:i+o},br:{x:e+C,y:i+y}}},render:function(u,t,e,i,s){switch(i=i||{},i.cornerStyle||s.cornerStyle){case"circle":a.controlsUtils.renderCircleControl.call(this,u,t,e,i,s);break;default:a.controlsUtils.renderSquareControl.call(this,u,t,e,i,s)}}}}(x),function(){function p(e,i){var s=e.getAttribute("style"),m=e.getAttribute("offset")||0,o,y,C,M;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,s){var T=s.split(/\s*;\s*/);for(T[T.length-1]===""&&T.pop(),M=T.length;M--;){var D=T[M].split(/\s*:\s*/),L=D[0].trim(),R=D[1].trim();L==="stop-color"?o=R:L==="stop-opacity"&&(C=R)}}return o||(o=e.getAttribute("stop-color")||"rgb(0,0,0)"),C||(C=e.getAttribute("stop-opacity")),o=new l.Color(o),y=o.getAlpha(),C=isNaN(parseFloat(C))?1:parseFloat(C),C*=y*i,{offset:m,color:o.toRgb(),opacity:C}}function a(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}function d(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}var u=l.util.object.clone;l.Gradient=l.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var i,s=this;Object.keys(e).forEach(function(m){s[m]=e[m]}),this.id?this.id+="_"+l.Object.__uid++:this.id=l.Object.__uid++,i={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},this.type==="radial"&&(i.r1=e.coords.r1||0,i.r2=e.coords.r2||0),this.coords=i,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var i in e){var s=new l.Color(e[i]);this.colorStops.push({offset:parseFloat(i),color:s.toRgb(),opacity:s.getAlpha()})}return this},toObject:function(e){var i={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return l.util.populateWithProperties(this,i,e),i},toSVG:function(e,y){var s=u(this.coords,!0),m,o,y=y||{},C,M,T=u(this.colorStops,!0),D=s.r1>s.r2,L=this.gradientTransform?this.gradientTransform.concat():l.iMatrix.concat(),R=-this.offsetX,F=-this.offsetY,W=!!y.additionalTransform,ot=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(T.sort(function(U,jt){return U.offset-jt.offset}),ot==="objectBoundingBox"?(R/=e.width,F/=e.height):(R+=e.width/2,F+=e.height/2),e.type==="path"&&this.gradientUnits!=="percentage"&&(R-=e.pathOffset.x,F-=e.pathOffset.y),L[4]-=R,L[5]-=F,M='id="SVGID_'+this.id+'" gradientUnits="'+ot+'"',M+=' gradientTransform="'+(W?y.additionalTransform+" ":"")+l.util.matrixToSVG(L)+'" ',this.type==="linear"?C=["<linearGradient ",M,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`">
`]:this.type==="radial"&&(C=["<radialGradient ",M,' cx="',D?s.x1:s.x2,'" cy="',D?s.y1:s.y2,'" r="',D?s.r1:s.r2,'" fx="',D?s.x2:s.x1,'" fy="',D?s.y2:s.y1,`">
`]),this.type==="radial"){if(D)for(T=T.concat(),T.reverse(),m=0,o=T.length;m<o;m++)T[m].offset=1-T[m].offset;var it=Math.min(s.r1,s.r2);if(it>0){var Mt=Math.max(s.r1,s.r2),$=it/Mt;for(m=0,o=T.length;m<o;m++)T[m].offset+=$*(1-T[m].offset)}}for(m=0,o=T.length;m<o;m++){var bt=T[m];C.push("<stop ",'offset="',bt.offset*100+"%",'" style="stop-color:',bt.color,typeof bt.opacity!="undefined"?";stop-opacity: "+bt.opacity:";",`"/>
`)}return C.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),C.join("")},toLive:function(e){var i,s=l.util.object.clone(this.coords),m,o;if(this.type){for(this.type==="linear"?i=e.createLinearGradient(s.x1,s.y1,s.x2,s.y2):this.type==="radial"&&(i=e.createRadialGradient(s.x1,s.y1,s.r1,s.x2,s.y2,s.r2)),m=0,o=this.colorStops.length;m<o;m++){var y=this.colorStops[m].color,C=this.colorStops[m].opacity,M=this.colorStops[m].offset;typeof C!="undefined"&&(y=new l.Color(y).setAlpha(C).toRgba()),i.addColorStop(M,y)}return i}}}),l.util.object.extend(l.Gradient,{fromElement:function(e,i,s,m){var o=parseFloat(s)/(/%$/.test(s)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var y=e.getElementsByTagName("stop"),C,M=e.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",T=e.getAttribute("gradientTransform")||"",D=[],L,R,F=0,W=0,ot;for(e.nodeName==="linearGradient"||e.nodeName==="LINEARGRADIENT"?(C="linear",L=a(e)):(C="radial",L=d(e)),R=y.length;R--;)D.push(p(y[R],o));ot=l.parseTransformAttribute(T),t(i,L,m,M),M==="pixels"&&(F=-i.left,W=-i.top);var it=new l.Gradient({id:e.getAttribute("id"),type:C,coords:L,colorStops:D,gradientUnits:M,gradientTransform:ot,offsetX:F,offsetY:W});return it}});function t(e,i,s,m){var o,y;Object.keys(i).forEach(function(C){o=i[C],o==="Infinity"?y=1:o==="-Infinity"?y=0:(y=parseFloat(i[C],10),typeof o=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(o)&&(y*=.01,m==="pixels"&&((C==="x1"||C==="x2"||C==="r2")&&(y*=s.viewBoxWidth||s.width),(C==="y1"||C==="y2")&&(y*=s.viewBoxHeight||s.height)))),i[C]=y})}}(),function(){"use strict";var p=l.util.toFixed;l.Pattern=l.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(a,d){if(a||(a={}),this.id=l.Object.__uid++,this.setOptions(a),!a.source||a.source&&typeof a.source!="string"){d&&d(this);return}else{var u=this;this.source=l.util.createImage(),l.util.loadImage(a.source,function(t,e){u.source=t,d&&d(u,e)},null,this.crossOrigin)}},toObject:function(a){var d=l.Object.NUM_FRACTION_DIGITS,u,t;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),t={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:p(this.offsetX,d),offsetY:p(this.offsetY,d),patternTransform:this.patternTransform?this.patternTransform.concat():null},l.util.populateWithProperties(this,t,a),t},toSVG:function(a){var d=typeof this.source=="function"?this.source():this.source,u=d.width/a.width,t=d.height/a.height,e=this.offsetX/a.width,i=this.offsetY/a.height,s="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(t=1,i&&(t+=Math.abs(i))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,e&&(u+=Math.abs(e))),d.src?s=d.src:d.toDataURL&&(s=d.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+e+'" y="'+i+'" width="'+u+'" height="'+t+`">
<image x="0" y="0" width="`+d.width+'" height="'+d.height+'" xlink:href="'+s+`"></image>
</pattern>
`},setOptions:function(a){for(var d in a)this[d]=a[d]},toLive:function(a){var d=this.source;return!d||typeof d.src!="undefined"&&(!d.complete||d.naturalWidth===0||d.naturalHeight===0)?"":a.createPattern(d,this.repeat)}})}(),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.toFixed;if(a.Shadow){a.warn("fabric.Shadow is already defined.");return}a.Shadow=a.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var t in u)this[t]=u[t];this.id=a.Object.__uid++},_parseShadow:function(u){var t=u.trim(),e=a.Shadow.reOffsetsAndBlur.exec(t)||[],i=t.replace(a.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:i.trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var t=40,e=40,i=a.Object.NUM_FRACTION_DIGITS,s=a.util.rotateVector({x:this.offsetX,y:this.offsetY},a.util.degreesToRadians(-u.angle)),m=20,o=new a.Color(this.color);return u.width&&u.height&&(t=d((Math.abs(s.x)+this.blur)/u.width,i)*100+m,e=d((Math.abs(s.y)+this.blur)/u.height,i)*100+m),u.flipX&&(s.x*=-1),u.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+e+'%" height="'+(100+2*e)+'%" x="-'+t+'%" width="'+(100+2*t)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+d(this.blur?this.blur/2:0,i)+`"></feGaussianBlur>
	<feOffset dx="`+d(s.x,i)+'" dy="'+d(s.y,i)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+o.toRgb()+'" flood-opacity="'+o.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},t=a.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==t[e]&&(u[e]=this[e])},this),u}}),a.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(x),function(){"use strict";if(l.StaticCanvas){l.warn("fabric.StaticCanvas is already defined.");return}var p=l.util.object.extend,a=l.util.getElementOffset,d=l.util.removeFromArray,u=l.util.toFixed,t=l.util.transformPoint,e=l.util.invertTransform,i=l.util.getNodeCanvas,s=l.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");l.StaticCanvas=l.util.createClass(l.CommonMethods,{initialize:function(o,y){y||(y={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,y)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:l.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(o,y){var C=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(o),this._initOptions(y),this.interactive||this._initRetinaScaling(),y.overlayImage&&this.setOverlayImage(y.overlayImage,C),y.backgroundImage&&this.setBackgroundImage(y.backgroundImage,C),y.backgroundColor&&this.setBackgroundColor(y.backgroundColor,C),y.overlayColor&&this.setOverlayColor(y.overlayColor,C),this.calcOffset()},_isRetinaScaling:function(){return l.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?l.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var o=l.devicePixelRatio;this.__initRetinaScaling(o,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(o,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(o,y,C){y.setAttribute("width",this.width*o),y.setAttribute("height",this.height*o),C.scale(o,o)},calcOffset:function(){return this._offset=a(this.lowerCanvasEl),this},setOverlayImage:function(o,y,C){return this.__setBgOverlayImage("overlayImage",o,y,C)},setBackgroundImage:function(o,y,C){return this.__setBgOverlayImage("backgroundImage",o,y,C)},setOverlayColor:function(o,y){return this.__setBgOverlayColor("overlayColor",o,y)},setBackgroundColor:function(o,y){return this.__setBgOverlayColor("backgroundColor",o,y)},__setBgOverlayImage:function(o,y,C,M){return typeof y=="string"?l.util.loadImage(y,function(T,D){if(T){var L=new l.Image(T,M);this[o]=L,L.canvas=this}C&&C(T,D)},this,M&&M.crossOrigin):(M&&y.setOptions(M),this[o]=y,y&&(y.canvas=this),C&&C(y,!1)),this},__setBgOverlayColor:function(o,y,C){return this[o]=y,this._initGradient(y,o),this._initPattern(y,o,C),this},_createCanvasElement:function(){var o=s();if(!o||(o.style||(o.style={}),typeof o.getContext=="undefined"))throw m;return o},_initOptions:function(o){var y=this.lowerCanvasEl;this._setOptions(o),this.width=this.width||parseInt(y.width,10)||0,this.height=this.height||parseInt(y.height,10)||0,this.lowerCanvasEl.style&&(y.width=this.width,y.height=this.height,y.style.width=this.width+"px",y.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(o){o&&o.getContext?this.lowerCanvasEl=o:this.lowerCanvasEl=l.util.getById(o)||this._createCanvasElement(),l.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(o,y){return this.setDimensions({width:o},y)},setHeight:function(o,y){return this.setDimensions({height:o},y)},setDimensions:function(o,y){var C;y=y||{};for(var M in o)C=o[M],y.cssOnly||(this._setBackstoreDimension(M,o[M]),C+="px",this.hasLostContext=!0),y.backstoreOnly||this._setCssDimension(M,C);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),y.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(o,y){return this.lowerCanvasEl[o]=y,this.upperCanvasEl&&(this.upperCanvasEl[o]=y),this.cacheCanvasEl&&(this.cacheCanvasEl[o]=y),this[o]=y,this},_setCssDimension:function(o,y){return this.lowerCanvasEl.style[o]=y,this.upperCanvasEl&&(this.upperCanvasEl.style[o]=y),this.wrapperEl&&(this.wrapperEl.style[o]=y),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(o){var y=this._activeObject,C=this.backgroundImage,M=this.overlayImage,T,D,L;for(this.viewportTransform=o,D=0,L=this._objects.length;D<L;D++)T=this._objects[D],T.group||T.setCoords(!0);return y&&y.setCoords(),C&&C.setCoords(!0),M&&M.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(o,y){var C=o,M=this.viewportTransform.slice(0);o=t(o,e(this.viewportTransform)),M[0]=y,M[3]=y;var T=t(o,M);return M[4]+=C.x-T.x,M[5]+=C.y-T.y,this.setViewportTransform(M)},setZoom:function(o){return this.zoomToPoint(new l.Point(0,0),o),this},absolutePan:function(o){var y=this.viewportTransform.slice(0);return y[4]=-o.x,y[5]=-o.y,this.setViewportTransform(y)},relativePan:function(o){return this.absolutePan(new l.Point(-o.x-this.viewportTransform[4],-o.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(o){this.stateful&&o.setupState(),o._set("canvas",this),o.setCoords(),this.fire("object:added",{target:o}),o.fire("added")},_onObjectRemoved:function(o){this.fire("object:removed",{target:o}),o.fire("removed"),delete o.canvas},clearContext:function(o){return o.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var o=this.contextContainer;return this.renderCanvas(o,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=l.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var o={},y=this.width,C=this.height,M=e(this.viewportTransform);return o.tl=t({x:0,y:0},M),o.br=t({x:y,y:C},M),o.tr=new l.Point(o.br.x,o.tl.y),o.bl=new l.Point(o.tl.x,o.br.y),this.vptCoords=o,o},cancelRequestedRender:function(){this.isRendering&&(l.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(o,y){var C=this.viewportTransform,M=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(o),l.util.setImageSmoothing(o,this.imageSmoothingEnabled),this.fire("before:render",{ctx:o}),this._renderBackground(o),o.save(),o.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._renderObjects(o,y),o.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),M&&(M.canvas=this,M.shouldCache(),M._transformDone=!0,M.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(o)),this._renderOverlay(o),this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),this.fire("after:render",{ctx:o})},drawClipPathOnCanvas:function(o){var y=this.viewportTransform,C=this.clipPath;o.save(),o.transform(y[0],y[1],y[2],y[3],y[4],y[5]),o.globalCompositeOperation="destination-in",C.transform(o),o.scale(1/C.zoomX,1/C.zoomY),o.drawImage(C._cacheCanvas,-C.cacheTranslationX,-C.cacheTranslationY),o.restore()},_renderObjects:function(o,y){var C,M;for(C=0,M=y.length;C<M;++C)y[C]&&y[C].render(o)},_renderBackgroundOrOverlay:function(o,y){var C=this[y+"Color"],M=this[y+"Image"],T=this.viewportTransform,D=this[y+"Vpt"];if(!(!C&&!M)){if(C){o.save(),o.beginPath(),o.moveTo(0,0),o.lineTo(this.width,0),o.lineTo(this.width,this.height),o.lineTo(0,this.height),o.closePath(),o.fillStyle=C.toLive?C.toLive(o,this):C,D&&o.transform(T[0],T[1],T[2],T[3],T[4],T[5]),o.transform(1,0,0,1,C.offsetX||0,C.offsetY||0);var L=C.gradientTransform||C.patternTransform;L&&o.transform(L[0],L[1],L[2],L[3],L[4],L[5]),o.fill(),o.restore()}M&&(o.save(),D&&o.transform(T[0],T[1],T[2],T[3],T[4],T[5]),M.render(o),o.restore())}},_renderBackground:function(o){this._renderBackgroundOrOverlay(o,"background")},_renderOverlay:function(o){this._renderBackgroundOrOverlay(o,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(o){return this._centerObject(o,new l.Point(this.getCenter().left,o.getCenterPoint().y))},centerObjectV:function(o){return this._centerObject(o,new l.Point(o.getCenterPoint().x,this.getCenter().top))},centerObject:function(o){var y=this.getCenter();return this._centerObject(o,new l.Point(y.left,y.top))},viewportCenterObject:function(o){var y=this.getVpCenter();return this._centerObject(o,y)},viewportCenterObjectH:function(o){var y=this.getVpCenter();return this._centerObject(o,new l.Point(y.x,o.getCenterPoint().y)),this},viewportCenterObjectV:function(o){var y=this.getVpCenter();return this._centerObject(o,new l.Point(o.getCenterPoint().x,y.y))},getVpCenter:function(){var o=this.getCenter(),y=e(this.viewportTransform);return t({x:o.left,y:o.top},y)},_centerObject:function(o,y){return o.setPositionByOrigin(y,"center","center"),o.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(o){return this.toDatalessObject(o)},toObject:function(o){return this._toObjectMethod("toObject",o)},toDatalessObject:function(o){return this._toObjectMethod("toDatalessObject",o)},_toObjectMethod:function(o,y){var C=this.clipPath,M={version:l.version,objects:this._toObjects(o,y)};return C&&!C.excludeFromExport&&(M.clipPath=this._toObject(this.clipPath,o,y)),p(M,this.__serializeBgOverlay(o,y)),l.util.populateWithProperties(this,M,y),M},_toObjects:function(o,y){return this._objects.filter(function(C){return!C.excludeFromExport}).map(function(C){return this._toObject(C,o,y)},this)},_toObject:function(o,y,C){var M;this.includeDefaultValues||(M=o.includeDefaultValues,o.includeDefaultValues=!1);var T=o[y](C);return this.includeDefaultValues||(o.includeDefaultValues=M),T},__serializeBgOverlay:function(o,y){var C={},M=this.backgroundImage,T=this.overlayImage,D=this.backgroundColor,L=this.overlayColor;return D&&D.toObject?D.excludeFromExport||(C.background=D.toObject(y)):D&&(C.background=D),L&&L.toObject?L.excludeFromExport||(C.overlay=L.toObject(y)):L&&(C.overlay=L),M&&!M.excludeFromExport&&(C.backgroundImage=this._toObject(M,o,y)),T&&!T.excludeFromExport&&(C.overlayImage=this._toObject(T,o,y)),C},svgViewportTransformation:!0,toSVG:function(o,y){o||(o={}),o.reviver=y;var C=[];return this._setSVGPreamble(C,o),this._setSVGHeader(C,o),this.clipPath&&C.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(C,"background"),this._setSVGBgOverlayImage(C,"backgroundImage",y),this._setSVGObjects(C,y),this.clipPath&&C.push(`</g>
`),this._setSVGBgOverlayColor(C,"overlay"),this._setSVGBgOverlayImage(C,"overlayImage",y),C.push("</svg>"),C.join("")},_setSVGPreamble:function(o,y){y.suppressPreamble||o.push('<?xml version="1.0" encoding="',y.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(o,y){var C=y.width||this.width,M=y.height||this.height,T,D='viewBox="0 0 '+this.width+" "+this.height+'" ',L=l.Object.NUM_FRACTION_DIGITS;y.viewBox?D='viewBox="'+y.viewBox.x+" "+y.viewBox.y+" "+y.viewBox.width+" "+y.viewBox.height+'" ':this.svgViewportTransformation&&(T=this.viewportTransform,D='viewBox="'+u(-T[4]/T[0],L)+" "+u(-T[5]/T[3],L)+" "+u(this.width/T[0],L)+" "+u(this.height/T[3],L)+'" '),o.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',C,'" ','height="',M,'" ',D,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",l.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(y),`</defs>
`)},createSVGClipPathMarkup:function(o){var y=this.clipPath;return y?(y.clipPathId="CLIPPATH_"+l.Object.__uid++,'<clipPath id="'+y.clipPathId+`" >
`+this.clipPath.toClipPathSVG(o.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var o=this,y=["background","overlay"].map(function(C){var M=o[C+"Color"];if(M&&M.toLive){var T=o[C+"Vpt"],D=o.viewportTransform,L={width:o.width/(T?D[0]:1),height:o.height/(T?D[3]:1)};return M.toSVG(L,{additionalTransform:T?l.util.matrixToSVG(D):""})}});return y.join("")},createSVGFontFacesMarkup:function(){var o="",y={},C,M,T,D,L,R,F,W,ot,it=l.fontPaths,Mt=[];for(this._objects.forEach(function bt(U){Mt.push(U),U._objects&&U._objects.forEach(bt)}),W=0,ot=Mt.length;W<ot;W++)if(C=Mt[W],M=C.fontFamily,!(C.type.indexOf("text")===-1||y[M]||!it[M])&&(y[M]=!0,!!C.styles)){T=C.styles;for(L in T){D=T[L];for(F in D)R=D[F],M=R.fontFamily,!y[M]&&it[M]&&(y[M]=!0)}}for(var $ in y)o+=[`		@font-face {
`,"			font-family: '",$,`';
`,"			src: url('",it[$],`');
`,`		}
`].join("");return o&&(o=['	<style type="text/css">',`<![CDATA[
`,o,"]]>",`</style>
`].join("")),o},_setSVGObjects:function(o,y){var C,M,T,D=this._objects;for(M=0,T=D.length;M<T;M++)C=D[M],!C.excludeFromExport&&this._setSVGObject(o,C,y)},_setSVGObject:function(o,y,C){o.push(y.toSVG(C))},_setSVGBgOverlayImage:function(o,y,C){this[y]&&!this[y].excludeFromExport&&this[y].toSVG&&o.push(this[y].toSVG(C))},_setSVGBgOverlayColor:function(o,y){var C=this[y+"Color"],M=this.viewportTransform,T=this.width,D=this.height;if(C)if(C.toLive){var L=C.repeat,R=l.util.invertTransform(M),F=this[y+"Vpt"],W=F?l.util.matrixToSVG(R):"";o.push('<rect transform="'+W+" translate(",T/2,",",D/2,')"',' x="',C.offsetX-T/2,'" y="',C.offsetY-D/2,'" ','width="',L==="repeat-y"||L==="no-repeat"?C.source.width:T,'" height="',L==="repeat-x"||L==="no-repeat"?C.source.height:D,'" fill="url(#SVGID_'+C.id+')"',`></rect>
`)}else o.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',C,'"',`></rect>
`)},sendToBack:function(o){if(!o)return this;var y=this._activeObject,C,M,T;if(o===y&&o.type==="activeSelection")for(T=y._objects,C=T.length;C--;)M=T[C],d(this._objects,M),this._objects.unshift(M);else d(this._objects,o),this._objects.unshift(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(o){if(!o)return this;var y=this._activeObject,C,M,T;if(o===y&&o.type==="activeSelection")for(T=y._objects,C=0;C<T.length;C++)M=T[C],d(this._objects,M),this._objects.push(M);else d(this._objects,o),this._objects.push(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(o,y){if(!o)return this;var C=this._activeObject,M,T,D,L,R,F=0;if(o===C&&o.type==="activeSelection")for(R=C._objects,M=0;M<R.length;M++)T=R[M],D=this._objects.indexOf(T),D>0+F&&(L=D-1,d(this._objects,T),this._objects.splice(L,0,T)),F++;else D=this._objects.indexOf(o),D!==0&&(L=this._findNewLowerIndex(o,D,y),d(this._objects,o),this._objects.splice(L,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(o,y,C){var M,T;if(C)for(M=y,T=y-1;T>=0;--T){var D=o.intersectsWithObject(this._objects[T])||o.isContainedWithinObject(this._objects[T])||this._objects[T].isContainedWithinObject(o);if(D){M=T;break}}else M=y-1;return M},bringForward:function(o,y){if(!o)return this;var C=this._activeObject,M,T,D,L,R,F=0;if(o===C&&o.type==="activeSelection")for(R=C._objects,M=R.length;M--;)T=R[M],D=this._objects.indexOf(T),D<this._objects.length-1-F&&(L=D+1,d(this._objects,T),this._objects.splice(L,0,T)),F++;else D=this._objects.indexOf(o),D!==this._objects.length-1&&(L=this._findNewUpperIndex(o,D,y),d(this._objects,o),this._objects.splice(L,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(o,y,C){var M,T,D;if(C)for(M=y,T=y+1,D=this._objects.length;T<D;++T){var L=o.intersectsWithObject(this._objects[T])||o.isContainedWithinObject(this._objects[T])||this._objects[T].isContainedWithinObject(o);if(L){M=T;break}}else M=y+1;return M},moveTo:function(o,y){return d(this._objects,o),this._objects.splice(y,0,o),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(l.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),this.lowerCanvasEl.style=this._originalCanvasStyle,delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),l.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),p(l.StaticCanvas.prototype,l.Observable),p(l.StaticCanvas.prototype,l.Collection),p(l.StaticCanvas.prototype,l.DataURLExporter),p(l.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(o){var y=s();if(!y||!y.getContext)return null;var C=y.getContext("2d");if(!C)return null;switch(o){case"setLineDash":return typeof C.setLineDash!="undefined";default:return null}}}),l.StaticCanvas.prototype.toJSON=l.StaticCanvas.prototype.toObject,l.isLikelyNode&&(l.StaticCanvas.prototype.createPNGStream=function(){var o=i(this.lowerCanvasEl);return o&&o.createPNGStream()},l.StaticCanvas.prototype.createJPEGStream=function(o){var y=i(this.lowerCanvasEl);return y&&y.createJPEGStream(o)})}(),l.BaseBrush=l.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var p=this.canvas.contextTop;p.strokeStyle=this.color,p.lineWidth=this.width,p.lineCap=this.strokeLineCap,p.miterLimit=this.strokeMiterLimit,p.lineJoin=this.strokeLineJoin,p.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(p){var a=this.canvas.viewportTransform;p.save(),p.transform(a[0],a[1],a[2],a[3],a[4],a[5])},_setShadow:function(){if(this.shadow){var p=this.canvas,a=this.shadow,d=p.contextTop,u=p.getZoom();p&&p._isRetinaScaling()&&(u*=l.devicePixelRatio),d.shadowColor=a.color,d.shadowBlur=a.blur*u,d.shadowOffsetX=a.offsetX*u,d.shadowOffsetY=a.offsetY*u}},needsFullRender:function(){var p=new l.Color(this.color);return p.getAlpha()<1||!!this.shadow},_resetShadow:function(){var p=this.canvas.contextTop;p.shadowColor="",p.shadowBlur=p.shadowOffsetX=p.shadowOffsetY=0},_isOutSideCanvas:function(p){return p.x<0||p.x>this.canvas.getWidth()||p.y<0||p.y>this.canvas.getHeight()}}),function(){l.PencilBrush=l.util.createClass(l.BaseBrush,{decimate:.4,initialize:function(p){this.canvas=p,this._points=[]},_drawSegment:function(p,a,d){var u=a.midPointFrom(d);return p.quadraticCurveTo(a.x,a.y,u.x,u.y),u},onMouseDown:function(p,a){this.canvas._isMainEvent(a.e)&&(this._prepareForDrawing(p),this._captureDrawingPath(p),this._render())},onMouseMove:function(p,a){if(this.canvas._isMainEvent(a.e)&&!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(p))&&this._captureDrawingPath(p)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var d=this._points,u=d.length,t=this.canvas.contextTop;this._saveAndTransform(t),this.oldEnd&&(t.beginPath(),t.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(t,d[u-2],d[u-1],!0),t.stroke(),t.restore()}},onMouseUp:function(p){return this.canvas._isMainEvent(p.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(p){var a=new l.Point(p.x,p.y);this._reset(),this._addPoint(a),this.canvas.contextTop.moveTo(a.x,a.y)},_addPoint:function(p){return this._points.length>1&&p.eq(this._points[this._points.length-1])?!1:(this._points.push(p),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(p){var a=new l.Point(p.x,p.y);return this._addPoint(a)},_render:function(){var p=this.canvas.contextTop,a,d,u=this._points[0],t=this._points[1];if(this._saveAndTransform(p),p.beginPath(),this._points.length===2&&u.x===t.x&&u.y===t.y){var e=this.width/1e3;u=new l.Point(u.x,u.y),t=new l.Point(t.x,t.y),u.x-=e,t.x+=e}for(p.moveTo(u.x,u.y),a=1,d=this._points.length;a<d;a++)this._drawSegment(p,u,t),u=this._points[a],t=this._points[a+1];p.lineTo(u.x,u.y),p.stroke(),p.restore()},convertPointsToSVGPath:function(p){var a=this.width/1e3;return l.util.getSmoothPathFromPoints(p,a)},_isEmptySVGPath:function(p){var a=l.util.joinPath(p);return a==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(p){var a=new l.Path(p,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,a.shadow=new l.Shadow(this.shadow)),a},decimatePoints:function(p,a){if(p.length<=2)return p;var d=this.canvas.getZoom(),u=Math.pow(a/d,2),t,e=p.length-1,i=p[0],s=[i],m;for(t=1;t<e-1;t++)m=Math.pow(i.x-p[t].x,2)+Math.pow(i.y-p[t].y,2),m>=u&&(i=p[t],s.push(i));return s.push(p[e]),s},_finalizeAndAddPath:function(){var p=this.canvas.contextTop;p.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var a=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(a)){this.canvas.requestRenderAll();return}var d=this.createPath(a);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.requestRenderAll(),d.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:d})}})}(),l.CircleBrush=l.util.createClass(l.BaseBrush,{width:10,initialize:function(p){this.canvas=p,this.points=[]},drawDot:function(p){var a=this.addPoint(p),d=this.canvas.contextTop;this._saveAndTransform(d),this.dot(d,a),d.restore()},dot:function(p,a){p.fillStyle=a.fill,p.beginPath(),p.arc(a.x,a.y,a.radius,0,Math.PI*2,!1),p.closePath(),p.fill()},onMouseDown:function(p){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(p)},_render:function(){var p=this.canvas.contextTop,a,d,u=this.points;for(this._saveAndTransform(p),a=0,d=u.length;a<d;a++)this.dot(p,u[a]);p.restore()},onMouseMove:function(p){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(p)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(p),this._render()):this.drawDot(p))},onMouseUp:function(){var p=this.canvas.renderOnAddRemove,a,d;this.canvas.renderOnAddRemove=!1;var u=[];for(a=0,d=this.points.length;a<d;a++){var t=this.points[a],e=new l.Circle({radius:t.radius,left:t.x,top:t.y,originX:"center",originY:"center",fill:t.fill});this.shadow&&(e.shadow=new l.Shadow(this.shadow)),u.push(e)}var i=new l.Group(u);i.canvas=this.canvas,this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=p,this.canvas.requestRenderAll()},addPoint:function(p){var a=new l.Point(p.x,p.y),d=l.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new l.Color(this.color).setAlpha(l.util.getRandomInt(0,100)/100).toRgba();return a.radius=d,a.fill=u,this.points.push(a),a}}),l.SprayBrush=l.util.createClass(l.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(p){this.canvas=p,this.sprayChunks=[]},onMouseDown:function(p){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(p),this.render(this.sprayChunkPoints)},onMouseMove:function(p){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(p)||(this.addSprayChunk(p),this.render(this.sprayChunkPoints))},onMouseUp:function(){var p=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var a=[],d=0,u=this.sprayChunks.length;d<u;d++)for(var t=this.sprayChunks[d],e=0,i=t.length;e<i;e++){var s=new l.Rect({width:t[e].width,height:t[e].width,left:t[e].x+1,top:t[e].y+1,originX:"center",originY:"center",fill:this.color});a.push(s)}this.optimizeOverlapping&&(a=this._getOptimizedRects(a));var m=new l.Group(a);this.shadow&&m.set("shadow",new l.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=p,this.canvas.requestRenderAll()},_getOptimizedRects:function(p){var a={},d,u,t;for(u=0,t=p.length;u<t;u++)d=p[u].left+""+p[u].top,a[d]||(a[d]=p[u]);var e=[];for(d in a)e.push(a[d]);return e},render:function(p){var a=this.canvas.contextTop,d,u;for(a.fillStyle=this.color,this._saveAndTransform(a),d=0,u=p.length;d<u;d++){var t=p[d];typeof t.opacity!="undefined"&&(a.globalAlpha=t.opacity),a.fillRect(t.x,t.y,t.width,t.width)}a.restore()},_render:function(){var p=this.canvas.contextTop,a,d;for(p.fillStyle=this.color,this._saveAndTransform(p),a=0,d=this.sprayChunks.length;a<d;a++)this.render(this.sprayChunks[a]);p.restore()},addSprayChunk:function(p){this.sprayChunkPoints=[];var a,d,u,t=this.width/2,e;for(e=0;e<this.density;e++){a=l.util.getRandomInt(p.x-t,p.x+t),d=l.util.getRandomInt(p.y-t,p.y+t),this.dotWidthVariance?u=l.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var i=new l.Point(a,d);i.width=u,this.randomOpacity&&(i.opacity=l.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(i)}this.sprayChunks.push(this.sprayChunkPoints)}}),l.PatternBrush=l.util.createClass(l.PencilBrush,{getPatternSrc:function(){var p=20,a=5,d=l.util.createCanvasElement(),u=d.getContext("2d");return d.width=d.height=p+a,u.fillStyle=this.color,u.beginPath(),u.arc(p/2,p/2,p/2,0,Math.PI*2,!1),u.closePath(),u.fill(),d},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(p){var a=this.callSuper("createPath",p),d=a._getLeftTopCoords().scalarAdd(a.strokeWidth/2);return a.stroke=new l.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-d.x,offsetY:-d.y}),a}}),function(){var p=l.util.getPointer,a=l.util.degreesToRadians,d=l.util.isTouchEvent;l.Canvas=l.util.createClass(l.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=l.PencilBrush&&new l.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t=this.getActiveObjects(),e,i,s;if(t.length>0&&!this.preserveObjectStacking){i=[],s=[];for(var m=0,o=this._objects.length;m<o;m++)e=this._objects[m],t.indexOf(e)===-1?i.push(e):s.push(e);t.length>1&&(this._activeObject._objects=s),i.push.apply(i,s)}else i=this._objects;return i},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),s=l.util.invertTransform(i),m=this.restorePointerVpt(e);return l.util.transformPoint(m,s)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var s=this._normalizePointer(t,{x:e,y:i}),m=Math.max(t.cacheTranslationX+s.x*t.zoomX,0),o=Math.max(t.cacheTranslationY+s.y*t.zoomY,0),T=l.util.isTransparent(t._cacheContext,Math.round(m),Math.round(o),this.targetFindTolerance);return T}var y=this.contextCache,C=t.selectionBackgroundColor,M=this.viewportTransform;t.selectionBackgroundColor="",this.clearContext(y),y.save(),y.transform(M[0],M[1],M[2],M[3],M[4],M[5]),t.render(y),y.restore(),t.selectionBackgroundColor=C;var T=l.util.isTransparent(y,e,i,this.targetFindTolerance);return T},_isSelectionKeyPressed:function(t){var e=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?e=!!this.selectionKey.find(function(i){return t[i]===!0}):e=t[this.selectionKey],e},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),s=this._activeObject;return!e||e&&s&&i.length>1&&i.indexOf(e)===-1&&s!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&s&&s!==e},_shouldCenterTransform:function(t,e,i){if(t){var s;return e==="scale"||e==="scaleX"||e==="scaleY"||e==="resizing"?s=this.centeredScaling||t.centeredScaling:e==="rotate"&&(s=this.centeredRotation||t.centeredRotation),s?!i:i}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return e==="ml"||e==="tl"||e==="bl"?i.x="right":(e==="mr"||e==="tr"||e==="br")&&(i.x="left"),e==="tl"||e==="mt"||e==="tr"?i.y="bottom":(e==="bl"||e==="mb"||e==="br")&&(i.y="top"),i},_getActionFromCorner:function(t,e,i,s){if(!e||!t)return"drag";var m=s.controls[e];return m.getActionName(i,m,s)},_setupCurrentTransform:function(t,e,i){if(e){var s=this.getPointer(t),m=e.__corner,o=e.controls[m],y=i&&m?o.getActionHandler(t,e,o):l.controlsUtils.dragHandler,C=this._getActionFromCorner(i,m,t,e),M=this._getOriginFromCorner(e,m),T=t[this.centeredKey],D={target:e,action:C,actionHandler:y,corner:m,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:s.x-e.left,offsetY:s.y-e.top,originX:M.x,originY:M.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:a(e.angle),width:e.width*e.scaleX,shiftKey:t.shiftKey,altKey:T,original:l.util.saveObjectTransform(e)};this._shouldCenterTransform(e,C,T)&&(D.originX="center",D.originY="center"),D.original.originX=M.x,D.original.originY=M.y,this._currentTransform=D,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new l.Point(e.ex,e.ey),s=l.util.transformPoint(i,this.viewportTransform),m=new l.Point(e.ex+e.left,e.ey+e.top),o=l.util.transformPoint(m,this.viewportTransform),y=Math.min(s.x,o.x),C=Math.min(s.y,o.y),M=Math.max(s.x,o.x),T=Math.max(s.y,o.y),D=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(y,C,M-y,T-C)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,y+=D,C+=D,M-=D,T-=D,l.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(y,C,M-y,T-C))},findTarget:function(t,e){if(!this.skipTargetFind){var i=!0,s=this.getPointer(t,i),m=this._activeObject,o=this.getActiveObjects(),y,C,M=d(t),T=o.length>1&&!e||o.length===1;if(this.targets=[],T&&m._findTargetCorner(s,M)||o.length>1&&!e&&m===this._searchPossibleTargets([m],s))return m;if(o.length===1&&m===this._searchPossibleTargets([m],s))if(this.preserveObjectStacking)y=m,C=this.targets,this.targets=[];else return m;var D=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&D&&y&&D!==y&&(D=y,this.targets=C),D}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t))if((this.perPixelTargetFind||e.perPixelTargetFind)&&!e.isEditing){var s=this.isTargetTransparent(e,i.x,i.y);if(!s)return!0}else return!0},_searchPossibleTargets:function(t,e){for(var i,s=t.length,m;s--;){var o=t[s],y=o.group?this._normalizePointer(o.group,e):e;if(this._checkTarget(y,o,e)){i=t[s],i.subTargetCheck&&i instanceof l.Group&&(m=this._searchPossibleTargets(i._objects,e),m&&this.targets.push(m));break}}return i},restorePointerVpt:function(t){return l.util.transformPoint(t,l.util.invertTransform(this.viewportTransform))},getPointer:function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var i=p(t),s=this.upperCanvasEl,m=s.getBoundingClientRect(),o=m.width||0,y=m.height||0,C;(!o||!y)&&("top"in m&&"bottom"in m&&(y=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(o=Math.abs(m.right-m.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,e||(i=this.restorePointerVpt(i));var M=this.getRetinaScaling();return M!==1&&(i.x/=M,i.y/=M),o===0||y===0?C={width:1,height:1}:C={width:s.width/o,height:s.height/y},{x:i.x*C.width,y:i.y*C.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),l.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=l.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),l.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),l.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;l.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,l.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?t.type==="activeSelection"&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,s=this.getActiveObjects(),m=[],o=[];t.forEach(function(y){s.indexOf(y)===-1&&(i=!0,y.fire("deselected",{e,target:y}),o.push(y))}),s.forEach(function(y){t.indexOf(y)===-1&&(i=!0,y.fire("selected",{e,target:y}),m.push(y))}),t.length>0&&s.length>0?i&&this.fire("selection:updated",{e,selected:m,deselected:o,updated:m[0]||o[0],target:this._activeObject}):s.length>0?this.fire("selection:created",{e,selected:m,target:this._activeObject}):t.length>0&&this.fire("selection:cleared",{e,deselected:o})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject===t||!this._discardActiveObject(e,t)||t.onSelect({e})?!1:(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){l.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,l.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var s=this._realizeGroupTransformOnObject(t),m=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,s),m},_realizeGroupTransformOnObject:function(t){if(t.group&&t.group.type==="activeSelection"&&this._activeObject===t.group){var e=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],i={};return e.forEach(function(s){i[s]=t[s]}),l.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),i}else return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var s=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,s)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),l.StaticCanvas.prototype.setViewportTransform.call(this,t)}});for(var u in l.StaticCanvas)u!=="prototype"&&(l.Canvas[u]=l.StaticCanvas[u])}(),function(){var p=l.util.addListener,a=l.util.removeListener,d=3,u=2,t=1,e={passive:!1};function i(s,m){return s.button&&s.button===m-1}l.util.object.extend(l.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(p,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(s,m){var o=this.upperCanvasEl,y=this._getEventPrefix();s(l.window,"resize",this._onResize),s(o,y+"down",this._onMouseDown),s(o,y+"move",this._onMouseMove,e),s(o,y+"out",this._onMouseOut),s(o,y+"enter",this._onMouseEnter),s(o,"wheel",this._onMouseWheel),s(o,"contextmenu",this._onContextMenu),s(o,"dblclick",this._onDoubleClick),s(o,"dragover",this._onDragOver),s(o,"dragenter",this._onDragEnter),s(o,"dragleave",this._onDragLeave),s(o,"drop",this._onDrop),this.enablePointerEvents||s(o,"touchstart",this._onTouchStart,e),typeof eventjs!="undefined"&&m in eventjs&&(eventjs[m](o,"gesture",this._onGesture),eventjs[m](o,"drag",this._onDrag),eventjs[m](o,"orientation",this._onOrientationChange),eventjs[m](o,"shake",this._onShake),eventjs[m](o,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(a,"remove");var s=this._getEventPrefix();a(l.document,s+"up",this._onMouseUp),a(l.document,"touchend",this._onTouchEnd,e),a(l.document,s+"move",this._onMouseMove,e),a(l.document,"touchmove",this._onMouseMove,e)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(s,m){this.__onTransformGesture&&this.__onTransformGesture(s,m)},_onDrag:function(s,m){this.__onDrag&&this.__onDrag(s,m)},_onMouseWheel:function(s){this.__onMouseWheel(s)},_onMouseOut:function(s){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:s}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:s});var o=this;this._hoveredTargets.forEach(function(y){o.fire("mouse:out",{target:m,e:s}),y&&m.fire("mouseout",{e:s})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(y){y.isEditing&&y.hiddenTextarea.focus()})},_onMouseEnter:function(s){!this._currentTransform&&!this.findTarget(s)&&(this.fire("mouse:over",{target:null,e:s}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(s,m){this.__onOrientationChange&&this.__onOrientationChange(s,m)},_onShake:function(s,m){this.__onShake&&this.__onShake(s,m)},_onLongPress:function(s,m){this.__onLongPress&&this.__onLongPress(s,m)},_onDragOver:function(s){s.preventDefault();var m=this._simpleEventHandler("dragover",s);this._fireEnterLeaveEvents(m,s)},_onContextMenu:function(s){return this.stopContextMenu&&(s.stopPropagation(),s.preventDefault()),!1},_onDoubleClick:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"dblclick"),this._resetTransformEventData(s)},getPointerId:function(s){var m=s.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?s.pointerId:-1},_isMainEvent:function(s){return s.isPrimary===!0?!0:s.isPrimary===!1?!1:s.type==="touchend"&&s.touches.length===0?!0:s.changedTouches?s.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(s){s.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(s)),this.__onMouseDown(s),this._resetTransformEventData();var m=this.upperCanvasEl,o=this._getEventPrefix();p(l.document,"touchend",this._onTouchEnd,e),p(l.document,"touchmove",this._onMouseMove,e),a(m,o+"down",this._onMouseDown)},_onMouseDown:function(s){this.__onMouseDown(s),this._resetTransformEventData();var m=this.upperCanvasEl,o=this._getEventPrefix();a(m,o+"move",this._onMouseMove,e),p(l.document,o+"up",this._onMouseUp),p(l.document,o+"move",this._onMouseMove,e)},_onTouchEnd:function(s){if(!(s.touches.length>0)){this.__onMouseUp(s),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();a(l.document,"touchend",this._onTouchEnd,e),a(l.document,"touchmove",this._onMouseMove,e);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){p(o.upperCanvasEl,m+"down",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(s){this.__onMouseUp(s),this._resetTransformEventData();var m=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(s)&&(a(l.document,o+"up",this._onMouseUp),a(l.document,o+"move",this._onMouseMove,e),p(m,o+"move",this._onMouseMove,e))},_onMouseMove:function(s){!this.allowTouchScrolling&&s.preventDefault&&s.preventDefault(),this.__onMouseMove(s)},_onResize:function(){this.calcOffset()},_shouldRender:function(s){var m=this._activeObject;return!!m!=!!s||m&&s&&m!==s?!0:(m&&m.isEditing,!1)},__onMouseUp:function(s){var m,o=this._currentTransform,y=this._groupSelector,C=!1,M=!y||y.left===0&&y.top===0;if(this._cacheTransformEventData(s),m=this._target,this._handleEvent(s,"up:before"),i(s,d)){this.fireRightClick&&this._handleEvent(s,"up",d,M);return}if(i(s,u)){this.fireMiddleClick&&this._handleEvent(s,"up",u,M),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(s);return}if(this._isMainEvent(s)){if(o&&(this._finalizeCurrentTransform(s),C=o.actionPerformed),!M){var T=m===this._activeObject;this._maybeGroupObjects(s),C||(C=this._shouldRender(m)||!T&&m===this._activeObject)}if(m){if(m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,s),C=!0;else{var D=m._findTargetCorner(this.getPointer(s,!0),l.util.isTouchEvent(s)),L=m.controls[D],R=L&&L.getMouseUpHandler(s,m,L);if(R){var F=this.getPointer(s);R(s,o,F.x,F.y)}}m.isMoving=!1}this._setCursorFromEvent(s,m),this._handleEvent(s,"up",t,M),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),C?this.requestRenderAll():M||this.renderTop()}},_simpleEventHandler:function(s,m){var o=this.findTarget(m),y=this.targets,C={e:m,target:o,subTargets:y};if(this.fire(s,C),o&&o.fire(s,C),!y)return o;for(var M=0;M<y.length;M++)y[M].fire(s,C);return o},_handleEvent:function(s,m,o,y){var C=this._target,M=this.targets||[],T={e:s,target:C,subTargets:M,button:o||t,isClick:y||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(T.currentTarget=this.findTarget(s),T.currentSubTargets=this.targets),this.fire("mouse:"+m,T),C&&C.fire("mouse"+m,T);for(var D=0;D<M.length;D++)M[D].fire("mouse"+m,T)},_finalizeCurrentTransform:function(s){var m=this._currentTransform,o=m.target,y,C={e:s,target:o,transform:m,action:m.action};o._scaling&&(o._scaling=!1),o.setCoords(),(m.actionPerformed||this.stateful&&o.hasStateChanged())&&(m.actionPerformed&&(y=this._addEventOptions(C,m),this._fire(y,C)),this._fire("modified",C))},_addEventOptions:function(s,m){var o,y;switch(m.action){case"scaleX":o="scaled",y="x";break;case"scaleY":o="scaled",y="y";break;case"skewX":o="skewed",y="x";break;case"skewY":o="skewed",y="y";break;case"scale":o="scaled",y="equally";break;case"rotate":o="rotated";break;case"drag":o="moved";break}return s.by=y,o},_onMouseDownInDrawingMode:function(s){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(s).requestRenderAll();var m=this.getPointer(s);this.freeDrawingBrush.onMouseDown(m,{e:s,pointer:m}),this._handleEvent(s,"down")},_onMouseMoveInDrawingMode:function(s){if(this._isCurrentlyDrawing){var m=this.getPointer(s);this.freeDrawingBrush.onMouseMove(m,{e:s,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(s,"move")},_onMouseUpInDrawingMode:function(s){var m=this.getPointer(s);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:s,pointer:m}),this._handleEvent(s,"up")},__onMouseDown:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"down:before");var m=this._target;if(i(s,d)){this.fireRightClick&&this._handleEvent(s,"down",d);return}if(i(s,u)){this.fireMiddleClick&&this._handleEvent(s,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(s);return}if(this._isMainEvent(s)&&!this._currentTransform){var o=this._pointer;this._previousPointer=o;var y=this._shouldRender(m),C=this._shouldGroup(s,m);if(this._shouldClearSelection(s,m)?this.discardActiveObject(s):C&&(this._handleGrouping(s,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var M=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,s);var T=m._findTargetCorner(this.getPointer(s,!0),l.util.isTouchEvent(s));if(m.__corner=T,m===this._activeObject&&(T||!C)){this._setupCurrentTransform(s,m,M);var D=m.controls[T],o=this.getPointer(s),L=D&&D.getMouseDownHandler(s,m,D);L&&L(s,this._currentTransform,o.x,o.y)}}this._handleEvent(s,"down"),(y||C)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(s){this._resetTransformEventData(),this._pointer=this.getPointer(s,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(s)||null},_beforeTransform:function(s){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:s,transform:m})},__onMouseMove:function(s){this._handleEvent(s,"move:before"),this._cacheTransformEventData(s);var m,o;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(s);return}if(this._isMainEvent(s)){var y=this._groupSelector;y?(o=this._absolutePointer,y.left=o.x-y.ex,y.top=o.y-y.ey,this.renderTop()):this._currentTransform?this._transformObject(s):(m=this.findTarget(s)||null,this._setCursorFromEvent(s,m),this._fireOverOutEvents(m,s)),this._handleEvent(s,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(s,m){var o=this._hoveredTarget,y=this._hoveredTargets,C=this.targets,M=Math.max(y.length,C.length);this.fireSyntheticInOutEvents(s,m,{oldTarget:o,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var T=0;T<M;T++)this.fireSyntheticInOutEvents(C[T],m,{oldTarget:y[T],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=s,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(s,m){var o=this._draggedoverTarget,y=this._hoveredTargets,C=this.targets,M=Math.max(y.length,C.length);this.fireSyntheticInOutEvents(s,m,{oldTarget:o,evtOut:"dragleave",evtIn:"dragenter"});for(var T=0;T<M;T++)this.fireSyntheticInOutEvents(C[T],m,{oldTarget:y[T],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=s},fireSyntheticInOutEvents:function(s,m,o){var y,C,M=o.oldTarget,T,D,L=M!==s,R=o.canvasEvtIn,F=o.canvasEvtOut;L&&(y={e:m,target:s,previousTarget:M},C={e:m,target:M,nextTarget:s}),D=s&&L,T=M&&L,T&&(F&&this.fire(F,C),M.fire(o.evtOut,C)),D&&(R&&this.fire(R,y),s.fire(o.evtIn,y))},__onMouseWheel:function(s){this._cacheTransformEventData(s),this._handleEvent(s,"wheel"),this._resetTransformEventData()},_transformObject:function(s){var m=this.getPointer(s),o=this._currentTransform;o.reset=!1,o.shiftKey=s.shiftKey,o.altKey=s[this.centeredKey],this._performTransformAction(s,o,m),o.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(s,m,o){var y=o.x,C=o.y,M=m.action,T=!1,D=m.actionHandler;D&&(T=D(s,m,y,C)),M==="drag"&&T&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||T},_fire:l.controlsUtils.fireEvent,_setCursorFromEvent:function(s,m){if(!m)return this.setCursor(this.defaultCursor),!1;var o=m.hoverCursor||this.hoverCursor,y=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,C=(!y||!y.contains(m))&&m._findTargetCorner(this.getPointer(s,!0));C?this.setCursor(this.getCornerCursor(C,m,s)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(M){o=M.hoverCursor||o}),this.setCursor(o))},getCornerCursor:function(s,m,o){var y=m.controls[s];return y.cursorStyleHandler(o,y,m)}})}(),function(){var p=Math.min,a=Math.max;l.util.object.extend(l.Canvas.prototype,{_shouldGroup:function(d,u){var t=this._activeObject;return t&&this._isSelectionKeyPressed(d)&&u&&u.selectable&&this.selection&&(t!==u||t.type==="activeSelection")&&!u.onSelect({e:d})},_handleGrouping:function(d,u){var t=this._activeObject;t.__corner||u===t&&(u=this.findTarget(d,!0),!u||!u.selectable)||(t&&t.type==="activeSelection"?this._updateActiveSelection(u,d):this._createActiveSelection(u,d))},_updateActiveSelection:function(d,u){var t=this._activeObject,e=t._objects.slice(0);t.contains(d)?(t.removeWithUpdate(d),this._hoveredTarget=d,this._hoveredTargets=this.targets.concat(),t.size()===1&&this._setActiveObject(t.item(0),u)):(t.addWithUpdate(d),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(e,u)},_createActiveSelection:function(d,u){var t=this.getActiveObjects(),e=this._createGroup(d);this._hoveredTarget=e,this._setActiveObject(e,u),this._fireSelectionEvents(t,u)},_createGroup:function(d){var u=this._objects,t=u.indexOf(this._activeObject)<u.indexOf(d),e=t?[this._activeObject,d]:[d,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new l.ActiveSelection(e,{canvas:this})},_groupSelectedObjects:function(d){var u=this._collectObjects(d),t;u.length===1?this.setActiveObject(u[0],d):u.length>1&&(t=new l.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(t,d))},_collectObjects:function(d){for(var u=[],t,e=this._groupSelector.ex,i=this._groupSelector.ey,s=e+this._groupSelector.left,m=i+this._groupSelector.top,o=new l.Point(p(e,s),p(i,m)),y=new l.Point(a(e,s),a(i,m)),C=!this.selectionFullyContained,M=e===s&&i===m,T=this._objects.length;T--&&(t=this._objects[T],!(!(!t||!t.selectable||!t.visible)&&(C&&t.intersectsWithRect(o,y,!0)||t.isContainedWithinRect(o,y,!0)||C&&t.containsPoint(o,null,!0)||C&&t.containsPoint(y,null,!0))&&(u.push(t),M))););return u.length>1&&(u=u.filter(function(D){return!D.onSelect({e:d})})),u},_maybeGroupObjects:function(d){this.selection&&this._groupSelector&&this._groupSelectedObjects(d),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){l.util.object.extend(l.StaticCanvas.prototype,{toDataURL:function(p){p||(p={});var a=p.format||"png",d=p.quality||1,u=(p.multiplier||1)*(p.enableRetinaScaling?this.getRetinaScaling():1),t=this.toCanvasElement(u,p);return l.util.toDataURL(t,a,d)},toCanvasElement:function(p,a){p=p||1,a=a||{};var d=(a.width||this.width)*p,u=(a.height||this.height)*p,t=this.getZoom(),e=this.width,i=this.height,s=t*p,m=this.viewportTransform,o=(m[4]-(a.left||0))*p,y=(m[5]-(a.top||0))*p,C=this.interactive,M=[s,0,0,s,o,y],T=this.enableRetinaScaling,D=l.util.createCanvasElement(),L=this.contextTop;return D.width=d,D.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=M,this.width=d,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(D.getContext("2d"),this._objects),this.viewportTransform=m,this.width=e,this.height=i,this.calcViewportBoundaries(),this.interactive=C,this.enableRetinaScaling=T,this.contextTop=L,D}})}(),l.util.object.extend(l.StaticCanvas.prototype,{loadFromJSON:function(p,a,d){if(p){var u=typeof p=="string"?JSON.parse(p):l.util.object.clone(p),t=this,e=u.clipPath,i=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(s){t.clear(),t._setBgOverlay(u,function(){e?t._enlivenObjects([e],function(m){t.clipPath=m[0],t.__setupCanvas.call(t,u,s,i,a)}):t.__setupCanvas.call(t,u,s,i,a)})},d),this}},__setupCanvas:function(p,a,d,u){var t=this;a.forEach(function(e,i){t.insertAt(e,i)}),this.renderOnAddRemove=d,delete p.objects,delete p.backgroundImage,delete p.overlayImage,delete p.background,delete p.overlay,this._setOptions(p),this.renderAll(),u&&u()},_setBgOverlay:function(p,a){var d={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!p.backgroundImage&&!p.overlayImage&&!p.background&&!p.overlay){a&&a();return}var u=function(){d.backgroundImage&&d.overlayImage&&d.backgroundColor&&d.overlayColor&&a&&a()};this.__setBgOverlay("backgroundImage",p.backgroundImage,d,u),this.__setBgOverlay("overlayImage",p.overlayImage,d,u),this.__setBgOverlay("backgroundColor",p.background,d,u),this.__setBgOverlay("overlayColor",p.overlay,d,u)},__setBgOverlay:function(p,a,d,u){var t=this;if(!a){d[p]=!0,u&&u();return}p==="backgroundImage"||p==="overlayImage"?l.util.enlivenObjects([a],function(e){t[p]=e[0],d[p]=!0,u&&u()}):this["set"+l.util.string.capitalize(p,!0)](a,function(){d[p]=!0,u&&u()})},_enlivenObjects:function(p,a,d){if(!p||p.length===0){a&&a([]);return}l.util.enlivenObjects(p,function(u){a&&a(u)},null,d)},_toDataURL:function(p,a){this.clone(function(d){a(d.toDataURL(p))})},_toDataURLWithMultiplier:function(p,a,d){this.clone(function(u){d(u.toDataURLWithMultiplier(p,a))})},clone:function(p,a){var d=JSON.stringify(this.toJSON(a));this.cloneWithoutData(function(u){u.loadFromJSON(d,function(){p&&p(u)})})},cloneWithoutData:function(p){var a=l.util.createCanvasElement();a.width=this.width,a.height=this.height;var d=new l.Canvas(a);this.backgroundImage?(d.setBackgroundImage(this.backgroundImage.src,function(){d.renderAll(),p&&p(d)}),d.backgroundImageOpacity=this.backgroundImageOpacity,d.backgroundImageStretch=this.backgroundImageStretch):p&&p(d)}}),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.extend,u=a.util.object.clone,t=a.util.toFixed,e=a.util.string.capitalize,i=a.util.degreesToRadians,s=!a.isLikelyNode,m=2;a.Object||(a.Object=a.util.createClass(a.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(o){o&&this.setOptions(o)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=a.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(o){var y=a.perfLimitSizeTotal,C=o.width,M=o.height,T=a.maxCacheSideLimit,D=a.minCacheSideLimit;if(C<=T&&M<=T&&C*M<=y)return C<D&&(o.width=D),M<D&&(o.height=D),o;var L=C/M,R=a.util.limitDimsByArea(L,y),F=a.util.capValue,W=F(D,R.x,T),ot=F(D,R.y,T);return C>W&&(o.zoomX/=C/W,o.width=W,o.capped=!0),M>ot&&(o.zoomY/=M/ot,o.height=ot,o.capped=!0),o},_getCacheCanvasDimensions:function(){var o=this.getTotalObjectScaling(),y=this._getTransformedDimensions(0,0),C=y.x*o.scaleX/this.scaleX,M=y.y*o.scaleY/this.scaleY;return{width:C+m,height:M+m,zoomX:o.scaleX,zoomY:o.scaleY,x:C,y:M}},_updateCacheCanvas:function(){var o=this.canvas;if(this.noScaleCache&&o&&o._currentTransform){var y=o._currentTransform.target,C=o._currentTransform.action;if(this===y&&C.slice&&C.slice(0,5)==="scale")return!1}var M=this._cacheCanvas,T=this._limitCacheSize(this._getCacheCanvasDimensions()),D=a.minCacheSideLimit,L=T.width,R=T.height,F,W,ot=T.zoomX,it=T.zoomY,Mt=L!==this.cacheWidth||R!==this.cacheHeight,$=this.zoomX!==ot||this.zoomY!==it,bt=Mt||$,U=0,jt=0,gt=!1;if(Mt){var Nt=this._cacheCanvas.width,V=this._cacheCanvas.height,q=L>Nt||R>V,Q=(L<Nt*.9||R<V*.9)&&Nt>D&&V>D;gt=q||Q,q&&!T.capped&&(L>D||R>D)&&(U=L*.1,jt=R*.1)}return this instanceof a.Text&&this.path&&(bt=!0,gt=!0,U+=this.getHeightOfLine(0)*this.zoomX,jt+=this.getHeightOfLine(0)*this.zoomY),bt?(gt?(M.width=Math.ceil(L+U),M.height=Math.ceil(R+jt)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,M.width,M.height)),F=T.x/2,W=T.y/2,this.cacheTranslationX=Math.round(M.width/2-F)+F,this.cacheTranslationY=Math.round(M.height/2-W)+W,this.cacheWidth=L,this.cacheHeight=R,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ot,it),this.zoomX=ot,this.zoomY=it,!0):!1},setOptions:function(o){this._setOptions(o),this._initGradient(o.fill,"fill"),this._initGradient(o.stroke,"stroke"),this._initPattern(o.fill,"fill"),this._initPattern(o.stroke,"stroke")},transform:function(o){var y=this.group&&!this.group._transformDone||this.group&&this.canvas&&o===this.canvas.contextTop,C=this.calcTransformMatrix(!y);o.transform(C[0],C[1],C[2],C[3],C[4],C[5])},toObject:function(o){var y=a.Object.NUM_FRACTION_DIGITS,C={type:this.type,version:a.version,originX:this.originX,originY:this.originY,left:t(this.left,y),top:t(this.top,y),width:t(this.width,y),height:t(this.height,y),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:t(this.strokeWidth,y),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:t(this.strokeMiterLimit,y),scaleX:t(this.scaleX,y),scaleY:t(this.scaleY,y),angle:t(this.angle,y),flipX:this.flipX,flipY:this.flipY,opacity:t(this.opacity,y),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:t(this.skewX,y),skewY:t(this.skewY,y)};return this.clipPath&&!this.clipPath.excludeFromExport&&(C.clipPath=this.clipPath.toObject(o),C.clipPath.inverted=this.clipPath.inverted,C.clipPath.absolutePositioned=this.clipPath.absolutePositioned),a.util.populateWithProperties(this,C,o),this.includeDefaultValues||(C=this._removeDefaultValues(C)),C},toDatalessObject:function(o){return this.toObject(o)},_removeDefaultValues:function(o){var y=a.util.getKlass(o.type).prototype,C=y.stateProperties;return C.forEach(function(M){if(!(M==="left"||M==="top")){o[M]===y[M]&&delete o[M];var T=Object.prototype.toString.call(o[M])==="[object Array]"&&Object.prototype.toString.call(y[M])==="[object Array]";T&&o[M].length===0&&y[M].length===0&&delete o[M]}}),o},toString:function(){return"#<fabric."+e(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var o=a.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(o.scaleX),scaleY:Math.abs(o.scaleY)}},getTotalObjectScaling:function(){var o=this.getObjectScaling(),y=o.scaleX,C=o.scaleY;if(this.canvas){var M=this.canvas.getZoom(),T=this.canvas.getRetinaScaling();y*=M*T,C*=M*T}return{scaleX:y,scaleY:C}},getObjectOpacity:function(){var o=this.opacity;return this.group&&(o*=this.group.getObjectOpacity()),o},_set:function(o,y){var C=o==="scaleX"||o==="scaleY",M=this[o]!==y,T=!1;return C&&(y=this._constrainScale(y)),o==="scaleX"&&y<0?(this.flipX=!this.flipX,y*=-1):o==="scaleY"&&y<0?(this.flipY=!this.flipY,y*=-1):o==="shadow"&&y&&!(y instanceof a.Shadow)?y=new a.Shadow(y):o==="dirty"&&this.group&&this.group.set("dirty",y),this[o]=y,M&&(T=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(o)>-1?(this.dirty=!0,T&&this.group.set("dirty",!0)):T&&this.stateProperties.indexOf(o)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:a.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(o){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(o.save(),this._setupCompositeOperation(o),this.drawSelectionBackground(o),this.transform(o),this._setOpacity(o),this._setShadow(o,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(o)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(o),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),o.restore())},renderCache:function(o){o=o||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,o.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(o){var y=this.clipPath;if(o.save(),y.inverted?o.globalCompositeOperation="destination-out":o.globalCompositeOperation="destination-in",y.absolutePositioned){var C=a.util.invertTransform(this.calcTransformMatrix());o.transform(C[0],C[1],C[2],C[3],C[4],C[5])}y.transform(o),o.scale(1/y.zoomX,1/y.zoomY),o.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),o.restore()},drawObject:function(o,y){var C=this.fill,M=this.stroke;y?(this.fill="black",this.stroke="",this._setClippingProperties(o)):this._renderBackground(o),this._render(o),this._drawClipPath(o),this.fill=C,this.stroke=M},_drawClipPath:function(o){var y=this.clipPath;y&&(y.canvas=this.canvas,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCache(o))},drawCacheOnCanvas:function(o){o.scale(1/this.zoomX,1/this.zoomY),o.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(o){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!o&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!o){var y=this.cacheWidth/this.zoomX,C=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-y/2,-C/2,y,C)}return!0}return!1},_renderBackground:function(o){if(this.backgroundColor){var y=this._getNonTransformedDimensions();o.fillStyle=this.backgroundColor,o.fillRect(-y.x/2,-y.y/2,y.x,y.y),this._removeShadow(o)}},_setOpacity:function(o){this.group&&!this.group._transformDone?o.globalAlpha=this.getObjectOpacity():o.globalAlpha*=this.opacity},_setStrokeStyles:function(o,y){var C=y.stroke;C&&(o.lineWidth=y.strokeWidth,o.lineCap=y.strokeLineCap,o.lineDashOffset=y.strokeDashOffset,o.lineJoin=y.strokeLineJoin,o.miterLimit=y.strokeMiterLimit,C.toLive?C.gradientUnits==="percentage"||C.gradientTransform||C.patternTransform?this._applyPatternForTransformedGradient(o,C):(o.strokeStyle=C.toLive(o,this),this._applyPatternGradientTransform(o,C)):o.strokeStyle=y.stroke)},_setFillStyles:function(o,y){var C=y.fill;C&&(C.toLive?(o.fillStyle=C.toLive(o,this),this._applyPatternGradientTransform(o,y.fill)):o.fillStyle=C)},_setClippingProperties:function(o){o.globalAlpha=1,o.strokeStyle="transparent",o.fillStyle="#000000"},_setLineDash:function(o,y){!y||y.length===0||(1&y.length&&y.push.apply(y,y),o.setLineDash(y))},_renderControls:function(o,y){var C=this.getViewportTransform(),M=this.calcTransformMatrix(),T,D,L;y=y||{},D=typeof y.hasBorders!="undefined"?y.hasBorders:this.hasBorders,L=typeof y.hasControls!="undefined"?y.hasControls:this.hasControls,M=a.util.multiplyTransformMatrices(C,M),T=a.util.qrDecompose(M),o.save(),o.translate(T.translateX,T.translateY),o.lineWidth=1*this.borderScaleFactor,this.group||(o.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),o.rotate(i(T.angle)),y.forActiveSelection||this.group?D&&this.drawBordersInGroup(o,T,y):D&&this.drawBorders(o,y),L&&this.drawControls(o,y),o.restore()},_setShadow:function(o){if(this.shadow){var y=this.shadow,C=this.canvas,M,T=C&&C.viewportTransform[0]||1,D=C&&C.viewportTransform[3]||1;y.nonScaling?M={scaleX:1,scaleY:1}:M=this.getObjectScaling(),C&&C._isRetinaScaling()&&(T*=a.devicePixelRatio,D*=a.devicePixelRatio),o.shadowColor=y.color,o.shadowBlur=y.blur*a.browserShadowBlurConstant*(T+D)*(M.scaleX+M.scaleY)/4,o.shadowOffsetX=y.offsetX*T*M.scaleX,o.shadowOffsetY=y.offsetY*D*M.scaleY}},_removeShadow:function(o){this.shadow&&(o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0)},_applyPatternGradientTransform:function(o,y){if(!y||!y.toLive)return{offsetX:0,offsetY:0};var C=y.gradientTransform||y.patternTransform,M=-this.width/2+y.offsetX||0,T=-this.height/2+y.offsetY||0;return y.gradientUnits==="percentage"?o.transform(this.width,0,0,this.height,M,T):o.transform(1,0,0,1,M,T),C&&o.transform(C[0],C[1],C[2],C[3],C[4],C[5]),{offsetX:M,offsetY:T}},_renderPaintInOrder:function(o){this.paintFirst==="stroke"?(this._renderStroke(o),this._renderFill(o)):(this._renderFill(o),this._renderStroke(o))},_render:function(){},_renderFill:function(o){this.fill&&(o.save(),this._setFillStyles(o,this),this.fillRule==="evenodd"?o.fill("evenodd"):o.fill(),o.restore())},_renderStroke:function(o){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this.strokeUniform&&this.group){var y=this.getObjectScaling();o.scale(1/y.scaleX,1/y.scaleY)}else this.strokeUniform&&o.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(o,this.strokeDashArray),this._setStrokeStyles(o,this),o.stroke(),o.restore()}},_applyPatternForTransformedGradient:function(o,y){var C=this._limitCacheSize(this._getCacheCanvasDimensions()),M=a.util.createCanvasElement(),T,D=this.canvas.getRetinaScaling(),L=C.x/this.scaleX/D,R=C.y/this.scaleY/D;M.width=L,M.height=R,T=M.getContext("2d"),T.beginPath(),T.moveTo(0,0),T.lineTo(L,0),T.lineTo(L,R),T.lineTo(0,R),T.closePath(),T.translate(L/2,R/2),T.scale(C.zoomX/this.scaleX/D,C.zoomY/this.scaleY/D),this._applyPatternGradientTransform(T,y),T.fillStyle=y.toLive(o),T.fill(),o.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),o.scale(D*this.scaleX/C.zoomX,D*this.scaleY/C.zoomY),o.strokeStyle=T.createPattern(M,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var o=a.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",o.scaleX),this.set("scaleY",o.scaleY),this.angle=o.angle,this.skewX=o.skewX,this.skewY=0}},_removeTransformMatrix:function(o){var y=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),y=a.util.transformPoint(y,this.transformMatrix)),this.transformMatrix=null,o&&(this.scaleX*=o.scaleX,this.scaleY*=o.scaleY,this.cropX=o.cropX,this.cropY=o.cropY,y.x+=o.offsetLeft,y.y+=o.offsetTop,this.width=o.width,this.height=o.height),this.setPositionByOrigin(y,"center","center")},clone:function(o,y){var C=this.toObject(y);this.constructor.fromObject?this.constructor.fromObject(C,o):a.Object._fromObject("Object",C,o)},cloneAsImage:function(o,y){var C=this.toCanvasElement(y);return o&&o(new a.Image(C)),this},toCanvasElement:function(o){o||(o={});var y=a.util,C=y.saveObjectTransform(this),M=this.group,T=this.shadow,D=Math.abs,L=(o.multiplier||1)*(o.enableRetinaScaling?a.devicePixelRatio:1);delete this.group,o.withoutTransform&&y.resetObjectTransform(this),o.withoutShadow&&(this.shadow=null);var R=a.util.createCanvasElement(),F=this.getBoundingRect(!0,!0),W=this.shadow,ot,it={x:0,y:0},Mt,$,bt;W&&(Mt=W.blur,W.nonScaling?ot={scaleX:1,scaleY:1}:ot=this.getObjectScaling(),it.x=2*Math.round(D(W.offsetX)+Mt)*D(ot.scaleX),it.y=2*Math.round(D(W.offsetY)+Mt)*D(ot.scaleY)),$=F.width+it.x,bt=F.height+it.y,R.width=Math.ceil($),R.height=Math.ceil(bt);var U=new a.StaticCanvas(R,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});o.format==="jpeg"&&(U.backgroundColor="#fff"),this.setPositionByOrigin(new a.Point(U.width/2,U.height/2),"center","center");var jt=this.canvas;U.add(this);var gt=U.toCanvasElement(L||1,o);return this.shadow=T,this.set("canvas",jt),M&&(this.group=M),this.set(C).setCoords(),U._objects=[],U.dispose(),U=null,gt},toDataURL:function(o){return o||(o={}),a.util.toDataURL(this.toCanvasElement(o),o.format||"png",o.quality||1)},isType:function(o){return this.type===o},complexity:function(){return 1},toJSON:function(o){return this.toObject(o)},rotate:function(o){var y=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return y&&this._setOriginToCenter(),this.set("angle",o),y&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(o,y){y=y||this.canvas.getPointer(o);var C=new a.Point(y.x,y.y),M=this._getLeftTopCoords();return this.angle&&(C=a.util.rotatePoint(C,M,i(-this.angle))),{x:C.x-M.x,y:C.y-M.y}},_setupCompositeOperation:function(o){this.globalCompositeOperation&&(o.globalCompositeOperation=this.globalCompositeOperation)}}),a.util.createAccessors&&a.util.createAccessors(a.Object),d(a.Object.prototype,a.Observable),a.Object.NUM_FRACTION_DIGITS=2,a.Object._fromObject=function(o,y,C,M){var T=a[o];y=u(y,!0),a.util.enlivenPatterns([y.fill,y.stroke],function(D){typeof D[0]!="undefined"&&(y.fill=D[0]),typeof D[1]!="undefined"&&(y.stroke=D[1]),a.util.enlivenObjects([y.clipPath],function(L){y.clipPath=L[0];var R=M?new T(y[M],y):new T(y);C&&C(R)})})},a.Object.__uid=0)}(x),function(){var p=l.util.degreesToRadians,a={left:-.5,center:0,right:.5},d={top:-.5,center:0,bottom:.5};l.util.object.extend(l.Object.prototype,{translateToGivenOrigin:function(u,t,e,i,s){var m=u.x,o=u.y,y,C,M;return typeof t=="string"?t=a[t]:t-=.5,typeof i=="string"?i=a[i]:i-=.5,y=i-t,typeof e=="string"?e=d[e]:e-=.5,typeof s=="string"?s=d[s]:s-=.5,C=s-e,(y||C)&&(M=this._getTransformedDimensions(),m=u.x+y*M.x,o=u.y+C*M.y),new l.Point(m,o)},translateToCenterPoint:function(u,t,e){var i=this.translateToGivenOrigin(u,t,e,"center","center");return this.angle?l.util.rotatePoint(i,u,p(this.angle)):i},translateToOriginPoint:function(u,t,e){var i=this.translateToGivenOrigin(u,"center","center",t,e);return this.angle?l.util.rotatePoint(i,u,p(this.angle)):i},getCenterPoint:function(){var u=new l.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,t){var e=this.getCenterPoint();return this.translateToOriginPoint(e,u,t)},toLocalPoint:function(u,t,e){var i=this.getCenterPoint(),s,m;return typeof t!="undefined"&&typeof e!="undefined"?s=this.translateToGivenOrigin(i,"center","center",t,e):s=new l.Point(this.left,this.top),m=new l.Point(u.x,u.y),this.angle&&(m=l.util.rotatePoint(m,i,-p(this.angle))),m.subtractEquals(s)},setPositionByOrigin:function(u,t,e){var i=this.translateToCenterPoint(u,t,e),s=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",s.x),this.set("top",s.y)},adjustPosition:function(u){var t=p(this.angle),e=this.getScaledWidth(),i=l.util.cos(t)*e,s=l.util.sin(t)*e,m,o;typeof this.originX=="string"?m=a[this.originX]:m=this.originX-.5,typeof u=="string"?o=a[u]:o=u-.5,this.left+=i*(o-m),this.top+=s*(o-m),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function p(e){return[new l.Point(e.tl.x,e.tl.y),new l.Point(e.tr.x,e.tr.y),new l.Point(e.br.x,e.br.y),new l.Point(e.bl.x,e.bl.y)]}var a=l.util,d=a.degreesToRadians,u=a.multiplyTransformMatrices,t=a.transformPoint;a.object.extend(l.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,i){return i?e?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,i){return p(this._getCoords(e,i))},intersectsWithRect:function(e,i,s,m){var o=this.getCoords(s,m),y=l.Intersection.intersectPolygonRectangle(o,e,i);return y.status==="Intersection"},intersectsWithObject:function(e,i,s){var m=l.Intersection.intersectPolygonPolygon(this.getCoords(i,s),e.getCoords(i,s));return m.status==="Intersection"||e.isContainedWithinObject(this,i,s)||this.isContainedWithinObject(e,i,s)},isContainedWithinObject:function(e,i,s){for(var m=this.getCoords(i,s),o=i?e.aCoords:e.lineCoords,y=0,C=e._getImageLines(o);y<4;y++)if(!e.containsPoint(m[y],C))return!1;return!0},isContainedWithinRect:function(e,i,s,m){var o=this.getBoundingRect(s,m);return o.left>=e.x&&o.left+o.width<=i.x&&o.top>=e.y&&o.top+o.height<=i.y},containsPoint:function(e,y,s,m){var o=this._getCoords(s,m),y=y||this._getImageLines(o),C=this._findCrossPoints(e,y);return C!==0&&C%2===1},isOnScreen:function(e){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br,m=this.getCoords(!0,e);return m.some(function(o){return o.x<=s.x&&o.x>=i.x&&o.y<=s.y&&o.y>=i.y})||this.intersectsWithRect(i,s,!0,e)?!0:this._containsCenterOfCanvas(i,s,e)},_containsCenterOfCanvas:function(e,i,s){var m={x:(e.x+i.x)/2,y:(e.y+i.y)/2};return!!this.containsPoint(m,null,!0,s)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var i=this.canvas.vptCoords.tl,s=this.canvas.vptCoords.br;if(this.intersectsWithRect(i,s,!0,e))return!0;var m=this.getCoords(!0,e).every(function(o){return(o.x>=s.x||o.x<=i.x)&&(o.y>=s.y||o.y<=i.y)});return m&&this._containsCenterOfCanvas(i,s,e)},_getImageLines:function(e){var i={topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}};return i},_findCrossPoints:function(e,i){var s,m,o,y,C,M=0,T;for(var D in i)if(T=i[D],!(T.o.y<e.y&&T.d.y<e.y)&&!(T.o.y>=e.y&&T.d.y>=e.y)&&(T.o.x===T.d.x&&T.o.x>=e.x?C=T.o.x:(s=0,m=(T.d.y-T.o.y)/(T.d.x-T.o.x),o=e.y-s*e.x,y=T.o.y-m*T.o.x,C=-(o-y)/(s-m)),C>=e.x&&(M+=1),M===2))break;return M},getBoundingRect:function(e,i){var s=this.getCoords(e,i);return a.makeBoundingBoxFromPoints(s)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,i){var s=this.getBoundingRect(i).width/this.getScaledWidth();return this.scale(e/this.width/s)},scaleToHeight:function(e,i){var s=this.getBoundingRect(i).height/this.getScaledHeight();return this.scale(e/this.height/s)},calcCoords:function(e){return e?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var e=this.getViewportTransform(),i=this.padding,s=d(this.angle),m=a.cos(s),o=a.sin(s),y=m*i,C=o*i,M=y+C,T=y-C,D=this.calcACoords(),L={tl:t(D.tl,e),tr:t(D.tr,e),bl:t(D.bl,e),br:t(D.br,e)};return i&&(L.tl.x-=T,L.tl.y-=M,L.tr.x+=M,L.tr.y-=T,L.bl.x-=M,L.bl.y+=T,L.br.x+=T,L.br.y+=M),L},calcOCoords:function(){var e=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),s=this.getViewportTransform(),m=u(s,i),o=u(m,e),o=u(o,[1/s[0],0,0,1/s[3],0,0]),y=this._calculateCurrentDimensions(),C={};return this.forEachControl(function(M,T,D){C[T]=M.positionHandler(y,o,D)}),C},calcACoords:function(){var e=this._calcRotateMatrix(),i=this._calcTranslateMatrix(),s=u(i,e),m=this._getTransformedDimensions(),o=m.x/2,y=m.y/2;return{tl:t({x:-o,y:-y},s),tr:t({x:o,y:-y},s),bl:t({x:-o,y},s),br:t({x:o,y},s)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return a.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var i="_",s="";return!e&&this.group&&(s=this.group.transformMatrixKey(e)+i),s+this.top+i+this.left+i+this.scaleX+i+this.scaleY+i+this.skewX+i+this.skewY+i+this.angle+i+this.originX+i+this.originY+i+this.width+i+this.height+i+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var i=this.calcOwnMatrix();if(e||!this.group)return i;var s=this.transformMatrixKey(e),m=this.matrixCache||(this.matrixCache={});return m.key===s?m.value:(this.group&&(i=u(this.group.calcTransformMatrix(!1),i)),m.key=s,m.value=i,i)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===e)return i.value;var s=this._calcTranslateMatrix(),m={angle:this.angle,translateX:s[4],translateY:s[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=e,i.value=a.composeMatrix(m),i.value},_calcDimensionsTransformMatrix:function(e,i,s){return a.calcDimensionsMatrix({skewX:e,skewY:i,scaleX:this.scaleX*(s&&this.flipX?-1:1),scaleY:this.scaleY*(s&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var e=this.strokeWidth,i=this.width+e,s=this.height+e;return{x:i,y:s}},_getTransformedDimensions:function(e,i){typeof e=="undefined"&&(e=this.skewX),typeof i=="undefined"&&(i=this.skewY);var s,m,o,y=e===0&&i===0;if(this.strokeUniform?(m=this.width,o=this.height):(s=this._getNonTransformedDimensions(),m=s.x,o=s.y),y)return this._finalizeDimensions(m*this.scaleX,o*this.scaleY);var C=a.sizeAfterTransform(m,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:i});return this._finalizeDimensions(C.x,C.y)},_finalizeDimensions:function(e,i){return this.strokeUniform?{x:e+this.strokeWidth,y:i+this.strokeWidth}:{x:e,y:i}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),i=this._getTransformedDimensions(),s=t(i,e,!0);return s.scalarAdd(2*this.padding)}})}(),l.util.object.extend(l.Object.prototype,{sendToBack:function(){return this.group?l.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?l.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(p){return this.group?l.StaticCanvas.prototype.sendBackwards.call(this.group,this,p):this.canvas&&this.canvas.sendBackwards(this,p),this},bringForward:function(p){return this.group?l.StaticCanvas.prototype.bringForward.call(this.group,this,p):this.canvas&&this.canvas.bringForward(this,p),this},moveTo:function(p){return this.group&&this.group.type!=="activeSelection"?l.StaticCanvas.prototype.moveTo.call(this.group,this,p):this.canvas&&this.canvas.moveTo(this,p),this}}),function(){function p(d,u){if(u){if(u.toLive)return d+": url(#SVGID_"+u.id+"); ";var t=new l.Color(u),e=d+": "+t.toRgb()+"; ",i=t.getAlpha();return i!==1&&(e+=d+"-opacity: "+i.toString()+"; "),e}else return d+": none; "}var a=l.util.toFixed;l.util.object.extend(l.Object.prototype,{getSvgStyles:function(d){var u=this.fillRule?this.fillRule:"nonzero",t=this.strokeWidth?this.strokeWidth:"0",e=this.strokeDashArray?this.strokeDashArray.join(" "):"none",i=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",y=typeof this.opacity!="undefined"?this.opacity:"1",C=this.visible?"":" visibility: hidden;",M=d?"":this.getSvgFilter(),T=p("fill",this.fill),D=p("stroke",this.stroke);return[D,"stroke-width: ",t,"; ","stroke-dasharray: ",e,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",o,"; ",T,"fill-rule: ",u,"; ","opacity: ",y,";",M,C].join("")},getSvgSpanStyles:function(d,u){var t="; ",i=d.fontFamily?"font-family: "+(d.fontFamily.indexOf("'")===-1&&d.fontFamily.indexOf('"')===-1?"'"+d.fontFamily+"'":d.fontFamily)+t:"",e=d.strokeWidth?"stroke-width: "+d.strokeWidth+t:"",i=i,s=d.fontSize?"font-size: "+d.fontSize+"px"+t:"",m=d.fontStyle?"font-style: "+d.fontStyle+t:"",o=d.fontWeight?"font-weight: "+d.fontWeight+t:"",y=d.fill?p("fill",d.fill):"",C=d.stroke?p("stroke",d.stroke):"",M=this.getSvgTextDecoration(d),T=d.deltaY?"baseline-shift: "+-d.deltaY+"; ":"";return M&&(M="text-decoration: "+M+t),[C,e,i,s,m,o,M,y,T,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(d){return["overline","underline","line-through"].filter(function(u){return d[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(d,u){var t=d?this.calcTransformMatrix():this.calcOwnMatrix(),e='transform="'+l.util.matrixToSVG(t);return e+(u||"")+'" '},_setSVGBg:function(d){if(this.backgroundColor){var u=l.Object.NUM_FRACTION_DIGITS;d.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',a(-this.width/2,u),'" y="',a(-this.height/2,u),'" width="',a(this.width,u),'" height="',a(this.height,u),`"></rect>
`)}},toSVG:function(d){return this._createBaseSVGMarkup(this._toSVG(d),{reviver:d})},toClipPathSVG:function(d){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(d),{reviver:d})},_createBaseClipPathSVGMarkup:function(d,u){u=u||{};var t=u.reviver,e=u.additionalTransform||"",i=[this.getSvgTransform(!0,e),this.getSvgCommons()].join(""),s=d.indexOf("COMMON_PARTS");return d[s]=i,t?t(d.join("")):d.join("")},_createBaseSVGMarkup:function(d,u){u=u||{};var t=u.noStyle,e=u.reviver,i=t?"":'style="'+this.getSvgStyles()+'" ',s=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,o=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",y=m&&m.absolutePositioned,C=this.stroke,M=this.fill,T=this.shadow,D,L=[],R,F=d.indexOf("COMMON_PARTS"),W=u.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+l.Object.__uid++,R='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(e)+`</clipPath>
`),y&&L.push("<g ",s,this.getSvgCommons(),` >
`),L.push("<g ",this.getSvgTransform(!1),y?"":s+this.getSvgCommons(),` >
`),D=[i,o,t?"":this.addPaintOrder()," ",W?'transform="'+W+'" ':""].join(""),d[F]=D,M&&M.toLive&&L.push(M.toSVG(this)),C&&C.toLive&&L.push(C.toSVG(this)),T&&L.push(T.toSVG(this)),m&&L.push(R),L.push(d.join("")),L.push(`</g>
`),y&&L.push(`</g>
`),e?e(L.join("")):L.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var p=l.util.object.extend,a="stateProperties";function d(t,e,i){var s={},m=!0;i.forEach(function(o){s[o]=t[o]}),p(t[e],s,m)}function u(t,e,i){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var s=0,m=t.length;s<m;s++)if(!u(t[s],e[s]))return!1;return!0}else if(t&&typeof t=="object"){var o=Object.keys(t),y;if(!e||typeof e!="object"||!i&&o.length!==Object.keys(e).length)return!1;for(var s=0,m=o.length;s<m;s++)if(y=o[s],!(y==="canvas"||y==="group")&&!u(t[y],e[y]))return!1;return!0}}l.util.object.extend(l.Object.prototype,{hasStateChanged:function(t){t=t||a;var e="_"+t;return Object.keys(this[e]).length<this[t].length?!0:!u(this[e],this,!0)},saveState:function(t){var e=t&&t.propertySet||a,i="_"+e;return this[i]?(d(this,i,this[e]),t&&t.stateProperties&&d(this,i,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var e=t.propertySet||a;return t.propertySet=e,this["_"+e]={},this.saveState(t),this}})}(),function(){var p=l.util.degreesToRadians;l.util.object.extend(l.Object.prototype,{_findTargetCorner:function(a,d){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=a.x,t=a.y,e,i,s=Object.keys(this.oCoords),m=s.length-1,o;for(this.__corner=0;m>=0;m--)if(o=s[m],!!this.isControlVisible(o)&&(i=this._getImageLines(d?this.oCoords[o].touchCorner:this.oCoords[o].corner),e=this._findCrossPoints({x:u,y:t},i),e!==0&&e%2===1))return this.__corner=o,o;return!1},forEachControl:function(a){for(var d in this.controls)a(this.controls[d],d,this)},_setCornerCoords:function(){var a=this.oCoords;for(var d in a){var u=this.controls[d];a[d].corner=u.calcCornerCoords(this.angle,this.cornerSize,a[d].x,a[d].y,!1),a[d].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,a[d].x,a[d].y,!0)}},drawSelectionBackground:function(a){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;a.save();var d=this.getCenterPoint(),u=this._calculateCurrentDimensions(),t=this.canvas.viewportTransform;return a.translate(d.x,d.y),a.scale(1/t[0],1/t[3]),a.rotate(p(this.angle)),a.fillStyle=this.selectionBackgroundColor,a.fillRect(-u.x/2,-u.y/2,u.x,u.y),a.restore(),this},drawBorders:function(a,d){d=d||{};var u=this._calculateCurrentDimensions(),t=this.borderScaleFactor,e=u.x+t,i=u.y+t,s=typeof d.hasControls!="undefined"?d.hasControls:this.hasControls,m=!1;return a.save(),a.strokeStyle=d.borderColor||this.borderColor,this._setLineDash(a,d.borderDashArray||this.borderDashArray),a.strokeRect(-e/2,-i/2,e,i),s&&(a.beginPath(),this.forEachControl(function(o,y,C){o.withConnection&&o.getVisibility(C,y)&&(m=!0,a.moveTo(o.x*e,o.y*i),a.lineTo(o.x*e+o.offsetX,o.y*i+o.offsetY))}),m&&a.stroke()),a.restore(),this},drawBordersInGroup:function(a,d,u){u=u||{};var t=l.util.sizeAfterTransform(this.width,this.height,d),e=this.strokeWidth,i=this.strokeUniform,s=this.borderScaleFactor,m=t.x+e*(i?this.canvas.getZoom():d.scaleX)+s,o=t.y+e*(i?this.canvas.getZoom():d.scaleY)+s;return a.save(),this._setLineDash(a,u.borderDashArray||this.borderDashArray),a.strokeStyle=u.borderColor||this.borderColor,a.strokeRect(-m/2,-o/2,m,o),a.restore(),this},drawControls:function(a,d){d=d||{},a.save();var u=this.canvas.getRetinaScaling(),t,e;return a.setTransform(u,0,0,u,0,0),a.strokeStyle=a.fillStyle=d.cornerColor||this.cornerColor,this.transparentCorners||(a.strokeStyle=d.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(a,d.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(t=this.group.calcTransformMatrix()),this.forEachControl(function(i,s,m){e=m.oCoords[s],i.getVisibility(m,s)&&(t&&(e=l.util.transformPoint(e,t)),i.render(a,e.x,e.y,d,m))}),a.restore(),this},isControlVisible:function(a){return this.controls[a]&&this.controls[a].getVisibility(this,a)},setControlVisible:function(a,d){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[a]=d,this},setControlsVisibility:function(a){a||(a={});for(var d in a)this.setControlVisible(d,a[d]);return this},onDeselect:function(){},onSelect:function(){}})}(),l.util.object.extend(l.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(p,a){a=a||{};var d=function(){},u=a.onComplete||d,t=a.onChange||d,e=this;return l.util.animate({startValue:p.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(i){p.set("left",i),e.requestRenderAll(),t()},onComplete:function(){p.setCoords(),u()}}),this},fxCenterObjectV:function(p,a){a=a||{};var d=function(){},u=a.onComplete||d,t=a.onChange||d,e=this;return l.util.animate({startValue:p.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(i){p.set("top",i),e.requestRenderAll(),t()},onComplete:function(){p.setCoords(),u()}}),this},fxRemove:function(p,a){a=a||{};var d=function(){},u=a.onComplete||d,t=a.onChange||d,e=this;return l.util.animate({startValue:p.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(i){p.set("opacity",i),e.requestRenderAll(),t()},onComplete:function(){e.remove(p),u()}}),this}}),l.util.object.extend(l.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var p=[],a,d;for(a in arguments[0])p.push(a);for(var u=0,t=p.length;u<t;u++)a=p[u],d=u!==t-1,this._animate(a,arguments[0][a],arguments[1],d)}else this._animate.apply(this,arguments);return this},_animate:function(p,a,d,u){var t=this,e;a=a.toString(),d?d=l.util.object.clone(d):d={},~p.indexOf(".")&&(e=p.split("."));var i=t.colorProperties.indexOf(p)>-1||e&&t.colorProperties.indexOf(e[1])>-1,s=e?this.get(e[0])[e[1]]:this.get(p);"from"in d||(d.from=s),i||(~a.indexOf("=")?a=s+parseFloat(a.replace("=","")):a=parseFloat(a));var m={startValue:d.from,endValue:a,byValue:d.by,easing:d.easing,duration:d.duration,abort:d.abort&&function(o,y,C){return d.abort.call(t,o,y,C)},onChange:function(o,y,C){e?t[e[0]][e[1]]=o:t.set(p,o),!u&&d.onChange&&d.onChange(o,y,C)},onComplete:function(o,y,C){u||(t.setCoords(),d.onComplete&&d.onComplete(o,y,C))}};return i?l.util.animateColor(m.startValue,m.endValue,m.duration,m):l.util.animate(m)}}),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.extend,u=a.util.object.clone,t={x1:1,x2:1,y1:1,y2:1};if(a.Line){a.warn("fabric.Line is already defined");return}a.Line=a.util.createClass(a.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(i,s){i||(i=[0,0,0,0]),this.callSuper("initialize",s),this.set("x1",i[0]),this.set("y1",i[1]),this.set("x2",i[2]),this.set("y2",i[3]),this._setWidthHeight(s)},_setWidthHeight:function(i){i||(i={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in i?i.left:this._getLeftToOriginX(),this.top="top"in i?i.top:this._getTopToOriginY()},_set:function(i,s){return this.callSuper("_set",i,s),typeof t[i]!="undefined"&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(i){i.beginPath();var s=this.calcLinePoints();i.moveTo(s.x1,s.y1),i.lineTo(s.x2,s.y2),i.lineWidth=this.strokeWidth;var m=i.strokeStyle;i.strokeStyle=this.stroke||i.fillStyle,this.stroke&&this._renderStroke(i),i.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(i){return d(this.callSuper("toObject",i),this.calcLinePoints())},_getNonTransformedDimensions:function(){var i=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(i.y-=this.strokeWidth),this.height===0&&(i.x-=this.strokeWidth)),i},calcLinePoints:function(){var i=this.x1<=this.x2?-1:1,s=this.y1<=this.y2?-1:1,m=i*this.width*.5,o=s*this.height*.5,y=i*this.width*-.5,C=s*this.height*-.5;return{x1:m,x2:y,y1:o,y2:C}},_toSVG:function(){var i=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,`" />
`]}}),a.Line.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),a.Line.fromElement=function(i,s,m){m=m||{};var o=a.parseAttributes(i,a.Line.ATTRIBUTE_NAMES),y=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];s(new a.Line(y,d(o,m)))},a.Line.fromObject=function(i,s){function m(y){delete y.points,s&&s(y)}var o=u(i,!0);o.points=[i.x1,i.y1,i.x2,i.y2],a.Object._fromObject("Line",o,m,"points")};function e(i,s){var m=i.origin,o=i.axis1,y=i.axis2,C=i.dimension,M=s.nearest,T=s.center,D=s.farthest;return function(){switch(this.get(m)){case M:return Math.min(this.get(o),this.get(y));case T:return Math.min(this.get(o),this.get(y))+.5*this.get(C);case D:return Math.max(this.get(o),this.get(y))}}}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=Math.PI;if(a.Circle){a.warn("fabric.Circle is already defined.");return}a.Circle=a.util.createClass(a.Object,{type:"circle",radius:0,startAngle:0,endAngle:d*2,cacheProperties:a.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),t==="radius"&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,e=0,i=0,s=(this.endAngle-this.startAngle)%(2*d);if(s===0)t=["<circle ","COMMON_PARTS",'cx="'+e+'" cy="'+i+'" ','r="',this.radius,`" />
`];else{var m=a.util.cos(this.startAngle)*this.radius,o=a.util.sin(this.startAngle)*this.radius,y=a.util.cos(this.endAngle)*this.radius,C=a.util.sin(this.endAngle)*this.radius,M=s>d?"1":"0";t=['<path d="M '+m+" "+o," A "+this.radius+" "+this.radius," 0 ",+M+" 1"," "+y+" "+C,'" ',"COMMON_PARTS",` />
`]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",t*2).set("height",t*2)}}),a.Circle.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),a.Circle.fromElement=function(t,e){var i=a.parseAttributes(t,a.Circle.ATTRIBUTE_NAMES);if(!u(i))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,e(new a.Circle(i))};function u(t){return"radius"in t&&t.radius>=0}a.Circle.fromObject=function(t,e){a.Object._fromObject("Circle",t,e)}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={});if(a.Triangle){a.warn("fabric.Triangle is already defined");return}a.Triangle=a.util.createClass(a.Object,{type:"triangle",width:100,height:100,_render:function(d){var u=this.width/2,t=this.height/2;d.beginPath(),d.moveTo(-u,t),d.lineTo(0,-t),d.lineTo(u,t),d.closePath(),this._renderPaintInOrder(d)},_toSVG:function(){var d=this.width/2,u=this.height/2,t=[-d+" "+u,"0 "+-u,d+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',t,'" />']}}),a.Triangle.fromObject=function(d,u){return a.Object._fromObject("Triangle",d,u)}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=Math.PI*2;if(a.Ellipse){a.warn("fabric.Ellipse is already defined.");return}a.Ellipse=a.util.createClass(a.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,t){switch(this.callSuper("_set",u,t),u){case"rx":this.rx=t,this.set("width",t*2);break;case"ry":this.ry=t,this.set("height",t*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,d,!1),u.restore(),this._renderPaintInOrder(u)}}),a.Ellipse.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),a.Ellipse.fromElement=function(u,t){var e=a.parseAttributes(u,a.Ellipse.ATTRIBUTE_NAMES);e.left=(e.left||0)-e.rx,e.top=(e.top||0)-e.ry,t(new a.Ellipse(e))},a.Ellipse.fromObject=function(u,t){a.Object._fromObject("Ellipse",u,t)}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.extend;if(a.Rect){a.warn("fabric.Rect is already defined");return}a.Rect=a.util.createClass(a.Object,{stateProperties:a.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var t=this.rx?Math.min(this.rx,this.width/2):0,e=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,s=this.height,m=-this.width/2,o=-this.height/2,y=t!==0||e!==0,C=1-.5522847498;u.beginPath(),u.moveTo(m+t,o),u.lineTo(m+i-t,o),y&&u.bezierCurveTo(m+i-C*t,o,m+i,o+C*e,m+i,o+e),u.lineTo(m+i,o+s-e),y&&u.bezierCurveTo(m+i,o+s-C*e,m+i-C*t,o+s,m+i-t,o+s),u.lineTo(m+t,o+s),y&&u.bezierCurveTo(m+C*t,o+s,m,o+s-C*e,m,o+s-e),u.lineTo(m,o+e),y&&u.bezierCurveTo(m,o+C*e,m+C*t,o,m+t,o),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,t=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',t,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),a.Rect.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),a.Rect.fromElement=function(u,t,e){if(!u)return t(null);e=e||{};var i=a.parseAttributes(u,a.Rect.ATTRIBUTE_NAMES);i.left=i.left||0,i.top=i.top||0,i.height=i.height||0,i.width=i.width||0;var s=new a.Rect(d(e?a.util.object.clone(e):{},i));s.visible=s.visible&&s.width>0&&s.height>0,t(s)},a.Rect.fromObject=function(u,t){return a.Object._fromObject("Rect",u,t)}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.extend,u=a.util.array.min,t=a.util.array.max,e=a.util.toFixed;if(a.Polyline){a.warn("fabric.Polyline is already defined");return}a.Polyline=a.util.createClass(a.Object,{type:"polyline",points:null,cacheProperties:a.Object.prototype.cacheProperties.concat("points"),initialize:function(i,s){s=s||{},this.points=i||[],this.callSuper("initialize",s),this._setPositionDimensions(s)},_setPositionDimensions:function(i){var s=this._calcDimensions(i),m;this.width=s.width,this.height=s.height,i.fromSVG||(m=this.translateToGivenOrigin({x:s.left-this.strokeWidth/2,y:s.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof i.left=="undefined"&&(this.left=i.fromSVG?s.left:m.x),typeof i.top=="undefined"&&(this.top=i.fromSVG?s.top:m.y),this.pathOffset={x:s.left+this.width/2,y:s.top+this.height/2}},_calcDimensions:function(){var i=this.points,s=u(i,"x")||0,m=u(i,"y")||0,o=t(i,"x")||0,y=t(i,"y")||0,C=o-s,M=y-m;return{left:s,top:m,width:C,height:M}},toObject:function(i){return d(this.callSuper("toObject",i),{points:this.points.concat()})},_toSVG:function(){for(var i=[],s=this.pathOffset.x,m=this.pathOffset.y,o=a.Object.NUM_FRACTION_DIGITS,y=0,C=this.points.length;y<C;y++)i.push(e(this.points[y].x-s,o),",",e(this.points[y].y-m,o)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',i.join(""),`" />
`]},commonRender:function(i){var s,m=this.points.length,o=this.pathOffset.x,y=this.pathOffset.y;if(!m||isNaN(this.points[m-1].y))return!1;i.beginPath(),i.moveTo(this.points[0].x-o,this.points[0].y-y);for(var C=0;C<m;C++)s=this.points[C],i.lineTo(s.x-o,s.y-y);return!0},_render:function(i){this.commonRender(i)&&this._renderPaintInOrder(i)},complexity:function(){return this.get("points").length}}),a.Polyline.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polyline.fromElementGenerator=function(i){return function(s,m,o){if(!s)return m(null);o||(o={});var y=a.parsePointsAttribute(s.getAttribute("points")),C=a.parseAttributes(s,a[i].ATTRIBUTE_NAMES);C.fromSVG=!0,m(new a[i](y,d(C,o)))}},a.Polyline.fromElement=a.Polyline.fromElementGenerator("Polyline"),a.Polyline.fromObject=function(i,s){return a.Object._fromObject("Polyline",i,s,"points")}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={});if(a.Polygon){a.warn("fabric.Polygon is already defined");return}a.Polygon=a.util.createClass(a.Polyline,{type:"polygon",_render:function(d){this.commonRender(d)&&(d.closePath(),this._renderPaintInOrder(d))}}),a.Polygon.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polygon.fromElement=a.Polyline.fromElementGenerator("Polygon"),a.Polygon.fromObject=function(d,u){a.Object._fromObject("Polygon",d,u,"points")}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.array.min,u=a.util.array.max,t=a.util.object.extend,e=Object.prototype.toString,i=a.util.toFixed;if(a.Path){a.warn("fabric.Path is already defined");return}a.Path=a.util.createClass(a.Object,{type:"path",path:null,cacheProperties:a.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:a.Object.prototype.stateProperties.concat("path"),initialize:function(s,m){m=m||{},this.callSuper("initialize",m),s||(s=[]);var o=e.call(s)==="[object Array]";this.path=a.util.makePathSimpler(o?s:a.util.parsePath(s)),this.path&&a.Polyline.prototype._setPositionDimensions.call(this,m)},_renderPathCommands:function(s){var m,o=0,y=0,C=0,M=0,T=0,D=0,L=-this.pathOffset.x,R=-this.pathOffset.y;s.beginPath();for(var F=0,W=this.path.length;F<W;++F)switch(m=this.path[F],m[0]){case"L":C=m[1],M=m[2],s.lineTo(C+L,M+R);break;case"M":C=m[1],M=m[2],o=C,y=M,s.moveTo(C+L,M+R);break;case"C":C=m[5],M=m[6],T=m[3],D=m[4],s.bezierCurveTo(m[1]+L,m[2]+R,T+L,D+R,C+L,M+R);break;case"Q":s.quadraticCurveTo(m[1]+L,m[2]+R,m[3]+L,m[4]+R),C=m[3],M=m[4],T=m[1],D=m[2];break;case"z":case"Z":C=o,M=y,s.closePath();break}},_render:function(s){this._renderPathCommands(s),this._renderPaintInOrder(s)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(s){return t(this.callSuper("toObject",s),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(s){var m=this.toObject(["sourcePath"].concat(s));return m.sourcePath&&delete m.path,m},_toSVG:function(){var s=a.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',s,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var s=a.Object.NUM_FRACTION_DIGITS;return" translate("+i(-this.pathOffset.x,s)+", "+i(-this.pathOffset.y,s)+")"},toClipPathSVG:function(s){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:m})},toSVG:function(s){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:s,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var s=[],m=[],o,y=0,C=0,M=0,T=0,D,L=0,R=this.path.length;L<R;++L){switch(o=this.path[L],o[0]){case"L":M=o[1],T=o[2],D=[];break;case"M":M=o[1],T=o[2],y=M,C=T,D=[];break;case"C":D=a.util.getBoundsOfCurve(M,T,o[1],o[2],o[3],o[4],o[5],o[6]),M=o[5],T=o[6];break;case"Q":D=a.util.getBoundsOfCurve(M,T,o[1],o[2],o[1],o[2],o[3],o[4]),M=o[3],T=o[4];break;case"z":case"Z":M=y,T=C;break}D.forEach(function(bt){s.push(bt.x),m.push(bt.y)}),s.push(M),m.push(T)}var F=d(s)||0,W=d(m)||0,ot=u(s)||0,it=u(m)||0,Mt=ot-F,$=it-W;return{left:F,top:W,width:Mt,height:$}}}),a.Path.fromObject=function(s,m){if(typeof s.sourcePath=="string"){var o=s.sourcePath;a.loadSVGFromURL(o,function(y){var C=y[0];C.setOptions(s),m&&m(C)})}else a.Object._fromObject("Path",s,m,"path")},a.Path.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(["d"]),a.Path.fromElement=function(s,m,o){var y=a.parseAttributes(s,a.Path.ATTRIBUTE_NAMES);y.fromSVG=!0,m(new a.Path(y.d,t(y,o)))}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.array.min,u=a.util.array.max;a.Group||(a.Group=a.util.createClass(a.Object,a.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var s=this._objects.length;s--;)this._objects[s].group=this;if(i)this._updateObjectsACoords();else{var m=e&&e.centerPoint;e.originX!==void 0&&(this.originX=e.originX),e.originY!==void 0&&(this.originY=e.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,e=this._objects.length;e--;)this._objects[e].setCoords(t)},_updateObjectsCoords:function(e){for(var e=e||this.getCenterPoint(),i=this._objects.length;i--;)this._updateObjectCoords(this._objects[i],e)},_updateObjectCoords:function(t,e){var i=t.left,s=t.top,m=!0;t.set({left:i-e.x,top:s-e.y}),t.group=this,t.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var e=!!this.group;return this._restoreObjectsState(),a.util.resetObjectTransform(this),t&&(e&&a.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,e?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),a.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if(t==="canvas")for(;i--;)this._objects[i]._set(t,e);a.Object.prototype._set.call(this,t,e)},toObject:function(t){var e=this.includeDefaultValues,i=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var o=m.includeDefaultValues;m.includeDefaultValues=e;var y=m.toObject(t);return m.includeDefaultValues=o,y}),s=a.Object.prototype.toObject.call(this,t);return s.objects=i,s},toDatalessObject:function(t){var e,i=this.sourcePath;if(i)e=i;else{var s=this.includeDefaultValues;e=this._objects.map(function(o){var y=o.includeDefaultValues;o.includeDefaultValues=s;var C=o.toDatalessObject(t);return o.includeDefaultValues=y,C})}var m=a.Object.prototype.toDatalessObject.call(this,t);return m.objects=e,m},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=a.Object.prototype.shouldCache.call(this);if(t){for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t},willDrawShadow:function(){if(a.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var s=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-s/2,-m/2,s,m)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(e){a.util.addTransformToObject(e,t),delete e.group,e.setCoords()}),this},realizeTransform:function(t,e){return a.util.addTransformToObject(t,e),t},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,e=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var s=new a.ActiveSelection([]);return s.set(i),s.type="activeSelection",e.remove(this),t.forEach(function(m){m.group=s,m.dirty=!0,e.add(m)}),s.canvas=e,s._objects=t,e._activeObject=s,s.setCoords(),s}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0;return this.forEachObject(function(e){e.setCoords(t)}),this},_calcBounds:function(t){for(var e=[],i=[],s,m,o,y=["tr","br","bl","tl"],C=0,M=this._objects.length,T,D=y.length;C<M;++C){for(s=this._objects[C],o=s.calcACoords(),T=0;T<D;T++)m=y[T],e.push(o[m].x),i.push(o[m].y);s.aCoords=o}this._getBounds(e,i,t)},_getBounds:function(t,e,i){var s=new a.Point(d(t),d(e)),m=new a.Point(u(t),u(e)),o=s.y||0,y=s.x||0,C=m.x-s.x||0,M=m.y-s.y||0;this.width=C,this.height=M,i||this.setPositionByOrigin({x:y,y:o},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS",` >
`],i=0,s=this._objects.length;i<s;i++)e.push("		",this._objects[i].toSVG(t));return e.push(`</g>
`),e},getSvgStyles:function(){var t=typeof this.opacity!="undefined"&&this.opacity!==1?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,s=this._objects.length;i<s;i++)e.push("	",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),a.Group.fromObject=function(t,e){var i=t.objects,s=a.util.object.clone(t,!0);if(delete s.objects,typeof i=="string"){a.loadSVGFromURL(i,function(m){var o=a.util.groupSVGElements(m,t,i);o.set(s),e&&e(o)});return}a.util.enlivenObjects(i,function(m){a.util.enlivenObjects([t.clipPath],function(o){var y=a.util.object.clone(t,!0);y.clipPath=o[0],delete y.objects,e&&e(new a.Group(m,y,!0))})})})}(x),function(p){"use strict";var a=p.fabric||(p.fabric={});a.ActiveSelection||(a.ActiveSelection=a.util.createClass(a.Group,{type:"activeSelection",initialize:function(d,u){u=u||{},this._objects=d||[];for(var t=this._objects.length;t--;)this._objects[t].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),a.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var d=this._objects.concat();this._objects=[];var u=a.Object.prototype.toObject.call(this),t=new a.Group([]);if(delete u.type,t.set(u),d.forEach(function(i){i.canvas.remove(i),i.group=t}),t._objects=d,!this.canvas)return t;var e=this.canvas;return e.add(t),e._activeObject=t,t.setCoords(),t},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(d,u,t){d.save(),d.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",d,u),t=t||{},typeof t.hasControls=="undefined"&&(t.hasControls=!1),t.forActiveSelection=!0;for(var e=0,i=this._objects.length;e<i;e++)this._objects[e]._renderControls(d,t);d.restore()}}),a.ActiveSelection.fromObject=function(d,u){a.util.enlivenObjects(d.objects,function(t){delete d.objects,u&&u(new a.ActiveSelection(t,d,!0))})})}(x),function(p){"use strict";var a=l.util.object.extend;if(p.fabric||(p.fabric={}),p.fabric.Image){l.warn("fabric.Image is already defined.");return}l.Image=l.util.createClass(l.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:l.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:l.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(d,u){u||(u={}),this.filters=[],this.cacheKey="texture"+l.Object.__uid++,this.callSuper("initialize",u),this._initElement(d,u)},getElement:function(){return this._element||{}},setElement:function(d,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=d,this._originalElement=d,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(d){var u=l.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(d)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(d){l.util.cleanUpJsdomNode(this[d]),this[d]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var d=this.getElement();return{width:d.naturalWidth||d.width,height:d.naturalHeight||d.height}},_stroke:function(d){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,t=this.height/2;d.beginPath(),d.moveTo(-u,-t),d.lineTo(u,-t),d.lineTo(u,t),d.lineTo(-u,t),d.lineTo(-u,-t),d.closePath()}},toObject:function(d){var u=[];this.filters.forEach(function(e){e&&u.push(e.toObject())});var t=a(this.callSuper("toObject",["cropX","cropY"].concat(d)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var d=[],u=[],t,e=this._element,i=-this.width/2,s=-this.height/2,m="",o="";if(!e)return[];if(this.hasCrop()){var y=l.Object.__uid++;d.push('<clipPath id="imageCrop_'+y+`">
`,'	<rect x="'+i+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+y+')" '}if(this.imageSmoothing||(o='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',s-this.cropY,'" width="',e.width||e.naturalWidth,'" height="',e.height||e.height,o,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var C=this.fill;this.fill=null,t=["	<rect ",'x="',i,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=C}return this.paintFirst!=="fill"?d=d.concat(t,u):d=d.concat(u,t),d},getSrc:function(d){var u=d?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(d,u,t){return l.util.loadImage(d,function(e,i){this.setElement(e,t),this._setWidthHeight(),u&&u(this,i)},this,t&&t.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var d=this.resizeFilter,u=this.minimumScaleTrigger,t=this.getTotalObjectScaling(),e=t.scaleX,i=t.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!d||e>u&&i>u){this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=e,this._lastScaleY=i;return}l.filterBackend||(l.filterBackend=l.initFilterBackend());var m=l.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,y=s.width,C=s.height;m.width=y,m.height=C,this._element=m,this._lastScaleX=d.scaleX=e,this._lastScaleY=d.scaleY=i,l.filterBackend.applyFilters([d],s,y,C,this._element,o),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(d){if(d=d||this.filters||[],d=d.filter(function(s){return s&&!s.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),d.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,t=u.naturalWidth||u.width,e=u.naturalHeight||u.height;if(this._element===this._originalElement){var i=l.util.createCanvasElement();i.width=t,i.height=e,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,t,e),this._lastScaleX=1,this._lastScaleY=1;return l.filterBackend||(l.filterBackend=l.initFilterBackend()),l.filterBackend.applyFilters(d,this._originalElement,t,e,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(d){l.util.setImageSmoothing(d,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(d),this._renderPaintInOrder(d)},drawCacheOnCanvas:function(d){l.util.setImageSmoothing(d,this.imageSmoothing),l.Object.prototype.drawCacheOnCanvas.call(this,d)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(d){var u=this._element;if(u){var t=this._filterScalingX,e=this._filterScalingY,i=this.width,s=this.height,m=Math.min,o=Math.max,y=o(this.cropX,0),C=o(this.cropY,0),M=u.naturalWidth||u.width,T=u.naturalHeight||u.height,D=y*t,L=C*e,R=m(i*t,M-D),F=m(s*e,T-L),W=-i/2,ot=-s/2,it=m(i,M/t-y),Mt=m(s,T/e-C);u&&d.drawImage(u,D,L,R,F,W,ot,it,Mt)}},_needsResize:function(){var d=this.getTotalObjectScaling();return d.scaleX!==this._lastScaleX||d.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(d,u){this.setElement(l.util.getById(d),u),l.util.addClass(this.getElement(),l.Image.CSS_CANVAS)},_initConfig:function(d){d||(d={}),this.setOptions(d),this._setWidthHeight(d)},_initFilters:function(d,u){d&&d.length?l.util.enlivenObjects(d,function(t){u&&u(t)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(d){d||(d={});var u=this.getElement();this.width=d.width||u.naturalWidth||u.width||0,this.height=d.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var d=l.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,t=this._element.height,e=1,i=1,s=0,m=0,o=0,y=0,C,M=this.width,T=this.height,D={width:M,height:T};return d&&(d.alignX!=="none"||d.alignY!=="none")?(d.meetOrSlice==="meet"&&(e=i=l.util.findScaleToFit(this._element,D),C=(M-u*e)/2,d.alignX==="Min"&&(s=-C),d.alignX==="Max"&&(s=C),C=(T-t*i)/2,d.alignY==="Min"&&(m=-C),d.alignY==="Max"&&(m=C)),d.meetOrSlice==="slice"&&(e=i=l.util.findScaleToCover(this._element,D),C=u-M/e,d.alignX==="Mid"&&(o=C/2),d.alignX==="Max"&&(o=C),C=t-T/i,d.alignY==="Mid"&&(y=C/2),d.alignY==="Max"&&(y=C),u=M/e,t=T/i)):(e=M/u,i=T/t),{width:u,height:t,scaleX:e,scaleY:i,offsetLeft:s,offsetTop:m,cropX:o,cropY:y}}}),l.Image.CSS_CANVAS="canvas-img",l.Image.prototype.getSvgSrc=l.Image.prototype.getSrc,l.Image.fromObject=function(d,u){var t=l.util.object.clone(d);l.util.loadImage(t.src,function(e,i){if(i){u&&u(null,!0);return}l.Image.prototype._initFilters.call(t,t.filters,function(s){t.filters=s||[],l.Image.prototype._initFilters.call(t,[t.resizeFilter],function(m){t.resizeFilter=m[0],l.util.enlivenObjects([t.clipPath],function(o){t.clipPath=o[0];var y=new l.Image(e,t);u(y,!1)})})})},null,t.crossOrigin)},l.Image.fromURL=function(d,u,t){l.util.loadImage(d,function(e,i){u&&u(new l.Image(e,t),i)},null,t&&t.crossOrigin)},l.Image.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),l.Image.fromElement=function(d,u,t){var e=l.parseAttributes(d,l.Image.ATTRIBUTE_NAMES);l.Image.fromURL(e["xlink:href"],u,a(t?l.util.object.clone(t):{},e))}}(x),l.util.object.extend(l.Object.prototype,{_getAngleValueForStraighten:function(){var p=this.angle%360;return p>0?Math.round((p-1)/90)*90:Math.round(p/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(p){p=p||{};var a=function(){},d=p.onComplete||a,u=p.onChange||a,t=this;return l.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){t.rotate(e),u()},onComplete:function(){t.setCoords(),d()}}),this}}),l.util.object.extend(l.StaticCanvas.prototype,{straightenObject:function(p){return p.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(p){return p.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function p(d,u){var t="precision "+u+` float;
void main(){}`,e=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(e,t),d.compileShader(e),!!d.getShaderParameter(e,d.COMPILE_STATUS)}l.isWebglSupported=function(d){if(l.isLikelyNode)return!1;d=d||l.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),t=u.getContext("webgl")||u.getContext("experimental-webgl"),e=!1;if(t){l.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),e=l.maxTextureSize>=d;for(var i=["highp","mediump","lowp"],s=0;s<3;s++)if(p(t,i[s])){l.webGlPrecision=i[s];break}}return this.isSupported=e,e},l.WebglFilterBackend=a;function a(d){d&&d.tileSize&&(this.tileSize=d.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}a.prototype={tileSize:2048,resources:{},setupGLContext:function(d,u){this.dispose(),this.createWebGLCanvas(d,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(d,u)},chooseFastestCopyGLTo2DMethod:function(d,u){var t=typeof window.performance!="undefined",e;try{new ImageData(1,1),e=!0}catch(D){e=!1}var i=typeof ArrayBuffer!="undefined",s=typeof Uint8ClampedArray!="undefined";if(t&&e&&i&&s){var m=l.util.createCanvasElement(),o=new ArrayBuffer(d*u*4);if(l.forceGLPutImageData){this.imageBuffer=o,this.copyGLTo2D=j;return}var y={imageBuffer:o,destinationWidth:d,destinationHeight:u,targetCanvas:m},C,M,T;m.width=d,m.height=u,C=window.performance.now(),k.call(y,this.gl,y),M=window.performance.now()-C,C=window.performance.now(),j.call(y,this.gl,y),T=window.performance.now()-C,M>T?(this.imageBuffer=o,this.copyGLTo2D=j):this.copyGLTo2D=k}},createWebGLCanvas:function(d,u){var t=l.util.createCanvasElement();t.width=d,t.height=u;var e={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},i=t.getContext("webgl",e);i||(i=t.getContext("experimental-webgl",e)),i&&(i.clearColor(0,0,0,0),this.canvas=t,this.gl=i)},applyFilters:function(d,u,t,e,i,s){var m=this.gl,o;s&&(o=this.getCachedTexture(s,u));var y={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:t,sourceHeight:e,destinationWidth:t,destinationHeight:e,context:m,sourceTexture:this.createTexture(m,t,e,!o&&u),targetTexture:this.createTexture(m,t,e),originalTexture:o||this.createTexture(m,t,e,!o&&u),passes:d.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},C=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,C),d.forEach(function(M){M&&M.applyTo(y)}),w(y),this.copyGLTo2D(m,y),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(y.sourceTexture),m.deleteTexture(y.targetTexture),m.deleteFramebuffer(C),i.getContext("2d").setTransform(1,0,0,1,0,0),y},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(d,u,t,e){var i=d.createTexture();return d.bindTexture(d.TEXTURE_2D,i),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),e?d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,e):d.texImage2D(d.TEXTURE_2D,0,d.RGBA,u,t,0,d.RGBA,d.UNSIGNED_BYTE,null),i},getCachedTexture:function(d,u){if(this.textureCache[d])return this.textureCache[d];var t=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[d]=t,t},evictCachesForKey:function(d){this.textureCache[d]&&(this.gl.deleteTexture(this.textureCache[d]),delete this.textureCache[d])},copyGLTo2D:k,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var d=this.gl,u={renderer:"",vendor:""};if(!d)return u;var t=d.getExtension("WEBGL_debug_renderer_info");if(t){var e=d.getParameter(t.UNMASKED_RENDERER_WEBGL),i=d.getParameter(t.UNMASKED_VENDOR_WEBGL);e&&(u.renderer=e.toLowerCase()),i&&(u.vendor=i.toLowerCase())}return this.gpuInfo=u,u}}}();function w(p){var a=p.targetCanvas,d=a.width,u=a.height,t=p.destinationWidth,e=p.destinationHeight;(d!==t||u!==e)&&(a.width=t,a.height=e)}function k(p,a){var d=p.canvas,u=a.targetCanvas,t=u.getContext("2d");t.translate(0,u.height),t.scale(1,-1);var e=d.height-u.height;t.drawImage(d,0,e,u.width,u.height,0,0,u.width,u.height)}function j(p,a){var d=a.targetCanvas,u=d.getContext("2d"),t=a.destinationWidth,e=a.destinationHeight,i=t*e*4,s=new Uint8Array(this.imageBuffer,0,i),m=new Uint8ClampedArray(this.imageBuffer,0,i);p.readPixels(0,0,t,e,p.RGBA,p.UNSIGNED_BYTE,s);var o=new ImageData(m,t,e);u.putImageData(o,0,0)}(function(){"use strict";var p=function(){};l.Canvas2dFilterBackend=a;function a(){}a.prototype={evictCachesForKey:p,dispose:p,clearWebGLCaches:p,resources:{},applyFilters:function(d,u,t,e,i){var s=i.getContext("2d");s.drawImage(u,0,0,t,e);var m=s.getImageData(0,0,t,e),o=s.getImageData(0,0,t,e),y={sourceWidth:t,sourceHeight:e,imageData:m,originalEl:u,originalImageData:o,canvasEl:i,ctx:s,filterBackend:this};return d.forEach(function(C){C.applyTo(y)}),(y.imageData.width!==t||y.imageData.height!==e)&&(i.width=y.imageData.width,i.height=y.imageData.height),s.putImageData(y.imageData,0,0),y}}})(),l.Image=l.Image||{},l.Image.filters=l.Image.filters||{},l.Image.filters.BaseFilter=l.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(p){p&&this.setOptions(p)},setOptions:function(p){for(var a in p)this[a]=p[a]},createProgram:function(p,a,d){a=a||this.fragmentSource,d=d||this.vertexSource,l.webGlPrecision!=="highp"&&(a=a.replace(/precision highp float/g,"precision "+l.webGlPrecision+" float"));var u=p.createShader(p.VERTEX_SHADER);if(p.shaderSource(u,d),p.compileShader(u),!p.getShaderParameter(u,p.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+p.getShaderInfoLog(u));var t=p.createShader(p.FRAGMENT_SHADER);if(p.shaderSource(t,a),p.compileShader(t),!p.getShaderParameter(t,p.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+p.getShaderInfoLog(t));var e=p.createProgram();if(p.attachShader(e,u),p.attachShader(e,t),p.linkProgram(e),!p.getProgramParameter(e,p.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+p.getProgramInfoLog(e));var i=this.getAttributeLocations(p,e),s=this.getUniformLocations(p,e)||{};return s.uStepW=p.getUniformLocation(e,"uStepW"),s.uStepH=p.getUniformLocation(e,"uStepH"),{program:e,attributeLocations:i,uniformLocations:s}},getAttributeLocations:function(p,a){return{aPosition:p.getAttribLocation(a,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(p,a,d){var u=a.aPosition,t=p.createBuffer();p.bindBuffer(p.ARRAY_BUFFER,t),p.enableVertexAttribArray(u),p.vertexAttribPointer(u,2,p.FLOAT,!1,0,0),p.bufferData(p.ARRAY_BUFFER,d,p.STATIC_DRAW)},_setupFrameBuffer:function(p){var a=p.context,d,u;p.passes>1?(d=p.destinationWidth,u=p.destinationHeight,(p.sourceWidth!==d||p.sourceHeight!==u)&&(a.deleteTexture(p.targetTexture),p.targetTexture=p.filterBackend.createTexture(a,d,u)),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,p.targetTexture,0)):(a.bindFramebuffer(a.FRAMEBUFFER,null),a.finish())},_swapTextures:function(p){p.passes--,p.pass++;var a=p.targetTexture;p.targetTexture=p.sourceTexture,p.sourceTexture=a},isNeutralState:function(){var p=this.mainParameter,a=l.Image.filters[this.type].prototype;if(p)if(Array.isArray(a[p])){for(var d=a[p].length;d--;)if(this[p][d]!==a[p][d])return!1;return!0}else return a[p]===this[p];else return!1},applyTo:function(p){p.webgl?(this._setupFrameBuffer(p),this.applyToWebGL(p),this._swapTextures(p)):this.applyTo2d(p)},retrieveShader:function(p){return p.programCache.hasOwnProperty(this.type)||(p.programCache[this.type]=this.createProgram(p.context)),p.programCache[this.type]},applyToWebGL:function(p){var a=p.context,d=this.retrieveShader(p);p.pass===0&&p.originalTexture?a.bindTexture(a.TEXTURE_2D,p.originalTexture):a.bindTexture(a.TEXTURE_2D,p.sourceTexture),a.useProgram(d.program),this.sendAttributeData(a,d.attributeLocations,p.aPosition),a.uniform1f(d.uniformLocations.uStepW,1/p.sourceWidth),a.uniform1f(d.uniformLocations.uStepH,1/p.sourceHeight),this.sendUniformData(a,d.uniformLocations),a.viewport(0,0,p.destinationWidth,p.destinationHeight),a.drawArrays(a.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(p,a,d){p.activeTexture(d),p.bindTexture(p.TEXTURE_2D,a),p.activeTexture(p.TEXTURE0)},unbindAdditionalTexture:function(p,a){p.activeTexture(a),p.bindTexture(p.TEXTURE_2D,null),p.activeTexture(p.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(p){this[this.mainParameter]=p},sendUniformData:function(){},createHelpLayer:function(p){if(!p.helpLayer){var a=document.createElement("canvas");a.width=p.sourceWidth,a.height=p.sourceHeight,p.helpLayer=a}},toObject:function(){var p={type:this.type},a=this.mainParameter;return a&&(p[a]=this[a]),p},toJSON:function(){return this.toObject()}}),l.Image.filters.BaseFilter.fromObject=function(p,a){var d=new l.Image.filters[p.type](p);return a&&a(d),d},function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.ColorMatrix=u(d.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e=t.imageData,i=e.data,s=i.length,m=this.matrix,o,y,C,M,T,D=this.colorsOnly;for(T=0;T<s;T+=4)o=i[T],y=i[T+1],C=i[T+2],D?(i[T]=o*m[0]+y*m[1]+C*m[2]+m[4]*255,i[T+1]=o*m[5]+y*m[6]+C*m[7]+m[9]*255,i[T+2]=o*m[10]+y*m[11]+C*m[12]+m[14]*255):(M=i[T+3],i[T]=o*m[0]+y*m[1]+C*m[2]+M*m[3]+m[4]*255,i[T+1]=o*m[5]+y*m[6]+C*m[7]+M*m[8]+m[9]*255,i[T+2]=o*m[10]+y*m[11]+C*m[12]+M*m[13]+m[14]*255,i[T+3]=o*m[15]+y*m[16]+C*m[17]+M*m[18]+m[19]*255)},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,s=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],m=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,s),t.uniform4fv(e.uConstants,m)}}),a.Image.filters.ColorMatrix.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Brightness=u(d.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(this.brightness!==0){var e=t.imageData,i=e.data,s,m=i.length,o=Math.round(this.brightness*255);for(s=0;s<m;s+=4)i[s]=i[s]+o,i[s+1]=i[s+1]+o,i[s+2]=i[s+2]+o}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),a.Image.filters.Brightness.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.extend,u=a.Image.filters,t=a.util.createClass;u.Convolute=t(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(e){var i=Math.sqrt(this.matrix.length),s=this.type+"_"+i+"_"+(this.opaque?1:0),m=this.fragmentSource[s];return e.programCache.hasOwnProperty(s)||(e.programCache[s]=this.createProgram(e.context,m)),e.programCache[s]},applyTo2d:function(e){var i=e.imageData,s=i.data,m=this.matrix,o=Math.round(Math.sqrt(m.length)),y=Math.floor(o/2),C=i.width,M=i.height,T=e.ctx.createImageData(C,M),D=T.data,L=this.opaque?1:0,R,F,W,ot,it,Mt,$,bt,U,jt,gt,Nt,V;for(gt=0;gt<M;gt++)for(jt=0;jt<C;jt++){for(it=(gt*C+jt)*4,R=0,F=0,W=0,ot=0,V=0;V<o;V++)for(Nt=0;Nt<o;Nt++)$=gt+V-y,Mt=jt+Nt-y,!($<0||$>=M||Mt<0||Mt>=C)&&(bt=($*C+Mt)*4,U=m[V*o+Nt],R+=s[bt]*U,F+=s[bt+1]*U,W+=s[bt+2]*U,L||(ot+=s[bt+3]*U));D[it]=R,D[it+1]=F,D[it+2]=W,L?D[it+3]=s[it+3]:D[it+3]=ot}e.imageData=T},getUniformLocations:function(e,i){return{uMatrix:e.getUniformLocation(i,"uMatrix"),uOpaque:e.getUniformLocation(i,"uOpaque"),uHalfSize:e.getUniformLocation(i,"uHalfSize"),uSize:e.getUniformLocation(i,"uSize")}},sendUniformData:function(e,i){e.uniform1fv(i.uMatrix,this.matrix)},toObject:function(){return d(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),a.Image.filters.Convolute.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Grayscale=u(d.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e=t.imageData,i=e.data,s,m=i.length,o,y=this.mode;for(s=0;s<m;s+=4)y==="average"?o=(i[s]+i[s+1]+i[s+2])/3:y==="lightness"?o=(Math.min(i[s],i[s+1],i[s+2])+Math.max(i[s],i[s+1],i[s+2]))/2:y==="luminosity"&&(o=.21*i[s]+.72*i[s+1]+.07*i[s+2]),i[s]=o,i[s+1]=o,i[s+2]=o},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var i=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,i)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){var i=1;t.uniform1i(e.uMode,i)},isNeutralState:function(){return!1}}),a.Image.filters.Grayscale.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Invert=u(d.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(t){var e=t.imageData,i=e.data,s,m=i.length;for(s=0;s<m;s+=4)i[s]=255-i[s],i[s+1]=255-i[s+1],i[s+2]=255-i[s+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),a.Image.filters.Invert.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.extend,u=a.Image.filters,t=a.util.createClass;u.Noise=t(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(e){if(this.noise!==0){var i=e.imageData,s=i.data,m,o=s.length,y=this.noise,C;for(m=0,o=s.length;m<o;m+=4)C=(.5-Math.random())*y,s[m]+=C,s[m+1]+=C,s[m+2]+=C}},getUniformLocations:function(e,i){return{uNoise:e.getUniformLocation(i,"uNoise"),uSeed:e.getUniformLocation(i,"uSeed")}},sendUniformData:function(e,i){e.uniform1f(i.uNoise,this.noise/255),e.uniform1f(i.uSeed,Math.random())},toObject:function(){return d(this.callSuper("toObject"),{noise:this.noise})}}),a.Image.filters.Noise.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Pixelate=u(d.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(t){var e=t.imageData,i=e.data,s=e.height,m=e.width,o,y,C,M,T,D,L,R,F,W,ot;for(y=0;y<s;y+=this.blocksize)for(C=0;C<m;C+=this.blocksize)for(o=y*4*m+C*4,M=i[o],T=i[o+1],D=i[o+2],L=i[o+3],W=Math.min(y+this.blocksize,s),ot=Math.min(C+this.blocksize,m),R=y;R<W;R++)for(F=C;F<ot;F++)o=R*4*m+F*4,i[o]=M,i[o+1]=T,i[o+2]=D,i[o+3]=L},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),a.Image.filters.Pixelate.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.extend,u=a.Image.filters,t=a.util.createClass;u.RemoveColor=t(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(e){var i=e.imageData,s=i.data,m,o=this.distance*255,y,C,M,T=new a.Color(this.color).getSource(),D=[T[0]-o,T[1]-o,T[2]-o],L=[T[0]+o,T[1]+o,T[2]+o];for(m=0;m<s.length;m+=4)y=s[m],C=s[m+1],M=s[m+2],y>D[0]&&C>D[1]&&M>D[2]&&y<L[0]&&C<L[1]&&M<L[2]&&(s[m+3]=0)},getUniformLocations:function(e,i){return{uLow:e.getUniformLocation(i,"uLow"),uHigh:e.getUniformLocation(i,"uHigh")}},sendUniformData:function(e,i){var s=new a.Color(this.color).getSource(),m=parseFloat(this.distance),o=[0+s[0]/255-m,0+s[1]/255-m,0+s[2]/255-m,1],y=[s[0]/255+m,s[1]/255+m,s[2]/255+m,1];e.uniform4fv(i.uLow,o),e.uniform4fv(i.uHigh,y)},toObject:function(){return d(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),a.Image.filters.RemoveColor.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass,t={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var e in t)d[e]=u(d.ColorMatrix,{type:e,matrix:t[e],mainParameter:!1,colorsOnly:!0}),a.Image.filters[e].fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric,d=a.Image.filters,u=a.util.createClass;d.BlendColor=u(d.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(t){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[t]+`}
}`},retrieveShader:function(t){var e=this.type+"_"+this.mode,i;return t.programCache.hasOwnProperty(e)||(i=this.buildSource(this.mode),t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyTo2d:function(t){var e=t.imageData,i=e.data,s=i.length,m,o,y,C,M,T,D,L=1-this.alpha;D=new a.Color(this.color).getSource(),m=D[0]*this.alpha,o=D[1]*this.alpha,y=D[2]*this.alpha;for(var R=0;R<s;R+=4)switch(C=i[R],M=i[R+1],T=i[R+2],this.mode){case"multiply":i[R]=C*m/255,i[R+1]=M*o/255,i[R+2]=T*y/255;break;case"screen":i[R]=255-(255-C)*(255-m)/255,i[R+1]=255-(255-M)*(255-o)/255,i[R+2]=255-(255-T)*(255-y)/255;break;case"add":i[R]=C+m,i[R+1]=M+o,i[R+2]=T+y;break;case"diff":case"difference":i[R]=Math.abs(C-m),i[R+1]=Math.abs(M-o),i[R+2]=Math.abs(T-y);break;case"subtract":i[R]=C-m,i[R+1]=M-o,i[R+2]=T-y;break;case"darken":i[R]=Math.min(C,m),i[R+1]=Math.min(M,o),i[R+2]=Math.min(T,y);break;case"lighten":i[R]=Math.max(C,m),i[R+1]=Math.max(M,o),i[R+2]=Math.max(T,y);break;case"overlay":i[R]=m<128?2*C*m/255:255-2*(255-C)*(255-m)/255,i[R+1]=o<128?2*M*o/255:255-2*(255-M)*(255-o)/255,i[R+2]=y<128?2*T*y/255:255-2*(255-T)*(255-y)/255;break;case"exclusion":i[R]=m+C-2*m*C/255,i[R+1]=o+M-2*o*M/255,i[R+2]=y+T-2*y*T/255;break;case"tint":i[R]=m+C*L,i[R+1]=o+M*L,i[R+2]=y+T*L}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,e){var i=new a.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendColor.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric,d=a.Image.filters,u=a.util.createClass;d.BlendImage=u(d.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,i=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]},applyTo2d:function(t){var e=t.imageData,i=t.filterBackend.resources,s=e.data,m=s.length,o=e.width,y=e.height,C,M,T,D,L,R,F,W,ot,it,Mt=this.image,$;i.blendImage||(i.blendImage=a.util.createCanvasElement()),ot=i.blendImage,it=ot.getContext("2d"),ot.width!==o||ot.height!==y?(ot.width=o,ot.height=y):it.clearRect(0,0,o,y),it.setTransform(Mt.scaleX,0,0,Mt.scaleY,Mt.left,Mt.top),it.drawImage(Mt._element,0,0,o,y),$=it.getImageData(0,0,o,y).data;for(var bt=0;bt<m;bt+=4)switch(L=s[bt],R=s[bt+1],F=s[bt+2],W=s[bt+3],C=$[bt],M=$[bt+1],T=$[bt+2],D=$[bt+3],this.mode){case"multiply":s[bt]=L*C/255,s[bt+1]=R*M/255,s[bt+2]=F*T/255,s[bt+3]=W*D/255;break;case"mask":s[bt+3]=D;break}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendImage.fromObject=function(t,e){a.Image.fromObject(t.image,function(i){var s=a.util.object.clone(t);s.image=i,e(new a.Image.filters.BlendImage(s))})}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=Math.pow,u=Math.floor,t=Math.sqrt,e=Math.abs,i=Math.round,s=Math.sin,m=Math.ceil,o=a.Image.filters,y=a.util.createClass;o.Resize=y(o.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(C,M){return{uDelta:C.getUniformLocation(M,"uDelta"),uTaps:C.getUniformLocation(M,"uTaps")}},sendUniformData:function(C,M){C.uniform2fv(M.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),C.uniform1fv(M.uTaps,this.taps)},retrieveShader:function(C){var M=this.getFilterWindow(),T=this.type+"_"+M;if(!C.programCache.hasOwnProperty(T)){var D=this.generateShader(M);C.programCache[T]=this.createProgram(C.context,D)}return C.programCache[T]},getFilterWindow:function(){var C=this.tempScale;return Math.ceil(this.lanczosLobes/C)},getTaps:function(){for(var C=this.lanczosCreate(this.lanczosLobes),M=this.tempScale,T=this.getFilterWindow(),D=new Array(T),L=1;L<=T;L++)D[L-1]=C(L*M);return D},generateShader:function(D){for(var M=new Array(D),T=this.fragmentSourceTOP,D,L=1;L<=D;L++)M[L-1]=L+".0 * uDelta";return T+="uniform float uTaps["+D+`];
`,T+=`void main() {
`,T+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,T+=`  float sum = 1.0;
`,M.forEach(function(R,F){T+="  color += texture2D(uTexture, vTexCoord + "+R+") * uTaps["+F+`];
`,T+="  color += texture2D(uTexture, vTexCoord - "+R+") * uTaps["+F+`];
`,T+="  sum += 2.0 * uTaps["+F+`];
`}),T+=`  gl_FragColor = color / sum;
`,T+="}",T},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(C){C.webgl?(C.passes++,this.width=C.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=C.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),C.destinationWidth=this.dW,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceWidth=C.destinationWidth,this.height=C.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),C.destinationHeight=this.dH,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceHeight=C.destinationHeight):this.applyTo2d(C)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(C){return function(M){if(M>=C||M<=-C)return 0;if(M<11920929e-14&&M>-11920929e-14)return 1;M*=Math.PI;var T=M/C;return s(M)/M*s(T)/T}},applyTo2d:function(C){var M=C.imageData,T=this.scaleX,D=this.scaleY;this.rcpScaleX=1/T,this.rcpScaleY=1/D;var L=M.width,R=M.height,F=i(L*T),W=i(R*D),ot;this.resizeType==="sliceHack"?ot=this.sliceByTwo(C,L,R,F,W):this.resizeType==="hermite"?ot=this.hermiteFastResize(C,L,R,F,W):this.resizeType==="bilinear"?ot=this.bilinearFiltering(C,L,R,F,W):this.resizeType==="lanczos"&&(ot=this.lanczosResize(C,L,R,F,W)),C.imageData=ot},sliceByTwo:function(C,M,T,D,L){var R=C.imageData,F=.5,W=!1,ot=!1,it=M*F,Mt=T*F,$=a.filterBackend.resources,bt,U,jt=0,gt=0,Nt=M,V=0;for($.sliceByTwo||($.sliceByTwo=document.createElement("canvas")),bt=$.sliceByTwo,(bt.width<M*1.5||bt.height<T)&&(bt.width=M*1.5,bt.height=T),U=bt.getContext("2d"),U.clearRect(0,0,M*1.5,T),U.putImageData(R,0,0),D=u(D),L=u(L);!W||!ot;)M=it,T=Mt,D<u(it*F)?it=u(it*F):(it=D,W=!0),L<u(Mt*F)?Mt=u(Mt*F):(Mt=L,ot=!0),U.drawImage(bt,jt,gt,M,T,Nt,V,it,Mt),jt=Nt,gt=V,V+=Mt;return U.getImageData(jt,gt,D,L)},lanczosResize:function(C,M,T,D,L){function R(Q){var G,rt,H,Y,X,Z,yt,ht,It,Tt,xt;for(V.x=(Q+.5)*Mt,q.x=u(V.x),G=0;G<L;G++){for(V.y=(G+.5)*$,q.y=u(V.y),X=0,Z=0,yt=0,ht=0,It=0,rt=q.x-jt;rt<=q.x+jt;rt++)if(!(rt<0||rt>=M)){Tt=u(1e3*e(rt-V.x)),Nt[Tt]||(Nt[Tt]={});for(var st=q.y-gt;st<=q.y+gt;st++)st<0||st>=T||(xt=u(1e3*e(st-V.y)),Nt[Tt][xt]||(Nt[Tt][xt]=it(t(d(Tt*bt,2)+d(xt*U,2))/1e3)),H=Nt[Tt][xt],H>0&&(Y=(st*M+rt)*4,X+=H,Z+=H*F[Y],yt+=H*F[Y+1],ht+=H*F[Y+2],It+=H*F[Y+3]))}Y=(G*D+Q)*4,ot[Y]=Z/X,ot[Y+1]=yt/X,ot[Y+2]=ht/X,ot[Y+3]=It/X}return++Q<D?R(Q):W}var F=C.imageData.data,W=C.ctx.createImageData(D,L),ot=W.data,it=this.lanczosCreate(this.lanczosLobes),Mt=this.rcpScaleX,$=this.rcpScaleY,bt=2/this.rcpScaleX,U=2/this.rcpScaleY,jt=m(Mt*this.lanczosLobes/2),gt=m($*this.lanczosLobes/2),Nt={},V={},q={};return R(0)},bilinearFiltering:function(C,M,T,D,L){var R,F,W,ot,it,Mt,$,bt,U,jt,gt,Nt,V=0,q,Q=this.rcpScaleX,G=this.rcpScaleY,rt=4*(M-1),H=C.imageData,Y=H.data,X=C.ctx.createImageData(D,L),Z=X.data;for($=0;$<L;$++)for(bt=0;bt<D;bt++)for(it=u(Q*bt),Mt=u(G*$),U=Q*bt-it,jt=G*$-Mt,q=4*(Mt*M+it),gt=0;gt<4;gt++)R=Y[q+gt],F=Y[q+4+gt],W=Y[q+rt+gt],ot=Y[q+rt+4+gt],Nt=R*(1-U)*(1-jt)+F*U*(1-jt)+W*jt*(1-U)+ot*U*jt,Z[V++]=Nt;return X},hermiteFastResize:function(C,M,T,D,L){for(var R=this.rcpScaleX,F=this.rcpScaleY,W=m(R/2),ot=m(F/2),it=C.imageData,Mt=it.data,$=C.ctx.createImageData(D,L),bt=$.data,U=0;U<L;U++)for(var jt=0;jt<D;jt++){for(var gt=(jt+U*D)*4,Nt=0,V=0,q=0,Q=0,G=0,rt=0,H=0,Y=(U+.5)*F,X=u(U*F);X<(U+1)*F;X++)for(var Z=e(Y-(X+.5))/ot,yt=(jt+.5)*R,ht=Z*Z,It=u(jt*R);It<(jt+1)*R;It++){var Tt=e(yt-(It+.5))/W,xt=t(ht+Tt*Tt);xt>1&&xt<-1||(Nt=2*xt*xt*xt-3*xt*xt+1,Nt>0&&(Tt=4*(It+X*M),H+=Nt*Mt[Tt+3],q+=Nt,Mt[Tt+3]<255&&(Nt=Nt*Mt[Tt+3]/250),Q+=Nt*Mt[Tt],G+=Nt*Mt[Tt+1],rt+=Nt*Mt[Tt+2],V+=Nt))}bt[gt]=Q/V,bt[gt+1]=G/V,bt[gt+2]=rt/V,bt[gt+3]=H/q}return $},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),a.Image.filters.Resize.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Contrast=u(d.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(this.contrast!==0){var e=t.imageData,i,m,s=e.data,m=s.length,o=Math.floor(this.contrast*255),y=259*(o+255)/(255*(259-o));for(i=0;i<m;i+=4)s[i]=y*(s[i]-128)+128,s[i+1]=y*(s[i+1]-128)+128,s[i+2]=y*(s[i+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),a.Image.filters.Contrast.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Saturation=u(d.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(this.saturation!==0){var e=t.imageData,i=e.data,s=i.length,m=-this.saturation,o,y;for(o=0;o<s;o+=4)y=Math.max(i[o],i[o+1],i[o+2]),i[o]+=y!==i[o]?(y-i[o])*m:0,i[o+1]+=y!==i[o+1]?(y-i[o+1])*m:0,i[o+2]+=y!==i[o+2]?(y-i[o+2])*m:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),a.Image.filters.Saturation.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Vibrance=u(d.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(this.vibrance!==0){var e=t.imageData,i=e.data,s=i.length,m=-this.vibrance,o,y,C,M;for(o=0;o<s;o+=4)y=Math.max(i[o],i[o+1],i[o+2]),C=(i[o]+i[o+1]+i[o+2])/3,M=Math.abs(y-C)*2/255*m,i[o]+=y!==i[o]?(y-i[o])*M:0,i[o+1]+=y!==i[o+1]?(y-i[o+1])*M:0,i[o+2]+=y!==i[o+2]?(y-i[o+2])*M:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),a.Image.filters.Vibrance.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Blur=u(d.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e=t.filterBackend.resources,i,s,m=t.imageData.width,o=t.imageData.height;e.blurLayer1||(e.blurLayer1=a.util.createCanvasElement(),e.blurLayer2=a.util.createCanvasElement()),i=e.blurLayer1,s=e.blurLayer2,(i.width!==m||i.height!==o)&&(s.width=i.width=m,s.height=i.height=o);var y=i.getContext("2d"),C=s.getContext("2d"),M=15,T,D,L,R,F=this.blur*.06*.5;for(y.putImageData(t.imageData,0,0),C.clearRect(0,0,m,o),R=-M;R<=M;R++)T=(Math.random()-.5)/4,D=R/M,L=F*D*m+T,C.globalAlpha=1-Math.abs(D),C.drawImage(i,L,T),y.drawImage(s,0,0),C.globalAlpha=1,C.clearRect(0,0,s.width,s.height);for(R=-M;R<=M;R++)T=(Math.random()-.5)/4,D=R/M,L=F*D*o+T,C.globalAlpha=1-Math.abs(D),C.drawImage(i,T,L),y.drawImage(s,0,0),C.globalAlpha=1,C.clearRect(0,0,s.width,s.height);t.ctx.drawImage(i,0,0);var W=t.ctx.getImageData(0,0,i.width,i.height);return y.globalAlpha=1,y.clearRect(0,0,i.width,i.height),W},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t=1,e=[0,0],i;return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),i=t*this.blur*.12,this.horizontal?e[0]=i:e[1]=i,e}}),d.Blur.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Gamma=u(d.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],d.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e=t.imageData,i=e.data,s=this.gamma,m=i.length,o=1/s[0],y=1/s[1],C=1/s[2],M;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),M=0,m=256;M<m;M++)this.rVals[M]=Math.pow(M/255,o)*255,this.gVals[M]=Math.pow(M/255,y)*255,this.bVals[M]=Math.pow(M/255,C)*255;for(M=0,m=i.length;M<m;M+=4)i[M]=this.rVals[i[M]],i[M+1]=this.gVals[i[M+1]],i[M+2]=this.bVals[i[M+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),a.Image.filters.Gamma.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.Composed=u(d.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return a.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),a.Image.filters.Composed.fromObject=function(t,e){var i=t.subFilters||[],s=i.map(function(o){return new a.Image.filters[o.type](o)}),m=new a.Image.filters.Composed({subFilters:s});return e&&e(m),m}}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.Image.filters,u=a.util.createClass;d.HueRotation=u(d.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,e=a.util.cos(t),i=a.util.sin(t),s=1/3,m=Math.sqrt(s)*i,o=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+o/3,this.matrix[1]=s*o-m,this.matrix[2]=s*o+m,this.matrix[5]=s*o+m,this.matrix[6]=e+s*o,this.matrix[7]=s*o-m,this.matrix[10]=s*o-m,this.matrix[11]=s*o+m,this.matrix[12]=e+s*o},isNeutralState:function(t){return this.calculateMatrix(),d.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),d.BaseFilter.prototype.applyTo.call(this,t)}}),a.Image.filters.HueRotation.fromObject=a.Image.filters.BaseFilter.fromObject}(x),function(p){"use strict";var a=p.fabric||(p.fabric={}),d=a.util.object.clone;if(a.Text){a.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide".split(" ");a.Text=a.util.createClass(a.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:a.Object.prototype.stateProperties.concat(u),cacheProperties:a.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e?e.styles||{}:{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=a.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return a._measuringContext||(a._measuringContext=this.canvas&&this.canvas.contextCache||a.util.createCanvasElement().getContext("2d")),a._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,i,s,m,o,y,C=0,M=this._textLines.length;C<M;C++)if(!(this.textAlign!=="justify"&&(C===M-1||this.isEndOfWrapping(C)))&&(s=0,m=this._textLines[C],e=this.getLineWidth(C),e<this.width&&(y=this.textLines[C].match(this._reSpacesAndTabs)))){i=y.length,t=(this.width-e)/i;for(var T=0,D=m.length;T<=D;T++)o=this.__charBounds[C][T],this._reSpaceAndTab.test(m[T])?(o.width+=t,o.kernedWidth+=t,o.left+=s,s+=t):o.left+=s}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){this.paintFirst==="stroke"?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var s=this.getLineWidth(e);s>t&&(t=s)}return t},_renderTextLine:function(t,e,i,s,m,o){this._renderChars(t,e,i,s,m,o)},_renderTextLinesBackground:function(t){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var e,i,s=t.fillStyle,m,o,y=this._getLeftOffset(),C=this._getTopOffset(),M=0,T=0,D,L,R=this.path,F,W=0,ot=this._textLines.length;W<ot;W++){if(e=this.getHeightOfLine(W),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",W)){C+=e;continue}m=this._textLines[W],i=this._getLineLeftOffset(W),T=0,M=0,o=this.getValueOfPropertyAt(W,0,"textBackgroundColor");for(var it=0,Mt=m.length;it<Mt;it++)D=this.__charBounds[W][it],L=this.getValueOfPropertyAt(W,it,"textBackgroundColor"),R?(t.save(),t.translate(D.renderLeft,D.renderTop),t.rotate(D.angle),t.fillStyle=L,L&&t.fillRect(-D.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),D.width,e/this.lineHeight),t.restore()):L!==o?(F=y+i+M,this.direction==="rtl"&&(F=this.width-F-T),t.fillStyle=o,o&&t.fillRect(F,C,T,e/this.lineHeight),M=D.left,T=D.width,o=L):T+=D.kernedWidth;L&&!R&&(F=y+i+M,this.direction==="rtl"&&(F=this.width-F-T),t.fillStyle=L,t.fillRect(F,C,T,e/this.lineHeight)),C+=e}t.fillStyle=s,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase();a.charWidthsCache[e]||(a.charWidthsCache[e]={});var i=a.charWidthsCache[e],s=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[s]||(i[s]={}),i[s]},_measureChar:function(t,e,i,s){var m=this.getFontCache(e),o=this._getFontDeclaration(e),y=this._getFontDeclaration(s),C=i+t,M=o===y,T,D,L,R=e.fontSize/this.CACHE_FONT_SIZE,F;if(i&&m[i]!==void 0&&(L=m[i]),m[t]!==void 0&&(F=T=m[t]),M&&m[C]!==void 0&&(D=m[C],F=D-L),T===void 0||L===void 0||D===void 0){var W=this.getMeasuringContext();this._setTextStyles(W,e,!0)}return T===void 0&&(F=T=W.measureText(t).width,m[t]=T),L===void 0&&M&&i&&(L=W.measureText(i).width,m[i]=L),M&&D===void 0&&(D=W.measureText(C).width,m[C]=D,F=D-L),{width:T*R,kernedWidth:F*R}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var e=0,i,s,m=this._textLines[t],o,y,C=0,M=new Array(m.length),T=0,D,L,R=this.path,F=this.pathSide==="right";for(this.__charBounds[t]=M,i=0;i<m.length;i++)s=m[i],y=this._getGraphemeBox(s,t,i,o),M[i]=y,e+=y.kernedWidth,o=s;if(M[i]={left:y?y.left+y.width:0,width:0,kernedWidth:0,height:this.fontSize},R){switch(L=R.segmentsInfo[R.segmentsInfo.length-1].length,D=a.util.getPointOnPath(R.path,0,R.segmentsInfo),D.x+=R.pathOffset.x,D.y+=R.pathOffset.y,this.textAlign){case"left":T=F?L-e:0;break;case"center":T=(L-e)/2;break;case"right":T=F?0:L-e;break}for(T+=this.pathStartOffset*(F?-1:1),i=F?m.length-1:0;F?i>=0:i<m.length;F?i--:i++)y=M[i],T>L?T%=L:T<0&&(T+=L),this._setGraphemeOnPath(T,y,D),T+=y.kernedWidth}return{width:e,numOfSpaces:C}},_setGraphemeOnPath:function(t,e,i){var s=t+e.kernedWidth/2,m=this.path,o=a.util.getPointOnPath(m.path,s,m.segmentsInfo);e.renderLeft=o.x-i.x,e.renderTop=o.y-i.y,e.angle=o.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(t,e,i,s,m){var o=this.getCompleteStyleDeclaration(e,i),y=s?this.getCompleteStyleDeclaration(e,i-1):{},C=this._measureChar(t,o,s,y),M=C.kernedWidth,T=C.width,D;this.charSpacing!==0&&(D=this._getWidthOfCharSpacing(),T+=D,M+=D);var L={width:T,left:0,height:o.fontSize,kernedWidth:M,deltaY:o.deltaY};if(i>0&&!m){var R=this.__charBounds[e][i-1];L.left=R.left+R.width+C.kernedWidth-C.width}return L},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),s=1,m=e.length;s<m;s++)i=Math.max(this.getHeightOfChar(t,s),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,s=this._textLines.length;i<s;i++)t=this.getHeightOfLine(i),e+=i===s-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,s=this._getLeftOffset(),m=this._getTopOffset(),o=0,y=this._textLines.length;o<y;o++){var C=this.getHeightOfLine(o),M=C/this.lineHeight,T=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],s+T,m+i+M,o),i+=C}t.restore()},_renderTextFill:function(t){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,s,m,o){var y=this.getHeightOfLine(o),C=this.textAlign.indexOf("justify")!==-1,M,T,D="",L,R=0,F,W=this.path,ot=!C&&this.charSpacing===0&&this.isEmptyStyles(o)&&!W,it=this.direction==="ltr",Mt=this.direction==="ltr"?1:-1,$;if(e.save(),m-=y*this._fontSizeFraction/this.lineHeight,ot){e.canvas.setAttribute("dir",it?"ltr":"rtl"),e.direction=it?"ltr":"rtl",e.textAlign=it?"left":"right",this._renderChar(t,e,o,0,i.join(""),s,m,y),e.restore();return}for(var bt=0,U=i.length-1;bt<=U;bt++)F=bt===U||this.charSpacing||W,D+=i[bt],L=this.__charBounds[o][bt],R===0?(s+=Mt*(L.kernedWidth-L.width),R+=L.width):R+=L.kernedWidth,C&&!F&&this._reSpaceAndTab.test(i[bt])&&(F=!0),F||(M=M||this.getCompleteStyleDeclaration(o,bt),T=this.getCompleteStyleDeclaration(o,bt+1),F=this._hasStyleChanged(M,T)),F&&(W?(e.save(),e.translate(L.renderLeft,L.renderTop),e.rotate(L.angle),this._renderChar(t,e,o,bt,D,-R/2,0,y),e.restore()):($=s,e.canvas.setAttribute("dir",it?"ltr":"rtl"),e.direction=it?"ltr":"rtl",e.textAlign=it?"left":"right",this._renderChar(t,e,o,bt,D,$,m,y)),D="",M=T,s+=Mt*R,R=0);e.restore()},_applyPatternGradientTransformText:function(t){var e=a.util.createCanvasElement(),i,s=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return e.width=s,e.height=m,i=e.getContext("2d"),i.beginPath(),i.moveTo(0,0),i.lineTo(s,0),i.lineTo(s,m),i.lineTo(0,m),i.closePath(),i.translate(s/2,m/2),i.fillStyle=t.toLive(i),this._applyPatternGradientTransform(i,t),i.fill(),i.createPattern(e,"no-repeat")},handleFiller:function(t,e,i){var s,m;return i.toLive?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(s=-this.width/2,m=-this.height/2,t.translate(s,m),t[e]=this._applyPatternGradientTransformText(i),{offsetX:s,offsetY:m}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,s,m,o,y){var C=this._getStyleDeclaration(i,s),M=this.getCompleteStyleDeclaration(i,s),T=t==="fillText"&&M.fill,D=t==="strokeText"&&M.stroke&&M.strokeWidth,L,R;!D&&!T||(e.save(),T&&(L=this._setFillStyles(e,M)),D&&(R=this._setStrokeStyles(e,M)),e.font=this._getFontDeclaration(M),C&&C.textBackgroundColor&&this._removeShadow(e),C&&C.deltaY&&(y+=C.deltaY),T&&e.fillText(m,o-L.offsetX,y-L.offsetY),D&&e.strokeText(m,o-R.offsetX,y-R.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var s=this.get2DCursorLocation(t,!0),m=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),y={fontSize:m*i.size,deltaY:o+m*i.baseline};return this.setSelectionStyles(y,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),i=this.width-e,s=this.textAlign,m=this.direction,y,o=0,y=this.isEndOfWrapping(t);return s==="justify"||s==="justify-center"&&!y||s==="justify-right"&&!y||s==="justify-left"&&!y?0:(s==="center"&&(o=i/2),s==="right"&&(o=i),s==="justify-center"&&(o=i/2),s==="justify-right"&&(o=i),m==="rtl"&&(o-=i),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(this.__lineWidths[t])return this.__lineWidths[t];var e,i=this._textLines[t],s;return i===""?e=0:(s=this.measureLine(t),e=s.width),this.__lineWidths[t]=e,e},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var s=this._getStyleDeclaration(t,e);return s&&typeof s[i]!="undefined"?s[i]:this[i]},_renderTextDecoration:function(t,e){if(!(!this[e]&&!this.styleHas(e))){for(var i,s,m,o,y,C,M,T,D=this._getLeftOffset(),L=this._getTopOffset(),R,F,W,ot,it,Mt,$,bt,U=this.path,jt=this._getWidthOfCharSpacing(),gt=this.offsets[e],Nt=0,V=this._textLines.length;Nt<V;Nt++){if(i=this.getHeightOfLine(Nt),!this[e]&&!this.styleHas(e,Nt)){L+=i;continue}M=this._textLines[Nt],Mt=i/this.lineHeight,o=this._getLineLeftOffset(Nt),F=0,W=0,T=this.getValueOfPropertyAt(Nt,0,e),bt=this.getValueOfPropertyAt(Nt,0,"fill"),R=L+Mt*(1-this._fontSizeFraction),s=this.getHeightOfChar(Nt,0),y=this.getValueOfPropertyAt(Nt,0,"deltaY");for(var q=0,Q=M.length;q<Q;q++)if(ot=this.__charBounds[Nt][q],it=this.getValueOfPropertyAt(Nt,q,e),$=this.getValueOfPropertyAt(Nt,q,"fill"),m=this.getHeightOfChar(Nt,q),C=this.getValueOfPropertyAt(Nt,q,"deltaY"),U&&it&&$)t.save(),t.fillStyle=bt,t.translate(ot.renderLeft,ot.renderTop),t.rotate(ot.angle),t.fillRect(-ot.kernedWidth/2,gt*m+C,ot.kernedWidth,this.fontSize/15),t.restore();else if((it!==T||$!==bt||m!==s||C!==y)&&W>0){var G=D+o+F;this.direction==="rtl"&&(G=this.width-G-W),T&&bt&&(t.fillStyle=bt,t.fillRect(G,R+gt*s+y,W,this.fontSize/15)),F=ot.left,W=ot.width,T=it,bt=$,s=m,y=C}else W+=ot.kernedWidth;var G=D+o+F;this.direction==="rtl"&&(G=this.width-G-W),t.fillStyle=$,it&&$&&t.fillRect(G,R+gt*s+y,W-jt,this.fontSize/15),L+=i}this._removeShadow(t)}},_getFontDeclaration:function(t,e){var i=t||this,s=this.fontFamily,m=a.Text.genericFonts.indexOf(s.toLowerCase())>-1,o=s===void 0||s.indexOf("'")>-1||s.indexOf(",")>-1||s.indexOf('"')>-1||m?i.fontFamily:'"'+i.fontFamily+'"';return[a.isLikelyNode?i.fontWeight:i.fontStyle,a.isLikelyNode?i.fontStyle:i.fontWeight,e?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",o].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),s=[`
`],m=[],o=0;o<e.length;o++)i[o]=a.util.string.graphemeSplit(e[o]),m=m.concat(i[o],s);return m.pop(),{_unwrappedLines:i,lines:e,graphemeText:m,graphemeLines:i}},toObject:function(t){var e=u.concat(t),i=this.callSuper("toObject",e);return i.styles=d(this.styles,!0),i.path&&(i.path=this.path.toObject()),i},set:function(t,e){this.callSuper("set",t,e);var i=!1,s=!1;if(typeof t=="object")for(var m in t)m==="path"&&this.setPathInfo(),i=i||this._dimensionAffectingProps.indexOf(m)!==-1,s=s||m==="path";else i=this._dimensionAffectingProps.indexOf(t)!==-1,s=t==="path";return s&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),a.Text.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),a.Text.DEFAULT_SVG_FONT_SIZE=16,a.Text.fromElement=function(t,e,i){if(!t)return e(null);var s=a.parseAttributes(t,a.Text.ATTRIBUTE_NAMES),m=s.textAnchor||"left";if(i=a.util.object.extend(i?d(i):{},s),i.top=i.top||0,i.left=i.left||0,s.textDecoration){var o=s.textDecoration;o.indexOf("underline")!==-1&&(i.underline=!0),o.indexOf("overline")!==-1&&(i.overline=!0),o.indexOf("line-through")!==-1&&(i.linethrough=!0),delete i.textDecoration}"dx"in s&&(i.left+=s.dx),"dy"in s&&(i.top+=s.dy),"fontSize"in i||(i.fontSize=a.Text.DEFAULT_SVG_FONT_SIZE);var y="";"textContent"in t?y=t.textContent:"firstChild"in t&&t.firstChild!==null&&"data"in t.firstChild&&t.firstChild.data!==null&&(y=t.firstChild.data),y=y.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var C=i.strokeWidth;i.strokeWidth=0;var M=new a.Text(y,i),T=M.getScaledHeight()/M.height,D=(M.height+M.strokeWidth)*M.lineHeight-M.height,L=D*T,R=M.getScaledHeight()+L,F=0;m==="center"&&(F=M.getScaledWidth()/2),m==="right"&&(F=M.getScaledWidth()),M.set({left:M.left-F,top:M.top-(R-M.fontSize*(.07+M._fontSizeFraction))/M.lineHeight,strokeWidth:typeof C!="undefined"?C:1}),e(M)},a.Text.fromObject=function(t,e){var i=d(t),s=t.path;return delete i.path,a.Object._fromObject("Text",i,function(m){s?a.Object._fromObject("Path",s,function(o){m.set("path",o),e(m)},"path"):e(m)},"text")},a.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],a.util.createAccessors&&a.util.createAccessors(a.Text)}(x),function(){l.util.object.extend(l.Text.prototype,{isEmptyStyles:function(p){if(!this.styles||typeof p!="undefined"&&!this.styles[p])return!0;var a=typeof p=="undefined"?this.styles:{line:this.styles[p]};for(var d in a)for(var u in a[d])for(var t in a[d][u])return!1;return!0},styleHas:function(p,a){if(!this.styles||!p||p===""||typeof a!="undefined"&&!this.styles[a])return!1;var d=typeof a=="undefined"?this.styles:{0:this.styles[a]};for(var u in d)for(var t in d[u])if(typeof d[u][t][p]!="undefined")return!0;return!1},cleanStyle:function(p){if(!this.styles||!p||p==="")return!1;var a=this.styles,d=0,u,t,e=!0,i=0,s;for(var m in a){u=0;for(var o in a[m]){var s=a[m][o],y=s.hasOwnProperty(p);d++,y?(t?s[p]!==t&&(e=!1):t=s[p],s[p]===this[p]&&delete s[p]):e=!1,Object.keys(s).length!==0?u++:delete a[m][o]}u===0&&delete a[m]}for(var C=0;C<this._textLines.length;C++)i+=this._textLines[C].length;e&&d===i&&(this[p]=t,this.removeStyle(p))},removeStyle:function(p){if(!(!this.styles||!p||p==="")){var a=this.styles,d,u,t;for(u in a){d=a[u];for(t in d)delete d[t][p],Object.keys(d[t]).length===0&&delete d[t];Object.keys(d).length===0&&delete a[u]}}},_extendStyles:function(p,a){var d=this.get2DCursorLocation(p);this._getLineStyle(d.lineIndex)||this._setLineStyle(d.lineIndex),this._getStyleDeclaration(d.lineIndex,d.charIndex)||this._setStyleDeclaration(d.lineIndex,d.charIndex,{}),l.util.object.extend(this._getStyleDeclaration(d.lineIndex,d.charIndex),a)},get2DCursorLocation:function(p,a){typeof p=="undefined"&&(p=this.selectionStart);for(var d=a?this._unwrappedTextLines:this._textLines,u=d.length,t=0;t<u;t++){if(p<=d[t].length)return{lineIndex:t,charIndex:p};p-=d[t].length+this.missingNewlineOffset(t)}return{lineIndex:t-1,charIndex:d[t-1].length<p?d[t-1].length:p}},getSelectionStyles:function(p,a,d){typeof p=="undefined"&&(p=this.selectionStart||0),typeof a=="undefined"&&(a=this.selectionEnd||p);for(var u=[],t=p;t<a;t++)u.push(this.getStyleAtPosition(t,d));return u},getStyleAtPosition:function(p,a){var d=this.get2DCursorLocation(p),u=a?this.getCompleteStyleDeclaration(d.lineIndex,d.charIndex):this._getStyleDeclaration(d.lineIndex,d.charIndex);return u||{}},setSelectionStyles:function(p,a,d){typeof a=="undefined"&&(a=this.selectionStart||0),typeof d=="undefined"&&(d=this.selectionEnd||a);for(var u=a;u<d;u++)this._extendStyles(u,p);return this._forceClearCache=!0,this},_getStyleDeclaration:function(p,a){var d=this.styles&&this.styles[p];return d?d[a]:null},getCompleteStyleDeclaration:function(p,a){for(var d=this._getStyleDeclaration(p,a)||{},u={},t,e=0;e<this._styleProperties.length;e++)t=this._styleProperties[e],u[t]=typeof d[t]=="undefined"?this[t]:d[t];return u},_setStyleDeclaration:function(p,a,d){this.styles[p][a]=d},_deleteStyleDeclaration:function(p,a){delete this.styles[p][a]},_getLineStyle:function(p){return!!this.styles[p]},_setLineStyle:function(p){this.styles[p]={}},_deleteLineStyle:function(p){delete this.styles[p]}})}(),function(){function p(a){a.textDecoration&&(a.textDecoration.indexOf("underline")>-1&&(a.underline=!0),a.textDecoration.indexOf("line-through")>-1&&(a.linethrough=!0),a.textDecoration.indexOf("overline")>-1&&(a.overline=!0),delete a.textDecoration)}l.IText=l.util.createClass(l.Text,l.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(a,d){this.callSuper("initialize",a,d),this.initBehavior()},setSelectionStart:function(a){a=Math.max(a,0),this._updateAndFire("selectionStart",a)},setSelectionEnd:function(a){a=Math.min(a,this.text.length),this._updateAndFire("selectionEnd",a)},_updateAndFire:function(a,d){this[a]!==d&&(this._fireSelectionChanged(),this[a]=d),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(a){this.clearContextTop(),this.callSuper("render",a),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(a){this.callSuper("_render",a)},clearContextTop:function(a){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var d=this.canvas.contextTop,u=this.canvas.viewportTransform;d.save(),d.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(d),this._clearTextArea(d),a||d.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this._getCursorBoundaries(),d=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(a,d):this.renderSelection(a,d),d.restore()}},_clearTextArea:function(a){var d=this.width+4,u=this.height+4;a.clearRect(-d/2,-u/2,d,u)},_getCursorBoundaries:function(a){typeof a=="undefined"&&(a=this.selectionStart);var d=this._getLeftOffset(),u=this._getTopOffset(),t=this._getCursorBoundariesOffsets(a);return{left:d,top:u,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(a){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var d,u,t,e=0,i=0,s,m=this.get2DCursorLocation(a);t=m.charIndex,u=m.lineIndex;for(var o=0;o<u;o++)e+=this.getHeightOfLine(o);d=this._getLineLeftOffset(u);var y=this.__charBounds[u][t];return y&&(i=y.left),this.charSpacing!==0&&t===this._textLines[u].length&&(i-=this._getWidthOfCharSpacing()),s={top:e,left:d+(i>0?i:0)},this.direction==="rtl"&&(s.left*=-1),this.cursorOffsetCache=s,this.cursorOffsetCache},renderCursor:function(a,d){var u=this.get2DCursorLocation(),t=u.lineIndex,e=u.charIndex>0?u.charIndex-1:0,i=this.getValueOfPropertyAt(t,e,"fontSize"),s=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/s,o=a.topOffset,y=this.getValueOfPropertyAt(t,e,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(t)/this.lineHeight-i*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(a,d),d.fillStyle=this.cursorColor||this.getValueOfPropertyAt(t,e,"fill"),d.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,d.fillRect(a.left+a.leftOffset-m/2,o+a.top+y,m,i)},renderSelection:function(a,d){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,t=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,e=this.textAlign.indexOf("justify")!==-1,i=this.get2DCursorLocation(u),s=this.get2DCursorLocation(t),m=i.lineIndex,o=s.lineIndex,y=i.charIndex<0?0:i.charIndex,C=s.charIndex<0?0:s.charIndex,M=m;M<=o;M++){var T=this._getLineLeftOffset(M)||0,D=this.getHeightOfLine(M),L=0,R=0,F=0;if(M===m&&(R=this.__charBounds[m][y].left),M>=m&&M<o)F=e&&!this.isEndOfWrapping(M)?this.width:this.getLineWidth(M)||5;else if(M===o)if(C===0)F=this.__charBounds[o][C].left;else{var W=this._getWidthOfCharSpacing();F=this.__charBounds[o][C-1].left+this.__charBounds[o][C-1].width-W}L=D,(this.lineHeight<1||M===o&&this.lineHeight>1)&&(D/=this.lineHeight);var ot=a.left+T+R,it=F-R,Mt=D,$=0;this.inCompositionMode?(d.fillStyle=this.compositionColor||"black",Mt=1,$=D):d.fillStyle=this.selectionColor,this.direction==="rtl"&&(ot=this.width-ot-it),d.fillRect(ot,a.top+a.topOffset+$,it,Mt),a.topOffset+=L}},getCurrentCharFontSize:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fontSize")},getCurrentCharColor:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fill")},_getCurrentCharIndex:function(){var a=this.get2DCursorLocation(this.selectionStart,!0),d=a.charIndex>0?a.charIndex-1:0;return{l:a.lineIndex,c:d}}}),l.IText.fromObject=function(a,d){if(p(a),a.styles)for(var u in a.styles)for(var t in a.styles[u])p(a.styles[u][t]);l.Object._fromObject("IText",a,d,"text")}}(),function(){var p=l.util.object.clone;l.util.object.extend(l.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var a=this;this.on("added",function(){var d=a.canvas;d&&(d._hasITextHandlers||(d._hasITextHandlers=!0,a._initCanvasHandlers(d)),d._iTextInstances=d._iTextInstances||[],d._iTextInstances.push(a))})},initRemovedHandler:function(){var a=this;this.on("removed",function(){var d=a.canvas;d&&(d._iTextInstances=d._iTextInstances||[],l.util.removeFromArray(d._iTextInstances,a),d._iTextInstances.length===0&&(d._hasITextHandlers=!1,a._removeCanvasHandlers(d)))})},_initCanvasHandlers:function(a){a._mouseUpITextHandler=function(){a._iTextInstances&&a._iTextInstances.forEach(function(d){d.__isMousedown=!1})},a.on("mouse:up",a._mouseUpITextHandler)},_removeCanvasHandlers:function(a){a.off("mouse:up",a._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(a,d,u,t){var e;return e={isAborted:!1,abort:function(){this.isAborted=!0}},a.animate("_currentCursorOpacity",d,{duration:u,onComplete:function(){e.isAborted||a[t]()},onChange:function(){a.canvas&&a.selectionStart===a.selectionEnd&&a.renderCursorOrSelection()},abort:function(){return e.isAborted}}),e},_onTickComplete:function(){var a=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){a._currentTickCompleteState=a._animateCursor(a,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(a){var d=this,u=a?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){d._tick()},u)},abortCursorAnimation:function(){var a=this._currentTickState||this._currentTickCompleteState,d=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,a&&d&&d.clearContext(d.contextTop||d.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(a){var d=0,u=a-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)d++,u--;for(;/\S/.test(this._text[u])&&u>-1;)d++,u--;return a-d},findWordBoundaryRight:function(a){var d=0,u=a;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)d++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)d++,u++;return a+d},findLineBoundaryLeft:function(a){for(var d=0,u=a-1;!/\n/.test(this._text[u])&&u>-1;)d++,u--;return a-d},findLineBoundaryRight:function(a){for(var d=0,u=a;!/\n/.test(this._text[u])&&u<this._text.length;)d++,u++;return a+d},searchWordBoundary:function(a,d){for(var u=this._text,t=this._reSpace.test(u[a])?a-1:a,e=u[t],i=l.reNonWord;!i.test(e)&&t>0&&t<u.length;)t+=d,e=u[t];return i.test(e)&&(t+=d===1?0:1),t},selectWord:function(a){a=a||this.selectionStart;var d=this.searchWordBoundary(a,-1),u=this.searchWordBoundary(a,1);this.selectionStart=d,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(a){a=a||this.selectionStart;var d=this.findLineBoundaryLeft(a),u=this.findLineBoundaryRight(a);return this.selectionStart=d,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(a){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(a),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(a){a._iTextInstances&&a._iTextInstances.forEach(function(d){d.selected=!1,d.isEditing&&d.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(a){if(!(!this.__isMousedown||!this.isEditing)){var d=this.getSelectionStartFromPointer(a.e),u=this.selectionStart,t=this.selectionEnd;(d!==this.__selectionStartOnMouseDown||u===t)&&(u===d||t===d)||(d>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=d):(this.selectionStart=d,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==t)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(a,d,u){var t=u.slice(0,a),e=l.util.string.graphemeSplit(t).length;if(a===d)return{selectionStart:e,selectionEnd:e};var i=u.slice(a,d),s=l.util.string.graphemeSplit(i).length;return{selectionStart:e,selectionEnd:e+s}},fromGraphemeToStringSelection:function(a,d,u){var t=u.slice(0,a),e=t.join("").length;if(a===d)return{selectionStart:e,selectionEnd:e};var i=u.slice(a,d),s=i.join("").length;return{selectionStart:e,selectionEnd:e+s}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var a=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=a.selectionStart,this.hiddenTextarea.selectionEnd=a.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var a=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=a.selectionEnd,this.inCompositionMode||(this.selectionStart=a.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var a=this._calcTextareaPosition();this.hiddenTextarea.style.left=a.left,this.hiddenTextarea.style.top=a.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var a=this.inCompositionMode?this.compositionStart:this.selectionStart,d=this._getCursorBoundaries(a),u=this.get2DCursorLocation(a),t=u.lineIndex,e=u.charIndex,i=this.getValueOfPropertyAt(t,e,"fontSize")*this.lineHeight,s=d.leftOffset,m=this.calcTransformMatrix(),o={x:d.left+s,y:d.top+d.topOffset+i},y=this.canvas.getRetinaScaling(),C=this.canvas.upperCanvasEl,M=C.width/y,T=C.height/y,D=M-i,L=T-i,R=C.clientWidth/M,F=C.clientHeight/T;return o=l.util.transformPoint(o,m),o=l.util.transformPoint(o,this.canvas.viewportTransform),o.x*=R,o.y*=F,o.x<0&&(o.x=0),o.x>D&&(o.x=D),o.y<0&&(o.y=0),o.y>L&&(o.y=L),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var a=this._textBeforeEdit!==this.text,d=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,d&&(d.blur&&d.blur(),d.parentNode&&d.parentNode.removeChild(d)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),a&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),a&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var a in this.styles)this._textLines[a]||delete this.styles[a]},removeStyleFromTo:function(a,d){var u=this.get2DCursorLocation(a,!0),t=this.get2DCursorLocation(d,!0),e=u.lineIndex,i=u.charIndex,s=t.lineIndex,m=t.charIndex,o,y;if(e!==s){if(this.styles[e])for(o=i;o<this._unwrappedTextLines[e].length;o++)delete this.styles[e][o];if(this.styles[s])for(o=m;o<this._unwrappedTextLines[s].length;o++)y=this.styles[s][o],y&&(this.styles[e]||(this.styles[e]={}),this.styles[e][i+o-m]=y);for(o=e+1;o<=s;o++)delete this.styles[o];this.shiftLineStyles(s,e-s)}else if(this.styles[e]){y=this.styles[e];var C=m-i,M,T;for(o=i;o<m;o++)delete y[o];for(T in this.styles[e])M=parseInt(T,10),M>=m&&(y[M-C]=y[T],delete y[T])}},shiftLineStyles:function(a,d){var u=p(this.styles);for(var t in this.styles){var e=parseInt(t,10);e>a&&(this.styles[e+d]=u[e],u[e-d]||delete this.styles[e])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(a,d,u,t){var e,i={},s=!1,m=this._unwrappedTextLines[a].length===d;u||(u=1),this.shiftLineStyles(a,u),this.styles[a]&&(e=this.styles[a][d===0?d:d-1]);for(var o in this.styles[a]){var y=parseInt(o,10);y>=d&&(s=!0,i[y-d]=this.styles[a][o],m&&d===0||delete this.styles[a][o])}var C=!1;for(s&&!m&&(this.styles[a+u]=i,C=!0),C&&u--;u>0;)t&&t[u-1]?this.styles[a+u]={0:p(t[u-1])}:e?this.styles[a+u]={0:p(e)}:delete this.styles[a+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(a,d,u,t){this.styles||(this.styles={});var e=this.styles[a],i=e?p(e):{};u||(u=1);for(var s in i){var m=parseInt(s,10);m>=d&&(e[m+u]=i[m],i[m-u]||delete e[m])}if(this._forceClearCache=!0,t){for(;u--;)Object.keys(t[u]).length&&(this.styles[a]||(this.styles[a]={}),this.styles[a][d+u]=p(t[u]));return}if(e)for(var o=e[d?d-1:1];o&&u--;)this.styles[a][d+u]=p(o)},insertNewStyleBlock:function(a,d,u){for(var t=this.get2DCursorLocation(d,!0),e=[0],i=0,s=0;s<a.length;s++)a[s]===`
`?(i++,e[i]=0):e[i]++;e[0]>0&&(this.insertCharStyleObject(t.lineIndex,t.charIndex,e[0],u),u=u&&u.slice(e[0]+1)),i&&this.insertNewlineStyleObject(t.lineIndex,t.charIndex+e[0],i);for(var s=1;s<i;s++)e[s]>0?this.insertCharStyleObject(t.lineIndex+s,0,e[s],u):u&&(this.styles[t.lineIndex+s][0]=u[0]),u=u&&u.slice(e[s]+1);e[s]>0&&this.insertCharStyleObject(t.lineIndex+s,0,e[s],u)},setSelectionStartEndWithShift:function(a,d,u){u<=a?(d===a?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=a),this.selectionStart=u):u>a&&u<d?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(d===a?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=d),this.selectionEnd=u)},setSelectionInBoundaries:function(){var a=this.text.length;this.selectionStart>a?this.selectionStart=a:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>a?this.selectionEnd=a:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),l.util.object.extend(l.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(p){if(this.canvas){this.__newClickTime=+new Date;var a=p.pointer;this.isTripleClick(a)&&(this.fire("tripleclick",p),this._stopEvent(p.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=a,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(p){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===p.x&&this.__lastPointer.y===p.y},_stopEvent:function(p){p.preventDefault&&p.preventDefault(),p.stopPropagation&&p.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(p){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(p.e))},tripleClickHandler:function(p){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(p.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(p){!this.canvas||!this.editable||p.e.button&&p.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(p.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(p){!this.canvas||!this.editable||p.e.button&&p.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(p){if(this.__isMousedown=!1,!(!this.editable||this.group||p.transform&&p.transform.actionPerformed||p.e.button&&p.e.button!==1)){if(this.canvas){var a=this.canvas._activeObject;if(a&&a!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(p.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(p){var a=this.getSelectionStartFromPointer(p),d=this.selectionStart,u=this.selectionEnd;p.shiftKey?this.setSelectionStartEndWithShift(d,u,a):(this.selectionStart=a,this.selectionEnd=a),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(p){for(var a=this.getLocalPointer(p),d=0,u=0,t=0,e=0,i=0,s,m,o=0,y=this._textLines.length;o<y&&t<=a.y;o++)t+=this.getHeightOfLine(o)*this.scaleY,i=o,o>0&&(e+=this._textLines[o-1].length+this.missingNewlineOffset(o-1));s=this._getLineLeftOffset(i),u=s*this.scaleX,m=this._textLines[i],this.direction==="rtl"&&(a.x=this.width*this.scaleX-a.x+u);for(var C=0,M=m.length;C<M&&(d=u,u+=this.__charBounds[i][C].kernedWidth*this.scaleX,u<=a.x);C++)e++;return this._getNewSelectionStartFromOffset(a,d,u,e,M)},_getNewSelectionStartFromOffset:function(p,a,d,u,t){var e=p.x-a,i=d-p.x,s=i>e||i<0?0:1,m=u+s;return this.flipX&&(m=t-m),m>this._text.length&&(m=this._text.length),m}}),l.util.object.extend(l.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=l.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var p=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+p.top+"; left: "+p.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+p.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):l.document.body.appendChild(this.hiddenTextarea),l.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),l.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),l.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),l.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),l.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),l.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),l.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),l.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),l.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(l.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(p){if(this.isEditing){var a=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(p.keyCode in a)this[a[p.keyCode]](p);else if(p.keyCode in this.ctrlKeysMapDown&&(p.ctrlKey||p.metaKey))this[this.ctrlKeysMapDown[p.keyCode]](p);else return;p.stopImmediatePropagation(),p.preventDefault(),p.keyCode>=33&&p.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(p){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(p.keyCode in this.ctrlKeysMapUp&&(p.ctrlKey||p.metaKey))this[this.ctrlKeysMapUp[p.keyCode]](p);else return;p.stopImmediatePropagation(),p.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(p){var a=this.fromPaste;if(this.fromPaste=!1,p&&p.stopPropagation(),!!this.isEditing){var d=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,t=d.length,e,i,s=t-u,m=this.selectionStart,o=this.selectionEnd,y=m!==o,C,M,T;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var D=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),L=m>D.selectionStart;y?(e=this._text.slice(m,o),s+=o-m):t<u&&(L?e=this._text.slice(o+s,o):e=this._text.slice(m,m-s)),i=d.slice(D.selectionEnd-s,D.selectionEnd),e&&e.length&&(i.length&&(C=this.getSelectionStyles(m,m+1,!1),C=i.map(function(){return C[0]})),y?(M=m,T=o):L?(M=o-e.length,T=o):(M=o,T=o+e.length),this.removeStyleFromTo(M,T)),i.length&&(a&&i.join("")===l.copiedText&&!l.disableStyleCopyPaste&&(C=l.copiedTextStyle),this.insertNewStyleBlock(i,m,C)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(p){this.compositionStart=p.target.selectionStart,this.compositionEnd=p.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(l.copiedText=this.getSelectedText(),l.disableStyleCopyPaste?l.copiedTextStyle=null:l.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(p){return p&&p.clipboardData||l.window.clipboardData},_getWidthBeforeCursor:function(p,a){var d=this._getLineLeftOffset(p),u;return a>0&&(u=this.__charBounds[p][a-1],d+=u.left+u.width),d},getDownCursorOffset:function(p,a){var d=this._getSelectionForOffset(p,a),u=this.get2DCursorLocation(d),t=u.lineIndex;if(t===this._textLines.length-1||p.metaKey||p.keyCode===34)return this._text.length-d;var e=u.charIndex,i=this._getWidthBeforeCursor(t,e),s=this._getIndexOnLine(t+1,i),m=this._textLines[t].slice(e);return m.length+s+1+this.missingNewlineOffset(t)},_getSelectionForOffset:function(p,a){return p.shiftKey&&this.selectionStart!==this.selectionEnd&&a?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(p,a){var d=this._getSelectionForOffset(p,a),u=this.get2DCursorLocation(d),t=u.lineIndex;if(t===0||p.metaKey||p.keyCode===33)return-d;var e=u.charIndex,i=this._getWidthBeforeCursor(t,e),s=this._getIndexOnLine(t-1,i),m=this._textLines[t].slice(0,e),o=this.missingNewlineOffset(t-1);return-this._textLines[t-1].length+s-m.length+(1-o)},_getIndexOnLine:function(p,a){for(var d=this._textLines[p],u=this._getLineLeftOffset(p),t=u,e=0,i,s,m=0,o=d.length;m<o;m++)if(i=this.__charBounds[p][m].width,t+=i,t>a){s=!0;var y=t-i,C=t,M=Math.abs(y-a),T=Math.abs(C-a);e=T<M?m:m-1;break}return s||(e=d.length-1),e},moveCursorDown:function(p){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",p)},moveCursorUp:function(p){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",p)},_moveCursorUpOrDown:function(p,a){var d="get"+p+"CursorOffset",u=this[d](a,this._selectionDirection==="right");a.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(p){var a=this._selectionDirection==="left"?this.selectionStart+p:this.selectionEnd+p;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,a),p!==0},moveCursorWithoutShift:function(p){return p<0?(this.selectionStart+=p,this.selectionEnd=this.selectionStart):(this.selectionEnd+=p,this.selectionStart=this.selectionEnd),p!==0},moveCursorLeft:function(p){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",p)},_move:function(p,a,d){var u;if(p.altKey)u=this["findWordBoundary"+d](this[a]);else if(p.metaKey||p.keyCode===35||p.keyCode===36)u=this["findLineBoundary"+d](this[a]);else return this[a]+=d==="Left"?-1:1,!0;if(typeof u!==void 0&&this[a]!==u)return this[a]=u,!0},_moveLeft:function(p,a){return this._move(p,a,"Left")},_moveRight:function(p,a){return this._move(p,a,"Right")},moveCursorLeftWithoutShift:function(p){var a=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(a=this._moveLeft(p,"selectionStart")),this.selectionEnd=this.selectionStart,a},moveCursorLeftWithShift:function(p){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(p,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(p,"selectionStart")},moveCursorRight:function(p){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",p)},_moveCursorLeftOrRight:function(p,a){var d="moveCursor"+p+"With";this._currentCursorOpacity=1,a.shiftKey?d+="Shift":d+="outShift",this[d](a)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(p){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(p,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(p,"selectionEnd")},moveCursorRightWithoutShift:function(p){var a=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(a=this._moveRight(p,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,a},removeChars:function(p,a){typeof a=="undefined"&&(a=p+1),this.removeStyleFromTo(p,a),this._text.splice(p,a-p),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(p,a,d,u){typeof u=="undefined"&&(u=d),u>d&&this.removeStyleFromTo(d,u);var t=l.util.string.graphemeSplit(p);this.insertNewStyleBlock(t,d,a),this._text=[].concat(this._text.slice(0,d),t,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var p=l.util.toFixed,a=/  +/g;l.util.object.extend(l.Text.prototype,{_toSVG:function(){var d=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(d.textTop,d.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(d){return this._createBaseSVGMarkup(this._toSVG(),{reviver:d,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(d){var u=!0,t=this.getSvgTextDecoration(this);return[d.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",d.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(d,u){var t=[],e=[],i=d,s;this._setSVGBg(e);for(var m=0,o=this._textLines.length;m<o;m++)s=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(e,m,u+s,i),this._setSVGTextLineText(t,m,u+s,i),i+=this.getHeightOfLine(m);return{textSpans:t,textBgRects:e}},_createTextCharSpan:function(d,u,t,e){var i=d!==d.trim()||d.match(a),s=this.getSvgSpanStyles(u,i),m=s?'style="'+s+'"':"",o=u.deltaY,y="",C=l.Object.NUM_FRACTION_DIGITS;return o&&(y=' dy="'+p(o,C)+'" '),['<tspan x="',p(t,C),'" y="',p(e,C),'" ',y,m,">",l.util.string.escapeXml(d),"</tspan>"].join("")},_setSVGTextLineText:function(d,u,t,e){var i=this.getHeightOfLine(u),s=this.textAlign.indexOf("justify")!==-1,m,o,y="",C,M,T=0,D=this._textLines[u],L;e+=i*(1-this._fontSizeFraction)/this.lineHeight;for(var R=0,F=D.length-1;R<=F;R++)L=R===F||this.charSpacing,y+=D[R],C=this.__charBounds[u][R],T===0?(t+=C.kernedWidth-C.width,T+=C.width):T+=C.kernedWidth,s&&!L&&this._reSpaceAndTab.test(D[R])&&(L=!0),L||(m=m||this.getCompleteStyleDeclaration(u,R),o=this.getCompleteStyleDeclaration(u,R+1),L=this._hasStyleChangedForSvg(m,o)),L&&(M=this._getStyleDeclaration(u,R)||{},d.push(this._createTextCharSpan(y,M,t,e)),y="",m=o,t+=T,T=0)},_pushTextBgRect:function(d,u,t,e,i,s){var m=l.Object.NUM_FRACTION_DIGITS;d.push("		<rect ",this._getFillAttributes(u),' x="',p(t,m),'" y="',p(e,m),'" width="',p(i,m),'" height="',p(s,m),`"></rect>
`)},_setSVGTextLineBg:function(d,u,t,e){for(var i=this._textLines[u],s=this.getHeightOfLine(u)/this.lineHeight,m=0,o=0,y,C,M=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),T=0,D=i.length;T<D;T++)y=this.__charBounds[u][T],C=this.getValueOfPropertyAt(u,T,"textBackgroundColor"),C!==M?(M&&this._pushTextBgRect(d,M,t+o,e,m,s),o=y.left,m=y.width,M=C):m+=y.kernedWidth;C&&this._pushTextBgRect(d,C,t+o,e,m,s)},_getFillAttributes:function(d){var u=d&&typeof d=="string"?new l.Color(d):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+d+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(d){for(var u=0,t=0,e=0;e<d;e++)u+=this.getHeightOfLine(e);return t=this.getHeightOfLine(e),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(d){var u=l.Object.prototype.getSvgStyles.call(this,d);return u+" white-space: pre;"}})}(),function(p){"use strict";var a=p.fabric||(p.fabric={});a.Textbox=a.util.createClass(a.IText,a.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:a.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(d){for(var u=0,t=0,e=0,i={},s=0;s<d.graphemeLines.length;s++)d.graphemeText[e]===`
`&&s>0?(t=0,e++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(d.graphemeText[e])&&s>0&&(t++,e++),i[s]={line:u,offset:t},e+=d.graphemeLines[s].length,t+=d.graphemeLines[s].length;return i},styleHas:function(d,u){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[u];t&&(u=t.line)}return a.Text.prototype.styleHas.call(this,d,u)},isEmptyStyles:function(d){if(!this.styles)return!0;var u=0,t=d+1,e,i,s=!1,m=this._styleMap[d],o=this._styleMap[d+1];m&&(d=m.line,u=m.offset),o&&(t=o.line,s=t===d,e=o.offset),i=typeof d=="undefined"?this.styles:{line:this.styles[d]};for(var y in i)for(var C in i[y])if(C>=u&&(!s||C<e))for(var M in i[y][C])return!1;return!0},_getStyleDeclaration:function(d,u){if(this._styleMap&&!this.isWrapping){var t=this._styleMap[d];if(!t)return null;d=t.line,u=t.offset+u}return this.callSuper("_getStyleDeclaration",d,u)},_setStyleDeclaration:function(d,u,t){var e=this._styleMap[d];d=e.line,u=e.offset+u,this.styles[d][u]=t},_deleteStyleDeclaration:function(d,u){var t=this._styleMap[d];d=t.line,u=t.offset+u,delete this.styles[d][u]},_getLineStyle:function(d){var u=this._styleMap[d];return!!this.styles[u.line]},_setLineStyle:function(d){var u=this._styleMap[d];this.styles[u.line]={}},_wrapText:function(d,u){var t=[],e;for(this.isWrapping=!0,e=0;e<d.length;e++)t=t.concat(this._wrapLine(d[e],e,u));return this.isWrapping=!1,t},_measureWord:function(d,u,t){var e=0,i,s=!0;t=t||0;for(var m=0,o=d.length;m<o;m++){var y=this._getGraphemeBox(d[m],u,m+t,i,s);e+=y.kernedWidth,i=d[m]}return e},_wrapLine:function(d,u,t,ot){var i=0,s=this.splitByGrapheme,m=[],o=[],y=s?a.util.string.graphemeSplit(d):d.split(this._wordJoiners),C="",M=0,T=s?"":" ",D=0,L=0,R=0,F=!0,W=this._getWidthOfCharSpacing(),ot=ot||0;y.length===0&&y.push([]),t-=ot;for(var it=0;it<y.length;it++)C=s?y[it]:a.util.string.graphemeSplit(y[it]),D=this._measureWord(C,u,M),M+=C.length,i+=L+D-W,i>t&&!F?(m.push(o),o=[],i=D,F=!0):i+=W,!F&&!s&&o.push(T),o=o.concat(C),L=s?0:this._measureWord([T],u,M),M++,F=!1,D>R&&(R=D);return it&&m.push(o),R+ot>this.dynamicMinWidth&&(this.dynamicMinWidth=R-W+ot),m},isEndOfWrapping:function(d){return!this._styleMap[d+1]||this._styleMap[d+1].line!==this._styleMap[d].line},missingNewlineOffset:function(d){return this.splitByGrapheme?this.isEndOfWrapping(d)?1:0:1},_splitTextIntoLines:function(d){for(var u=a.Text.prototype._splitTextIntoLines.call(this,d),t=this._wrapText(u.lines,this.width),e=new Array(t.length),i=0;i<t.length;i++)e[i]=t[i].join("");return u.lines=e,u.graphemeLines=t,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var d={};for(var u in this._styleMap)this._textLines[u]&&(d[this._styleMap[u].line]=1);for(var u in this.styles)d[u]||delete this.styles[u]},toObject:function(d){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(d))}}),a.Textbox.fromObject=function(d,u){return a.Object._fromObject("Textbox",d,u,"text")}}(x),function(){var p=l.controlsUtils,a=p.scaleSkewCursorStyleHandler,d=p.scaleCursorStyleHandler,u=p.scalingEqually,t=p.scalingYOrSkewingX,e=p.scalingXOrSkewingY,i=p.scaleOrSkewActionName,s=l.Object.prototype.controls;if(s.ml=new l.Control({x:-.5,y:0,cursorStyleHandler:a,actionHandler:e,getActionName:i}),s.mr=new l.Control({x:.5,y:0,cursorStyleHandler:a,actionHandler:e,getActionName:i}),s.mb=new l.Control({x:0,y:.5,cursorStyleHandler:a,actionHandler:t,getActionName:i}),s.mt=new l.Control({x:0,y:-.5,cursorStyleHandler:a,actionHandler:t,getActionName:i}),s.tl=new l.Control({x:-.5,y:-.5,cursorStyleHandler:d,actionHandler:u}),s.tr=new l.Control({x:.5,y:-.5,cursorStyleHandler:d,actionHandler:u}),s.bl=new l.Control({x:-.5,y:.5,cursorStyleHandler:d,actionHandler:u}),s.br=new l.Control({x:.5,y:.5,cursorStyleHandler:d,actionHandler:u}),s.mtr=new l.Control({x:0,y:-.5,actionHandler:p.rotationWithSnapping,cursorStyleHandler:p.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),l.Textbox){var m=l.Textbox.prototype.controls={};m.mtr=s.mtr,m.tr=s.tr,m.br=s.br,m.tl=s.tl,m.bl=s.bl,m.mt=s.mt,m.mb=s.mb,m.mr=new l.Control({x:.5,y:0,actionHandler:p.changeWidth,cursorStyleHandler:a,actionName:"resizing"}),m.ml=new l.Control({x:-.5,y:0,actionHandler:p.changeWidth,cursorStyleHandler:a,actionName:"resizing"})}}()},3053:function(g,x,f){"use strict";var l=f(602);function I(b,w,k){var j,p;if(k=k||0,!l(w))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(w,b,k);for(p=w.length,j=k;k>=0&&j<p;j+=1)if(w[j]===b)return j;return-1}g.exports=I},8592:function(g,x,f){"use strict";var l=f(602),I=f(6092),b=f(5573);function w(k,j,p){l(k)?I(k,j,p):b(k,j,p)}g.exports=w},6092:function(g){"use strict";function x(f,l,I){var b=0,w=f.length;for(I=I||null;b<w&&l.call(I,f[b],b,f)!==!1;b+=1);}g.exports=x},5573:function(g){"use strict";function x(f,l,I){var b;I=I||null;for(b in f)if(f.hasOwnProperty(b)&&l.call(I,f[b],b,f)===!1)break}g.exports=x},9052:function(g,x,f){"use strict";var l=f(961),I=f(9886),b=f(2560),w=f(5393),k=f(602),j=f(5183),p=f(8592),a=/\s+/g;function d(){this.events=null,this.contexts=null}d.mixin=function(u){l(u.prototype,d.prototype)},d.prototype._getHandlerItem=function(u,t){var e={handler:u};return t&&(e.context=t),e},d.prototype._safeEvent=function(u){var t=this.events,e;return t||(t=this.events={}),u&&(e=t[u],e||(e=[],t[u]=e),t=e),t},d.prototype._safeContext=function(){var u=this.contexts;return u||(u=this.contexts=[]),u},d.prototype._indexOfContext=function(u){for(var t=this._safeContext(),e=0;t[e];){if(u===t[e][0])return e;e+=1}return-1},d.prototype._memorizeContext=function(u){var t,e;I(u)&&(t=this._safeContext(),e=this._indexOfContext(u),e>-1?t[e][1]+=1:t.push([u,1]))},d.prototype._forgetContext=function(u){var t,e;I(u)&&(t=this._safeContext(),e=this._indexOfContext(u),e>-1&&(t[e][1]-=1,t[e][1]<=0&&t.splice(e,1)))},d.prototype._bindEvent=function(u,t,e){var i=this._safeEvent(u);this._memorizeContext(e),i.push(this._getHandlerItem(t,e))},d.prototype.on=function(u,t,e){var i=this;b(u)?(u=u.split(a),p(u,function(s){i._bindEvent(s,t,e)})):w(u)&&(e=t,p(u,function(s,m){i.on(m,s,e)}))},d.prototype.once=function(u,t,e){var i=this;if(w(u)){e=t,p(u,function(m,o){i.once(o,m,e)});return}function s(){t.apply(e,arguments),i.off(u,s,e)}this.on(u,s,e)},d.prototype._spliceMatches=function(u,t){var e=0,i;if(k(u))for(i=u.length;e<i;e+=1)t(u[e])===!0&&(u.splice(e,1),i-=1,e-=1)},d.prototype._matchHandler=function(u){var t=this;return function(e){var i=u===e.handler;return i&&t._forgetContext(e.context),i}},d.prototype._matchContext=function(u){var t=this;return function(e){var i=u===e.context;return i&&t._forgetContext(e.context),i}},d.prototype._matchHandlerAndContext=function(u,t){var e=this;return function(i){var s=u===i.handler,m=t===i.context,o=s&&m;return o&&e._forgetContext(i.context),o}},d.prototype._offByEventName=function(u,t){var e=this,i=j(t),s=e._matchHandler(t);u=u.split(a),p(u,function(m){var o=e._safeEvent(m);i?e._spliceMatches(o,s):(p(o,function(y){e._forgetContext(y.context)}),e.events[m]=[])})},d.prototype._offByHandler=function(u){var t=this,e=this._matchHandler(u);p(this._safeEvent(),function(i){t._spliceMatches(i,e)})},d.prototype._offByObject=function(u,t){var e=this,i;this._indexOfContext(u)<0?p(u,function(s,m){e.off(m,s)}):b(t)?(i=this._matchContext(u),e._spliceMatches(this._safeEvent(t),i)):j(t)?(i=this._matchHandlerAndContext(t,u),p(this._safeEvent(),function(s){e._spliceMatches(s,i)})):(i=this._matchContext(u),p(this._safeEvent(),function(s){e._spliceMatches(s,i)}))},d.prototype.off=function(u,t){b(u)?this._offByEventName(u,t):arguments.length?j(u)?this._offByHandler(u):w(u)&&this._offByObject(u,t):(this.events={},this.contexts=[])},d.prototype.fire=function(u){this.invoke.apply(this,arguments)},d.prototype.invoke=function(u){var t,e,i,s;if(!this.hasListener(u))return!0;for(t=this._safeEvent(u),e=Array.prototype.slice.call(arguments,1),i=0;t[i];){if(s=t[i],s.handler.apply(s.context,e)===!1)return!1;i+=1}return!0},d.prototype.hasListener=function(u){return this.getListenerLength(u)>0},d.prototype.getListenerLength=function(u){var t=this._safeEvent(u);return t.length},g.exports=d},961:function(g){"use strict";function x(f,l){var I=Object.prototype.hasOwnProperty,b,w,k,j;for(k=1,j=arguments.length;k<j;k+=1){b=arguments[k];for(w in b)I.call(b,w)&&(f[w]=b[w])}return f}g.exports=x},1610:function(g,x,f){"use strict";var l=f(5695),I=f(3778);function b(w,k){for(var j=arguments,p=j[0],a=1,d=j.length;a<d;a+=1){if(l(p)||I(p))return;p=p[j[a]]}return p}g.exports=b},4564:function(g,x,f){"use strict";var l=f(5573);function I(b,w){var k=document.createElement("img"),j="";return l(w,function(p,a){j+="&"+a+"="+p}),j=j.substring(1),k.src=b+"?"+j,k.style.display="none",document.body.appendChild(k),document.body.removeChild(k),k}g.exports=I},4729:function(g,x,f){"use strict";var l=f(5695),I=f(4564),b=7*24*60*60*1e3;function w(j){var p=new Date().getTime();return p-j>b}function k(j,p){var a="https://www.google-analytics.com/collect",d=location.hostname,u="event",t="use",e="TOAST UI "+j+" for "+d+": Statistics",i=window.localStorage.getItem(e);!l(window.tui)&&window.tui.usageStatistics===!1||i&&!w(i)||(window.localStorage.setItem(e,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&I(a,{v:1,t:u,tid:p,cid:d,dp:d,dh:j,el:j,ec:t})},1e3))}g.exports=k},602:function(g){"use strict";function x(f){return f instanceof Array}g.exports=x},9886:function(g,x,f){"use strict";var l=f(5695),I=f(3778);function b(w){return!l(w)&&!I(w)}g.exports=b},5183:function(g){"use strict";function x(f){return f instanceof Function}g.exports=x},3778:function(g){"use strict";function x(f){return f===null}g.exports=x},5393:function(g){"use strict";function x(f){return f===Object(f)}g.exports=x},2560:function(g){"use strict";function x(f){return typeof f=="string"||f instanceof String}g.exports=x},5695:function(g){"use strict";function x(f){return f===void 0}g.exports=x},4426:function(g,x,f){g.exports=f(4486)},9406:function(g,x,f){g.exports=f(4877)},789:function(g,x,f){g.exports=f(7178)},381:function(g,x,f){g.exports=f(5603)},7636:function(g,x,f){g.exports=f(1206)},1899:function(g,x,f){g.exports=f(6174)},899:function(g,x,f){g.exports=f(57)},8005:function(g,x,f){g.exports=f(4741)},6562:function(g,x,f){g.exports=f(8368)},9131:function(g,x,f){g.exports=f(3739)},4383:function(g,x,f){g.exports=f(172)},6065:function(g,x,f){g.exports=f(4963)},1734:function(g,x,f){g.exports=f(7820)},2461:function(g,x,f){g.exports=f(5636)},5214:function(g,x,f){g.exports=f(5059)},6397:function(g,x,f){g.exports=f(3969)},8189:function(g,x,f){g.exports=f(6618)},9146:function(g,x,f){g.exports=f(5279)},4496:function(g,x,f){g.exports=f(9562)},3972:function(g,x,f){g.exports=f(652)},7172:function(g,x,f){g.exports=f(2813)},1845:function(g,x,f){g.exports=f(8664)},662:function(g,x,f){g.exports=f(1457)},711:function(g,x,f){g.exports=f(2937)},6623:function(g,x,f){g.exports=f(9297)},7077:function(g,x,f){g.exports=f(8026)},9856:function(g,x,f){g.exports=f(2044)},4230:function(g,x,f){g.exports=f(2214)},184:function(g,x,f){g.exports=f(9256)},3742:function(g,x,f){g.exports=f(5659)},1801:function(g){var x={rect:1,circle:2,triangle:1},f={rect:{w:"width",h:"height"},circle:{w:"rx",h:"ry"},triangle:{w:"width",h:"height"}};function l(a){var d=a.originX,u=a.originY,t=d.substring(0,1)+u.substring(0,1);a.startPoint=a.origins[t]}function I(a,d,u){var t=a.x,e=a.y,i=d.x,s=d.y,m=u*Math.PI/180,o=(i-t)*Math.cos(m)-(s-e)*Math.sin(m)+t,y=(i-t)*Math.sin(m)+(s-e)*Math.cos(m)+e;return{originX:t>o?"right":"left",originY:e>y?"bottom":"top"}}function b(a){return a.originX==="center"&&a.originY==="center"}function w(a,d){var u=d.getPointByOrigin("center","center"),t=-d.angle,e=I(u,a,t),i=e.originX,s=e.originY,m=d.getPointByOrigin(i,s),o=d.left-(u.x-m.x),y=d.top-(u.y-m.y);d.set({originX:i,originY:s,left:o,top:y}),d.setCoords()}function k(a,d){var u=d.startPoint,t=-d.angle,e=I(u,a,t),i=e.originX,s=e.originY;d.setPositionByOrigin(u,i,s),d.setCoords()}function j(a){var d=a.type,u=a.scaleX,t=a.scaleY,e=f[d],i=a[e.w]*u,s=a[e.h]*t;if(a.isRegular){var m=Math.max(u,t);i=a[e.w]*m,s=a[e.h]*m}var o={hasControls:!1,hasBorders:!1,scaleX:1,scaleY:1};o[e.w]=i,o[e.h]=s,a.set(o)}function p(a,d){var u=d.type,t=d.strokeWidth,e=d.startPoint,i=x[u],s=f[u],m=d.type==="triangle",o={},y=Math.abs(e.x-a.x)/i,C=Math.abs(e.y-a.y)/i;y>t&&(y-=t/i),C>t&&(C-=t/i),d.isRegular&&(y=C=Math.max(y,C),m&&(C=Math.sqrt(3)/2*y)),o[s.w]=y,o[s.h]=C,d.set(o)}g.exports={setOrigins:function(d){var u=d.getPointByOrigin("left","top"),t=d.getPointByOrigin("right","top"),e=d.getPointByOrigin("right","bottom"),i=d.getPointByOrigin("left","bottom");d.origins={lt:u,rt:t,rb:e,lb:i}},resize:function(d,u,t){b(d)&&(w(u,d),l(d)),t?j(d,u):p(u,d),k(u,d)},adjustOriginToCenter:function(d){var u=d.getPointByOrigin("center","center"),t=d.originX,e=d.originY,i=d.getPointByOrigin(t,e),s=d.left+(u.x-i.x),m=d.top+(u.y-i.y);d.set({hasControls:!0,hasBorders:!0,originX:"center",originY:"center",left:s,top:m}),d.setCoords()}}},2221:function(g,x,f){f(5454),f(9173);var l=f(7545);g.exports=l.Array.from},5078:function(g,x,f){f(8118);var l=f(7545);g.exports=l.Array.isArray},6135:function(g,x,f){f(9106);var l=f(5607);g.exports=l("Array").concat},9510:function(g,x,f){f(1710);var l=f(5607);g.exports=l("Array").fill},3971:function(g,x,f){f(3436);var l=f(5607);g.exports=l("Array").filter},98:function(g,x,f){f(9823);var l=f(5607);g.exports=l("Array").forEach},2089:function(g,x,f){f(2276);var l=f(5607);g.exports=l("Array").indexOf},6209:function(g,x,f){f(3838);var l=f(5607);g.exports=l("Array").map},2671:function(g,x,f){f(5818);var l=f(5607);g.exports=l("Array").slice},1375:function(g,x,f){f(2178);var l=f(5607);g.exports=l("Array").splice},3528:function(g,x,f){f(665);var l=f(5607);g.exports=l("Function").bind},5739:function(g,x,f){f(8939),f(5454);var l=f(8703);g.exports=l},278:function(g,x,f){var l=f(3528),I=Function.prototype;g.exports=function(b){var w=b.bind;return b===I||b instanceof Function&&w===I.bind?l:w}},1484:function(g,x,f){var l=f(6135),I=Array.prototype;g.exports=function(b){var w=b.concat;return b===I||b instanceof Array&&w===I.concat?l:w}},7731:function(g,x,f){var l=f(9510),I=Array.prototype;g.exports=function(b){var w=b.fill;return b===I||b instanceof Array&&w===I.fill?l:w}},3669:function(g,x,f){var l=f(3971),I=Array.prototype;g.exports=function(b){var w=b.filter;return b===I||b instanceof Array&&w===I.filter?l:w}},2604:function(g,x,f){var l=f(2089),I=Array.prototype;g.exports=function(b){var w=b.indexOf;return b===I||b instanceof Array&&w===I.indexOf?l:w}},263:function(g,x,f){var l=f(6209),I=Array.prototype;g.exports=function(b){var w=b.map;return b===I||b instanceof Array&&w===I.map?l:w}},7663:function(g,x,f){var l=f(2671),I=Array.prototype;g.exports=function(b){var w=b.slice;return b===I||b instanceof Array&&w===I.slice?l:w}},5063:function(g,x,f){var l=f(1375),I=Array.prototype;g.exports=function(b){var w=b.splice;return b===I||b instanceof Array&&w===I.splice?l:w}},6813:function(g,x,f){var l=f(3842),I=String.prototype;g.exports=function(b){var w=b.trim;return typeof b=="string"||b===I||b instanceof String&&w===I.trim?l:w}},6285:function(g,x,f){f(2666);var l=f(7545);g.exports=l.Number.parseInt},3213:function(g,x,f){f(3113);var l=f(7545),I=l.Object;g.exports=function(w,k){return I.create(w,k)}},3512:function(g,x,f){f(297);var l=f(7545),I=l.Object,b=g.exports=function(k,j,p){return I.defineProperty(k,j,p)};I.defineProperty.sham&&(b.sham=!0)},8168:function(g,x,f){f(9234);var l=f(7545);g.exports=l.Object.getPrototypeOf},8651:function(g,x,f){f(2647);var l=f(7545);g.exports=l.Object.keys},3083:function(g,x,f){f(3222);var l=f(7545);g.exports=l.Object.setPrototypeOf},2987:function(g,x,f){f(4859);var l=f(7545);g.exports=l.parseFloat},2239:function(g,x,f){f(5706);var l=f(7545);g.exports=l.parseInt},3154:function(g,x,f){f(4242),f(8939),f(6663),f(9021),f(7884),f(8885),f(1868),f(5454);var l=f(7545);g.exports=l.Promise},6577:function(g,x,f){f(5397);var l=f(7545);g.exports=l.Reflect.construct},3842:function(g,x,f){f(957);var l=f(5607);g.exports=l("String").trim},5008:function(g,x,f){f(9106),f(6663),f(6187),f(9781),f(492),f(6681),f(9594),f(3665),f(9017),f(1250),f(9786),f(503),f(6565),f(9322),f(3610),f(6886),f(3514),f(8671),f(8556),f(1367);var l=f(7545);g.exports=l.Symbol},994:function(g,x,f){f(8939),f(6663),f(5454),f(3665);var l=f(9207);g.exports=l.f("iterator")},2813:function(g,x,f){var l=f(3822);g.exports=l},8664:function(g,x,f){var l=f(1434);g.exports=l},1457:function(g,x,f){var l=f(7710);g.exports=l},2937:function(g,x,f){var l=f(4741);g.exports=l},9297:function(g,x,f){var l=f(4963);g.exports=l},8026:function(g,x,f){var l=f(7820);g.exports=l},2044:function(g,x,f){var l=f(8980);g.exports=l},2214:function(g,x,f){var l=f(6672);g.exports=l},9256:function(g,x,f){var l=f(2285);f(177),f(9031),f(6658),f(1875),f(8658),f(4592),f(6680),g.exports=l},5659:function(g,x,f){var l=f(8535);g.exports=l},6235:function(g,x,f){var l=f(6447),I=f(9288);g.exports=function(b){if(l(b))return b;throw TypeError(I(b)+" is not a function")}},1404:function(g,x,f){var l=f(2091),I=f(9288);g.exports=function(b){if(l(b))return b;throw TypeError(I(b)+" is not a constructor")}},7757:function(g,x,f){var l=f(6447);g.exports=function(I){if(typeof I=="object"||l(I))return I;throw TypeError("Can't set "+String(I)+" as a prototype")}},7423:function(g){g.exports=function(){}},6961:function(g){g.exports=function(x,f,l){if(x instanceof f)return x;throw TypeError("Incorrect "+(l?l+" ":"")+"invocation")}},1138:function(g,x,f){var l=f(5744);g.exports=function(I){if(l(I))return I;throw TypeError(String(I)+" is not an object")}},2724:function(g,x,f){"use strict";var l=f(1795),I=f(7739),b=f(4104);g.exports=function(k){for(var j=l(this),p=b(j),a=arguments.length,d=I(a>1?arguments[1]:void 0,p),u=a>2?arguments[2]:void 0,t=u===void 0?p:I(u,p);t>d;)j[d++]=k;return j}},7397:function(g,x,f){"use strict";var l=f(454).forEach,I=f(424),b=I("forEach");g.exports=b?[].forEach:function(k){return l(this,k,arguments.length>1?arguments[1]:void 0)}},841:function(g,x,f){"use strict";var l=f(8043),I=f(1795),b=f(1635),w=f(6109),k=f(2091),j=f(4104),p=f(9361),a=f(1669),d=f(8703);g.exports=function(t){var e=I(t),i=k(this),s=arguments.length,m=s>1?arguments[1]:void 0,o=m!==void 0;o&&(m=l(m,s>2?arguments[2]:void 0,2));var y=d(e),C=0,M,T,D,L,R,F;if(y&&!(this==Array&&w(y)))for(L=a(e,y),R=L.next,T=i?new this:[];!(D=R.call(L)).done;C++)F=o?b(L,m,[D.value,C],!0):D.value,p(T,C,F);else for(M=j(e),T=i?new this(M):Array(M);M>C;C++)F=o?m(e[C],C):e[C],p(T,C,F);return T.length=C,T}},8180:function(g,x,f){var l=f(101),I=f(7739),b=f(4104),w=function(k){return function(j,p,a){var d=l(j),u=b(d),t=I(a,u),e;if(k&&p!=p){for(;u>t;)if(e=d[t++],e!=e)return!0}else for(;u>t;t++)if((k||t in d)&&d[t]===p)return k||t||0;return!k&&-1}};g.exports={includes:w(!0),indexOf:w(!1)}},454:function(g,x,f){var l=f(8043),I=f(2202),b=f(1795),w=f(4104),k=f(1321),j=[].push,p=function(a){var d=a==1,u=a==2,t=a==3,e=a==4,i=a==6,s=a==7,m=a==5||i;return function(o,y,C,M){for(var T=b(o),D=I(T),L=l(y,C,3),R=w(D),F=0,W=M||k,ot=d?W(o,R):u||s?W(o,0):void 0,it,Mt;R>F;F++)if((m||F in D)&&(it=D[F],Mt=L(it,F,T),a))if(d)ot[F]=Mt;else if(Mt)switch(a){case 3:return!0;case 5:return it;case 6:return F;case 2:j.call(ot,it)}else switch(a){case 4:return!1;case 7:j.call(ot,it)}return i?-1:t||e?e:ot}};g.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)}},242:function(g,x,f){var l=f(6192),I=f(8182),b=f(4218),w=I("species");g.exports=function(k){return b>=51||!l(function(){var j=[],p=j.constructor={};return p[w]=function(){return{foo:1}},j[k](Boolean).foo!==1})}},424:function(g,x,f){"use strict";var l=f(6192);g.exports=function(I,b){var w=[][I];return!!w&&l(function(){w.call(null,b||function(){throw 1},1)})}},3712:function(g,x,f){var l=f(4770),I=f(2091),b=f(5744),w=f(8182),k=w("species");g.exports=function(j){var p;return l(j)&&(p=j.constructor,I(p)&&(p===Array||l(p.prototype))?p=void 0:b(p)&&(p=p[k],p===null&&(p=void 0))),p===void 0?Array:p}},1321:function(g,x,f){var l=f(3712);g.exports=function(I,b){return new(l(I))(b===0?0:b)}},1635:function(g,x,f){var l=f(1138),I=f(6639);g.exports=function(b,w,k,j){try{return j?w(l(k)[0],k[1]):w(k)}catch(p){I(b,"throw",p)}}},9770:function(g,x,f){var l=f(8182),I=l("iterator"),b=!1;try{var w=0,k={next:function(){return{done:!!w++}},return:function(){b=!0}};k[I]=function(){return this},Array.from(k,function(){throw 2})}catch(j){}g.exports=function(j,p){if(!p&&!b)return!1;var a=!1;try{var d={};d[I]=function(){return{next:function(){return{done:a=!0}}}},j(d)}catch(u){}return a}},9272:function(g){var x={}.toString;g.exports=function(f){return x.call(f).slice(8,-1)}},4696:function(g,x,f){var l=f(3471),I=f(6447),b=f(9272),w=f(8182),k=w("toStringTag"),j=b(function(){return arguments}())=="Arguments",p=function(a,d){try{return a[d]}catch(u){}};g.exports=l?b:function(a){var d,u,t;return a===void 0?"Undefined":a===null?"Null":typeof(u=p(d=Object(a),k))=="string"?u:j?b(d):(t=b(d))=="Object"&&I(d.callee)?"Arguments":t}},4635:function(g,x,f){var l=f(6192);g.exports=!l(function(){function I(){}return I.prototype.constructor=null,Object.getPrototypeOf(new I)!==I.prototype})},5148:function(g,x,f){"use strict";var l=f(4413).IteratorPrototype,I=f(2853),b=f(774),w=f(1284),k=f(7771),j=function(){return this};g.exports=function(p,a,d){var u=a+" Iterator";return p.prototype=I(l,{next:b(1,d)}),w(p,u,!1,!0),k[u]=j,p}},8711:function(g,x,f){var l=f(69),I=f(2760),b=f(774);g.exports=l?function(w,k,j){return I.f(w,k,b(1,j))}:function(w,k,j){return w[k]=j,w}},774:function(g){g.exports=function(x,f){return{enumerable:!(x&1),configurable:!(x&2),writable:!(x&4),value:f}}},9361:function(g,x,f){"use strict";var l=f(77),I=f(2760),b=f(774);g.exports=function(w,k,j){var p=l(k);p in w?I.f(w,p,b(0,j)):w[p]=j}},7218:function(g,x,f){"use strict";var l=f(3085),I=f(5546),b=f(2282),w=f(6447),k=f(5148),j=f(9341),p=f(4469),a=f(1284),d=f(8711),u=f(9482),t=f(8182),e=f(7771),i=f(4413),s=b.PROPER,m=b.CONFIGURABLE,o=i.IteratorPrototype,y=i.BUGGY_SAFARI_ITERATORS,C=t("iterator"),M="keys",T="values",D="entries",L=function(){return this};g.exports=function(R,F,W,ot,it,Mt,$){k(W,F,ot);var bt=function(H){if(H===it&&V)return V;if(!y&&H in gt)return gt[H];switch(H){case M:return function(){return new W(this,H)};case T:return function(){return new W(this,H)};case D:return function(){return new W(this,H)}}return function(){return new W(this)}},U=F+" Iterator",jt=!1,gt=R.prototype,Nt=gt[C]||gt["@@iterator"]||it&&gt[it],V=!y&&Nt||bt(it),q=F=="Array"&&gt.entries||Nt,Q,G,rt;if(q&&(Q=j(q.call(new R)),Q!==Object.prototype&&Q.next&&(!I&&j(Q)!==o&&(p?p(Q,o):w(Q[C])||u(Q,C,L)),a(Q,U,!0,!0),I&&(e[U]=L))),s&&it==T&&Nt&&Nt.name!==T&&(!I&&m?d(gt,"name",T):(jt=!0,V=function(){return Nt.call(this)})),it)if(G={values:bt(T),keys:Mt?V:bt(M),entries:bt(D)},$)for(rt in G)(y||jt||!(rt in gt))&&u(gt,rt,G[rt]);else l({target:F,proto:!0,forced:y||jt},G);return(!I||$)&&gt[C]!==V&&u(gt,C,V,{name:it}),e[F]=V,G}},1488:function(g,x,f){var l=f(7545),I=f(4500),b=f(9207),w=f(2760).f;g.exports=function(k){var j=l.Symbol||(l.Symbol={});I(j,k)||w(j,k,{value:b.f(k)})}},69:function(g,x,f){var l=f(6192);g.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},7449:function(g,x,f){var l=f(8576),I=f(5744),b=l.document,w=I(b)&&I(b.createElement);g.exports=function(k){return w?b.createElement(k):{}}},7365:function(g){g.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2957:function(g){g.exports=typeof window=="object"},9347:function(g,x,f){var l=f(8989),I=f(8576);g.exports=/ipad|iphone|ipod/i.test(l)&&I.Pebble!==void 0},9536:function(g,x,f){var l=f(8989);g.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},224:function(g,x,f){var l=f(9272),I=f(8576);g.exports=l(I.process)=="process"},5914:function(g,x,f){var l=f(8989);g.exports=/web0s(?!.*chrome)/i.test(l)},8989:function(g,x,f){var l=f(150);g.exports=l("navigator","userAgent")||""},4218:function(g,x,f){var l=f(8576),I=f(8989),b=l.process,w=l.Deno,k=b&&b.versions||w&&w.version,j=k&&k.v8,p,a;j?(p=j.split("."),a=p[0]<4?1:p[0]+p[1]):I&&(p=I.match(/Edge\/(\d+)/),(!p||p[1]>=74)&&(p=I.match(/Chrome\/(\d+)/),p&&(a=p[1]))),g.exports=a&&+a},5607:function(g,x,f){var l=f(7545);g.exports=function(I){return l[I+"Prototype"]}},2952:function(g){g.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3085:function(g,x,f){"use strict";var l=f(8576),I=f(6447),b=f(5141).f,w=f(9245),k=f(7545),j=f(8043),p=f(8711),a=f(4500),d=function(u){var t=function(e,i,s){if(this instanceof u){switch(arguments.length){case 0:return new u;case 1:return new u(e);case 2:return new u(e,i)}return new u(e,i,s)}return u.apply(this,arguments)};return t.prototype=u.prototype,t};g.exports=function(u,t){var e=u.target,i=u.global,s=u.stat,m=u.proto,o=i?l:s?l[e]:(l[e]||{}).prototype,y=i?k:k[e]||p(k,e,{})[e],C=y.prototype,M,T,D,L,R,F,W,ot,it;for(L in t)M=w(i?L:e+(s?".":"#")+L,u.forced),T=!M&&o&&a(o,L),F=y[L],T&&(u.noTargetGet?(it=b(o,L),W=it&&it.value):W=o[L]),R=T&&W?W:t[L],!(T&&typeof F==typeof R)&&(u.bind&&T?ot=j(R,l):u.wrap&&T?ot=d(R):m&&I(R)?ot=j(Function.call,R):ot=R,(u.sham||R&&R.sham||F&&F.sham)&&p(ot,"sham",!0),p(y,L,ot),m&&(D=e+"Prototype",a(k,D)||p(k,D,{}),p(k[D],L,R),u.real&&C&&!C[L]&&p(C,L,R)))}},6192:function(g){g.exports=function(x){try{return!!x()}catch(f){return!0}}},8043:function(g,x,f){var l=f(6235);g.exports=function(I,b,w){if(l(I),b===void 0)return I;switch(w){case 0:return function(){return I.call(b)};case 1:return function(k){return I.call(b,k)};case 2:return function(k,j){return I.call(b,k,j)};case 3:return function(k,j,p){return I.call(b,k,j,p)}}return function(){return I.apply(b,arguments)}}},6782:function(g,x,f){"use strict";var l=f(6235),I=f(5744),b=[].slice,w={},k=function(j,p,a){if(!(p in w)){for(var d=[],u=0;u<p;u++)d[u]="a["+u+"]";w[p]=Function("C,a","return new C("+d.join(",")+")")}return w[p](j,a)};g.exports=Function.bind||function(p){var a=l(this),d=b.call(arguments,1),u=function(){var e=d.concat(b.call(arguments));return this instanceof u?k(a,e.length,e):a.apply(p,e)};return I(a.prototype)&&(u.prototype=a.prototype),u}},2282:function(g,x,f){var l=f(69),I=f(4500),b=Function.prototype,w=l&&Object.getOwnPropertyDescriptor,k=I(b,"name"),j=k&&function(){}.name==="something",p=k&&(!l||l&&w(b,"name").configurable);g.exports={EXISTS:k,PROPER:j,CONFIGURABLE:p}},150:function(g,x,f){var l=f(7545),I=f(8576),b=f(6447),w=function(k){return b(k)?k:void 0};g.exports=function(k,j){return arguments.length<2?w(l[k])||w(I[k]):l[k]&&l[k][j]||I[k]&&I[k][j]}},8703:function(g,x,f){var l=f(4696),I=f(5037),b=f(7771),w=f(8182),k=w("iterator");g.exports=function(j){if(j!=null)return I(j,k)||I(j,"@@iterator")||b[l(j)]}},1669:function(g,x,f){var l=f(6235),I=f(1138),b=f(8703);g.exports=function(w,k){var j=arguments.length<2?b(w):k;if(l(j))return I(j.call(w));throw TypeError(String(w)+" is not iterable")}},5037:function(g,x,f){var l=f(6235);g.exports=function(I,b){var w=I[b];return w==null?void 0:l(w)}},8576:function(g,x,f){var l=function(I){return I&&I.Math==Math&&I};g.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof f.g=="object"&&f.g)||function(){return this}()||Function("return this")()},4500:function(g,x,f){var l=f(1795),I={}.hasOwnProperty;g.exports=Object.hasOwn||function(w,k){return I.call(l(w),k)}},4535:function(g){g.exports={}},3681:function(g,x,f){var l=f(8576);g.exports=function(I,b){var w=l.console;w&&w.error&&(arguments.length===1?w.error(I):w.error(I,b))}},7403:function(g,x,f){var l=f(150);g.exports=l("document","documentElement")},188:function(g,x,f){var l=f(69),I=f(6192),b=f(7449);g.exports=!l&&!I(function(){return Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a!=7})},2202:function(g,x,f){var l=f(6192),I=f(9272),b="".split;g.exports=l(function(){return!Object("z").propertyIsEnumerable(0)})?function(w){return I(w)=="String"?b.call(w,""):Object(w)}:Object},9516:function(g,x,f){var l=f(6447),I=f(6434),b=Function.toString;l(I.inspectSource)||(I.inspectSource=function(w){return b.call(w)}),g.exports=I.inspectSource},273:function(g,x,f){var l=f(5744),I=f(8711);g.exports=function(b,w){l(w)&&"cause"in w&&I(b,"cause",b.cause)}},3326:function(g,x,f){var l=f(8921),I=f(8576),b=f(5744),w=f(8711),k=f(4500),j=f(6434),p=f(9766),a=f(4535),d="Object already initialized",u=I.WeakMap,t,e,i,s=function(D){return i(D)?e(D):t(D,{})},m=function(D){return function(L){var R;if(!b(L)||(R=e(L)).type!==D)throw TypeError("Incompatible receiver, "+D+" required");return R}};if(l||j.state){var o=j.state||(j.state=new u),y=o.get,C=o.has,M=o.set;t=function(D,L){if(C.call(o,D))throw new TypeError(d);return L.facade=D,M.call(o,D,L),L},e=function(D){return y.call(o,D)||{}},i=function(D){return C.call(o,D)}}else{var T=p("state");a[T]=!0,t=function(D,L){if(k(D,T))throw new TypeError(d);return L.facade=D,w(D,T,L),L},e=function(D){return k(D,T)?D[T]:{}},i=function(D){return k(D,T)}}g.exports={set:t,get:e,has:i,enforce:s,getterFor:m}},6109:function(g,x,f){var l=f(8182),I=f(7771),b=l("iterator"),w=Array.prototype;g.exports=function(k){return k!==void 0&&(I.Array===k||w[b]===k)}},4770:function(g,x,f){var l=f(9272);g.exports=Array.isArray||function(b){return l(b)=="Array"}},6447:function(g){g.exports=function(x){return typeof x=="function"}},2091:function(g,x,f){var l=f(6192),I=f(6447),b=f(4696),w=f(150),k=f(9516),j=[],p=w("Reflect","construct"),a=/^\s*(?:class|function)\b/,d=a.exec,u=!a.exec(function(){}),t=function(i){if(!I(i))return!1;try{return p(Object,j,i),!0}catch(s){return!1}},e=function(i){if(!I(i))return!1;switch(b(i)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return u||!!d.call(a,k(i))};g.exports=!p||l(function(){var i;return t(t.call)||!t(Object)||!t(function(){i=!0})||i})?e:t},9245:function(g,x,f){var l=f(6192),I=f(6447),b=/#|\.prototype\./,w=function(d,u){var t=j[k(d)];return t==a?!0:t==p?!1:I(u)?l(u):!!u},k=w.normalize=function(d){return String(d).replace(b,".").toLowerCase()},j=w.data={},p=w.NATIVE="N",a=w.POLYFILL="P";g.exports=w},5744:function(g,x,f){var l=f(6447);g.exports=function(I){return typeof I=="object"?I!==null:l(I)}},5546:function(g){g.exports=!0},3236:function(g,x,f){var l=f(6447),I=f(150),b=f(615);g.exports=b?function(w){return typeof w=="symbol"}:function(w){var k=I("Symbol");return l(k)&&Object(w)instanceof k}},3442:function(g,x,f){var l=f(1138),I=f(6109),b=f(4104),w=f(8043),k=f(1669),j=f(8703),p=f(6639),a=function(d,u){this.stopped=d,this.result=u};g.exports=function(d,u,t){var e=t&&t.that,i=!!(t&&t.AS_ENTRIES),s=!!(t&&t.IS_ITERATOR),m=!!(t&&t.INTERRUPTED),o=w(u,e,1+i+m),y,C,M,T,D,L,R,F=function(ot){return y&&p(y,"normal",ot),new a(!0,ot)},W=function(ot){return i?(l(ot),m?o(ot[0],ot[1],F):o(ot[0],ot[1])):m?o(ot,F):o(ot)};if(s)y=d;else{if(C=j(d),!C)throw TypeError(String(d)+" is not iterable");if(I(C)){for(M=0,T=b(d);T>M;M++)if(D=W(d[M]),D&&D instanceof a)return D;return new a(!1)}y=k(d,C)}for(L=y.next;!(R=L.call(y)).done;){try{D=W(R.value)}catch(ot){p(y,"throw",ot)}if(typeof D=="object"&&D&&D instanceof a)return D}return new a(!1)}},6639:function(g,x,f){var l=f(1138),I=f(5037);g.exports=function(b,w,k){var j,p;l(b);try{if(j=I(b,"return"),!j){if(w==="throw")throw k;return k}j=j.call(b)}catch(a){p=!0,j=a}if(w==="throw")throw k;if(p)throw j;return l(j),k}},4413:function(g,x,f){"use strict";var l=f(6192),I=f(6447),b=f(2853),w=f(9341),k=f(9482),j=f(8182),p=f(5546),a=j("iterator"),d=!1,u,t,e;[].keys&&(e=[].keys(),"next"in e?(t=w(w(e)),t!==Object.prototype&&(u=t)):d=!0);var i=u==null||l(function(){var s={};return u[a].call(s)!==s});i?u={}:p&&(u=b(u)),I(u[a])||k(u,a,function(){return this}),g.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:d}},7771:function(g){g.exports={}},4104:function(g,x,f){var l=f(8445);g.exports=function(I){return l(I.length)}},2950:function(g,x,f){var l=f(8576),I=f(5141).f,b=f(7160).set,w=f(9536),k=f(9347),j=f(5914),p=f(224),a=l.MutationObserver||l.WebKitMutationObserver,d=l.document,u=l.process,t=l.Promise,e=I(l,"queueMicrotask"),i=e&&e.value,s,m,o,y,C,M,T,D;i||(s=function(){var L,R;for(p&&(L=u.domain)&&L.exit();m;){R=m.fn,m=m.next;try{R()}catch(F){throw m?y():o=void 0,F}}o=void 0,L&&L.enter()},!w&&!p&&!j&&a&&d?(C=!0,M=d.createTextNode(""),new a(s).observe(M,{characterData:!0}),y=function(){M.data=C=!C}):!k&&t&&t.resolve?(T=t.resolve(void 0),T.constructor=t,D=T.then,y=function(){D.call(T,s)}):p?y=function(){u.nextTick(s)}:y=function(){b.call(l,s)}),g.exports=i||function(L){var R={fn:L,next:void 0};o&&(o.next=R),m||(m=R,y()),o=R}},4471:function(g,x,f){var l=f(8576);g.exports=l.Promise},3045:function(g,x,f){var l=f(4218),I=f(6192);g.exports=!!Object.getOwnPropertySymbols&&!I(function(){var b=Symbol();return!String(b)||!(Object(b)instanceof Symbol)||!Symbol.sham&&l&&l<41})},4551:function(g,x,f){var l=f(6192),I=f(8182),b=f(5546),w=I("iterator");g.exports=!l(function(){var k=new URL("b?a=1&b=2&c=3","http://a"),j=k.searchParams,p="";return k.pathname="c%20d",j.forEach(function(a,d){j.delete("b"),p+=d+a}),b&&!k.toJSON||!j.sort||k.href!=="http://a/c%20d?a=1&c=3"||j.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!j[w]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||p!=="a1c3"||new URL("http://x",void 0).host!=="x"})},8921:function(g,x,f){var l=f(8576),I=f(6447),b=f(9516),w=l.WeakMap;g.exports=I(w)&&/native code/.test(b(w))},9438:function(g,x,f){"use strict";var l=f(6235),I=function(b){var w,k;this.promise=new b(function(j,p){if(w!==void 0||k!==void 0)throw TypeError("Bad Promise constructor");w=j,k=p}),this.resolve=l(w),this.reject=l(k)};g.exports.f=function(b){return new I(b)}},15:function(g,x,f){var l=f(8576),I=f(6192),b=f(4845),w=f(4277).trim,k=f(1450),j=l.parseFloat,p=l.Symbol,a=p&&p.iterator,d=1/j(k+"-0")!==-1/0||a&&!I(function(){j(Object(a))});g.exports=d?function(t){var e=w(b(t)),i=j(e);return i===0&&e.charAt(0)=="-"?-0:i}:j},2558:function(g,x,f){var l=f(8576),I=f(6192),b=f(4845),w=f(4277).trim,k=f(1450),j=l.parseInt,p=l.Symbol,a=p&&p.iterator,d=/^[+-]?0[Xx]/,u=j(k+"08")!==8||j(k+"0x16")!==22||a&&!I(function(){j(Object(a))});g.exports=u?function(e,i){var s=w(b(e));return j(s,i>>>0||(d.test(s)?16:10))}:j},2503:function(g,x,f){"use strict";var l=f(69),I=f(6192),b=f(7653),w=f(4750),k=f(6007),j=f(1795),p=f(2202),a=Object.assign,d=Object.defineProperty;g.exports=!a||I(function(){if(l&&a({b:1},a(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var u={},t={},e=Symbol(),i="abcdefghijklmnopqrst";return u[e]=7,i.split("").forEach(function(s){t[s]=s}),a({},u)[e]!=7||b(a({},t)).join("")!=i})?function(t,e){for(var i=j(t),s=arguments.length,m=1,o=w.f,y=k.f;s>m;)for(var C=p(arguments[m++]),M=o?b(C).concat(o(C)):b(C),T=M.length,D=0,L;T>D;)L=M[D++],(!l||y.call(C,L))&&(i[L]=C[L]);return i}:a},2853:function(g,x,f){var l=f(1138),I=f(1187),b=f(2952),w=f(4535),k=f(7403),j=f(7449),p=f(9766),a=">",d="<",u="prototype",t="script",e=p("IE_PROTO"),i=function(){},s=function(M){return d+t+a+M+d+"/"+t+a},m=function(M){M.write(s("")),M.close();var T=M.parentWindow.Object;return M=null,T},o=function(){var M=j("iframe"),T="java"+t+":",D;return M.style.display="none",k.appendChild(M),M.src=String(T),D=M.contentWindow.document,D.open(),D.write(s("document.F=Object")),D.close(),D.F},y,C=function(){try{y=new ActiveXObject("htmlfile")}catch(T){}C=typeof document!="undefined"?document.domain&&y?m(y):o():m(y);for(var M=b.length;M--;)delete C[u][b[M]];return C()};w[e]=!0,g.exports=Object.create||function(T,D){var L;return T!==null?(i[u]=l(T),L=new i,i[u]=null,L[e]=T):L=C(),D===void 0?L:I(L,D)}},1187:function(g,x,f){var l=f(69),I=f(2760),b=f(1138),w=f(7653);g.exports=l?Object.defineProperties:function(j,p){b(j);for(var a=w(p),d=a.length,u=0,t;d>u;)I.f(j,t=a[u++],p[t]);return j}},2760:function(g,x,f){var l=f(69),I=f(188),b=f(1138),w=f(77),k=Object.defineProperty;x.f=l?k:function(p,a,d){if(b(p),a=w(a),b(d),I)try{return k(p,a,d)}catch(u){}if("get"in d||"set"in d)throw TypeError("Accessors not supported");return"value"in d&&(p[a]=d.value),p}},5141:function(g,x,f){var l=f(69),I=f(6007),b=f(774),w=f(101),k=f(77),j=f(4500),p=f(188),a=Object.getOwnPropertyDescriptor;x.f=l?a:function(u,t){if(u=w(u),t=k(t),p)try{return a(u,t)}catch(e){}if(j(u,t))return b(!I.f.call(u,t),u[t])}},4052:function(g,x,f){var l=f(101),I=f(2092).f,b={}.toString,w=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],k=function(j){try{return I(j)}catch(p){return w.slice()}};g.exports.f=function(p){return w&&b.call(p)=="[object Window]"?k(p):I(l(p))}},2092:function(g,x,f){var l=f(7934),I=f(2952),b=I.concat("length","prototype");x.f=Object.getOwnPropertyNames||function(k){return l(k,b)}},4750:function(g,x){x.f=Object.getOwnPropertySymbols},9341:function(g,x,f){var l=f(4500),I=f(6447),b=f(1795),w=f(9766),k=f(4635),j=w("IE_PROTO"),p=Object.prototype;g.exports=k?Object.getPrototypeOf:function(a){var d=b(a);if(l(d,j))return d[j];var u=d.constructor;return I(u)&&d instanceof u?u.prototype:d instanceof Object?p:null}},7934:function(g,x,f){var l=f(4500),I=f(101),b=f(8180).indexOf,w=f(4535);g.exports=function(k,j){var p=I(k),a=0,d=[],u;for(u in p)!l(w,u)&&l(p,u)&&d.push(u);for(;j.length>a;)l(p,u=j[a++])&&(~b(d,u)||d.push(u));return d}},7653:function(g,x,f){var l=f(7934),I=f(2952);g.exports=Object.keys||function(w){return l(w,I)}},6007:function(g,x){"use strict";var f={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,I=l&&!f.call({1:2},1);x.f=I?function(w){var k=l(this,w);return!!k&&k.enumerable}:f},4469:function(g,x,f){var l=f(1138),I=f(7757);g.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var b=!1,w={},k;try{k=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,k.call(w,[]),b=w instanceof Array}catch(j){}return function(p,a){return l(p),I(a),b?k.call(p,a):p.__proto__=a,p}}():void 0)},158:function(g,x,f){"use strict";var l=f(3471),I=f(4696);g.exports=l?{}.toString:function(){return"[object "+I(this)+"]"}},380:function(g,x,f){var l=f(6447),I=f(5744);g.exports=function(b,w){var k,j;if(w==="string"&&l(k=b.toString)&&!I(j=k.call(b))||l(k=b.valueOf)&&!I(j=k.call(b))||w!=="string"&&l(k=b.toString)&&!I(j=k.call(b)))return j;throw TypeError("Can't convert object to primitive value")}},7545:function(g){g.exports={}},892:function(g){g.exports=function(x){try{return{error:!1,value:x()}}catch(f){return{error:!0,value:f}}}},9126:function(g,x,f){var l=f(1138),I=f(5744),b=f(9438);g.exports=function(w,k){if(l(w),I(k)&&k.constructor===w)return k;var j=b.f(w),p=j.resolve;return p(k),j.promise}},533:function(g,x,f){var l=f(9482);g.exports=function(I,b,w){for(var k in b)w&&w.unsafe&&I[k]?I[k]=b[k]:l(I,k,b[k],w);return I}},9482:function(g,x,f){var l=f(8711);g.exports=function(I,b,w,k){k&&k.enumerable?I[b]=w:l(I,b,w)}},3209:function(g){g.exports=function(x){if(x==null)throw TypeError("Can't call method on "+x);return x}},7613:function(g,x,f){var l=f(8576);g.exports=function(I,b){try{Object.defineProperty(l,I,{value:b,configurable:!0,writable:!0})}catch(w){l[I]=b}return b}},3656:function(g,x,f){"use strict";var l=f(150),I=f(2760),b=f(8182),w=f(69),k=b("species");g.exports=function(j){var p=l(j),a=I.f;w&&p&&!p[k]&&a(p,k,{configurable:!0,get:function(){return this}})}},1284:function(g,x,f){var l=f(3471),I=f(2760).f,b=f(8711),w=f(4500),k=f(158),j=f(8182),p=j("toStringTag");g.exports=function(a,d,u,t){if(a){var e=u?a:a.prototype;w(e,p)||I(e,p,{configurable:!0,value:d}),t&&!l&&b(e,"toString",k)}}},9766:function(g,x,f){var l=f(8717),I=f(2759),b=l("keys");g.exports=function(w){return b[w]||(b[w]=I(w))}},6434:function(g,x,f){var l=f(8576),I=f(7613),b="__core-js_shared__",w=l[b]||I(b,{});g.exports=w},8717:function(g,x,f){var l=f(5546),I=f(6434);(g.exports=function(b,w){return I[b]||(I[b]=w!==void 0?w:{})})("versions",[]).push({version:"3.18.2",mode:l?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})},4743:function(g,x,f){var l=f(1138),I=f(1404),b=f(8182),w=b("species");g.exports=function(k,j){var p=l(k).constructor,a;return p===void 0||(a=l(p)[w])==null?j:I(a)}},863:function(g,x,f){var l=f(1941),I=f(4845),b=f(3209),w=function(k){return function(j,p){var a=I(b(j)),d=l(p),u=a.length,t,e;return d<0||d>=u?k?"":void 0:(t=a.charCodeAt(d),t<55296||t>56319||d+1===u||(e=a.charCodeAt(d+1))<56320||e>57343?k?a.charAt(d):t:k?a.slice(d,d+2):(t-55296<<10)+(e-56320)+65536)}};g.exports={codeAt:w(!1),charAt:w(!0)}},7977:function(g){"use strict";var x=2147483647,f=36,l=1,I=26,b=38,w=700,k=72,j=128,p="-",a=/[^\0-\u007E]/,d=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",t=f-l,e=Math.floor,i=String.fromCharCode,s=function(C){for(var M=[],T=0,D=C.length;T<D;){var L=C.charCodeAt(T++);if(L>=55296&&L<=56319&&T<D){var R=C.charCodeAt(T++);(R&64512)==56320?M.push(((L&1023)<<10)+(R&1023)+65536):(M.push(L),T--)}else M.push(L)}return M},m=function(C){return C+22+75*(C<26)},o=function(C,M,T){var D=0;for(C=T?e(C/w):C>>1,C+=e(C/M);C>t*I>>1;D+=f)C=e(C/t);return e(D+(t+1)*C/(C+b))},y=function(C){var M=[];C=s(C);var T=C.length,D=j,L=0,R=k,F,W;for(F=0;F<C.length;F++)W=C[F],W<128&&M.push(i(W));var ot=M.length,it=ot;for(ot&&M.push(p);it<T;){var Mt=x;for(F=0;F<C.length;F++)W=C[F],W>=D&&W<Mt&&(Mt=W);var $=it+1;if(Mt-D>e((x-L)/$))throw RangeError(u);for(L+=(Mt-D)*$,D=Mt,F=0;F<C.length;F++){if(W=C[F],W<D&&++L>x)throw RangeError(u);if(W==D){for(var bt=L,U=f;;U+=f){var jt=U<=R?l:U>=R+I?I:U-R;if(bt<jt)break;var gt=bt-jt,Nt=f-jt;M.push(i(m(jt+gt%Nt))),bt=e(gt/Nt)}M.push(i(m(bt))),R=o(L,$,it==ot),L=0,++it}}++L,++D}return M.join("")};g.exports=function(C){var M=[],T=C.toLowerCase().replace(d,".").split("."),D,L;for(D=0;D<T.length;D++)L=T[D],M.push(a.test(L)?"xn--"+y(L):L);return M.join(".")}},6815:function(g,x,f){var l=f(2282).PROPER,I=f(6192),b=f(1450),w="\u200B\x85\u180E";g.exports=function(k){return I(function(){return!!b[k]()||w[k]()!==w||l&&b[k].name!==k})}},4277:function(g,x,f){var l=f(3209),I=f(4845),b=f(1450),w="["+b+"]",k=RegExp("^"+w+w+"*"),j=RegExp(w+w+"*$"),p=function(a){return function(d){var u=I(l(d));return a&1&&(u=u.replace(k,"")),a&2&&(u=u.replace(j,"")),u}};g.exports={start:p(1),end:p(2),trim:p(3)}},7160:function(g,x,f){var l=f(8576),I=f(6447),b=f(6192),w=f(8043),k=f(7403),j=f(7449),p=f(9536),a=f(224),d=l.setImmediate,u=l.clearImmediate,t=l.process,e=l.MessageChannel,i=l.Dispatch,s=0,m={},o="onreadystatechange",y,C,M,T;try{y=l.location}catch(W){}var D=function(W){if(m.hasOwnProperty(W)){var ot=m[W];delete m[W],ot()}},L=function(W){return function(){D(W)}},R=function(W){D(W.data)},F=function(W){l.postMessage(String(W),y.protocol+"//"+y.host)};(!d||!u)&&(d=function(ot){for(var it=[],Mt=arguments.length,$=1;Mt>$;)it.push(arguments[$++]);return m[++s]=function(){(I(ot)?ot:Function(ot)).apply(void 0,it)},C(s),s},u=function(ot){delete m[ot]},a?C=function(W){t.nextTick(L(W))}:i&&i.now?C=function(W){i.now(L(W))}:e&&!p?(M=new e,T=M.port2,M.port1.onmessage=R,C=w(T.postMessage,T,1)):l.addEventListener&&I(l.postMessage)&&!l.importScripts&&y&&y.protocol!=="file:"&&!b(F)?(C=F,l.addEventListener("message",R,!1)):o in j("script")?C=function(W){k.appendChild(j("script"))[o]=function(){k.removeChild(this),D(W)}}:C=function(W){setTimeout(L(W),0)}),g.exports={set:d,clear:u}},7739:function(g,x,f){var l=f(1941),I=Math.max,b=Math.min;g.exports=function(w,k){var j=l(w);return j<0?I(j+k,0):b(j,k)}},101:function(g,x,f){var l=f(2202),I=f(3209);g.exports=function(b){return l(I(b))}},1941:function(g){var x=Math.ceil,f=Math.floor;g.exports=function(l){var I=+l;return I!==I||I===0?0:(I>0?f:x)(I)}},8445:function(g,x,f){var l=f(1941),I=Math.min;g.exports=function(b){return b>0?I(l(b),9007199254740991):0}},1795:function(g,x,f){var l=f(3209);g.exports=function(I){return Object(l(I))}},7888:function(g,x,f){var l=f(5744),I=f(3236),b=f(5037),w=f(380),k=f(8182),j=k("toPrimitive");g.exports=function(p,a){if(!l(p)||I(p))return p;var d=b(p,j),u;if(d){if(a===void 0&&(a="default"),u=d.call(p,a),!l(u)||I(u))return u;throw TypeError("Can't convert object to primitive value")}return a===void 0&&(a="number"),w(p,a)}},77:function(g,x,f){var l=f(7888),I=f(3236);g.exports=function(b){var w=l(b,"string");return I(w)?w:String(w)}},3471:function(g,x,f){var l=f(8182),I=l("toStringTag"),b={};b[I]="z",g.exports=String(b)==="[object z]"},4845:function(g,x,f){var l=f(4696);g.exports=function(I){if(l(I)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(I)}},9288:function(g){g.exports=function(x){try{return String(x)}catch(f){return"Object"}}},2759:function(g){var x=0,f=Math.random();g.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++x+f).toString(36)}},615:function(g,x,f){var l=f(3045);g.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},9207:function(g,x,f){var l=f(8182);x.f=l},8182:function(g,x,f){var l=f(8576),I=f(8717),b=f(4500),w=f(2759),k=f(3045),j=f(615),p=I("wks"),a=l.Symbol,d=j?a:a&&a.withoutSetter||w;g.exports=function(u){return(!b(p,u)||!(k||typeof p[u]=="string"))&&(k&&b(a,u)?p[u]=a[u]:p[u]=d("Symbol."+u)),p[u]}},1450:function(g){g.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},4242:function(g,x,f){"use strict";var l=f(3085),I=f(9341),b=f(4469),w=f(2853),k=f(8711),j=f(774),p=f(273),a=f(3442),d=f(4845),u=function(e,i){var s=this,m=arguments.length>2?arguments[2]:void 0;if(!(s instanceof u))return new u(e,i,m);b&&(s=b(new Error(void 0),I(s))),i!==void 0&&k(s,"message",d(i)),p(s,m);var o=[];return a(e,o.push,{that:o}),k(s,"errors",o),s};u.prototype=w(Error.prototype,{constructor:j(5,u),message:j(5,""),name:j(5,"AggregateError")}),l({global:!0},{AggregateError:u})},9106:function(g,x,f){"use strict";var l=f(3085),I=f(6192),b=f(4770),w=f(5744),k=f(1795),j=f(4104),p=f(9361),a=f(1321),d=f(242),u=f(8182),t=f(4218),e=u("isConcatSpreadable"),i=9007199254740991,s="Maximum allowed index exceeded",m=t>=51||!I(function(){var M=[];return M[e]=!1,M.concat()[0]!==M}),o=d("concat"),y=function(M){if(!w(M))return!1;var T=M[e];return T!==void 0?!!T:b(M)},C=!m||!o;l({target:"Array",proto:!0,forced:C},{concat:function(T){var D=k(this),L=a(D,0),R=0,F,W,ot,it,Mt;for(F=-1,ot=arguments.length;F<ot;F++)if(Mt=F===-1?D:arguments[F],y(Mt)){if(it=j(Mt),R+it>i)throw TypeError(s);for(W=0;W<it;W++,R++)W in Mt&&p(L,R,Mt[W])}else{if(R>=i)throw TypeError(s);p(L,R++,Mt)}return L.length=R,L}})},1710:function(g,x,f){var l=f(3085),I=f(2724),b=f(7423);l({target:"Array",proto:!0},{fill:I}),b("fill")},3436:function(g,x,f){"use strict";var l=f(3085),I=f(454).filter,b=f(242),w=b("filter");l({target:"Array",proto:!0,forced:!w},{filter:function(j){return I(this,j,arguments.length>1?arguments[1]:void 0)}})},9823:function(g,x,f){"use strict";var l=f(3085),I=f(7397);l({target:"Array",proto:!0,forced:[].forEach!=I},{forEach:I})},9173:function(g,x,f){var l=f(3085),I=f(841),b=f(9770),w=!b(function(k){Array.from(k)});l({target:"Array",stat:!0,forced:w},{from:I})},2276:function(g,x,f){"use strict";var l=f(3085),I=f(8180).indexOf,b=f(424),w=[].indexOf,k=!!w&&1/[1].indexOf(1,-0)<0,j=b("indexOf");l({target:"Array",proto:!0,forced:k||!j},{indexOf:function(a){return k?w.apply(this,arguments)||0:I(this,a,arguments.length>1?arguments[1]:void 0)}})},8118:function(g,x,f){var l=f(3085),I=f(4770);l({target:"Array",stat:!0},{isArray:I})},8939:function(g,x,f){"use strict";var l=f(101),I=f(7423),b=f(7771),w=f(3326),k=f(7218),j="Array Iterator",p=w.set,a=w.getterFor(j);g.exports=k(Array,"Array",function(d,u){p(this,{type:j,target:l(d),index:0,kind:u})},function(){var d=a(this),u=d.target,t=d.kind,e=d.index++;return!u||e>=u.length?(d.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:e,done:!1}:t=="values"?{value:u[e],done:!1}:{value:[e,u[e]],done:!1}},"values"),b.Arguments=b.Array,I("keys"),I("values"),I("entries")},3838:function(g,x,f){"use strict";var l=f(3085),I=f(454).map,b=f(242),w=b("map");l({target:"Array",proto:!0,forced:!w},{map:function(j){return I(this,j,arguments.length>1?arguments[1]:void 0)}})},5818:function(g,x,f){"use strict";var l=f(3085),I=f(4770),b=f(2091),w=f(5744),k=f(7739),j=f(4104),p=f(101),a=f(9361),d=f(8182),u=f(242),t=u("slice"),e=d("species"),i=[].slice,s=Math.max;l({target:"Array",proto:!0,forced:!t},{slice:function(o,y){var C=p(this),M=j(C),T=k(o,M),D=k(y===void 0?M:y,M),L,R,F;if(I(C)&&(L=C.constructor,b(L)&&(L===Array||I(L.prototype))?L=void 0:w(L)&&(L=L[e],L===null&&(L=void 0)),L===Array||L===void 0))return i.call(C,T,D);for(R=new(L===void 0?Array:L)(s(D-T,0)),F=0;T<D;T++,F++)T in C&&a(R,F,C[T]);return R.length=F,R}})},2178:function(g,x,f){"use strict";var l=f(3085),I=f(7739),b=f(1941),w=f(4104),k=f(1795),j=f(1321),p=f(9361),a=f(242),d=a("splice"),u=Math.max,t=Math.min,e=9007199254740991,i="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!d},{splice:function(m,o){var y=k(this),C=w(y),M=I(m,C),T=arguments.length,D,L,R,F,W,ot;if(T===0?D=L=0:T===1?(D=0,L=C-M):(D=T-2,L=t(u(b(o),0),C-M)),C+D-L>e)throw TypeError(i);for(R=j(y,L),F=0;F<L;F++)W=M+F,W in y&&p(R,F,y[W]);if(R.length=L,D<L){for(F=M;F<C-L;F++)W=F+L,ot=F+D,W in y?y[ot]=y[W]:delete y[ot];for(F=C;F>C-L+D;F--)delete y[F-1]}else if(D>L)for(F=C-L;F>M;F--)W=F+L-1,ot=F+D-1,W in y?y[ot]=y[W]:delete y[ot];for(F=0;F<D;F++)y[F+M]=arguments[F+2];return y.length=C-L+D,R}})},665:function(g,x,f){var l=f(3085),I=f(6782);l({target:"Function",proto:!0},{bind:I})},8671:function(g,x,f){var l=f(8576),I=f(1284);I(l.JSON,"JSON",!0)},8556:function(){},2666:function(g,x,f){var l=f(3085),I=f(2558);l({target:"Number",stat:!0,forced:Number.parseInt!=I},{parseInt:I})},3113:function(g,x,f){var l=f(3085),I=f(69),b=f(2853);l({target:"Object",stat:!0,sham:!I},{create:b})},297:function(g,x,f){var l=f(3085),I=f(69),b=f(2760);l({target:"Object",stat:!0,forced:!I,sham:!I},{defineProperty:b.f})},9234:function(g,x,f){var l=f(3085),I=f(6192),b=f(1795),w=f(9341),k=f(4635),j=I(function(){w(1)});l({target:"Object",stat:!0,forced:j,sham:!k},{getPrototypeOf:function(a){return w(b(a))}})},2647:function(g,x,f){var l=f(3085),I=f(1795),b=f(7653),w=f(6192),k=w(function(){b(1)});l({target:"Object",stat:!0,forced:k},{keys:function(p){return b(I(p))}})},3222:function(g,x,f){var l=f(3085),I=f(4469);l({target:"Object",stat:!0},{setPrototypeOf:I})},6663:function(){},4859:function(g,x,f){var l=f(3085),I=f(15);l({global:!0,forced:parseFloat!=I},{parseFloat:I})},5706:function(g,x,f){var l=f(3085),I=f(2558);l({global:!0,forced:parseInt!=I},{parseInt:I})},7884:function(g,x,f){"use strict";var l=f(3085),I=f(6235),b=f(9438),w=f(892),k=f(3442);l({target:"Promise",stat:!0},{allSettled:function(p){var a=this,d=b.f(a),u=d.resolve,t=d.reject,e=w(function(){var i=I(a.resolve),s=[],m=0,o=1;k(p,function(y){var C=m++,M=!1;s.push(void 0),o++,i.call(a,y).then(function(T){M||(M=!0,s[C]={status:"fulfilled",value:T},--o||u(s))},function(T){M||(M=!0,s[C]={status:"rejected",reason:T},--o||u(s))})}),--o||u(s)});return e.error&&t(e.value),d.promise}})},8885:function(g,x,f){"use strict";var l=f(3085),I=f(6235),b=f(150),w=f(9438),k=f(892),j=f(3442),p="No one promise resolved";l({target:"Promise",stat:!0},{any:function(d){var u=this,t=w.f(u),e=t.resolve,i=t.reject,s=k(function(){var m=I(u.resolve),o=[],y=0,C=1,M=!1;j(d,function(T){var D=y++,L=!1;o.push(void 0),C++,m.call(u,T).then(function(R){L||M||(M=!0,e(R))},function(R){L||M||(L=!0,o[D]=R,--C||i(new(b("AggregateError"))(o,p)))})}),--C||i(new(b("AggregateError"))(o,p))});return s.error&&i(s.value),t.promise}})},1868:function(g,x,f){"use strict";var l=f(3085),I=f(5546),b=f(4471),w=f(6192),k=f(150),j=f(6447),p=f(4743),a=f(9126),d=f(9482),u=!!b&&w(function(){b.prototype.finally.call({then:function(){}},function(){})});if(l({target:"Promise",proto:!0,real:!0,forced:u},{finally:function(e){var i=p(this,k("Promise")),s=j(e);return this.then(s?function(m){return a(i,e()).then(function(){return m})}:e,s?function(m){return a(i,e()).then(function(){throw m})}:e)}}),!I&&j(b)){var t=k("Promise").prototype.finally;b.prototype.finally!==t&&d(b.prototype,"finally",t,{unsafe:!0})}},9021:function(g,x,f){"use strict";var l=f(3085),I=f(5546),b=f(8576),w=f(150),k=f(4471),j=f(9482),p=f(533),a=f(4469),d=f(1284),u=f(3656),t=f(6235),e=f(6447),i=f(5744),s=f(6961),m=f(9516),o=f(3442),y=f(9770),C=f(4743),M=f(7160).set,T=f(2950),D=f(9126),L=f(3681),R=f(9438),F=f(892),W=f(3326),ot=f(9245),it=f(8182),Mt=f(2957),$=f(224),bt=f(4218),U=it("species"),jt="Promise",gt=W.get,Nt=W.set,V=W.getterFor(jt),q=k&&k.prototype,Q=k,G=q,rt=b.TypeError,H=b.document,Y=b.process,X=R.f,Z=X,yt=!!(H&&H.createEvent&&b.dispatchEvent),ht=e(b.PromiseRejectionEvent),It="unhandledrejection",Tt="rejectionhandled",xt=0,st=1,K=2,et=1,ct=2,ft=!1,Ct,Pt,Zt,Xt,St=ot(jt,function(){var wt=m(Q),_t=wt!==String(Q);if(!_t&&bt===66||I&&!G.finally)return!0;if(bt>=51&&/native code/.test(wt))return!1;var Ut=new Q(function(Bt){Bt(1)}),Vt=function(Bt){Bt(function(){},function(){})},qt=Ut.constructor={};return qt[U]=Vt,ft=Ut.then(function(){})instanceof Vt,ft?!_t&&Mt&&!ht:!0}),Jt=St||!y(function(wt){Q.all(wt).catch(function(){})}),Kt=function(wt){var _t;return i(wt)&&e(_t=wt.then)?_t:!1},ae=function(wt,_t){if(!wt.notified){wt.notified=!0;var Ut=wt.reactions;T(function(){for(var Vt=wt.value,qt=wt.state==st,Bt=0;Ut.length>Bt;){var be=Ut[Bt++],Me=qt?be.ok:be.fail,Qt=be.resolve,Et=be.reject,Ce=be.domain,he,de,Oe;try{Me?(qt||(wt.rejection===ct&&Gt(wt),wt.rejection=et),Me===!0?he=Vt:(Ce&&Ce.enter(),he=Me(Vt),Ce&&(Ce.exit(),Oe=!0)),he===be.promise?Et(rt("Promise-chain cycle")):(de=Kt(he))?de.call(he,Qt,Et):Qt(he)):Et(Vt)}catch(De){Ce&&!Oe&&Ce.exit(),Et(De)}}wt.reactions=[],wt.notified=!1,_t&&!wt.rejection&&ue(wt)})}},ve=function(wt,_t,Ut){var Vt,qt;yt?(Vt=H.createEvent("Event"),Vt.promise=_t,Vt.reason=Ut,Vt.initEvent(wt,!1,!0),b.dispatchEvent(Vt)):Vt={promise:_t,reason:Ut},!ht&&(qt=b["on"+wt])?qt(Vt):wt===It&&L("Unhandled promise rejection",Ut)},ue=function(wt){M.call(b,function(){var _t=wt.facade,Ut=wt.value,Vt=Wt(wt),qt;if(Vt&&(qt=F(function(){$?Y.emit("unhandledRejection",Ut,_t):ve(It,_t,Ut)}),wt.rejection=$||Wt(wt)?ct:et,qt.error))throw qt.value})},Wt=function(wt){return wt.rejection!==et&&!wt.parent},Gt=function(wt){M.call(b,function(){var _t=wt.facade;$?Y.emit("rejectionHandled",_t):ve(Tt,_t,wt.value)})},$t=function(wt,_t,Ut){return function(Vt){wt(_t,Vt,Ut)}},ne=function(wt,_t,Ut){wt.done||(wt.done=!0,Ut&&(wt=Ut),wt.value=_t,wt.state=K,ae(wt,!0))},ce=function(wt,_t,Ut){if(!wt.done){wt.done=!0,Ut&&(wt=Ut);try{if(wt.facade===_t)throw rt("Promise can't be resolved itself");var Vt=Kt(_t);Vt?T(function(){var qt={done:!1};try{Vt.call(_t,$t(ce,qt,wt),$t(ne,qt,wt))}catch(Bt){ne(qt,Bt,wt)}}):(wt.value=_t,wt.state=st,ae(wt,!1))}catch(qt){ne({done:!1},qt,wt)}}};if(St&&(Q=function(_t){s(this,Q,jt),t(_t),Ct.call(this);var Ut=gt(this);try{_t($t(ce,Ut),$t(ne,Ut))}catch(Vt){ne(Ut,Vt)}},G=Q.prototype,Ct=function(_t){Nt(this,{type:jt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:xt,value:void 0})},Ct.prototype=p(G,{then:function(_t,Ut){var Vt=V(this),qt=X(C(this,Q));return qt.ok=e(_t)?_t:!0,qt.fail=e(Ut)&&Ut,qt.domain=$?Y.domain:void 0,Vt.parent=!0,Vt.reactions.push(qt),Vt.state!=xt&&ae(Vt,!1),qt.promise},catch:function(wt){return this.then(void 0,wt)}}),Pt=function(){var wt=new Ct,_t=gt(wt);this.promise=wt,this.resolve=$t(ce,_t),this.reject=$t(ne,_t)},R.f=X=function(wt){return wt===Q||wt===Zt?new Pt(wt):Z(wt)},!I&&e(k)&&q!==Object.prototype)){Xt=q.then,ft||(j(q,"then",function(_t,Ut){var Vt=this;return new Q(function(qt,Bt){Xt.call(Vt,qt,Bt)}).then(_t,Ut)},{unsafe:!0}),j(q,"catch",G.catch,{unsafe:!0}));try{delete q.constructor}catch(wt){}a&&a(q,G)}l({global:!0,wrap:!0,forced:St},{Promise:Q}),d(Q,jt,!1,!0),u(jt),Zt=w(jt),l({target:jt,stat:!0,forced:St},{reject:function(_t){var Ut=X(this);return Ut.reject.call(void 0,_t),Ut.promise}}),l({target:jt,stat:!0,forced:I||St},{resolve:function(_t){return D(I&&this===Zt?Q:this,_t)}}),l({target:jt,stat:!0,forced:Jt},{all:function(_t){var Ut=this,Vt=X(Ut),qt=Vt.resolve,Bt=Vt.reject,be=F(function(){var Me=t(Ut.resolve),Qt=[],Et=0,Ce=1;o(_t,function(he){var de=Et++,Oe=!1;Qt.push(void 0),Ce++,Me.call(Ut,he).then(function(De){Oe||(Oe=!0,Qt[de]=De,--Ce||qt(Qt))},Bt)}),--Ce||qt(Qt)});return be.error&&Bt(be.value),Vt.promise},race:function(_t){var Ut=this,Vt=X(Ut),qt=Vt.reject,Bt=F(function(){var be=t(Ut.resolve);o(_t,function(Me){be.call(Ut,Me).then(Vt.resolve,qt)})});return Bt.error&&qt(Bt.value),Vt.promise}})},5397:function(g,x,f){var l=f(3085),I=f(150),b=f(1404),w=f(1138),k=f(5744),j=f(2853),p=f(6782),a=f(6192),d=I("Reflect","construct"),u=a(function(){function i(){}return!(d(function(){},[],i)instanceof i)}),t=!a(function(){d(function(){})}),e=u||t;l({target:"Reflect",stat:!0,forced:e,sham:e},{construct:function(s,m){b(s),w(m);var o=arguments.length<3?s:b(arguments[2]);if(t&&!u)return d(s,m,o);if(s==o){switch(m.length){case 0:return new s;case 1:return new s(m[0]);case 2:return new s(m[0],m[1]);case 3:return new s(m[0],m[1],m[2]);case 4:return new s(m[0],m[1],m[2],m[3])}var y=[null];return y.push.apply(y,m),new(p.apply(s,y))}var C=o.prototype,M=j(k(C)?C:Object.prototype),T=Function.apply.call(s,M,m);return k(T)?T:M}})},1367:function(){},5454:function(g,x,f){"use strict";var l=f(863).charAt,I=f(4845),b=f(3326),w=f(7218),k="String Iterator",j=b.set,p=b.getterFor(k);w(String,"String",function(a){j(this,{type:k,string:I(a),index:0})},function(){var d=p(this),u=d.string,t=d.index,e;return t>=u.length?{value:void 0,done:!0}:(e=l(u,t),d.index+=e.length,{value:e,done:!1})})},957:function(g,x,f){"use strict";var l=f(3085),I=f(4277).trim,b=f(6815);l({target:"String",proto:!0,forced:b("trim")},{trim:function(){return I(this)}})},9781:function(g,x,f){var l=f(1488);l("asyncIterator")},492:function(){},6681:function(g,x,f){var l=f(1488);l("hasInstance")},9594:function(g,x,f){var l=f(1488);l("isConcatSpreadable")},3665:function(g,x,f){var l=f(1488);l("iterator")},6187:function(g,x,f){"use strict";var l=f(3085),I=f(8576),b=f(150),w=f(5546),k=f(69),j=f(3045),p=f(6192),a=f(4500),d=f(4770),u=f(6447),t=f(5744),e=f(3236),i=f(1138),s=f(1795),m=f(101),o=f(77),y=f(4845),C=f(774),M=f(2853),T=f(7653),D=f(2092),L=f(4052),R=f(4750),F=f(5141),W=f(2760),ot=f(6007),it=f(9482),Mt=f(8717),$=f(9766),bt=f(4535),U=f(2759),jt=f(8182),gt=f(9207),Nt=f(1488),V=f(1284),q=f(3326),Q=f(454).forEach,G=$("hidden"),rt="Symbol",H="prototype",Y=jt("toPrimitive"),X=q.set,Z=q.getterFor(rt),yt=Object[H],ht=I.Symbol,It=b("JSON","stringify"),Tt=F.f,xt=W.f,st=L.f,K=ot.f,et=Mt("symbols"),ct=Mt("op-symbols"),ft=Mt("string-to-symbol-registry"),Ct=Mt("symbol-to-string-registry"),Pt=Mt("wks"),Zt=I.QObject,Xt=!Zt||!Zt[H]||!Zt[H].findChild,St=k&&p(function(){return M(xt({},"a",{get:function(){return xt(this,"a",{value:7}).a}})).a!=7})?function(wt,_t,Ut){var Vt=Tt(yt,_t);Vt&&delete yt[_t],xt(wt,_t,Ut),Vt&&wt!==yt&&xt(yt,_t,Vt)}:xt,Jt=function(wt,_t){var Ut=et[wt]=M(ht[H]);return X(Ut,{type:rt,tag:wt,description:_t}),k||(Ut.description=_t),Ut},Kt=function(_t,Ut,Vt){_t===yt&&Kt(ct,Ut,Vt),i(_t);var qt=o(Ut);return i(Vt),a(et,qt)?(Vt.enumerable?(a(_t,G)&&_t[G][qt]&&(_t[G][qt]=!1),Vt=M(Vt,{enumerable:C(0,!1)})):(a(_t,G)||xt(_t,G,C(1,{})),_t[G][qt]=!0),St(_t,qt,Vt)):xt(_t,qt,Vt)},ae=function(_t,Ut){i(_t);var Vt=m(Ut),qt=T(Vt).concat($t(Vt));return Q(qt,function(Bt){(!k||ue.call(Vt,Bt))&&Kt(_t,Bt,Vt[Bt])}),_t},ve=function(_t,Ut){return Ut===void 0?M(_t):ae(M(_t),Ut)},ue=function(_t){var Ut=o(_t),Vt=K.call(this,Ut);return this===yt&&a(et,Ut)&&!a(ct,Ut)?!1:Vt||!a(this,Ut)||!a(et,Ut)||a(this,G)&&this[G][Ut]?Vt:!0},Wt=function(_t,Ut){var Vt=m(_t),qt=o(Ut);if(!(Vt===yt&&a(et,qt)&&!a(ct,qt))){var Bt=Tt(Vt,qt);return Bt&&a(et,qt)&&!(a(Vt,G)&&Vt[G][qt])&&(Bt.enumerable=!0),Bt}},Gt=function(_t){var Ut=st(m(_t)),Vt=[];return Q(Ut,function(qt){!a(et,qt)&&!a(bt,qt)&&Vt.push(qt)}),Vt},$t=function(_t){var Ut=_t===yt,Vt=st(Ut?ct:m(_t)),qt=[];return Q(Vt,function(Bt){a(et,Bt)&&(!Ut||a(yt,Bt))&&qt.push(et[Bt])}),qt};if(j||(ht=function(){if(this instanceof ht)throw TypeError("Symbol is not a constructor");var _t=!arguments.length||arguments[0]===void 0?void 0:y(arguments[0]),Ut=U(_t),Vt=function(qt){this===yt&&Vt.call(ct,qt),a(this,G)&&a(this[G],Ut)&&(this[G][Ut]=!1),St(this,Ut,C(1,qt))};return k&&Xt&&St(yt,Ut,{configurable:!0,set:Vt}),Jt(Ut,_t)},it(ht[H],"toString",function(){return Z(this).tag}),it(ht,"withoutSetter",function(wt){return Jt(U(wt),wt)}),ot.f=ue,W.f=Kt,F.f=Wt,D.f=L.f=Gt,R.f=$t,gt.f=function(wt){return Jt(jt(wt),wt)},k&&(xt(ht[H],"description",{configurable:!0,get:function(){return Z(this).description}}),w||it(yt,"propertyIsEnumerable",ue,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!j,sham:!j},{Symbol:ht}),Q(T(Pt),function(wt){Nt(wt)}),l({target:rt,stat:!0,forced:!j},{for:function(wt){var _t=y(wt);if(a(ft,_t))return ft[_t];var Ut=ht(_t);return ft[_t]=Ut,Ct[Ut]=_t,Ut},keyFor:function(_t){if(!e(_t))throw TypeError(_t+" is not a symbol");if(a(Ct,_t))return Ct[_t]},useSetter:function(){Xt=!0},useSimple:function(){Xt=!1}}),l({target:"Object",stat:!0,forced:!j,sham:!k},{create:ve,defineProperty:Kt,defineProperties:ae,getOwnPropertyDescriptor:Wt}),l({target:"Object",stat:!0,forced:!j},{getOwnPropertyNames:Gt,getOwnPropertySymbols:$t}),l({target:"Object",stat:!0,forced:p(function(){R.f(1)})},{getOwnPropertySymbols:function(_t){return R.f(s(_t))}}),It){var ne=!j||p(function(){var wt=ht();return It([wt])!="[null]"||It({a:wt})!="{}"||It(Object(wt))!="{}"});l({target:"JSON",stat:!0,forced:ne},{stringify:function(_t,Ut,Vt){for(var qt=[_t],Bt=1,be;arguments.length>Bt;)qt.push(arguments[Bt++]);if(be=Ut,!(!t(Ut)&&_t===void 0||e(_t)))return d(Ut)||(Ut=function(Me,Qt){if(u(be)&&(Qt=be.call(this,Me,Qt)),!e(Qt))return Qt}),qt[1]=Ut,It.apply(null,qt)}})}if(!ht[H][Y]){var ce=ht[H].valueOf;it(ht[H],Y,function(){return ce.apply(this,arguments)})}V(ht,rt),bt[G]=!0},1250:function(g,x,f){var l=f(1488);l("matchAll")},9017:function(g,x,f){var l=f(1488);l("match")},9786:function(g,x,f){var l=f(1488);l("replace")},503:function(g,x,f){var l=f(1488);l("search")},6565:function(g,x,f){var l=f(1488);l("species")},9322:function(g,x,f){var l=f(1488);l("split")},3610:function(g,x,f){var l=f(1488);l("toPrimitive")},6886:function(g,x,f){var l=f(1488);l("toStringTag")},3514:function(g,x,f){var l=f(1488);l("unscopables")},177:function(g,x,f){var l=f(1488);l("asyncDispose")},9031:function(g,x,f){var l=f(1488);l("dispose")},6658:function(g,x,f){var l=f(1488);l("matcher")},1875:function(g,x,f){var l=f(1488);l("metadata")},8658:function(g,x,f){var l=f(1488);l("observable")},4592:function(g,x,f){var l=f(1488);l("patternMatch")},6680:function(g,x,f){var l=f(1488);l("replaceAll")},162:function(g,x,f){f(8939);var l=f(7365),I=f(8576),b=f(4696),w=f(8711),k=f(7771),j=f(8182),p=j("toStringTag");for(var a in l){var d=I[a],u=d&&d.prototype;u&&b(u)!==p&&w(u,p,a),k[a]=k.Array}},2906:function(g,x,f){var l=f(3085),I=f(8576),b=f(6447),w=f(8989),k=[].slice,j=/MSIE .\./.test(w),p=function(a){return function(d,u){var t=arguments.length>2,e=t?k.call(arguments,2):void 0;return a(t?function(){(b(d)?d:Function(d)).apply(this,e)}:d,u)}};l({global:!0,bind:!0,forced:j},{setTimeout:p(I.setTimeout),setInterval:p(I.setInterval)})},9336:function(g,x,f){"use strict";f(8939);var l=f(3085),I=f(150),b=f(4551),w=f(9482),k=f(533),j=f(1284),p=f(5148),a=f(3326),d=f(6961),u=f(6447),t=f(4500),e=f(8043),i=f(4696),s=f(1138),m=f(5744),o=f(4845),y=f(2853),C=f(774),M=f(1669),T=f(8703),D=f(8182),L=I("fetch"),R=I("Request"),F=R&&R.prototype,W=I("Headers"),ot=D("iterator"),it="URLSearchParams",Mt=it+"Iterator",$=a.set,bt=a.getterFor(it),U=a.getterFor(Mt),jt=/\+/g,gt=Array(4),Nt=function(st){return gt[st-1]||(gt[st-1]=RegExp("((?:%[\\da-f]{2}){"+st+"})","gi"))},V=function(st){try{return decodeURIComponent(st)}catch(K){return st}},q=function(st){var K=st.replace(jt," "),et=4;try{return decodeURIComponent(K)}catch(ct){for(;et;)K=K.replace(Nt(et--),V);return K}},Q=/[!'()~]|%20/g,G={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},rt=function(st){return G[st]},H=function(st){return encodeURIComponent(st).replace(Q,rt)},Y=function(st,K){if(K)for(var et=K.split("&"),ct=0,ft,Ct;ct<et.length;)ft=et[ct++],ft.length&&(Ct=ft.split("="),st.push({key:q(Ct.shift()),value:q(Ct.join("="))}))},X=function(st){this.entries.length=0,Y(this.entries,st)},Z=function(st,K){if(st<K)throw TypeError("Not enough arguments")},yt=p(function(K,et){$(this,{type:Mt,iterator:M(bt(K).entries),kind:et})},"Iterator",function(){var K=U(this),et=K.kind,ct=K.iterator.next(),ft=ct.value;return ct.done||(ct.value=et==="keys"?ft.key:et==="values"?ft.value:[ft.key,ft.value]),ct}),ht=function(){d(this,ht,it);var K=arguments.length>0?arguments[0]:void 0,et=this,ct=[],ft,Ct,Pt,Zt,Xt,St,Jt,Kt,ae;if($(et,{type:it,entries:ct,updateURL:function(){},updateSearchParams:X}),K!==void 0)if(m(K))if(ft=T(K),ft)for(Ct=M(K,ft),Pt=Ct.next;!(Zt=Pt.call(Ct)).done;){if(Xt=M(s(Zt.value)),St=Xt.next,(Jt=St.call(Xt)).done||(Kt=St.call(Xt)).done||!St.call(Xt).done)throw TypeError("Expected sequence with length 2");ct.push({key:o(Jt.value),value:o(Kt.value)})}else for(ae in K)t(K,ae)&&ct.push({key:ae,value:o(K[ae])});else Y(ct,typeof K=="string"?K.charAt(0)==="?"?K.slice(1):K:o(K))},It=ht.prototype;if(k(It,{append:function(K,et){Z(arguments.length,2);var ct=bt(this);ct.entries.push({key:o(K),value:o(et)}),ct.updateURL()},delete:function(st){Z(arguments.length,1);for(var K=bt(this),et=K.entries,ct=o(st),ft=0;ft<et.length;)et[ft].key===ct?et.splice(ft,1):ft++;K.updateURL()},get:function(K){Z(arguments.length,1);for(var et=bt(this).entries,ct=o(K),ft=0;ft<et.length;ft++)if(et[ft].key===ct)return et[ft].value;return null},getAll:function(K){Z(arguments.length,1);for(var et=bt(this).entries,ct=o(K),ft=[],Ct=0;Ct<et.length;Ct++)et[Ct].key===ct&&ft.push(et[Ct].value);return ft},has:function(K){Z(arguments.length,1);for(var et=bt(this).entries,ct=o(K),ft=0;ft<et.length;)if(et[ft++].key===ct)return!0;return!1},set:function(K,et){Z(arguments.length,1);for(var ct=bt(this),ft=ct.entries,Ct=!1,Pt=o(K),Zt=o(et),Xt=0,St;Xt<ft.length;Xt++)St=ft[Xt],St.key===Pt&&(Ct?ft.splice(Xt--,1):(Ct=!0,St.value=Zt));Ct||ft.push({key:Pt,value:Zt}),ct.updateURL()},sort:function(){var K=bt(this),et=K.entries,ct=et.slice(),ft,Ct,Pt;for(et.length=0,Pt=0;Pt<ct.length;Pt++){for(ft=ct[Pt],Ct=0;Ct<Pt;Ct++)if(et[Ct].key>ft.key){et.splice(Ct,0,ft);break}Ct===Pt&&et.push(ft)}K.updateURL()},forEach:function(K){for(var et=bt(this).entries,ct=e(K,arguments.length>1?arguments[1]:void 0,3),ft=0,Ct;ft<et.length;)Ct=et[ft++],ct(Ct.value,Ct.key,this)},keys:function(){return new yt(this,"keys")},values:function(){return new yt(this,"values")},entries:function(){return new yt(this,"entries")}},{enumerable:!0}),w(It,ot,It.entries,{name:"entries"}),w(It,"toString",function(){for(var K=bt(this).entries,et=[],ct=0,ft;ct<K.length;)ft=K[ct++],et.push(H(ft.key)+"="+H(ft.value));return et.join("&")},{enumerable:!0}),j(ht,it),l({global:!0,forced:!b},{URLSearchParams:ht}),!b&&u(W)){var Tt=function(st){if(m(st)){var K=st.body,et;if(i(K)===it)return et=st.headers?new W(st.headers):new W,et.has("content-type")||et.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),y(st,{body:C(0,String(K)),headers:C(0,et)})}return st};if(u(L)&&l({global:!0,enumerable:!0,forced:!0},{fetch:function(K){return L(K,arguments.length>1?Tt(arguments[1]):{})}}),u(R)){var xt=function(K){return d(this,xt,"Request"),new R(K,arguments.length>1?Tt(arguments[1]):{})};F.constructor=xt,xt.prototype=F,l({global:!0,forced:!0},{Request:xt})}}g.exports={URLSearchParams:ht,getState:bt}},4948:function(g,x,f){"use strict";f(5454);var l=f(3085),I=f(69),b=f(4551),w=f(8576),k=f(1187),j=f(9482),p=f(6961),a=f(4500),d=f(2503),u=f(841),t=f(863).codeAt,e=f(7977),i=f(4845),s=f(1284),m=f(9336),o=f(3326),y=w.URL,C=m.URLSearchParams,M=m.getState,T=o.set,D=o.getterFor("URL"),L=Math.floor,R=Math.pow,F="Invalid authority",W="Invalid scheme",ot="Invalid host",it="Invalid port",Mt=/[A-Za-z]/,$=/[\d+-.A-Za-z]/,bt=/\d/,U=/^0x/i,jt=/^[0-7]+$/,gt=/^\d+$/,Nt=/^[\dA-Fa-f]+$/,V=/[\0\t\n\r #%/:<>?@[\\\]^|]/,q=/[\0\t\n\r #/:<>?@[\\\]^|]/,Q=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,G=/[\t\n\r]/g,rt,H=function(J,kt){var Dt,Ft,Yt;if(kt.charAt(0)=="["){if(kt.charAt(kt.length-1)!="]"||(Dt=X(kt.slice(1,-1)),!Dt))return ot;J.host=Dt}else if(et(J)){if(kt=e(kt),V.test(kt)||(Dt=Y(kt),Dt===null))return ot;J.host=Dt}else{if(q.test(kt))return ot;for(Dt="",Ft=u(kt),Yt=0;Yt<Ft.length;Yt++)Dt+=st(Ft[Yt],ht);J.host=Dt}},Y=function(J){var kt=J.split("."),Dt,Ft,Yt,le,te,se,Se;if(kt.length&&kt[kt.length-1]==""&&kt.pop(),Dt=kt.length,Dt>4)return J;for(Ft=[],Yt=0;Yt<Dt;Yt++){if(le=kt[Yt],le=="")return J;if(te=10,le.length>1&&le.charAt(0)=="0"&&(te=U.test(le)?16:8,le=le.slice(te==8?1:2)),le==="")se=0;else{if(!(te==10?gt:te==8?jt:Nt).test(le))return J;se=parseInt(le,te)}Ft.push(se)}for(Yt=0;Yt<Dt;Yt++)if(se=Ft[Yt],Yt==Dt-1){if(se>=R(256,5-Dt))return null}else if(se>255)return null;for(Se=Ft.pop(),Yt=0;Yt<Ft.length;Yt++)Se+=Ft[Yt]*R(256,3-Yt);return Se},X=function(J){var kt=[0,0,0,0,0,0,0,0],Dt=0,Ft=null,Yt=0,le,te,se,Se,Ee,_e,zt,Ae=function(){return J.charAt(Yt)};if(Ae()==":"){if(J.charAt(1)!=":")return;Yt+=2,Dt++,Ft=Dt}for(;Ae();){if(Dt==8)return;if(Ae()==":"){if(Ft!==null)return;Yt++,Dt++,Ft=Dt;continue}for(le=te=0;te<4&&Nt.test(Ae());)le=le*16+parseInt(Ae(),16),Yt++,te++;if(Ae()=="."){if(te==0||(Yt-=te,Dt>6))return;for(se=0;Ae();){if(Se=null,se>0)if(Ae()=="."&&se<4)Yt++;else return;if(!bt.test(Ae()))return;for(;bt.test(Ae());){if(Ee=parseInt(Ae(),10),Se===null)Se=Ee;else{if(Se==0)return;Se=Se*10+Ee}if(Se>255)return;Yt++}kt[Dt]=kt[Dt]*256+Se,se++,(se==2||se==4)&&Dt++}if(se!=4)return;break}else if(Ae()==":"){if(Yt++,!Ae())return}else if(Ae())return;kt[Dt++]=le}if(Ft!==null)for(_e=Dt-Ft,Dt=7;Dt!=0&&_e>0;)zt=kt[Dt],kt[Dt--]=kt[Ft+_e-1],kt[Ft+--_e]=zt;else if(Dt!=8)return;return kt},Z=function(J){for(var kt=null,Dt=1,Ft=null,Yt=0,le=0;le<8;le++)J[le]!==0?(Yt>Dt&&(kt=Ft,Dt=Yt),Ft=null,Yt=0):(Ft===null&&(Ft=le),++Yt);return Yt>Dt&&(kt=Ft,Dt=Yt),kt},yt=function(J){var kt,Dt,Ft,Yt;if(typeof J=="number"){for(kt=[],Dt=0;Dt<4;Dt++)kt.unshift(J%256),J=L(J/256);return kt.join(".")}else if(typeof J=="object"){for(kt="",Ft=Z(J),Dt=0;Dt<8;Dt++)Yt&&J[Dt]===0||(Yt&&(Yt=!1),Ft===Dt?(kt+=Dt?":":"::",Yt=!0):(kt+=J[Dt].toString(16),Dt<7&&(kt+=":")));return"["+kt+"]"}return J},ht={},It=d({},ht,{" ":1,'"':1,"<":1,">":1,"`":1}),Tt=d({},It,{"#":1,"?":1,"{":1,"}":1}),xt=d({},Tt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),st=function(J,kt){var Dt=t(J,0);return Dt>32&&Dt<127&&!a(kt,J)?J:encodeURIComponent(J)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},et=function(J){return a(K,J.scheme)},ct=function(J){return J.username!=""||J.password!=""},ft=function(J){return!J.host||J.cannotBeABaseURL||J.scheme=="file"},Ct=function(J,kt){var Dt;return J.length==2&&Mt.test(J.charAt(0))&&((Dt=J.charAt(1))==":"||!kt&&Dt=="|")},Pt=function(J){var kt;return J.length>1&&Ct(J.slice(0,2))&&(J.length==2||(kt=J.charAt(2))==="/"||kt==="\\"||kt==="?"||kt==="#")},Zt=function(J){var kt=J.path,Dt=kt.length;Dt&&(J.scheme!="file"||Dt!=1||!Ct(kt[0],!0))&&kt.pop()},Xt=function(J){return J==="."||J.toLowerCase()==="%2e"},St=function(J){return J=J.toLowerCase(),J===".."||J==="%2e."||J===".%2e"||J==="%2e%2e"},Jt={},Kt={},ae={},ve={},ue={},Wt={},Gt={},$t={},ne={},ce={},wt={},_t={},Ut={},Vt={},qt={},Bt={},be={},Me={},Qt={},Et={},Ce={},he=function(J,kt,Dt,Ft){var Yt=Dt||Jt,le=0,te="",se=!1,Se=!1,Ee=!1,_e,zt,Ae,Pe;for(Dt||(J.scheme="",J.username="",J.password="",J.host=null,J.port=null,J.path=[],J.query=null,J.fragment=null,J.cannotBeABaseURL=!1,kt=kt.replace(Q,"")),kt=kt.replace(G,""),_e=u(kt);le<=_e.length;){switch(zt=_e[le],Yt){case Jt:if(zt&&Mt.test(zt))te+=zt.toLowerCase(),Yt=Kt;else{if(Dt)return W;Yt=ae;continue}break;case Kt:if(zt&&($.test(zt)||zt=="+"||zt=="-"||zt=="."))te+=zt.toLowerCase();else if(zt==":"){if(Dt&&(et(J)!=a(K,te)||te=="file"&&(ct(J)||J.port!==null)||J.scheme=="file"&&!J.host))return;if(J.scheme=te,Dt){et(J)&&K[J.scheme]==J.port&&(J.port=null);return}te="",J.scheme=="file"?Yt=Vt:et(J)&&Ft&&Ft.scheme==J.scheme?Yt=ve:et(J)?Yt=$t:_e[le+1]=="/"?(Yt=ue,le++):(J.cannotBeABaseURL=!0,J.path.push(""),Yt=Qt)}else{if(Dt)return W;te="",Yt=ae,le=0;continue}break;case ae:if(!Ft||Ft.cannotBeABaseURL&&zt!="#")return W;if(Ft.cannotBeABaseURL&&zt=="#"){J.scheme=Ft.scheme,J.path=Ft.path.slice(),J.query=Ft.query,J.fragment="",J.cannotBeABaseURL=!0,Yt=Ce;break}Yt=Ft.scheme=="file"?Vt:Wt;continue;case ve:if(zt=="/"&&_e[le+1]=="/")Yt=ne,le++;else{Yt=Wt;continue}break;case ue:if(zt=="/"){Yt=ce;break}else{Yt=Me;continue}case Wt:if(J.scheme=Ft.scheme,zt==rt)J.username=Ft.username,J.password=Ft.password,J.host=Ft.host,J.port=Ft.port,J.path=Ft.path.slice(),J.query=Ft.query;else if(zt=="/"||zt=="\\"&&et(J))Yt=Gt;else if(zt=="?")J.username=Ft.username,J.password=Ft.password,J.host=Ft.host,J.port=Ft.port,J.path=Ft.path.slice(),J.query="",Yt=Et;else if(zt=="#")J.username=Ft.username,J.password=Ft.password,J.host=Ft.host,J.port=Ft.port,J.path=Ft.path.slice(),J.query=Ft.query,J.fragment="",Yt=Ce;else{J.username=Ft.username,J.password=Ft.password,J.host=Ft.host,J.port=Ft.port,J.path=Ft.path.slice(),J.path.pop(),Yt=Me;continue}break;case Gt:if(et(J)&&(zt=="/"||zt=="\\"))Yt=ne;else if(zt=="/")Yt=ce;else{J.username=Ft.username,J.password=Ft.password,J.host=Ft.host,J.port=Ft.port,Yt=Me;continue}break;case $t:if(Yt=ne,zt!="/"||te.charAt(le+1)!="/")continue;le++;break;case ne:if(zt!="/"&&zt!="\\"){Yt=ce;continue}break;case ce:if(zt=="@"){se&&(te="%40"+te),se=!0,Ae=u(te);for(var ri=0;ri<Ae.length;ri++){var pi=Ae[ri];if(pi==":"&&!Ee){Ee=!0;continue}var mi=st(pi,xt);Ee?J.password+=mi:J.username+=mi}te=""}else if(zt==rt||zt=="/"||zt=="?"||zt=="#"||zt=="\\"&&et(J)){if(se&&te=="")return F;le-=u(te).length+1,te="",Yt=wt}else te+=zt;break;case wt:case _t:if(Dt&&J.scheme=="file"){Yt=Bt;continue}else if(zt==":"&&!Se){if(te=="")return ot;if(Pe=H(J,te),Pe)return Pe;if(te="",Yt=Ut,Dt==_t)return}else if(zt==rt||zt=="/"||zt=="?"||zt=="#"||zt=="\\"&&et(J)){if(et(J)&&te=="")return ot;if(Dt&&te==""&&(ct(J)||J.port!==null))return;if(Pe=H(J,te),Pe)return Pe;if(te="",Yt=be,Dt)return;continue}else zt=="["?Se=!0:zt=="]"&&(Se=!1),te+=zt;break;case Ut:if(bt.test(zt))te+=zt;else if(zt==rt||zt=="/"||zt=="?"||zt=="#"||zt=="\\"&&et(J)||Dt){if(te!=""){var ai=parseInt(te,10);if(ai>65535)return it;J.port=et(J)&&ai===K[J.scheme]?null:ai,te=""}if(Dt)return;Yt=be;continue}else return it;break;case Vt:if(J.scheme="file",zt=="/"||zt=="\\")Yt=qt;else if(Ft&&Ft.scheme=="file")if(zt==rt)J.host=Ft.host,J.path=Ft.path.slice(),J.query=Ft.query;else if(zt=="?")J.host=Ft.host,J.path=Ft.path.slice(),J.query="",Yt=Et;else if(zt=="#")J.host=Ft.host,J.path=Ft.path.slice(),J.query=Ft.query,J.fragment="",Yt=Ce;else{Pt(_e.slice(le).join(""))||(J.host=Ft.host,J.path=Ft.path.slice(),Zt(J)),Yt=Me;continue}else{Yt=Me;continue}break;case qt:if(zt=="/"||zt=="\\"){Yt=Bt;break}Ft&&Ft.scheme=="file"&&!Pt(_e.slice(le).join(""))&&(Ct(Ft.path[0],!0)?J.path.push(Ft.path[0]):J.host=Ft.host),Yt=Me;continue;case Bt:if(zt==rt||zt=="/"||zt=="\\"||zt=="?"||zt=="#"){if(!Dt&&Ct(te))Yt=Me;else if(te==""){if(J.host="",Dt)return;Yt=be}else{if(Pe=H(J,te),Pe)return Pe;if(J.host=="localhost"&&(J.host=""),Dt)return;te="",Yt=be}continue}else te+=zt;break;case be:if(et(J)){if(Yt=Me,zt!="/"&&zt!="\\")continue}else if(!Dt&&zt=="?")J.query="",Yt=Et;else if(!Dt&&zt=="#")J.fragment="",Yt=Ce;else if(zt!=rt&&(Yt=Me,zt!="/"))continue;break;case Me:if(zt==rt||zt=="/"||zt=="\\"&&et(J)||!Dt&&(zt=="?"||zt=="#")){if(St(te)?(Zt(J),zt!="/"&&!(zt=="\\"&&et(J))&&J.path.push("")):Xt(te)?zt!="/"&&!(zt=="\\"&&et(J))&&J.path.push(""):(J.scheme=="file"&&!J.path.length&&Ct(te)&&(J.host&&(J.host=""),te=te.charAt(0)+":"),J.path.push(te)),te="",J.scheme=="file"&&(zt==rt||zt=="?"||zt=="#"))for(;J.path.length>1&&J.path[0]==="";)J.path.shift();zt=="?"?(J.query="",Yt=Et):zt=="#"&&(J.fragment="",Yt=Ce)}else te+=st(zt,Tt);break;case Qt:zt=="?"?(J.query="",Yt=Et):zt=="#"?(J.fragment="",Yt=Ce):zt!=rt&&(J.path[0]+=st(zt,ht));break;case Et:!Dt&&zt=="#"?(J.fragment="",Yt=Ce):zt!=rt&&(zt=="'"&&et(J)?J.query+="%27":zt=="#"?J.query+="%23":J.query+=st(zt,ht));break;case Ce:zt!=rt&&(J.fragment+=st(zt,It));break}le++}},de=function(kt){var Dt=p(this,de,"URL"),Ft=arguments.length>1?arguments[1]:void 0,Yt=i(kt),le=T(Dt,{type:"URL"}),te,se;if(Ft!==void 0){if(Ft instanceof de)te=D(Ft);else if(se=he(te={},i(Ft)),se)throw TypeError(se)}if(se=he(le,Yt,null,te),se)throw TypeError(se);var Se=le.searchParams=new C,Ee=M(Se);Ee.updateSearchParams(le.query),Ee.updateURL=function(){le.query=String(Se)||null},I||(Dt.href=De.call(Dt),Dt.origin=xe.call(Dt),Dt.protocol=Be.call(Dt),Dt.username=pe.call(Dt),Dt.password=hi.call(Dt),Dt.host=fi.call(Dt),Dt.hostname=di.call(Dt),Dt.port=ii.call(Dt),Dt.pathname=gi.call(Dt),Dt.search=Ye.call(Dt),Dt.searchParams=qe.call(Dt),Dt.hash=Xe.call(Dt))},Oe=de.prototype,De=function(){var J=D(this),kt=J.scheme,Dt=J.username,Ft=J.password,Yt=J.host,le=J.port,te=J.path,se=J.query,Se=J.fragment,Ee=kt+":";return Yt!==null?(Ee+="//",ct(J)&&(Ee+=Dt+(Ft?":"+Ft:"")+"@"),Ee+=yt(Yt),le!==null&&(Ee+=":"+le)):kt=="file"&&(Ee+="//"),Ee+=J.cannotBeABaseURL?te[0]:te.length?"/"+te.join("/"):"",se!==null&&(Ee+="?"+se),Se!==null&&(Ee+="#"+Se),Ee},xe=function(){var J=D(this),kt=J.scheme,Dt=J.port;if(kt=="blob")try{return new de(kt.path[0]).origin}catch(Ft){return"null"}return kt=="file"||!et(J)?"null":kt+"://"+yt(J.host)+(Dt!==null?":"+Dt:"")},Be=function(){return D(this).scheme+":"},pe=function(){return D(this).username},hi=function(){return D(this).password},fi=function(){var J=D(this),kt=J.host,Dt=J.port;return kt===null?"":Dt===null?yt(kt):yt(kt)+":"+Dt},di=function(){var J=D(this).host;return J===null?"":yt(J)},ii=function(){var J=D(this).port;return J===null?"":String(J)},gi=function(){var J=D(this),kt=J.path;return J.cannotBeABaseURL?kt[0]:kt.length?"/"+kt.join("/"):""},Ye=function(){var J=D(this).query;return J?"?"+J:""},qe=function(){return D(this).searchParams},Xe=function(){var J=D(this).fragment;return J?"#"+J:""},ke=function(J,kt){return{get:J,set:kt,configurable:!0,enumerable:!0}};if(I&&k(Oe,{href:ke(De,function(J){var kt=D(this),Dt=i(J),Ft=he(kt,Dt);if(Ft)throw TypeError(Ft);M(kt.searchParams).updateSearchParams(kt.query)}),origin:ke(xe),protocol:ke(Be,function(J){var kt=D(this);he(kt,i(J)+":",Jt)}),username:ke(pe,function(J){var kt=D(this),Dt=u(i(J));if(!ft(kt)){kt.username="";for(var Ft=0;Ft<Dt.length;Ft++)kt.username+=st(Dt[Ft],xt)}}),password:ke(hi,function(J){var kt=D(this),Dt=u(i(J));if(!ft(kt)){kt.password="";for(var Ft=0;Ft<Dt.length;Ft++)kt.password+=st(Dt[Ft],xt)}}),host:ke(fi,function(J){var kt=D(this);kt.cannotBeABaseURL||he(kt,i(J),wt)}),hostname:ke(di,function(J){var kt=D(this);kt.cannotBeABaseURL||he(kt,i(J),_t)}),port:ke(ii,function(J){var kt=D(this);ft(kt)||(J=i(J),J==""?kt.port=null:he(kt,J,Ut))}),pathname:ke(gi,function(J){var kt=D(this);kt.cannotBeABaseURL||(kt.path=[],he(kt,i(J),be))}),search:ke(Ye,function(J){var kt=D(this);J=i(J),J==""?kt.query=null:(J.charAt(0)=="?"&&(J=J.slice(1)),kt.query="",he(kt,J,Et)),M(kt.searchParams).updateSearchParams(kt.query)}),searchParams:ke(qe),hash:ke(Xe,function(J){var kt=D(this);if(J=i(J),J==""){kt.fragment=null;return}J.charAt(0)=="#"&&(J=J.slice(1)),kt.fragment="",he(kt,J,Ce)})}),j(Oe,"toJSON",function(){return De.call(this)},{enumerable:!0}),j(Oe,"toString",function(){return De.call(this)},{enumerable:!0}),y){var ni=y.createObjectURL,vi=y.revokeObjectURL;ni&&j(de,"createObjectURL",function(kt){return ni.apply(y,arguments)}),vi&&j(de,"revokeObjectURL",function(kt){return vi.apply(y,arguments)})}s(de,"URL"),l({global:!0,forced:!b,sham:!I},{URL:de})},9801:function(){},3822:function(g,x,f){var l=f(2221);g.exports=l},1434:function(g,x,f){var l=f(5078);g.exports=l},6899:function(g,x,f){var l=f(98);g.exports=l},7710:function(g,x,f){var l=f(5739);f(162),g.exports=l},4486:function(g,x,f){var l=f(278);g.exports=l},4877:function(g,x,f){var l=f(1484);g.exports=l},7178:function(g,x,f){var l=f(7731);g.exports=l},5603:function(g,x,f){var l=f(3669);g.exports=l},1206:function(g,x,f){f(162);var l=f(6899),I=f(4696),b=Array.prototype,w={DOMTokenList:!0,NodeList:!0};g.exports=function(k){var j=k.forEach;return k===b||k instanceof Array&&j===b.forEach||w.hasOwnProperty(I(k))?l:j}},6174:function(g,x,f){var l=f(2604);g.exports=l},57:function(g,x,f){var l=f(263);g.exports=l},4741:function(g,x,f){var l=f(7663);g.exports=l},8368:function(g,x,f){var l=f(5063);g.exports=l},3739:function(g,x,f){var l=f(6813);g.exports=l},172:function(g,x,f){var l=f(6285);g.exports=l},4963:function(g,x,f){var l=f(3213);g.exports=l},7820:function(g,x,f){var l=f(3512);g.exports=l},8980:function(g,x,f){var l=f(8168);g.exports=l},5636:function(g,x,f){var l=f(8651);g.exports=l},6672:function(g,x,f){var l=f(3083);g.exports=l},5059:function(g,x,f){var l=f(2987);g.exports=l},3969:function(g,x,f){var l=f(2239);g.exports=l},6618:function(g,x,f){var l=f(3154);f(162),g.exports=l},5279:function(g,x,f){var l=f(6577);g.exports=l},9562:function(g,x,f){f(2906);var l=f(7545);g.exports=l.setTimeout},2285:function(g,x,f){var l=f(5008);f(162),g.exports=l},8535:function(g,x,f){var l=f(994);f(162),g.exports=l},652:function(g,x,f){var l=f(5668);g.exports=l},5668:function(g,x,f){f(4948),f(9801),f(9336);var l=f(7545);g.exports=l.URL},2534:function(g){"use strict";g.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyBkaXNwbGF5PSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KPGRlZnMgaWQ9InR1aS1pbWFnZS1lZGl0b3Itc3ZnLWRlZmF1bHQtaWNvbnMiPgo8c3ltYm9sIGlkPSJpYy1hcHBseSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNNCAxMi4wMTFsNSA1TDIwLjAxMSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1jYW5jZWwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTYgNmwxMiAxMk0xOCA2TDYgMTgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIC8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik00IDBoMXYyMGExIDEgMCAwIDEtMS0xVjB6TTIwIDE3aC0xVjVoMXYxMnptMCAydjVoLTF2LTVoMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMTloMTl2MUg1ek00Ljc2MiA0djFIMFY0aDQuNzYyek03IDRoMTJhMSAxIDAgMCAxIDEgMUg3VjR6Ii8+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1yZXNpemUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIi8+CiAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNIDE4Ljk4ODI4MSAzLjAxMTcxOSBDIDE4LjgwMDc4MSAyLjgyNDIxOSAxOC41IDIuODI0MjE5IDE4LjMxMjUgMy4wMTE3MTkgTCAxMS42MjEwOTQgOS43MDcwMzEgQyAxMS40Mjk2ODggOS44OTQ1MzEgMTEuNDI5Njg4IDEwLjE5NTMxMiAxMS42MjEwOTQgMTAuMzc4OTA2IEMgMTEuNzEwOTM4IDEwLjQ3MjY1NiAxMS44MzU5MzggMTAuNTE5NTMxIDExLjk1NzAzMSAxMC41MTk1MzEgQyAxMi4wNzgxMjUgMTAuNTE5NTMxIDEyLjIwMzEyNSAxMC40NzI2NTYgMTIuMjkyOTY5IDEwLjM3ODkwNiBMIDE4Ljk4ODI4MSAzLjY4NzUgQyAxOS4xNzU3ODEgMy41IDE5LjE3NTc4MSAzLjE5OTIxOSAxOC45ODgyODEgMy4wMTE3MTkgWiBNIDE4Ljk4ODI4MSAzLjAxMTcxOSAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEMgMTguMzg2NzE5IDIuODY3MTg4IDE4LjE3MTg3NSAzLjA4MjAzMSAxOC4xNzE4NzUgMy4zNDc2NTYgTCAxOC4xNzE4NzUgOS4wODU5MzggQyAxOC4xNzE4NzUgOS4zNDc2NTYgMTguMzg2NzE5IDkuNTYyNSAxOC42NTIzNDQgOS41NjI1IEMgMTguOTE3OTY5IDkuNTYyNSAxOS4xMzI4MTIgOS4zNDc2NTYgMTkuMTMyODEyIDkuMDg1OTM4IEwgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTguNjUyMzQ0IDIuODY3MTg4IEwgMTIuOTE0MDYyIDIuODY3MTg4IEMgMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjQzNzUgMy4wODIwMzEgMTIuNDM3NSAzLjM0NzY1NiBDIDEyLjQzNzUgMy42MTMyODEgMTIuNjUyMzQ0IDMuODI4MTI1IDEyLjkxNDA2MiAzLjgyODEyNSBMIDE4LjY1MjM0NCAzLjgyODEyNSBDIDE4LjkxNzk2OSAzLjgyODEyNSAxOS4xMzI4MTIgMy42MTMyODEgMTkuMTMyODEyIDMuMzQ3NjU2IEMgMTkuMTMyODEyIDMuMDgyMDMxIDE4LjkxNzk2OSAyLjg2NzE4OCAxOC42NTIzNDQgMi44NjcxODggWiBNIDE4LjY1MjM0NCAyLjg2NzE4OCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMTAuMzc4OTA2IDExLjYyMTA5NCBDIDEwLjE5NTMxMiAxMS40MzM1OTQgOS44OTA2MjUgMTEuNDMzNTk0IDkuNzAzMTI1IDExLjYyMTA5NCBMIDMuMDA3ODEyIDE4LjMxNjQwNiBDIDIuODIwMzEyIDE4LjUgMi44MjAzMTIgMTguODA0Njg4IDMuMDA3ODEyIDE4Ljk5MjE4OCBDIDMuMTA1NDY5IDE5LjA4NTkzOCAzLjIyNjU2MiAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy40Njg3NSAxOS4xMzI4MTIgMy41ODk4NDQgMTkuMDg1OTM4IDMuNjgzNTk0IDE4Ljk5MjE4OCBMIDEwLjM3ODkwNiAxMi4yOTY4NzUgQyAxMC41NjY0MDYgMTIuMTA5Mzc1IDEwLjU2NjQwNiAxMS44MDQ2ODggMTAuMzc4OTA2IDExLjYyMTA5NCBaIE0gMTAuMzc4OTA2IDExLjYyMTA5NCAiLz4KICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0gMy4zNDc2NTYgMTIuNDM3NSBDIDMuMDgyMDMxIDEyLjQzNzUgMi44NjcxODggMTIuNjUyMzQ0IDIuODY3MTg4IDEyLjkxNDA2MiBMIDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEMgMy42MTMyODEgMTkuMTMyODEyIDMuODI4MTI1IDE4LjkxNzk2OSAzLjgyODEyNSAxOC42NTIzNDQgTCAzLjgyODEyNSAxMi45MTQwNjIgQyAzLjgyODEyNSAxMi42NTIzNDQgMy42MTMyODEgMTIuNDM3NSAzLjM0NzY1NiAxMi40Mzc1IFogTSAzLjM0NzY1NiAxMi40Mzc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSA5LjA4NTkzOCAxOC4xNzE4NzUgTCAzLjM0NzY1NiAxOC4xNzE4NzUgQyAzLjA4MjAzMSAxOC4xNzE4NzUgMi44NjcxODggMTguMzg2NzE5IDIuODY3MTg4IDE4LjY1MjM0NCBDIDIuODY3MTg4IDE4LjkxNzk2OSAzLjA4MjAzMSAxOS4xMzI4MTIgMy4zNDc2NTYgMTkuMTMyODEyIEwgOS4wODU5MzggMTkuMTMyODEyIEMgOS4zNDc2NTYgMTkuMTMyODEyIDkuNTYyNSAxOC45MTc5NjkgOS41NjI1IDE4LjY1MjM0NCBDIDkuNTYyNSAxOC4zODY3MTkgOS4zNDc2NTYgMTguMTcxODc1IDkuMDg1OTM4IDE4LjE3MTg3NSBaIE0gOS4wODU5MzggMTguMTcxODc1ICIvPgogIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTSAyMC41NjI1IDAgTCAxLjQzNzUgMCBDIDAuNjQ0NTMxIDAgMCAwLjY0NDUzMSAwIDEuNDM3NSBMIDAgMjAuNTYyNSBDIDAgMjEuMzU1NDY5IDAuNjQ0NTMxIDIyIDEuNDM3NSAyMiBMIDIwLjU2MjUgMjIgQyAyMS4zNTU0NjkgMjIgMjIgMjEuMzU1NDY5IDIyIDIwLjU2MjUgTCAyMiAxLjQzNzUgQyAyMiAwLjY0NDUzMSAyMS4zNTU0NjkgMCAyMC41NjI1IDAgWiBNIDIxLjA0Mjk2OSAyMC41NjI1IEMgMjEuMDQyOTY5IDIwLjgyODEyNSAyMC44MjgxMjUgMjEuMDQyOTY5IDIwLjU2MjUgMjEuMDQyOTY5IEwgMS40Mzc1IDIxLjA0Mjk2OSBDIDEuMTcxODc1IDIxLjA0Mjk2OSAwLjk1NzAzMSAyMC44MjgxMjUgMC45NTcwMzEgMjAuNTYyNSBMIDAuOTU3MDMxIDEuNDM3NSBDIDAuOTU3MDMxIDEuMTcxODc1IDEuMTcxODc1IDAuOTU3MDMxIDEuNDM3NSAwLjk1NzAzMSBMIDIwLjU2MjUgMC45NTcwMzEgQyAyMC44MjgxMjUgMC45NTcwMzEgMjEuMDQyOTY5IDEuMTcxODc1IDIxLjA0Mjk2OSAxLjQzNzUgWiBNIDIxLjA0Mjk2OSAyMC41NjI1ICIvPgo8L3N5bWJvbD4KPCEtLSAgLS0+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZS1hbGwiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik01IDIzSDNhMSAxIDAgMCAxLTEtMVY2aDF2MTZoMnYxem0xNi0xMGgtMVY2aDF2N3pNOSAxM0g4di0zaDF2M3ptMyAwaC0xdi0zaDF2M3ptMyAwaC0xdi0zaDF2M3pNMTQuNzk0IDMuNzk0TDEzIDJoLTNMOC4yMDYgMy43OTRBLjk2My45NjMgMCAwIDEgOCAyLjVsLjcwMy0xLjA1NUExIDEgMCAwIDEgOS41MzUgMWgzLjkzYTEgMSAwIDAgMSAuODMyLjQ0NUwxNSAyLjVhLjk2NS45NjUgMCAwIDEtLjIwNiAxLjI5NHpNMTQuMTk3IDRIOC44MDNoNS4zOTR6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDNoMjN2MUgwek0xMS4yODYgMjFIOC43MTRMOCAyM0g3bDEtMi44VjIwaC4wNzFMOS41IDE2aDFsMS40MjkgNEgxMnYuMmwxIDIuOGgtMWwtLjcxNC0yem0tLjM1Ny0xTDEwIDE3LjQgOS4wNzEgMjBoMS44NTh6TTIwIDIyaDN2MWgtNHYtN2gxdjZ6bS01IDBoM3YxaC00di03aDF2NnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRlbGV0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTMgNnYxNmgxN1Y2aDF2MTZhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNmgxek0xNC43OTQgMy43OTRMMTMgMmgtM0w4LjIwNiAzLjc5NEEuOTYzLjk2MyAwIDAgMSA4IDIuNWwuNzAzLTEuMDU1QTEgMSAwIDAgMSA5LjUzNSAxaDMuOTNhMSAxIDAgMCAxIC44MzIuNDQ1TDE1IDIuNWEuOTY1Ljk2NSAwIDAgMS0uMjA2IDEuMjk0ek0xNC4xOTcgNEg4LjgwM2g1LjM5NHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTAgM2gyM3YxSDB6TTggMTBoMXY2SDh2LTZ6bTMgMGgxdjZoLTF2LTZ6bTMgMGgxdjZoLTF2LTZ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1kcmF3LWZyZWUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMjAuOTI5QzIuNTk0IDEwLjk3NiA0LjMyMyA2IDcuNjg2IDZjNS44NzIgMCAyLjUyNCAxOSA3LjY5NyAxOXMxLjg5LTE0LjkyOSA2LjQxNC0xNC45MjkgMS4zNTcgMTAuODU4IDUuMTMgMTAuODU4YzEuODAyIDAgMi42NTctMi4yNjIgMi41NjYtNi43ODYiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWRyYXctbGluZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIgMTUuNWgyOCIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZHJhdyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIuNSAyMS41SDVjLjI0NSAwIC40OC0uMDU4LjY5MS0uMTY4bC4xMjQtLjA2NS4xNC4wMWMuNDI5LjAyOC44NS0uMTI3IDEuMTYtLjQzN0wyMi41NSA1LjQwNWEuNS41IDAgMCAwIDAtLjcwN2wtMy4yNDYtMy4yNDVhLjUuNSAwIDAgMC0uNzA3IDBMMy4xNjIgMTYuODg4YTEuNDk1IDEuNDk1IDAgMCAwLS40MzcgMS4xNTVsLjAxLjE0LS4wNjUuMTIzYy0uMTExLjIxMi0uMTcuNDQ4LS4xNy42OTR2Mi41eiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTYuNDE0IDMuNzA3bDMuODkgMy44OS0uNzA4LjcwNi0zLjg4OS0zLjg4OXoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWZpbHRlciIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTEyIDd2MUgyVjdoMTB6bTYgMGg0djFoLTRWN3pNMTIgMTZ2MWgxMHYtMUgxMnptLTYgMEgydjFoNHYtMXoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTguNSAyMGEzLjUgMy41IDAgMSAxIDAtNyAzLjUgMy41IDAgMCAxIDAgN3ptMC0xYTIuNSAyLjUgMCAxIDAgMC01IDIuNSAyLjUgMCAwIDAgMCA1ek0xNS41IDExYTMuNSAzLjUgMCAxIDEgMC03IDMuNSAzLjUgMCAwIDEgMCA3em0wLTFhMi41IDIuNSAwIDEgMCAwLTUgMi41IDIuNSAwIDAgMCAwIDV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXJlc2V0IiB2aWV3Qm94PSIwIDAgMzEgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMzEgMEgwdjMyaDMxeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjggMTZhOCA4IDAgMCAxLTggOEgzdi0xaDF2LTdIM2E4IDggMCAwIDEgOC04aDE3djFoLTF2N2gxek0xMSA5YTcgNyAwIDAgMC03IDd2N2gxNmE3IDcgMCAwIDAgNy03VjlIMTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNCA1bDMuNSAzLjVMMjQgMTJNNyAyMGwtMy41IDMuNUw3IDI3Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwLXgiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGQ9Ik0zMiAzMkgwVjBoMzJ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNyAzMmgtMVYwaDF6TTI3LjE2NyAxMWwuNSAzaC0xLjAzbC0uNTQ2LTNoMS4wNzZ6bS0uNS0zaC0xLjEyMkwyNSA1aC01VjRoNS4xNTNhMSAxIDAgMCAxIC45ODYuODM2TDI2LjY2NyA4em0xLjUgOWwuNSAzaC0uOTRsLS41NDUtM2guOTg1em0xIDZsLjYzOSAzLjgzNkExIDEgMCAwIDEgMjguODE5IDI4SDI2di0xaDNsLS43MjYtNGguODk0ek0yMyAyOGgtM3YtMWgzdjF6TTEzIDR2MUg3TDMgMjdoMTB2MUgzLjE4YTEgMSAwIDAgMS0uOTg2LTEuMTY0bDMuNjY2LTIyQTEgMSAwIDAgMSA2Ljg0NyA0SDEzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtZmxpcC15IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwdjMyaDMyVjB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0wIDE2djFoMzJ2LTF6TTExIDI3LjE2N2wzIC41di0xLjAzbC0zLS41NDZ2MS4wNzZ6bS0zLS41di0xLjEyMkw1IDI1di01SDR2NS4xNTNhMSAxIDAgMCAwIC44MzYuOTg2TDggMjYuNjY3em05IDEuNWwzIC41di0uOTRsLTMtLjU0NXYuOTg1em02IDFsMy44MzYuNjM5QTEgMSAwIDAgMCAyOCAyOC44MlYyNmgtMXYzbC00LS43Mjd2Ljg5NHpNMjggMjN2LTNoLTF2M2gxek00IDEzaDFWN2wyMi00djEwaDFWMy4xOGExIDEgMCAwIDAtMS4xNjQtLjk4NmwtMjIgMy42NjdBMSAxIDAgMCAwIDQgNi44NDdWMTN6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgc3Ryb2tlPSJub25lIiBkPSJNMTEgMGgxdjI0aC0xek0xOSAyMXYtMWgydi0yaDF2MmExIDEgMCAwIDEtMSAxaC0yem0tMiAwaC0zdi0xaDN2MXptNS01aC0xdi0zaDF2M3ptMC01aC0xVjhoMXYzem0wLTVoLTFWNGgtMlYzaDJhMSAxIDAgMCAxIDEgMXYyem0tNS0zdjFoLTNWM2gzek05IDN2MUgydjE2aDd2MUgyYTEgMSAwIDAgMS0xLTFWNGExIDEgMCAwIDEgMS0xaDd6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBkPSJNMCAwSDI0VjI0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzQwIC0xNikgdHJhbnNsYXRlKDU0NyA4KSB0cmFuc2xhdGUoMTkzIDgpIi8+CiAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBzdHJva2U9Im5vbmUiIGQ9Ik0xMi41IDFDMTguMjk5IDEgMjMgNS43MDEgMjMgMTEuNVMxOC4yOTkgMjIgMTIuNSAyMmMtNS4yOSAwLTkuNjY1LTMuOTExLTEwLjM5NC04Ljk5OWgxLjAxMkMzLjgzOCAxNy41MzQgNy43NjQgMjEgMTIuNSAyMWM1LjI0NyAwIDkuNS00LjI1MyA5LjUtOS41UzE3Ljc0NyAyIDEyLjUgMkM4LjQ5IDIgNS4wNiA0LjQ4NSAzLjY2NiA4SDNoNHYxSDJWNGgxdjMuMDIyQzQuNjggMy40NjIgOC4zMDMgMSAxMi41IDF6bS41IDVsLS4wMDEgNS4yOTEgMi41MzcgMi41MzctLjcwOC43MDhMMTIuMjkyIDEySDEyVjZoMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03NDAgLTE2KSB0cmFuc2xhdGUoNTQ3IDgpIHRyYW5zbGF0ZSgxOTMgOCkiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktY2hlY2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBzdHJva2U9IiM1NTU1NTUiIGQ9Ik00LjUgLTFMMS41IDIgNi41IDciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02MCAtODA0KSB0cmFuc2xhdGUoNjAgODA0KSB0cmFuc2xhdGUoMiAzKSByb3RhdGUoLTkwIDQgMykiIC8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWNyb3AiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDBoMXYxMGMtLjU1MiAwLTEtLjQ0OC0xLTFWMHpNMTAgOXYzSDlWOWgxek05IDJoMXY2SDlWMnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04NCAtODA0KSB0cmFuc2xhdGUoODQgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDlIMTJWMTBIMnpNOSAyYy41MTMgMCAuOTM2LjM4Ni45OTMuODgzTDEwIDNIM1YyaDZ6TTIgM0gwVjJoMnYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg0IC04MDQpIHRyYW5zbGF0ZSg4NCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8IS0tIFRoaXMgaWNvbiBtYWRlIGJ5IFBpeGVsIHBlcmZlY3QgZnJvbSB3d3cuZmxhdGljb24uY29tIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJlc2l6ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjQ5MjE4OCAxLjUwNzgxMiBDIDkuMzk4NDM4IDEuNDE0MDYyIDkuMjUgMS40MTQwNjIgOS4xNTYyNSAxLjUwNzgxMiBMIDUuODEyNSA0Ljg1MTU2MiBDIDUuNzE0ODQ0IDQuOTQ1MzEyIDUuNzE0ODQ0IDUuMDk3NjU2IDUuODEyNSA1LjE4NzUgQyA1Ljg1NTQ2OSA1LjIzNDM3NSA1LjkxNzk2OSA1LjI1NzgxMiA1Ljk3NjU2MiA1LjI1NzgxMiBDIDYuMDM5MDYyIDUuMjU3ODEyIDYuMTAxNTYyIDUuMjM0Mzc1IDYuMTQ4NDM4IDUuMTg3NSBMIDkuNDkyMTg4IDEuODQzNzUgQyA5LjU4NTkzOCAxLjc1IDkuNTg1OTM4IDEuNjAxNTYyIDkuNDkyMTg4IDEuNTA3ODEyIFogTSA5LjQ5MjE4OCAxLjUwNzgxMiAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gOS4zMjgxMjUgMS40MzM1OTQgQyA5LjE5NTMxMiAxLjQzMzU5NCA5LjA4NTkzOCAxLjUzOTA2MiA5LjA4NTkzOCAxLjY3MTg3NSBMIDkuMDg1OTM4IDQuNTQyOTY5IEMgOS4wODU5MzggNC42NzE4NzUgOS4xOTUzMTIgNC43ODEyNSA5LjMyODEyNSA0Ljc4MTI1IEMgOS40NjA5MzggNC43ODEyNSA5LjU2NjQwNiA0LjY3MTg3NSA5LjU2NjQwNiA0LjU0Mjk2OSBMIDkuNTY2NDA2IDEuNjcxODc1IEMgOS41NjY0MDYgMS41MzkwNjIgOS40NjA5MzggMS40MzM1OTQgOS4zMjgxMjUgMS40MzM1OTQgWiBNIDkuMzI4MTI1IDEuNDMzNTk0ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSA5LjMyODEyNSAxLjQzMzU5NCBMIDYuNDU3MDMxIDEuNDMzNTk0IEMgNi4zMjgxMjUgMS40MzM1OTQgNi4yMTg3NSAxLjUzOTA2MiA2LjIxODc1IDEuNjcxODc1IEMgNi4yMTg3NSAxLjgwNDY4OCA2LjMyODEyNSAxLjkxNDA2MiA2LjQ1NzAzMSAxLjkxNDA2MiBMIDkuMzI4MTI1IDEuOTE0MDYyIEMgOS40NjA5MzggMS45MTQwNjIgOS41NjY0MDYgMS44MDQ2ODggOS41NjY0MDYgMS42NzE4NzUgQyA5LjU2NjQwNiAxLjUzOTA2MiA5LjQ2MDkzOCAxLjQzMzU5NCA5LjMyODEyNSAxLjQzMzU5NCBaIE0gOS4zMjgxMjUgMS40MzM1OTQgIi8+CiAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNIDUuMTg3NSA1LjgxMjUgQyA1LjA5NzY1NiA1LjcxODc1IDQuOTQ1MzEyIDUuNzE4NzUgNC44NTE1NjIgNS44MTI1IEwgMS41MDM5MDYgOS4xNTYyNSBDIDEuNDEwMTU2IDkuMjUgMS40MTAxNTYgOS40MDIzNDQgMS41MDM5MDYgOS40OTYwOTQgQyAxLjU1NDY4OCA5LjU0Mjk2OSAxLjYxMzI4MSA5LjU2NjQwNiAxLjY3MTg3NSA5LjU2NjQwNiBDIDEuNzM0Mzc1IDkuNTY2NDA2IDEuNzk2ODc1IDkuNTQyOTY5IDEuODQzNzUgOS40OTYwOTQgTCA1LjE4NzUgNi4xNDg0MzggQyA1LjI4MTI1IDYuMDU0Njg4IDUuMjgxMjUgNS45MDIzNDQgNS4xODc1IDUuODEyNSBaIE0gNS4xODc1IDUuODEyNSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gMS42NzE4NzUgNi4yMTg3NSBDIDEuNTM5MDYyIDYuMjE4NzUgMS40MzM1OTQgNi4zMjgxMjUgMS40MzM1OTQgNi40NTcwMzEgTCAxLjQzMzU5NCA5LjMyODEyNSBDIDEuNDMzNTk0IDkuNDYwOTM4IDEuNTM5MDYyIDkuNTY2NDA2IDEuNjcxODc1IDkuNTY2NDA2IEMgMS44MDQ2ODggOS41NjY0MDYgMS45MTQwNjIgOS40NjA5MzggMS45MTQwNjIgOS4zMjgxMjUgTCAxLjkxNDA2MiA2LjQ1NzAzMSBDIDEuOTE0MDYyIDYuMzI4MTI1IDEuODA0Njg4IDYuMjE4NzUgMS42NzE4NzUgNi4yMTg3NSBaIE0gMS42NzE4NzUgNi4yMTg3NSAiLz4KICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0gNC41NDI5NjkgOS4wODU5MzggTCAxLjY3MTg3NSA5LjA4NTkzOCBDIDEuNTM5MDYyIDkuMDg1OTM4IDEuNDMzNTk0IDkuMTk1MzEyIDEuNDMzNTk0IDkuMzI4MTI1IEMgMS40MzM1OTQgOS40NjA5MzggMS41MzkwNjIgOS41NjY0MDYgMS42NzE4NzUgOS41NjY0MDYgTCA0LjU0Mjk2OSA5LjU2NjQwNiBDIDQuNjcxODc1IDkuNTY2NDA2IDQuNzgxMjUgOS40NjA5MzggNC43ODEyNSA5LjMyODEyNSBDIDQuNzgxMjUgOS4xOTUzMTIgNC42NzE4NzUgOS4wODU5MzggNC41NDI5NjkgOS4wODU5MzggWiBNIDQuNTQyOTY5IDkuMDg1OTM4ICIvPgogICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTSAxMC4yODEyNSAwIEwgMC43MTg3NSAwIEMgMC4zMjAzMTIgMCAwIDAuMzIwMzEyIDAgMC43MTg3NSBMIDAgMTAuMjgxMjUgQyAwIDEwLjY3OTY4OCAwLjMyMDMxMiAxMSAwLjcxODc1IDExIEwgMTAuMjgxMjUgMTEgQyAxMC42Nzk2ODggMTEgMTEgMTAuNjc5Njg4IDExIDEwLjI4MTI1IEwgMTEgMC43MTg3NSBDIDExIDAuMzIwMzEyIDEwLjY3OTY4OCAwIDEwLjI4MTI1IDAgWiBNIDEwLjUyMzQzOCAxMC4yODEyNSBDIDEwLjUyMzQzOCAxMC40MTQwNjIgMTAuNDE0MDYyIDEwLjUyMzQzOCAxMC4yODEyNSAxMC41MjM0MzggTCAwLjcxODc1IDEwLjUyMzQzOCBDIDAuNTg1OTM4IDEwLjUyMzQzOCAwLjQ3NjU2MiAxMC40MTQwNjIgMC40NzY1NjIgMTAuMjgxMjUgTCAwLjQ3NjU2MiAwLjcxODc1IEMgMC40NzY1NjIgMC41ODU5MzggMC41ODU5MzggMC40NzY1NjIgMC43MTg3NSAwLjQ3NjU2MiBMIDEwLjI4MTI1IDAuNDc2NTYyIEMgMTAuNDE0MDYyIDAuNDc2NTYyIDEwLjUyMzQzOCAwLjU4NTkzOCAxMC41MjM0MzggMC43MTg3NSBaIE0gMTAuNTIzNDM4IDEwLjI4MTI1ICIvPgogIDwvZz4KPC9zeW1ib2w+CjwhLS0gIC0tPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWRyYXciIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDFIMTJWMTNIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBkPSJNOS42MjIgMS41ODRsMS44MzUgMS42NTgtOC4zMSA4LjQwN0wuNSAxMi41VjExbDkuMTIyLTkuNDE2eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE1NiAtODA0KSB0cmFuc2xhdGUoMTU2IDgwMykiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNNy42MjggMy43NTNMMTAuMzc4IDMuNzUzIDEwLjM3OCA0LjI1MyA3LjYyOCA0LjI1M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTYgLTgwNCkgdHJhbnNsYXRlKDE1NiA4MDMpIHJvdGF0ZSg0NSA5LjAwMyA0LjAwMykiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZmlsdGVyIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xMiAzdjFIOVYzaDN6TTcgNEgwVjNoN3YxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI3NiAtODA0KSB0cmFuc2xhdGUoMjc2IDgwNCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMTIgOHYxSDlWOGgzek03IDlIMFY4aDd2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYgLTgwNCkgdHJhbnNsYXRlKDI3NiA4MDQpIG1hdHJpeCgtMSAwIDAgMSAxMiAwKSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik04IDFjMS4xMDUgMCAyIC44OTUgMiAycy0uODk1IDItMiAyLTItLjg5NS0yLTIgLjg5NS0yIDItMnptMCAxYy0uNTUyIDAtMSAuNDQ4LTEgMXMuNDQ4IDEgMSAxIDEtLjQ0OCAxLTEtLjQ0OC0xLTEtMXpNNCA3YzEuMTA1IDAgMiAuODk1IDIgMnMtLjg5NSAyLTIgMi0yLS44OTUtMi0yIC44OTUtMiAyLTJ6bTAgMWMtLjU1MiAwLTEgLjQ0OC0xIDFzLjQ0OCAxIDEgMSAxLS40NDggMS0xLS40NDgtMS0xLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2IC04MDQpIHRyYW5zbGF0ZSgyNzYgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1mbGlwIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA4IC04MDQpIHRyYW5zbGF0ZSgxMDggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik02IDBMNyAwIDcgMTIgNiAxMnpNMTEgMTBWOWgxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIMTB2LTFoMXpNNSAxdjFIMXY4aDR2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjV2LTljMC0uMjc2LjIyNC0uNS41LS41SDV6bTcgNXYyaC0xVjZoMXptMC0zdjJoLTFWM2gxek05IDF2MUg3VjFoMnptMi41IDBjLjI3NiAwIC41LjIyNC41LjVWMmgtMlYxaDEuNXpNOSAxMUg3di0xaDJ2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDggLTgwNCkgdHJhbnNsYXRlKDEwOCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS4xIiBkPSJNNiA5LjU2OEwyLjYwMSAxMSAyLjk3NSA3LjQ2NyAwLjUgNC44MiA0LjEzIDQuMDY4IDYgMSA3Ljg3IDQuMDY4IDExLjUgNC44MiA5LjAyNSA3LjQ2NyA5LjM5OSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMDQgLTgwNCkgdHJhbnNsYXRlKDIwNCA4MDQpIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LW1hc2siIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTIgLTgwNCkgdHJhbnNsYXRlKDI1MiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMEgxMlYxMkgweiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI2IiBjeT0iNiIgcj0iMi41IiBzdHJva2U9IiM0NDQiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgMGMuMjc2IDAgLjUuMjI0LjUuNXYxMWMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41Vi41QzAgLjIyNC4yMjQgMCAuNSAwaDExek0xMSAxSDF2MTBoMTBWMXoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oaXN0b3J5LXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGlkPSJyZm40cnlsZmZhIiBkPSJNNyAxMmMtLjMzNSAwLS42NjMtLjAyNS0uOTgzLS4wNzRDMy4xNzEgMTEuNDkyIDEgOS4yMDUgMSA2LjQ0NGMwLTEuMzYzLjUzNC0yLjYxMyAxLjQxNS0zLjU4Ii8+CiAgICAgICAgPG1hc2sgaWQ9IjZmOWduMmR5c2IiIHdpZHRoPSI2IiBoZWlnaHQ9IjkuMTM2IiB4PSIwIiB5PSIwIiBtYXNrVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcmZuNHJ5bGZmYSIgc3Ryb2tlPSI0MzQzNDMiLz4KICAgICAgICA8L21hc2s+CiAgICA8L2RlZnM+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzIgLTgwNCkgdHJhbnNsYXRlKDEzMiA4MDQpIj4KICAgICAgICAgICAgPHBhdGggZD0iTTAgMC41SDEyVjEyLjVIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTYuNSAxQzkuNTM4IDEgMTIgMy40NjIgMTIgNi41YzAgMi4zNy0xLjUgNC4zOS0zLjYgNS4xNjNsLS40MDctLjkxNkM5Ljc0NCAxMC4xMyAxMSA4LjQ2MiAxMSA2LjUgMTEgNC4wMTUgOC45ODUgMiA2LjUgMmMtLjc3NyAwLTEuNTA5LjE5Ny0yLjE0Ny41NDRMNCAxLjc1bC0uMjA1LS4wNEM0LjU5NCAxLjI1OCA1LjUxNyAxIDYuNSAxeiIvPgogICAgICAgICAgICA8dXNlIHN0cm9rZT0iIzQzNDM0MyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAxLjI1IiBzdHJva2Utd2lkdGg9IjEiIG1hc2s9InVybCgjNmY5Z24yZHlzYikiIHhsaW5rOmhyZWY9IiNyZm40cnlsZmZhIi8+CiAgICAgICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik00LjI3OSAwTDYgMS43NSA0LjI1IDMuNTcxIDMuNTQzIDIuODY0IDQuNTg2IDEuNzUgMy41NzIgMC43MDd6IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSA5LjU0MyAwKSIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3Rvcnktc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyBmaWxsPSJub25lIiBzdHJva2U9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgPgogICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTExLjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY3YzAgLjI3Ni0uMjI0LjUtLjUuNWgtN2MtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC44aDFWMTFoNlY1SDguMzQxbC0uNTY4LTFIMTEuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xODAgLTgwNCkgdHJhbnNsYXRlKDE4MCA4MDQpIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSIjNDM0MzQzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00LjUgMC41TDguNSA3LjYxMSAwLjUgNy42MTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTgwIC04MDQpIHRyYW5zbGF0ZSgxODAgODA0KSIvPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiID4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0yIDFoOGMuNTUyIDAgMSAuNDQ4IDEgMUgxYzAtLjU1Mi40NDgtMSAxLTF6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI4IC04MDQpIHRyYW5zbGF0ZSgyMjggODA0KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik0xIDFIMlYzSDF6TTEwIDFIMTFWM0gxMHpNNS41IDFMNi41IDEgNi41IDExIDUuNSAxMXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjggLTgwNCkgdHJhbnNsYXRlKDIyOCA4MDQpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTQgMTBIOFYxMUg0eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyOCAtODA0KSB0cmFuc2xhdGUoMjI4IDgwNCkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktbG9hZCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNMCAwSDEyVjEySDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzI0IC04MDUpIHRyYW5zbGF0ZSgzMjQgODA1KSIvPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MzQzNDMiIGQ9Ik01IDBjLjU1MiAwIDEgLjQ0OCAxIDF2MWg1LjVjLjI3NiAwIC41LjIyNC41LjV2OGMwIC4yNzYtLjIyNC41LS41LjVILjVjLS4yNzYgMC0uNS0uMjI0LS41LS41VjFjMC0uNTUyLjQ0OC0xIDEtMWg0em0wIDFIMXY5aDEwVjNINVYxeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNDM0MzQzIiBkPSJNMSAyTDUgMiA1IDMgMSAzeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMyNCAtODA1KSB0cmFuc2xhdGUoMzI0IDgwNSkiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWhpc3RvcnktZGVsZXRlIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbGw9IiM0MzQzNDMiPgogICAgICAgICAgICA8cGF0aCBkPSJNMiA5aDhWMWgxdjguNWMwIC4yNzYtLjIyNC41LS41LjVoLTljLS4yNzYgMC0uNS0uMjI0LS41LS41VjFoMXY4ek0wIDBIMTJWMUgweiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgM0g1VjdINHpNNyAzSDhWN0g3eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwMCAtODA0KSB0cmFuc2xhdGUoMzAwIDgwNCkgdHJhbnNsYXRlKDAgMikiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTQgMWg0VjBoMXYxLjVjMCAuMjc2LS4yMjQuNS0uNS41aC01Yy0uMjc2IDAtLjUtLjIyNC0uNS0uNVYwaDF2MXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMDAgLTgwNCkgdHJhbnNsYXRlKDMwMCA4MDQpIG1hdHJpeCgxIDAgMCAtMSAwIDIpIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaGlzdG9yeS1ncm91cCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ4IC04MDQpIHRyYW5zbGF0ZSgzNDggODA0KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wIDBIMTJWMTJIMHoiLz4KICAgICAgICAgICAgPHBhdGggZmlsbD0iIzQzNDM0MyIgZD0iTTEgOXYyaDF2MUguNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOWgxem0xMSAxdjEuNWMwIC4yNzYtLjIyNC41LS41LjVIOXYtMWgydi0xaDF6bS00IDF2MUg2di0xaDJ6bS0zIDB2MUgzdi0xaDJ6bTctNHYyaC0xVjdoMXpNMSA2djJIMFY2aDF6bTExLTJ2MmgtMVY0aDF6TTEgM3YySDBWM2gxem0xMC41LTNjLjI3NiAwIC41LjIyNC41LjVWM2gtMVYxaC0xVjBoMS41ek02IDB2MUg0VjBoMnptMyAwdjFIN1YwaDJ6TTAgLjVDMCAuMjI0LjIyNCAwIC41IDBIM3YxSDF2MUgwVi41ek05LjUgNGMuMjc2IDAgLjUuMjI0LjUuNXY1YzAgLjI3Ni0uMjI0LjUtLjUuNWgtNWMtLjI3NiAwLS41LS4yMjQtLjUtLjVWOC4zNTVjLjMxNy4wOTQuNjUyLjE0NSAxIC4xNDVWOWg0VjVoLS41YzAtLjM0OC0uMDUtLjY4My0uMTQ1LTFIOS41eiIvPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI1IiBjeT0iNSIgcj0iMi41IiBzdHJva2U9IiM0MzQzNDMiLz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWFycm93LTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIxLjc5MyAxOC41SDIuNXYtNWgxOC45MzVsLTcuNi04aDUuODcybDEwLjUgMTAuNS0xMC41IDEwLjVoLTUuOTE0bDgtOHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ctMyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMjUuMjg4IDE2LjQyTDE0LjIwOCAyNy41SDYuNzkybDExLjI5MS0xMS4yOTFMNi44MjYgNC41aDcuMzgxbDExLjY2MSAxMS42NjEtLjU4LjI1OHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tYXJyb3ciIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yLjUgMTEuNXY5aDE4djUuMjkzTDMwLjI5MyAxNiAyMC41IDYuMjA3VjExLjVoLTE4eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1idWJibGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTIyLjIwNyAyNC41TDE2LjUgMzAuMjA3VjI0LjVIOEE2LjUgNi41IDAgMCAxIDEuNSAxOFY5QTYuNSA2LjUgMCAwIDEgOCAyLjVoMTZBNi41IDYuNSAwIDAgMSAzMC41IDl2OWE2LjUgNi41IDAgMCAxLTYuNSA2LjVoLTEuNzkzeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1oZWFydCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTUuOTk2IDMwLjY3NWwxLjk4MS0xLjc5YzcuODk4LTcuMTc3IDEwLjM2NS05LjcxOCAxMi4xMzUtMTMuMDEyLjkyMi0xLjcxNiAxLjM3Ny0zLjM3IDEuMzc3LTUuMDc2IDAtNC42NS0zLjY0Ny04LjI5Ny04LjI5Ny04LjI5Ny0yLjMzIDAtNC44NiAxLjUyNy02LjgxNyAzLjgyNGwtLjM4LjQ0Ny0uMzgxLS40NDdDMTMuNjU4IDQuMDI3IDExLjEyNiAyLjUgOC43OTcgMi41IDQuMTQ3IDIuNS41IDYuMTQ3LjUgMTAuNzk3YzAgMS43MTQuNDYgMy4zNzUgMS4zODkgNS4wOTggMS43NzUgMy4yODggNC4yNiA1Ljg0MyAxMi4xMjMgMTIuOTc0bDEuOTg0IDEuODA2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1sb2FkIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik0xNy4zMTQgMTguODY3bDEuOTUxLTIuNTMgNCA1LjE4NGgtMTdsNi41LTguODQgNC41NDkgNi4xODZ6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC4wMSA0YTExLjc5OCAxMS43OTggMCAwIDAgMCAxSDN2MjRoMjRWMTQuOTg2YTguNzM4IDguNzM4IDAgMCAwIDEgMFYyOWExIDEgMCAwIDEtMSAxSDNhMSAxIDAgMCAxLTEtMVY1YTEgMSAwIDAgMSAxLTFoMTUuMDF6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yNSAzaDF2OWgtMXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTTIyIDZsMy41LTMuNUwyOSA2Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1pY29uLWxvY2F0aW9uIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMTYgMzEuMjhDMjMuNjc1IDIzLjMwMiAyNy41IDE3LjE4MSAyNy41IDEzYzAtNi4zNTEtNS4xNDktMTEuNS0xMS41LTExLjVTNC41IDYuNjQ5IDQuNSAxM2MwIDQuMTgxIDMuODI1IDEwLjMwMiAxMS41IDE4LjI4eiIvPgogICAgPGNpcmNsZSBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGN4PSIxNiIgY3k9IjEzIiByPSI0LjUiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLWljb24tcG9seWdvbiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgZD0iTS41NzYgMTZMOC4yOSAyOS41aDE1LjQyTDMxLjQyNCAxNiAyMy43MSAyLjVIOC4yOUwuNTc2IDE2eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyLTIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0xOS40NDYgMzEuNTkybDIuMjY1LTMuMjcyIDMuOTQ2LjI1LjYzNi0zLjk0IDMuNjY1LTEuNTA1LTEuMTItMy44MzIgMi42NTUtMi45NjItMi42NTYtMi45NjIgMS4xMi0zLjgzMi0zLjY2NC0xLjUwNS0uNjM2LTMuOTQxLTMuOTQ2LjI1LTIuMjY1LTMuMjcxTDE2IDMuMDI0IDEyLjU1NCAxLjA3IDEwLjI4OSA0LjM0bC0zLjk0Ni0uMjUtLjYzNiAzLjk0MS0zLjY2NSAxLjUwNSAxLjEyIDMuODMyTC41MDggMTYuMzNsMi42NTYgMi45NjItMS4xMiAzLjgzMiAzLjY2NCAxLjUwNC42MzYgMy45NDIgMy45NDYtLjI1IDIuMjY1IDMuMjdMMTYgMjkuNjM4bDMuNDQ2IDEuOTU1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbi1zdGFyIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBkPSJNMjUuMjkyIDI5Ljg3OGwtMS43NzUtMTAuMzQ2IDcuNTE3LTcuMzI3LTEwLjM4OC0xLjUxTDE2IDEuMjgybC00LjY0NiA5LjQxMy0xMC4zODggMS41MSA3LjUxNyA3LjMyNy0xLjc3NSAxMC4zNDZMMTYgMjQuOTkzbDkuMjkyIDQuODg1eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBkPSJNMTEuOTIzIDE5LjEzNkw1LjQyNCAyMmwuNzE1LTcuMDY1LTQuNzMxLTUuMjk2IDYuOTQtMS41MDNMMTEuOTIzIDJsMy41NzQgNi4xMzYgNi45NCAxLjUwMy00LjczMSA1LjI5NkwxOC40MiAyMnoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLW1hc2stbG9hZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTguMDEgNGExMS43OTggMTEuNzk4IDAgMCAwIDAgMUgzdjI0aDI0VjE0Ljk4NmE4LjczOCA4LjczOCAwIDAgMCAxIDBWMjlhMSAxIDAgMCAxLTEgMUgzYTEgMSAwIDAgMS0xLTFWNWExIDEgMCAwIDEgMS0xaDE1LjAxek0xNSAyM2E2IDYgMCAxIDEgMC0xMiA2IDYgMCAwIDEgMCAxMnptMC0xYTUgNSAwIDEgMCAwLTEwIDUgNSAwIDAgMCAwIDEweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMjUgM2gxdjloLTF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIGQ9Ik0yMiA2bDMuNS0zLjVMMjkgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtbWFzayIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjQuNSIgc3Ryb2tlPSJpbmhlcml0IiBmaWxsPSJub25lIi8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDFoMjBhMSAxIDAgMCAxIDEgMXYyMGExIDEgMCAwIDEtMSAxSDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTF6bTAgMXYyMGgyMFYySDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1yZWRvIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIxIDZIOWE2IDYgMCAxIDAgMCAxMmgxMnYxSDlBNyA3IDAgMCAxIDkgNWgxMnYxeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBkPSJNMTkgM2wyLjUgMi41TDE5IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJlc2V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgb3BhY2l0eT0iLjUiIHN0cm9rZT0ibm9uZSIgZmlsbD0ibm9uZSIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMiAxM3YtMWE3IDcgMCAwIDEgNy03aDEzdjFoLTF2NWgxdjFhNyA3IDAgMCAxLTcgN0gydi0xaDF2LTVIMnptNy03YTYgNiAwIDAgMC02IDZ2NmgxMmE2IDYgMCAwIDAgNi02VjZIOXoiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iaW5oZXJpdCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTE5IDNsMi41IDIuNUwxOSA4TTUgMTZsLTIuNSAyLjVMNSAyMSIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtcm90YXRlLWNsb2Nrd2lzZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTI5IDE3aC0uOTI0YzAgNi42MjctNS4zNzMgMTItMTIgMTItNi42MjggMC0xMi01LjM3My0xMi0xMkM0LjA3NiAxMC4zOTggOS40MDcgNS4wNDEgMTYgNVY0QzguODIgNCAzIDkuODIgMyAxN3M1LjgyIDEzIDEzIDEzIDEzLTUuODIgMTMtMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsNCAzLTQgMyIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNiA0aDR2MWgtNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZS1jb3VudGVyY2xvY2t3aXNlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMyAxN2guOTI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTIgNi42MjggMCAxMi01LjM3MyAxMi0xMiAwLTYuNjAyLTUuMzMxLTExLjk2LTExLjkyNC0xMlY0YzcuMTggMCAxMyA1LjgyIDEzIDEzcy01LjgyIDEzLTEzIDEzUzMgMjQuMTggMyAxN3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIgNGg0djFoLTR6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0xNiAxLjVsLTQgMyA0IDMiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXJvdGF0ZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgLz4KICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIHN0cm9rZT0ibm9uZSIgZD0iTTguMzQ5IDIyLjI1NGExMC4wMDIgMTAuMDAyIDAgMCAxLTIuNzc4LTEuNzE5bC42NS0uNzZhOS4wMDIgOS4wMDIgMCAwIDAgMi40OTUgMS41NDhsLS4zNjcuOTMxem0yLjg3My43MDRsLjA3OC0uOTk3YTkgOSAwIDEgMC0uNTU3LTE3Ljg1MmwtLjE0LS45OUExMC4wNzYgMTAuMDc2IDAgMCAxIDEyLjE0NSAzYzUuNTIzIDAgMTAgNC40NzcgMTAgMTBzLTQuNDc3IDEwLTEwIDEwYy0uMzEyIDAtLjYyLS4wMTQtLjkyNC0uMDQyem0tNy41NTYtNC42NTVhOS45NDIgOS45NDIgMCAwIDEtMS4yNTMtMi45OTZsLjk3My0uMjM0YTguOTQ4IDguOTQ4IDAgMCAwIDEuMTI0IDIuNjkzbC0uODQ0LjUzN3ptLTEuNTAyLTUuOTFBOS45NDkgOS45NDkgMCAwIDEgMi44OCA5LjIzbC45MjUuMzgyYTguOTU0IDguOTU0IDAgMCAwLS42NDQgMi44NDRsLS45OTgtLjA2MnptMi4yMS01LjY4NmMuNjg3LS44NDggMS41MS0xLjU4IDIuNDM2LTIuMTY2bC41MjMuODUyYTkuMDQ4IDkuMDQ4IDAgMCAwLTIuMTg4IDEuOTVsLS43NzEtLjYzNnoiLz4KICAgIDxwYXRoIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgZD0iTTEzIDFsLTIuNSAyLjVMMTMgNiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUtY2lyY2xlIiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS1yZWN0YW5nbGUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cmVjdCB3aWR0aD0iMjciIGhlaWdodD0iMjciIHg9IjIuNSIgeT0iMi41IiBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHJ4PSIxIi8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1zaGFwZS10cmlhbmdsZSIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTE2IDIuNWwxNS41IDI3SC41eiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtc2hhcGUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0xNC43MDYgOEgyMWExIDEgMCAwIDEgMSAxdjEyYTEgMSAwIDAgMS0xIDFIOWExIDEgMCAwIDEtMS0xdi00aDF2NGgxMlY5aC01LjcwNmwtLjU4OC0xeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik04LjUgMS41bDcuNSAxM0gxeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC1hbGlnbi1jZW50ZXIiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTggMTJoMTZ2MUg4ek0yIDE5aDI4djFIMnpNOCAyNmgxNnYxSDh6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLWxlZnQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTIgNWgyOHYxSDJ6TTIgMTJoMTZ2MUgyek0yIDE5aDI4djFIMnpNMiAyNmgxNnYxSDJ6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWFsaWduLXJpZ2h0IiB2aWV3Qm94PSIwIDAgMzIgMzIiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJub25lIiBkPSJNMCAwaDMydjMySDB6Ii8+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9ImluaGVyaXQiIGQ9Ik0yIDVoMjh2MUgyek0xNCAxMmgxNnYxSDE0ek0yIDE5aDI4djFIMnpNMTQgMjZoMTZ2MUgxNHoiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXRleHQtYm9sZCIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNyAyaDJ2Mkg3ek03IDI4aDJ2Mkg3eiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJpbmhlcml0IiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDN2MTJoOWE2IDYgMCAxIDAgMC0xMkg5ek05IDE1djE0aDEwYTcgNyAwIDAgMCAwLTE0SDl6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0LWl0YWxpYyIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgzMnYzMkgweiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTUgMmg1djFoLTV6TTExIDI5aDV2MWgtNXpNMTcgM2gxbC00IDI2aC0xeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdGV4dC11bmRlcmxpbmUiIHZpZXdCb3g9IjAgMCAzMiAzMiI+CiAgICA8cGF0aCBzdHJva2U9Im5vbmUiIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMzJ2MzJIMHoiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTggMnYxNGE4IDggMCAxIDAgMTYgMFYyaDF2MTRhOSA5IDAgMCAxLTE4IDBWMmgxek0zIDI5aDI2djFIM3oiLz4KICAgIDxwYXRoIHN0cm9rZT0ibm9uZSIgZmlsbD0iaW5oZXJpdCIgZD0iTTUgMmg1djFINXpNMjIgMmg1djFoLTV6Ii8+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy10ZXh0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNNCAzaDE1YTEgMSAwIDAgMSAxIDFIM2ExIDEgMCAwIDEgMS0xek0zIDRoMXYxSDN6TTE5IDRoMXYxaC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTEgM2gxdjE4aC0xeiIvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMTAgMjBoM3YxaC0zeiIvPgo8L3N5bWJvbD4KPHN5bWJvbCBpZD0iaWMtdW5kbyIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGQ9Ik0yNCAwSDB2MjRoMjR6IiBvcGFjaXR5PSIuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJub25lIiAvPgogICAgPHBhdGggc3Ryb2tlPSJub25lIiBmaWxsPSJpbmhlcml0IiBkPSJNMyA2aDEyYTYgNiAwIDEgMSAwIDEySDN2MWgxMmE3IDcgMCAwIDAgMC0xNEgzdjF6Ii8+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9ImluaGVyaXQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik01IDNMMi41IDUuNSA1IDgiLz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20taW4iIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjI5IC0yOTApIHRyYW5zbGF0ZSgyMjkgMjkwKSI+CiAgICAgICAgPGNpcmNsZSBjeD0iMTAuNSIgY3k9IjEwLjUiIHI9IjkiIHN0cm9rZT0iaW5oZXJpdCIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik0xOC44MjggMTUuODI4SDE5LjgyOFYyMi44MjhIMTguODI4eiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDE5LjMyOCAxOS4zMjgpIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZD0iTTcgMTBIMTRWMTFIN3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTAgN0gxMVYxNEgxMHoiLz4KICAgIDwvZz4KPC9zeW1ib2w+CjxzeW1ib2wgaWQ9ImljLXpvb20tb3V0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2MyAtMjkwKSB0cmFuc2xhdGUoMjYzIDI5MCkiPgogICAgICAgIDxjaXJjbGUgY3g9IjEwLjUiIGN5PSIxMC41IiByPSI5IiBzdHJva2U9ImluaGVyaXQiIGZpbGw9Im5vbmUiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBkPSJNMTguODI4IDE1LjgyOEgxOS44MjhWMjIuODI4SDE4LjgyOHoiIHRyYW5zZm9ybT0icm90YXRlKC00NSAxOS4zMjggMTkuMzI4KSIvPgogICAgICAgIDxwYXRoIGZpbGw9ImluaGVyaXQiIGQ9Ik03IDEwSDE0VjExSDd6Ii8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8c3ltYm9sIGlkPSJpYy1oYW5kIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik04LjY3MiAzLjM2YzEuMzI4IDAgMi4xMTQuNzggMi4yOSAxLjg2OWwuMDE0LjEwMS4wMjMuMDA2djEuMDQybC0uNjM4LS4xODVjLS4xODctLjA1NS0uMzIzLS4yMTEtLjM1NC0uMzk5TDEwIDUuNzEzYzAtLjgyNS0uNDItMS4zNTMtMS4zMjgtMS4zNTNDNy42OTUgNC4zNiA3IDUuMDQxIDcgNS43MTN2Ny45NDFjMCAuNDM5LS41MjQuNjY1LS44NDMuMzY0bC0xLjg2OC0xLjc2MWMtLjU5NS0uNTI4LTEuMzE2LS42MTctMS45MTgtLjIxNi0uNTIyLjM0OC0uNTYyIDEuMjAzLS4xOCAxLjhMNy43MzggMjJoMTEuMDEzbC4yODUtLjUxOGMxLjI0Ny0yLjMyNiAxLjg5Ny00LjI1OSAxLjk2LTUuNzg1bC4wMDQtLjIzOVY4LjAzNWMwLS42NTYtLjUtMS4xNy0xLTEuMTctLjUwMyAwLTEgLjQ1Ni0xIDEuMTcgMCAuMzMzLS4zMi41NzMtLjY0LjQ4TDE4IDguNDFWNy4zNjhsLjA4Ni4wMjYuMDQyLS4xMzZjLjI3OS0uODA1Ljk3OC0xLjMzMiAxLjczOC0xLjM4OEwyMCA1Ljg2NWMxLjA1NyAwIDIgLjk2NyAyIDIuMTd2Ny40MjNjMCAxLjkyOS0uODQ1IDQuMzUyLTIuNTIxIDcuMjktLjA5LjE1Ni0uMjU1LjI1Mi0uNDM1LjI1Mkg3LjQ3NGMtLjE2NiAwLS4zMjEtLjA4Mi0uNDE0LS4yMTlsLTUuNzA0LTguMzljLS42NTMtMS4wMTktLjU4NC0yLjQ4Ni40Ni0zLjE4MiAxLS42NjYgMi4yMTYtLjUxNiAzLjE0OC4zMUw2IDEyLjQ5NVY1LjcxM2MwLTEuMTggMS4wNTgtMi4yNjMgMi40OS0yLjM0OHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICAgICAgPHBhdGggZmlsbD0iaW5oZXJpdCIgZmlsbC1ydWxlPSJub256ZXJvIiBkPSJNMTIuNSAxLjVjMS4zMjUgMCAyLjQxIDEuMDMyIDIuNDk1IDIuMzM2TDE1IDR2Ny4yMmgtMVY0YzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41LS43OCAwLTEuNDIuNTk1LTEuNDkzIDEuMzU2TDExIDR2Ny4yMmgtMVY0YzAtMS4zOCAxLjEyLTIuNSAyLjUtMi41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI5NyAtMjkwKSB0cmFuc2xhdGUoMjk3IDI5MCkiLz4KICAgICAgICA8cGF0aCBmaWxsPSJpbmhlcml0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0xNi41IDMuNWMxLjMyNSAwIDIuNDEgMS4wMzIgMi40OTUgMi4zMzZMMTkgNnY2LjNoLTFWNmMwLS44MjgtLjY3Mi0xLjUtMS41LTEuNS0uNzggMC0xLjQyLjU5NS0xLjQ5MyAxLjM1NkwxNSA2djIuNDRoLTFWNmMwLTEuMzggMS4xMi0yLjUgMi41LTIuNXoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yOTcgLTI5MCkgdHJhbnNsYXRlKDI5NyAyOTApIi8+CiAgICA8L2c+Cjwvc3ltYm9sPgo8L2RlZnM+Cjwvc3ZnPgo="},4858:function(g){"use strict";g.exports=dt},4960:function(){},6759:function(){},6272:function(){}},mt={};function O(g){var x=mt[g];if(x!==void 0)return x.exports;var f=mt[g]={exports:{}};return at[g](f,f.exports,O),f.exports}(function(){O.n=function(g){var x=g&&g.__esModule?function(){return g.default}:function(){return g};return O.d(x,{a:x}),x}})(),function(){O.d=function(g,x){for(var f in x)O.o(x,f)&&!O.o(g,f)&&Object.defineProperty(g,f,{enumerable:!0,get:x[f]})}}(),function(){O.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(g){if(typeof window=="object")return window}}()}(),function(){O.o=function(g,x){return Object.prototype.hasOwnProperty.call(g,x)}}();var z={};return function(){"use strict";O.d(z,{default:function(){return Qc}});var g=O(9131),x=O.n(g),f=O(1899),l=O.n(f),I=O(6562),b=O.n(I),w=O(1734),k=O.n(w),j=O(8005),p=O.n(j),a=O(6065),d=O.n(a),u=O(4496),t=O.n(u);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(A){var v=this;do{if(Element.prototype.matches.call(v,A))return v;v=v.parentElement||v.parentNode}while(v!==null&&v.nodeType===1);return null});"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(A){"use strict";if("Element"in A){var v="classList",r="prototype",c=A.Element[r],n=Object,h=x()(String[r])||function(){return this.replace(/^\s+|\s+$/g,"")},S=l()(Array[r])||function(lt){for(var pt=0,ut=this.length;pt<ut;pt++)if(pt in this&&this[pt]===lt)return pt;return-1},E=function(pt,ut){this.name=pt,this.code=DOMException[pt],this.message=ut},P=function(pt,ut){if(ut==="")throw new E("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(ut))throw new E("INVALID_CHARACTER_ERR","The token must not contain space characters.");return S.call(pt,ut)},_=function(pt){for(var ut=h.call(pt.getAttribute("class")||""),vt=ut?ut.split(/\s+/):[],Lt=0,ie=vt.length;Lt<ie;Lt++)this.push(vt[Lt]);this._updateClassName=function(){pt.setAttribute("class",this.toString())}},N=_[r]=[],B=function(){return new _(this)};if(E[r]=Error[r],N.item=function(lt){return this[lt]||null},N.contains=function(lt){return~P(this,lt+"")},N.add=function(){var lt=arguments,pt=0,ut=lt.length,vt,Lt=!1;do vt=lt[pt]+"",~P(this,vt)||(this.push(vt),Lt=!0);while(++pt<ut);Lt&&this._updateClassName()},N.remove=function(){var lt=arguments,pt=0,ut=lt.length,vt,Lt=!1,ie;do for(vt=lt[pt]+"",ie=P(this,vt);~ie;){var re;b()(re=this).call(re,ie,1),Lt=!0,ie=P(this,vt)}while(++pt<ut);Lt&&this._updateClassName()},N.toggle=function(lt,pt){var ut=this.contains(lt),vt=ut?pt!==!0&&"remove":pt!==!1&&"add";return vt&&this[vt](lt),pt===!0||pt===!1?pt:!ut},N.replace=function(lt,pt){var ut=P(lt+"");if(~ut){var vt;b()(vt=this).call(vt,ut,1,pt),this._updateClassName()}},N.toString=function(){return this.join(" ")},k()){var nt={get:B,enumerable:!0,configurable:!0};try{k()(c,v,nt)}catch(lt){(lt.number===void 0||lt.number===-2146823252)&&(nt.enumerable=!1,k()(c,v,nt))}}else n[r].__defineGetter__&&c.__defineGetter__(v,B)}}(self),function(){"use strict";var A=document.createElement("_");if(A.classList.add("c1","c2"),!A.classList.contains("c2")){var v=function(n){var h=DOMTokenList.prototype[n];DOMTokenList.prototype[n]=function(S){var E,P=arguments.length;for(E=0;E<P;E++)S=arguments[E],h.call(this,S)}};v("add"),v("remove")}if(A.classList.toggle("c3",!1),A.classList.contains("c3")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,n){return 1 in arguments&&!this.contains(c)==!n?n:r.call(this,c)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(c,n){var h=this.toString().split(" "),S=l()(h).call(h,c+"");~S&&(h=p()(h).call(h,S),this.remove.apply(this,h),this.add(n),this.add.apply(this,p()(h).call(h,1)))}),A=null}());(function(){"use strict";if(typeof window!="undefined"&&window.addEventListener){var A=d()(null),v,r,c=function(){clearTimeout(r),r=t()(v,100)},n=function(){},h=function(){var N;window.addEventListener("resize",c,!1),window.addEventListener("orientationchange",c,!1),window.MutationObserver?(N=new MutationObserver(c),N.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),n=function(){try{N.disconnect(),window.removeEventListener("resize",c,!1),window.removeEventListener("orientationchange",c,!1)}catch(nt){}}):(document.documentElement.addEventListener("DOMSubtreeModified",c,!1),n=function(){document.documentElement.removeEventListener("DOMSubtreeModified",c,!1),window.removeEventListener("resize",c,!1),window.removeEventListener("orientationchange",c,!1)})},S=function(N){function B(ut){var vt;return ut.protocol!==void 0?vt=ut:(vt=document.createElement("a"),vt.href=ut),vt.protocol.replace(/:/g,"")+vt.host}var nt,lt,pt;return window.XMLHttpRequest&&(nt=new XMLHttpRequest,lt=B(location),pt=B(N),nt.withCredentials===void 0&&pt!==""&&pt!==lt?nt=XDomainRequest||void 0:nt=XMLHttpRequest),nt},E="http://www.w3.org/1999/xlink";v=function(){var N,B,nt="",lt,pt,ut,vt=0,Lt,ie,re,oe,Ht;function ge(){vt-=1,vt===0&&(n(),h())}function we(Te){return function(){A[Te.base]!==!0&&(Te.useEl.setAttributeNS(E,"xlink:href","#"+Te.hash),Te.useEl.hasAttribute("href")&&Te.useEl.setAttribute("href","#"+Te.hash))}}function je(Te){return function(){var Ke=document.body,$e=document.createElement("x"),Le;Te.onload=null,$e.innerHTML=Te.responseText,Le=$e.getElementsByTagName("svg")[0],Le&&(Le.setAttribute("aria-hidden","true"),Le.style.position="absolute",Le.style.width=0,Le.style.height=0,Le.style.overflow="hidden",Ke.insertBefore(Le,Ke.firstChild)),ge()}}function He(Te){return function(){Te.onerror=null,Te.ontimeout=null,ge()}}for(n(),oe=document.getElementsByTagName("use"),ut=0;ut<oe.length;ut+=1){try{B=oe[ut].getBoundingClientRect()}catch(Te){B=!1}pt=oe[ut].getAttribute("href")||oe[ut].getAttributeNS(E,"href")||oe[ut].getAttribute("xlink:href"),pt&&pt.split?re=pt.split("#"):re=["",""],N=re[0],lt=re[1],Lt=B&&B.left===0&&B.right===0&&B.top===0&&B.bottom===0,B&&B.width===0&&B.height===0&&!Lt?(nt&&!N.length&&lt&&!document.getElementById(lt)&&(N=nt),oe[ut].hasAttribute("href")&&oe[ut].setAttributeNS(E,"xlink:href",pt),N.length&&(Ht=A[N],Ht!==!0&&t()(we({useEl:oe[ut],base:N,hash:lt}),0),Ht===void 0&&(ie=S(N),ie!==void 0&&(Ht=new ie,A[N]=Ht,Ht.onload=je(Ht),Ht.onerror=He(Ht),Ht.ontimeout=He(Ht),Ht.open("GET",N),Ht.send(),vt+=1)))):Lt?N.length&&A[N]&&t()(we({useEl:oe[ut],base:N,hash:lt}),0):A[N]===void 0?A[N]=!0:A[N].onload&&(A[N].abort(),delete A[N].onload,A[N]=!0)}oe="",vt+=1,ge()};var P;P=function(){window.removeEventListener("load",P,!1),r=t()(v,0)},document.readyState!=="complete"?window.addEventListener("load",P,!1):P()}})();var e=O(1845);function i(A,v){(v==null||v>A.length)&&(v=A.length);for(var r=0,c=new Array(v);r<v;r++)c[r]=A[r];return c}function s(A){if(e(A))return i(A)}var m=O(184),o=O(662),y=O(7172);function C(A){if(typeof m!="undefined"&&o(A)!=null||A["@@iterator"]!=null)return y(A)}var M=O(711);function T(A,v){var r;if(A){if(typeof A=="string")return i(A,v);var c=M(r=Object.prototype.toString.call(A)).call(r,8,-1);if(c==="Object"&&A.constructor&&(c=A.constructor.name),c==="Map"||c==="Set")return y(A);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return i(A,v)}}function D(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L(A){return s(A)||C(A)||T(A)||D()}var R=O(7077);function F(A,v,r){return v in A?R(A,v,{value:r,enumerable:!0,configurable:!0,writable:!0}):A[v]=r,A}function W(A,v){if(!(A instanceof v))throw new TypeError("Cannot call a class as a function")}function ot(A,v){for(var r=0;r<v.length;r++){var c=v[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),R(A,c.key,c)}}function it(A,v,r){return v&&ot(A.prototype,v),r&&ot(A,r),A}var Mt=O(4426),$=O.n(Mt),bt=O(9406),U=O.n(bt),jt=O(8189),gt=O.n(jt),Nt=O(3972),V=O.n(Nt),q=O(2777),Q=O(961),G=O.n(Q),rt=O(5695),H=O.n(rt),Y=O(8592),X=O.n(Y),Z=O(9052),yt=O.n(Z),ht=O(2560),It=O.n(ht),Tt=O(2461),xt=O.n(Tt);function st(A){if(e(A))return A}function K(A,v){var r=A==null?null:typeof m!="undefined"&&o(A)||A["@@iterator"];if(r!=null){var c=[],n=!0,h=!1,S,E;try{for(r=r.call(A);!(n=(S=r.next()).done)&&(c.push(S.value),!(v&&c.length===v));n=!0);}catch(P){h=!0,E=P}finally{try{!n&&r.return!=null&&r.return()}finally{if(h)throw E}}return c}}function et(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ct(A,v){return st(A)||K(A,v)||T(A,v)||et()}var ft=O(6397),Ct=O.n(ft),Pt=O(7636),Zt=O.n(Pt),Xt=O(789),St=O.n(Xt),Jt=O(4729),Kt=O.n(Jt),ae=O(1610),ve=O.n(ae),ue=O(3053),Wt=O.n(ue),Gt,$t=["zoomIn","zoomOut","hand"],ne=["history","undo","redo","reset"],ce=["delete","deleteAll"],wt=U()(Gt=[]).call(Gt,$t,ne,ce),_t={FILTER:"filter",COLOR:"color"},Ut=["rect","circle","triangle"],Vt={CROPZONE:"cropzone"},qt={VINTAGE:"vintage",SEPIA2:"sepia2",REMOVE_COLOR:"removeColor",COLOR_FILTER:"colorFilter",REMOVE_WHITE:"removeWhite",BLEND_COLOR:"blendColor",BLEND:"blend"},Bt=Se("IMAGE_LOADER","CROPPER","FLIP","ROTATION","FREE_DRAWING","LINE","TEXT","ICON","FILTER","SHAPE","ZOOM","RESIZE"),be={lockSkewingX:!0,lockSkewingY:!0,bringForward:!0,isRegular:!1},Me={hasRotatingPoint:!1,hasBorders:!1,lockScalingFlip:!0,lockRotation:!0,lockSkewingX:!0,lockSkewingY:!0},Qt={CLEAR_OBJECTS:"clearObjects",LOAD_IMAGE:"loadImage",FLIP_IMAGE:"flip",ROTATE_IMAGE:"rotate",ADD_OBJECT:"addObject",REMOVE_OBJECT:"removeObject",APPLY_FILTER:"applyFilter",REMOVE_FILTER:"removeFilter",ADD_ICON:"addIcon",CHANGE_ICON_COLOR:"changeIconColor",ADD_SHAPE:"addShape",CHANGE_SHAPE:"changeShape",ADD_TEXT:"addText",CHANGE_TEXT:"changeText",CHANGE_TEXT_STYLE:"changeTextStyle",ADD_IMAGE_OBJECT:"addImageObject",RESIZE_CANVAS_DIMENSION:"resizeCanvasDimension",SET_OBJECT_PROPERTIES:"setObjectProperties",SET_OBJECT_POSITION:"setObjectPosition",CHANGE_SELECTION:"changeSelection",RESIZE_IMAGE:"resize"},Et={OBJECT_ACTIVATED:"objectActivated",OBJECT_MOVED:"objectMoved",OBJECT_SCALED:"objectScaled",OBJECT_CREATED:"objectCreated",OBJECT_ROTATED:"objectRotated",OBJECT_ADDED:"objectAdded",OBJECT_MODIFIED:"objectModified",TEXT_EDITING:"textEditing",TEXT_CHANGED:"textChanged",ICON_CREATE_RESIZE:"iconCreateResize",ICON_CREATE_END:"iconCreateEnd",ADD_TEXT:"addText",ADD_OBJECT:"addObject",ADD_OBJECT_AFTER:"addObjectAfter",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",MOUSE_MOVE:"mousemove",REDO_STACK_CHANGED:"redoStackChanged",UNDO_STACK_CHANGED:"undoStackChanged",SELECTION_CLEARED:"selectionCleared",SELECTION_CREATED:"selectionCreated",EXECUTE_COMMAND:"executeCommand",AFTER_UNDO:"afterUndo",AFTER_REDO:"afterRedo",ZOOM_CHANGED:"zoomChanged",HAND_STARTED:"handStarted",HAND_STOPPED:"handStopped",KEY_DOWN:"keydown",KEY_UP:"keyup",INPUT_BOX_EDITING_STARTED:"inputBoxEditingStarted",INPUT_BOX_EDITING_STOPPED:"inputBoxEditingStopped",FOCUS:"focus",BLUR:"blur",IMAGE_RESIZED:"imageResized"},Ce={COLOR_PICKER_INPUT_BOX:".tui-colorpicker-palette-hex"},he={LOAD_IMAGE:"Load",LOAD_MASK_IMAGE:"Mask",ADD_MASK_IMAGE:"Mask",ADD_IMAGE_OBJECT:"Mask",CROP:"Crop",RESIZE:"Resize",APPLY_FILTER:"Filter",REMOVE_FILTER:"Filter",CHANGE_SHAPE:"Shape",CHANGE_ICON_COLOR:"Icon",ADD_TEXT:"Text",CHANGE_TEXT_STYLE:"Text",REMOVE_OBJECT:"Delete",CLEAR_OBJECTS:"Delete"},de=Se("NORMAL","CROPPER","FREE_DRAWING","LINE_DRAWING","TEXT","SHAPE","ICON","ZOOM","RESIZE"),Oe={TEXT:"text",CROP:"crop",RESIZE:"resize",SHAPE:"shape",ZOOM:"zoom"},De={DEFAULT:"normal",ZOOM:"zoom",HAND:"hand"},xe={Z:90,Y:89,C:67,V:86,SHIFT:16,BACKSPACE:8,DEL:46,ARROW_DOWN:40,ARROW_UP:38,SPACE:32,DIGIT_0:48,DIGIT_9:57},Be={SELECTION_STYLE:{borderColor:"red",cornerColor:"green",cornerSize:10,originX:"center",originY:"center",transparentCorners:!1}},pe={addedObject:"The object is already added.",flip:"The flipX and flipY setting values are not changed.",invalidDrawingMode:"This operation is not supported in the drawing mode.",invalidParameters:"Invalid parameters.",isLock:"The executing command state is locked.",loadImage:"The background image is empty.",loadingImageFailed:"Invalid image loaded.",noActiveObject:"There is no active object.",noObject:"The object is not in canvas.",redo:"The promise of redo command is reject.",rotation:"The current angle is same the old angle.",undo:"The promise of undo command is reject.",unsupportedOperation:"Unsupported operation.",unsupportedType:"Unsupported object type."},hi={"icon-arrow":"M40 12V0l24 24-24 24V36H0V12h40z","icon-arrow-2":"M49,32 H3 V22 h46 l-18,-18 h12 l23,23 L43,50 h-12 l18,-18  z ","icon-arrow-3":"M43.349998,27 L17.354,53 H1.949999 l25.996,-26 L1.949999,1 h15.404 L43.349998,27  z ","icon-star":"M35,54.557999 l-19.912001,10.468 l3.804,-22.172001 l-16.108,-15.7 l22.26,-3.236 L35,3.746 l9.956,20.172001 l22.26,3.236 l-16.108,15.7 l3.804,22.172001  z ","icon-star-2":"M17,31.212 l-7.194,4.08 l-4.728,-6.83 l-8.234,0.524 l-1.328,-8.226 l-7.644,-3.14 l2.338,-7.992 l-5.54,-6.18 l5.54,-6.176 l-2.338,-7.994 l7.644,-3.138 l1.328,-8.226 l8.234,0.522 l4.728,-6.83 L17,-24.312 l7.194,-4.08 l4.728,6.83 l8.234,-0.522 l1.328,8.226 l7.644,3.14 l-2.338,7.992 l5.54,6.178 l-5.54,6.178 l2.338,7.992 l-7.644,3.14 l-1.328,8.226 l-8.234,-0.524 l-4.728,6.83  z ","icon-polygon":"M3,31 L19,3 h32 l16,28 l-16,28 H19  z ","icon-location":"M24 62C8 45.503 0 32.837 0 24 0 10.745 10.745 0 24 0s24 10.745 24 24c0 8.837-8 21.503-24 38zm0-28c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10z","icon-heart":"M49.994999,91.349998 l-6.96,-6.333 C18.324001,62.606995 2.01,47.829002 2.01,29.690998 C2.01,14.912998 13.619999,3.299999 28.401001,3.299999 c8.349,0 16.362,5.859 21.594,12 c5.229,-6.141 13.242001,-12 21.591,-12 c14.778,0 26.390999,11.61 26.390999,26.390999 c0,18.138 -16.314001,32.916 -41.025002,55.374001 l-6.96,6.285  z ","icon-bubble":"M44 48L34 58V48H12C5.373 48 0 42.627 0 36V12C0 5.373 5.373 0 12 0h40c6.627 0 12 5.373 12 12v24c0 6.627-5.373 12-12 12h-8z"},fi={realTimeEvent:!0,min:-360,max:360,value:0},di={min:5,max:30,value:12},ii={realTimeEvent:!0,min:2,max:300,value:3},gi={realTimeEvent:!0,min:10,max:100,value:50},Ye={tintOpacityRange:{realTimeEvent:!0,min:0,max:1,value:.7,useDecimal:!0},removewhiteDistanceRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},brightnessRange:{realTimeEvent:!0,min:-1,max:1,value:0,useDecimal:!0},noiseRange:{realTimeEvent:!0,min:0,max:1e3,value:100},pixelateRange:{realTimeEvent:!0,min:2,max:20,value:4},colorfilterThresholdRange:{realTimeEvent:!0,min:0,max:1,value:.2,useDecimal:!0},blurFilterRange:{value:.1}},qe={LEFT:0,TOP:0,WIDTH:.5,HEIGHT:.5},Xe={realTimeEvent:!0,min:32,max:4088,value:800},ke=2,ni="tui-image-editor-",vi=Math.min,J=Math.max,kt=!1,Dt=0;function Ft(A){return A.__fe_id||(Dt+=1,A.__fe_id=Dt),A.__fe_id}function Yt(A){return!le(A==null?void 0:A.__fe_id)}function le(A){return isUndefined(A)||A===null}function te(A){return typeof A=="function"}function se(A,v,r){if(v>r){var c=[r,v];v=c[0],r=c[1]}return J(v,vi(A,r))}function Se(){for(var A={},v=arguments.length,r=new Array(v),c=0;c<v;c++)r[c]=arguments[c];return X()(r,function(n){A[n]=n}),A}function Ee(A){var v="";return forEach(A,function(r,c){var n;v+=_concatInstanceProperty(n="".concat(c,": ")).call(n,r,";")}),v}function _e(A,v){var r={},c=v.length,n=0,h;for(n=0;n<c;n+=1)h=v[n],r[h]=A[h];return r}function zt(A){return Ct()(A,10)}function Ae(A){return A.replace(/-([a-z])/g,function(v,r){return r.toUpperCase()})}function Pe(){return!!(window.File&&window.FileList&&window.FileReader)}function ri(A,v){var r,c,n;if(A.length===4){var h;A=U()(h="".concat(A)).call(h,p()(A).call(A,1,4))}var S=Ct()(p()(A).call(A,1,3),16),E=Ct()(p()(A).call(A,3,5),16),P=Ct()(p()(A).call(A,5,7),16),_=v||1;return U()(r=U()(c=U()(n="rgba(".concat(S,", ")).call(n,E,", ")).call(c,P,", ")).call(r,_,")")}function pi(){kt||(kt=!0,Kt()("image-editor","UA-129999381-1"))}function mi(A,v){var r=document.getElementsByTagName("head"),c=ct(r,1),n=c[0],h=document.createElement("link"),S=encodeURIComponent(A);v&&(h.id=v),h.setAttribute("rel","stylesheet"),h.setAttribute("type","text/css"),h.setAttribute("href","data:text/css;charset=UTF-8,".concat(S)),n.appendChild(h)}function ai(A){return function(v){return A.querySelector(v)}}function Er(A){var v=/data:(image\/.+);base64,/,r="",c,n,h;c=A.replace(v,function(E,P){return r=P,""}),c=atob(c);var S=c.length;for(n=new Uint8Array(S),h=0;h<S;h+=1)n[h]=c.charCodeAt(h);return new Blob([n],{type:r})}function Ar(A){return Number(A.toFixed(ke))}function Re(A){X()(A,function(v,r){A[r]=null})}function yi(){var A,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(v.charAt(0)==="."){var c;return U()(c=".".concat(ni).concat(r)).call(c,p()(v).call(v,1))}return U()(A="".concat(ni).concat(r)).call(A,v)}function wr(A,v){var r=v.originX,c=v.originY,n=A.getPointByOrigin(r,c),h=n.x,S=n.y;A.set({left:h,top:S,originX:r,originY:c}),A.setCoords()}function Dr(A){var v,r={};return Zt()(v=xt()(A)).call(v,function(c){r[A[c]]=c}),r}function Xi(A,v){A.customProps=A.customProps||{},G()(A.customProps,v)}function oi(A,v){var r={};return It()(v)&&(v=[v]),X()(v,function(c){r[c]=A.customProps[c]}),r}function Or(A){return A.charAt(0).toUpperCase()+p()(A).call(A,1)}function Ci(A,v){return l()(A).call(A,v)>=0}function on(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ve()(A,"type")||_t.COLOR}function Zi(A){var v=St()(A),r=v===void 0?{}:v;return r.source?_t.FILTER:_t.COLOR}function sn(A){return Wt()(A.get("type"),Ut)>=0}function Vi(A){if(Ci(Ut,A))return"Shape";switch(A){case"i-text":return"Text";case"path":case"line":return"Draw";case"activeSelection":return"Group";default:return ln(A)}}function _r(A){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=v.useAlpha,c=r===void 0?!0:r,n=v.mode,h=qt.VINTAGE,S=qt.REMOVE_COLOR,E=qt.BLEND_COLOR,P=qt.SEPIA2,_=qt.COLOR_FILTER,N=qt.REMOVE_WHITE,B=qt.BLEND,nt;switch(A){case h:nt=P;break;case S:nt=c?_:N;break;case E:nt=n==="add"?B:n;break;default:nt=A}return ln(nt)}function kr(A){var v=Qt.LOAD_IMAGE;return typeof A=="string"?v===A:v===A.name}function Pr(A){var v,r,c=Qt.FLIP_IMAGE,n=Qt.ROTATE_IMAGE,h=Qt.ADD_TEXT,S=Qt.APPLY_FILTER,E=Qt.REMOVE_FILTER,P=Qt.CHANGE_SHAPE,_=Qt.CHANGE_ICON_COLOR,N=Qt.CHANGE_TEXT_STYLE,B=Qt.CLEAR_OBJECTS,nt=Qt.ADD_IMAGE_OBJECT,lt=Qt.REMOVE_OBJECT,pt=Qt.RESIZE_IMAGE,ut=A.name,vt=A.args,Lt;switch(ut){case c:Lt={name:ut,detail:vt[1]==="reset"?vt[1]:p()(v=vt[1]).call(v,4)};break;case n:Lt={name:ut,detail:vt[2]};break;case S:Lt={name:he.APPLY_FILTER,detail:_r(vt[1],vt[2])};break;case E:Lt={name:he.REMOVE_FILTER,detail:"Remove"};break;case P:Lt={name:he.CHANGE_SHAPE,detail:"Change"};break;case _:Lt={name:he.CHANGE_ICON_COLOR,detail:"Change"};break;case N:Lt={name:he.CHANGE_TEXT_STYLE,detail:"Change"};break;case lt:Lt={name:he.REMOVE_OBJECT,detail:vt[2]};break;case B:Lt={name:he.CLEAR_OBJECTS,detail:"All"};break;case nt:Lt={name:he.ADD_IMAGE_OBJECT,detail:"Add"};break;case h:Lt={name:he.ADD_TEXT};break;case pt:Lt={name:he.RESIZE,detail:U()(r="".concat(~~vt[1].width,"x")).call(r,~~vt[1].height)};break;default:Lt={name:ut};break}return vt[1]==="mask"&&(Lt={name:he.LOAD_MASK_IMAGE,detail:"Apply"}),Lt}function Lr(A){return A==="top"?"bottom":A==="left"?"right":A==="right"?"left":"top"}function ln(A){return A.replace(/[a-z]/,function(v){return v.toUpperCase()})}function jr(A){var v=A.left,r=A.top,c=A.width,n=A.height,h=qe.LEFT,S=qe.TOP,E=qe.WIDTH,P=qe.HEIGHT;return v===h&&r===S&&c===E&&n===P}var Nr=Se("UN_IMPLEMENTATION","NO_COMPONENT_NAME"),cn={UN_IMPLEMENTATION:"Should implement a method: ",NO_COMPONENT_NAME:"Should set a component name"},Rr={UN_IMPLEMENTATION:function(v){return cn.UN_IMPLEMENTATION+v},NO_COMPONENT_NAME:function(){return cn.NO_COMPONENT_NAME}},Si={types:G()({},Nr),create:function(v){v=v.toLowerCase();for(var r=Rr[v],c=arguments.length,n=new Array(c>1?c-1:0),h=1;h<c;h++)n[h-1]=arguments[h];return r.apply(void 0,n)}},un=Si.create,hn=Si.types,zr=function(){function A(v,r){W(this,A),this.name=v.name,this.args=r,this.execute=v.execute,this.undo=v.undo,this.executeCallback=v.executeCallback||null,this.undoCallback=v.undoCallback||null,this.undoData={}}return it(A,[{key:"execute",value:function(){throw new Error(un(hn.UN_IMPLEMENTATION,"execute"))}},{key:"undo",value:function(){throw new Error(un(hn.UN_IMPLEMENTATION,"undo"))}},{key:"isRedo",get:function(){return xt()(this.undoData).length>0}},{key:"setUndoData",value:function(r,c,n){return c&&(r=c),n?c||(c=r):(G()(this.undoData,r),c=null),c}},{key:"setExecuteCallback",value:function(r){return this.executeCallback=r,this}},{key:"setUndoCallback",value:function(r){return this.undoCallback=r,this}}]),A}(),Fr=zr,fn={};function Br(A){var v=fn[A];if(v){for(var r=arguments.length,c=new Array(r>1?r-1:0),n=1;n<r;n++)c[n-1]=arguments[n];return new Fr(v,c)}return null}function Hr(A){fn[A.name]=A}var Ie={create:Br,register:Hr},dn=function(){function A(){W(this,A),this._undoStack=[],this._redoStack=[],this._isLocked=!1,this._isSilent=!1}return it(A,[{key:"_invokeExecution",value:function(r){var c=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.lock();var h=r.args;return h||(h=[]),r.execute.apply(r,L(h)).then(function(S){return c._isSilent||(c.pushUndoStack(r),c.fire(n?Et.AFTER_REDO:Et.EXECUTE_COMMAND,r)),c.unlock(),te(r.executeCallback)&&r.executeCallback(S),S}).catch(function(S){return c.unlock(),gt().reject(S)})}},{key:"_invokeUndo",value:function(r){var c=this;this.lock();var n=r.args;return n||(n=[]),r.undo.apply(r,L(n)).then(function(h){return c.pushRedoStack(r),c.fire(Et.AFTER_UNDO,r),c.unlock(),te(r.undoCallback)&&r.undoCallback(h),h}).catch(function(h){return c.unlock(),gt().reject(h)})}},{key:"_fireRedoStackChanged",value:function(){this.fire(Et.REDO_STACK_CHANGED,this._redoStack.length)}},{key:"_fireUndoStackChanged",value:function(){this.fire(Et.UNDO_STACK_CHANGED,this._undoStack.length)}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"executeSilent",value:function(){var r=this;this._isSilent=!0;for(var c=arguments.length,n=new Array(c),h=0;h<c;h++)n[h]=arguments[h];return this.execute.apply(this,U()(n).call(n,[this._isSilent])).then(function(){r._isSilent=!1})}},{key:"execute",value:function(){var r=this;if(this._isLocked)return gt().reject(pe.isLock);for(var c=arguments.length,n=new Array(c),h=0;h<c;h++)n[h]=arguments[h];var S=n[0];return It()(S)&&(S=Ie.create.apply(Ie,n)),this._invokeExecution(S).then(function(E){return r.clearRedoStack(),E})}},{key:"undo",value:function(){var r=this._undoStack.pop(),c,n="";if(r&&this._isLocked&&(this.pushUndoStack(r,!0),r=null),r)this.isEmptyUndoStack()&&this._fireUndoStackChanged(),c=this._invokeUndo(r);else{if(n=pe.undo,this._isLocked){var h;n=U()(h="".concat(n," Because ")).call(h,pe.isLock)}c=gt().reject(n)}return c}},{key:"redo",value:function(){var r=this._redoStack.pop(),c,n="";if(r&&this._isLocked&&(this.pushRedoStack(r,!0),r=null),r)this.isEmptyRedoStack()&&this._fireRedoStackChanged(),c=this._invokeExecution(r,!0);else{if(n=pe.redo,this._isLocked){var h;n=U()(h="".concat(n," Because ")).call(h,pe.isLock)}c=gt().reject(n)}return c}},{key:"pushUndoStack",value:function(r,c){this._undoStack.push(r),c||this._fireUndoStackChanged()}},{key:"pushRedoStack",value:function(r,c){this._redoStack.push(r),c||this._fireRedoStackChanged()}},{key:"isEmptyRedoStack",value:function(){return this._redoStack.length===0}},{key:"isEmptyUndoStack",value:function(){return this._undoStack.length===0}},{key:"clearUndoStack",value:function(){this.isEmptyUndoStack()||(this._undoStack=[],this._fireUndoStackChanged())}},{key:"clearRedoStack",value:function(){this.isEmptyRedoStack()||(this._redoStack=[],this._fireRedoStackChanged())}}]),A}();yt().mixin(dn);var Ur=dn,Yr=O(5214),Ve=O.n(Yr),Wr=function(A){var v,r,c,n,h,S,E,P=A.locale,_=A.biImage,N=A.commonStyle,B=A.headerStyle,nt=A.loadButtonStyle,lt=A.downloadButtonStyle,pt=A.submenuStyle;return U()(v=U()(r=U()(c=U()(n=U()(h=U()(S=U()(E=`
    <div class="tui-image-editor-main-container" style="`.concat(N,`">
        <div class="tui-image-editor-header" style="`)).call(E,B,`">
            <div class="tui-image-editor-header-logo">
                <img src="`)).call(S,_,`" />
            </div>
            <div class="tui-image-editor-header-buttons">
                <div style="`)).call(h,nt,`">
                    `)).call(n,P.localize("Load"),`
                    <input type="file" class="tui-image-editor-load-btn" />
                </div>
                <button class="tui-image-editor-download-btn" style="`)).call(c,lt,`">
                    `)).call(r,P.localize("Download"),`
                </button>
            </div>
        </div>
        <div class="tui-image-editor-main">
            <div class="tui-image-editor-submenu">
                <div class="tui-image-editor-submenu-style" style="`)).call(v,pt,`"></div>
            </div>
            <div class="tui-image-editor-wrap">
                <div class="tui-image-editor-size-wrap">
                    <div class="tui-image-editor-align-wrap">
                        <div class="tui-image-editor"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
`)},Gr=function(A){var v,r,c,n,h,S=A.locale,E=A.biImage,P=A.loadButtonStyle,_=A.downloadButtonStyle,N=A.menuBarPosition;return U()(v=U()(r=U()(c=U()(n=U()(h=`
    <ul class="tui-image-editor-help-menu `.concat(Lr(N),`"></ul>
    <div class="tui-image-editor-controls">
        <div class="tui-image-editor-controls-logo">
            <img src="`)).call(h,E,`" />
        </div>
        <ul class="tui-image-editor-menu"></ul>

        <div class="tui-image-editor-controls-buttons">
            <div style="`)).call(n,P,`">
                `)).call(c,S.localize("Load"),`
                <input type="file" class="tui-image-editor-load-btn" />
            </div>
            <button class="tui-image-editor-download-btn" style="`)).call(r,_,`">
                `)).call(v,S.localize("Download"),`
            </button>
        </div>
    </div>
`)},Xr=O(899),We=O.n(Xr),Zr=function(A){var v,r,c,n,h,S,E,P,_,N,B,nt,lt,pt,ut,vt,Lt,ie,re,oe,Ht,ge,we,je,He,Te,Ke,$e,Le,wi=A.subMenuLabelActive,Di=A.subMenuLabelNormal,Oi=A.subMenuRangeTitle,_i=A.submenuPartitionVertical,ki=A.submenuPartitionHorizontal,Pi=A.submenuCheckbox,Li=A.submenuRangePointer,ji=A.submenuRangeValue,Ni=A.submenuColorpickerTitle,Ri=A.submenuColorpickerButton,zi=A.submenuRangeBar,Fi=A.submenuRangeSubbar,Bi=A.submenuDisabledRangePointer,Hi=A.submenuDisabledRangeBar,Ui=A.submenuDisabledRangeSubbar,Yi=A.submenuIconSize,Wi=A.menuIconSize,Gi=A.biSize,Ue=A.menuIconStyle,ti=A.submenuIconStyle;return U()(v=U()(r=U()(c=U()(n=U()(h=U()(S=U()(E=U()(P=U()(_=U()(N=U()(B=U()(nt=U()(lt=U()(pt=U()(ut=U()(vt=U()(Lt=U()(ie=U()(re=U()(oe=U()(Ht=U()(ge=U()(we=U()(je=U()(He=U()(Te=U()(Ke=U()($e=U()(Le=`
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-icon-add-button.icon-heart .tui-image-editor-button[data-icontype="icon-heart"] label,
    .tie-icon-add-button.icon-location .tui-image-editor-button[data-icontype="icon-location"] label,
    .tie-icon-add-button.icon-polygon .tui-image-editor-button[data-icontype="icon-polygon"] label,
    .tie-icon-add-button.icon-star .tui-image-editor-button[data-icontype="icon-star"] label,
    .tie-icon-add-button.icon-star-2 .tui-image-editor-button[data-icontype="icon-star-2"] label,
    .tie-icon-add-button.icon-arrow-3 .tui-image-editor-button[data-icontype="icon-arrow-3"] label,
    .tie-icon-add-button.icon-arrow-2 .tui-image-editor-button[data-icontype="icon-arrow-2"] label,
    .tie-icon-add-button.icon-arrow .tui-image-editor-button[data-icontype="icon-arrow"] label,
    .tie-icon-add-button.icon-bubble .tui-image-editor-button[data-icontype="icon-bubble"] label,
    .tie-draw-line-select-button.line .tui-image-editor-button.line label,
    .tie-draw-line-select-button.free .tui-image-editor-button.free label,
    .tie-flip-button.flipX .tui-image-editor-button.flipX label,
    .tie-flip-button.flipY .tui-image-editor-button.flipY label,
    .tie-flip-button.resetFlip .tui-image-editor-button.resetFlip label,
    .tie-crop-button .tui-image-editor-button.apply.active label,
    .tie-crop-preset-button .tui-image-editor-button.preset.active label,
    .tie-resize-button .tui-image-editor-button.apply.active label,
    .tie-resize-preset-button .tui-image-editor-button.preset.active label,
    .tie-shape-button.rect .tui-image-editor-button.rect label,
    .tie-shape-button.circle .tui-image-editor-button.circle label,
    .tie-shape-button.triangle .tui-image-editor-button.triangle label,
    .tie-text-effect-button .tui-image-editor-button.active label,
    .tie-text-align-button.tie-text-align-left .tui-image-editor-button.left label,
    .tie-text-align-button.tie-text-align-center .tui-image-editor-button.center label,
    .tie-text-align-button.tie-text-align-right .tui-image-editor-button.right label,
    .tie-mask-apply.apply.active .tui-image-editor-button.apply label,
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button:hover > label,
    .tui-image-editor-container .tui-image-editor-checkbox label > span {
        `.concat(wi,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button > label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label,
    .tui-image-editor-container .tui-image-editor-range-wrap.tui-image-editor-newline.short label > span {
        `)).call(Le,Di,`
    }
    .tui-image-editor-container .tui-image-editor-range-wrap label > span {
        `)).call($e,Oi,`
    }
    .tui-image-editor-container .tui-image-editor-partition > div {
        `)).call(Ke,_i,`
    }
    .tui-image-editor-container.left .tui-image-editor-submenu .tui-image-editor-partition > div,
    .tui-image-editor-container.right .tui-image-editor-submenu .tui-image-editor-partition > div {
        `)).call(Te,ki,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > span:before {
        `)).call(He,Pi,`
    }
    .tui-image-editor-container .tui-image-editor-checkbox label > input:checked + span:before {
        border: 0;
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-pointer {
        `)).call(je,Li,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-bar {
        `)).call(we,zi,`
    }
    .tui-image-editor-container .tui-image-editor-virtual-range-subbar {
        `)).call(ge,Fi,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-pointer {
        `)).call(Ht,Bi,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-subbar {
        `)).call(oe,Ui,`
    }
    .tui-image-editor-container .tui-image-editor-disabled .tui-image-editor-virtual-range-bar {
        `)).call(re,Hi,`
    }
    .tui-image-editor-container .tui-image-editor-range-value {
        `)).call(ie,ji,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value + label {
        `)).call(Lt,Ni,`
    }
    .tui-image-editor-container .tui-image-editor-submenu .tui-image-editor-button .color-picker-value {
        `)).call(vt,Ri,`
    }
    .tui-image-editor-container .svg_ic-menu {
        `)).call(ut,Wi,`
    }
    .tui-image-editor-container .svg_ic-submenu {
        `)).call(pt,Yi,`
    }
    .tui-image-editor-container .tui-image-editor-controls-logo > img,
    .tui-image-editor-container .tui-image-editor-header-logo > img {
        `)).call(lt,Gi,`
    }
    .tui-image-editor-menu use.normal.use-default,
    .tui-image-editor-help-menu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(nt,Ue.normal.color,`;
        stroke: `)).call(B,Ue.normal.color,`;
    }
    .tui-image-editor-menu use.active.use-default,
    .tui-image-editor-help-menu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(N,Ue.active.color,`;
        stroke: `)).call(_,Ue.active.color,`;
    }
    .tui-image-editor-menu use.hover.use-default,
    .tui-image-editor-help-menu use.hover.use-default {
        fill-rule: evenodd;
        fill: `)).call(P,Ue.hover.color,`;
        stroke: `)).call(E,Ue.hover.color,`;
    }
    .tui-image-editor-menu use.disabled.use-default,
    .tui-image-editor-help-menu use.disabled.use-default {
        fill-rule: evenodd;
        fill: `)).call(S,Ue.disabled.color,`;
        stroke: `)).call(h,Ue.disabled.color,`;
    }
    .tui-image-editor-submenu use.normal.use-default {
        fill-rule: evenodd;
        fill: `)).call(n,ti.normal.color,`;
        stroke: `)).call(c,ti.normal.color,`;
    }
    .tui-image-editor-submenu use.active.use-default {
        fill-rule: evenodd;
        fill: `)).call(r,ti.active.color,`;
        stroke: `)).call(v,ti.active.color,`;
    }
`)},Vr={"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"none","common.backgroundColor":"#1e1e1e","common.border":"0px","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#3c3c3c","submenu.normalLabel.color":"#8a8a8a","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"0px","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"},Jr=O(2534),Qr=function(){function A(v){W(this,A),this.styles=this._changeToObject(G()({},Vr,v)),mi(this._styleMaker()),this._loadDefaultSvgIcon()}return it(A,[{key:"getStyle",value:function(r){var c=null,n=r.replace(/\..+$/,""),h=this.styles[r];switch(r){case"common.bi":c=this.styles[r].image;break;case"menu.icon":c={active:this.styles["".concat(n,".activeIcon")],normal:this.styles["".concat(n,".normalIcon")],hover:this.styles["".concat(n,".hoverIcon")],disabled:this.styles["".concat(n,".disabledIcon")]};break;case"submenu.icon":c={active:this.styles["".concat(n,".activeIcon")],normal:this.styles["".concat(n,".normalIcon")]};break;case"submenu.label":c={active:this._makeCssText(this.styles["".concat(n,".activeLabel")]),normal:this._makeCssText(this.styles["".concat(n,".normalLabel")])};break;case"submenu.partition":c={vertical:this._makeCssText(G()({},h,{borderLeft:"1px solid ".concat(h.color)})),horizontal:this._makeCssText(G()({},h,{borderBottom:"1px solid ".concat(h.color)}))};break;case"range.disabledPointer":case"range.disabledBar":case"range.disabledSubbar":case"range.pointer":case"range.bar":case"range.subbar":h.backgroundColor=h.color,c=this._makeCssText(h);break;default:c=this._makeCssText(h);break}return c}},{key:"_styleMaker",value:function(){var r=this.getStyle("submenu.label"),c=this.getStyle("submenu.partition");return Zr({subMenuLabelActive:r.active,subMenuLabelNormal:r.normal,submenuPartitionVertical:c.vertical,submenuPartitionHorizontal:c.horizontal,biSize:this.getStyle("common.bisize"),subMenuRangeTitle:this.getStyle("range.title"),submenuRangePointer:this.getStyle("range.pointer"),submenuRangeBar:this.getStyle("range.bar"),submenuRangeSubbar:this.getStyle("range.subbar"),submenuDisabledRangePointer:this.getStyle("range.disabledPointer"),submenuDisabledRangeBar:this.getStyle("range.disabledBar"),submenuDisabledRangeSubbar:this.getStyle("range.disabledSubbar"),submenuRangeValue:this.getStyle("range.value"),submenuColorpickerTitle:this.getStyle("colorpicker.title"),submenuColorpickerButton:this.getStyle("colorpicker.button"),submenuCheckbox:this.getStyle("checkbox"),menuIconSize:this.getStyle("menu.iconSize"),submenuIconSize:this.getStyle("submenu.iconSize"),menuIconStyle:this.getStyle("menu.icon"),submenuIconStyle:this.getStyle("submenu.icon")})}},{key:"_changeToObject",value:function(r){var c={};return X()(r,function(n,h){var S=h.match(/^(.+)\.([a-z]+)$/i),E=ct(S,3),P=E[1],_=E[2];c[P]||(c[P]={}),c[P][_]=n}),c}},{key:"_makeCssText",value:function(r){var c=this,n=[];return X()(r,function(h,S){var E,P;l()(E=["backgroundImage"]).call(E,S)>-1&&h!=="none"&&(h="url(".concat(h,")")),n.push(U()(P="".concat(c._toUnderScore(S),": ")).call(P,h))}),n.join(";")}},{key:"_toUnderScore",value:function(r){return r.replace(/([A-Z])/g,function(c,n){return"-".concat(n.toLowerCase())})}},{key:"_loadDefaultSvgIcon",value:function(){if(!document.getElementById("tui-image-editor-svg-default-icons")){var r=new DOMParser,c=Jr.replace(/data:image\/svg\+xml;base64,/,""),n=r.parseFromString(atob(c),"text/xml");document.body.appendChild(n.documentElement)}}},{key:"_makeIconClassName",value:function(r,c){var n=c?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),h=n[r],S=h.path,E=h.name;return S&&E?r:"".concat(r," use-default")}},{key:"_makeSvgIconPrefix",value:function(r,c){var n,h=c?this.getStyle("submenu.icon"):this.getStyle("menu.icon"),S=h[r],E=S.path,P=S.name;return E&&P?U()(n="".concat(E,"#")).call(n,P,"-"):"#"}},{key:"_makeSvgItem",value:function(r,c,n){var h=this;return We()(r).call(r,function(S){var E,P,_=h._makeSvgIconPrefix(S,n),N=h._toUnderScore(c),B=h._makeIconClassName(S,n);return U()(E=U()(P='<use xlink:href="'.concat(_,"ic-")).call(P,N,'" class="')).call(E,B,'"/>')}).join("")}},{key:"makeMenSvgIconSet",value:function(r,c){var n,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return U()(n='<svg class="svg_ic-'.concat(h?"submenu":"menu",'">')).call(n,this._makeSvgItem(r,c,h),"</svg>")}}]),A}(),Kr=Qr,$r=O(9146),Ot=O.n($r),qr=O(6623),gn=O(4230);function Ji(A,v){return Ji=gn||function(c,n){return c.__proto__=n,c},Ji(A,v)}function me(A,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=qr(v&&v.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),v&&Ji(A,v)}var ta=O(3742);function xi(A){"@babel/helpers - typeof";return typeof m=="function"&&typeof ta=="symbol"?xi=function(r){return typeof r}:xi=function(r){return r&&typeof m=="function"&&r.constructor===m&&r!==m.prototype?"symbol":typeof r},xi(A)}function fe(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function ye(A,v){if(v&&(xi(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fe(A)}var vn=O(9856);function ee(A){return ee=gn?vn:function(r){return r.__proto__||vn(r)},ee(A)}var ea=O(6092),si=O.n(ea),ia=O(4858),na=O.n(ia),ra=["#000000","#2a2a2a","#545454","#7e7e7e","#a8a8a8","#d2d2d2","#ffffff","","#ff4040","#ff6518","#ffbb3b","#03bd9e","#00a9ff","#515ce6","#9e5fff","#ff5583"],pn=function(){function A(v,r){var c=r.defaultColor,n=c===void 0?"#7e7e7e":c,h=r.toggleDirection,S=h===void 0?"up":h,E=r.usageStatistics;W(this,A),this.colorpickerElement=v,this.usageStatistics=E,this._show=!1,this._colorpickerElement=v,this._toggleDirection=S,this._makePickerButtonElement(n),this._makePickerLayerElement(v,v.getAttribute("title")),this._color=n,this.picker=na().create({container:this.pickerElement,preset:ra,color:n,usageStatistics:this.usageStatistics}),this._addEvent()}return it(A,[{key:"destroy",value:function(){var r=this;this._removeEvent(),this.picker.destroy(),this.colorpickerElement.innerHTML="",X()(this,function(c,n){r[n]=null})}},{key:"color",get:function(){return this._color},set:function(r){this._color=r,this._changeColorElement(r)}},{key:"_changeColorElement",value:function(r){r?(this.colorElement.classList.remove("transparent"),this.colorElement.style.backgroundColor=r):(this.colorElement.style.backgroundColor="#fff",this.colorElement.classList.add("transparent"))}},{key:"_makePickerButtonElement",value:function(r){this.colorpickerElement.classList.add("tui-image-editor-button"),this.colorElement=document.createElement("div"),this.colorElement.className="color-picker-value",r?this.colorElement.style.backgroundColor=r:this.colorElement.classList.add("transparent")}},{key:"_makePickerLayerElement",value:function(r,c){var n=document.createElement("label"),h=document.createElement("div");this.pickerControl=document.createElement("div"),this.pickerControl.className="color-picker-control",this.pickerElement=document.createElement("div"),this.pickerElement.className="color-picker",n.innerHTML=c,h.className="triangle",this.pickerControl.appendChild(this.pickerElement),this.pickerControl.appendChild(h),r.appendChild(this.pickerControl),r.appendChild(this.colorElement),r.appendChild(n)}},{key:"_addEvent",value:function(){var r=this,c;this.picker.on("selectColor",function(n){r._changeColorElement(n.color),r._color=n.color,r.fire("change",n.color)}),this.eventHandler={pickerToggle:$()(c=this._pickerToggleEventHandler).call(c,this),pickerHide:function(){return r.hide()}},this.colorpickerElement.addEventListener("click",this.eventHandler.pickerToggle),document.body.addEventListener("click",this.eventHandler.pickerHide)}},{key:"_removeEvent",value:function(){this.colorpickerElement.removeEventListener("click",this.eventHandler.pickerToggle),document.body.removeEventListener("click",this.eventHandler.pickerHide),this.picker.off()}},{key:"_pickerToggleEventHandler",value:function(r){var c=r.target,n=c&&this._isElementInColorPickerControl(c);(!n||n&&this._isPaletteButton(c))&&(this._show=!this._show,this.pickerControl.style.display=this._show?"block":"none",this._setPickerControlPosition(),this.fire("changeShow",this)),r.stopPropagation()}},{key:"_isPaletteButton",value:function(r){return r.className==="tui-colorpicker-palette-button"}},{key:"_isElementInColorPickerControl",value:function(r){for(var c=r;c!==document.body&&c;){if(c===this.pickerControl)return!0;c=c.parentNode}return!1}},{key:"hide",value:function(){this._show=!1,this.pickerControl.style.display="none"}},{key:"_setPickerControlPosition",value:function(){var r=this.pickerControl.style,c=this._colorpickerElement.clientWidth/2+2,n=this.pickerControl.offsetWidth/2-c,h=(this.pickerControl.offsetHeight+10)*-1;this._toggleDirection==="down"&&(h=30),r.top="".concat(h,"px"),r.left="-".concat(n,"px")}}]),A}();yt().mixin(pn);var Je=pn,aa=/(-?)([0-9]*)[^0-9]*([0-9]*)/g,mn=function(){function A(v){var r,c,n,h,S,E,P,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};W(this,A),this._value=_.value||0,this.rangeElement=v.slider,this.rangeInputElement=v.input,this._drawRangeElement(),this.rangeWidth=this._getRangeWidth(),this._min=_.min||0,this._max=_.max||100,this._useDecimal=_.useDecimal,this._absMax=this._min*-1+this._max,this.realTimeEvent=_.realTimeEvent||!1,this._userInputTimer=null,this.eventHandler={startChangingSlide:$()(r=this._startChangingSlide).call(r,this),stopChangingSlide:$()(c=this._stopChangingSlide).call(c,this),changeSlide:$()(n=this._changeSlide).call(n,this),changeSlideFinally:$()(h=this._changeSlideFinally).call(h,this),changeInput:$()(S=this._changeInput).call(S,this),changeInputFinally:$()(E=this._changeValueWithInput).call(E,this,!0),changeInputWithArrow:$()(P=this._changeValueWithInputKeyEvent).call(P,this)},this._addClickEvent(),this._addDragEvent(),this._addInputEvent(),this.value=_.value,this.trigger("change")}return it(A,[{key:"destroy",value:function(){var r=this;this._removeClickEvent(),this._removeDragEvent(),this._removeInputEvent(),this.rangeElement.innerHTML="",X()(this,function(c,n){r[n]=null})}},{key:"max",get:function(){return this._max},set:function(r){this._max=r,this._absMax=this._min*-1+this._max,this.value=this._value}},{key:"min",get:function(){return this._min},set:function(r){this._min=r,this.max=this._max}},{key:"value",get:function(){return this._value},set:function(r){r=this._useDecimal?r:zt(r);var c=r-this._min,n=c*this.rangeWidth/this._absMax;this.rangeWidth<n&&(n=this.rangeWidth),this.pointer.style.left="".concat(n,"px"),this.subbar.style.right="".concat(this.rangeWidth-n,"px"),this._value=r,this.rangeInputElement&&(this.rangeInputElement.value=r)}},{key:"trigger",value:function(r){this.fire(r,this._value)}},{key:"_getRangeWidth",value:function(){var r=function(n){return zt(window.getComputedStyle(n,null).width)};return r(this.rangeElement)-r(this.pointer)}},{key:"_drawRangeElement",value:function(){this.rangeElement.classList.add("tui-image-editor-range"),this.bar=document.createElement("div"),this.bar.className="tui-image-editor-virtual-range-bar",this.subbar=document.createElement("div"),this.subbar.className="tui-image-editor-virtual-range-subbar",this.pointer=document.createElement("div"),this.pointer.className="tui-image-editor-virtual-range-pointer",this.bar.appendChild(this.subbar),this.bar.appendChild(this.pointer),this.rangeElement.appendChild(this.bar)}},{key:"_addInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.addEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.addEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_removeInputEvent",value:function(){this.rangeInputElement&&(this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInputWithArrow),this.rangeInputElement.removeEventListener("keydown",this.eventHandler.changeInput),this.rangeInputElement.removeEventListener("blur",this.eventHandler.changeInputFinally))}},{key:"_changeValueWithInputKeyEvent",value:function(r){var c,n=r.keyCode,h=r.target;if(!(l()(c=[xe.ARROW_UP,xe.ARROW_DOWN]).call(c,n)<0)){var S=Number(h.value);S=this._valueUpDownForKeyEvent(S,n);var E=S<this._min||S>this._max;if(!E){var P=se(S,this._min,this.max);this.value=P,this.fire("change",P,!1)}}}},{key:"_valueUpDownForKeyEvent",value:function(r,c){var n=this._useDecimal?.1:1;return c===xe.ARROW_UP?r+=n:c===xe.ARROW_DOWN&&(r-=n),r}},{key:"_changeInput",value:function(r){var c=this;clearTimeout(this._userInputTimer);var n=r.keyCode;if(n<xe.DIGIT_0||n>xe.DIGIT_9){r.preventDefault();return}this._userInputTimer=t()(function(){c._inputSetValue(r.target.value)},350)}},{key:"_inputSetValue",value:function(r){var c=this._useDecimal?Number(r):zt(r);c=se(c,this._min,this.max),this.value=c,this.fire("change",c,!0)}},{key:"_changeValueWithInput",value:function(r,c){var n,h=c.keyCode,S=c.target;if(!(l()(n=[xe.ARROW_UP,xe.ARROW_DOWN]).call(n,h)>=0)){var E=this._filterForInputText(S.value),P=!E||isNaN(E);S.value=E,P||this._inputSetValue(E)}}},{key:"_addClickEvent",value:function(){this.rangeElement.addEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_removeClickEvent",value:function(){this.rangeElement.removeEventListener("click",this.eventHandler.changeSlideFinally)}},{key:"_addDragEvent",value:function(){this.pointer.addEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_removeDragEvent",value:function(){this.pointer.removeEventListener("mousedown",this.eventHandler.startChangingSlide)}},{key:"_changeSlide",value:function(r){var c=r.screenX,n=c-this.firstPosition,h=this.firstLeft+n;h=h>this.rangeWidth?this.rangeWidth:h,h=h<0?0:h,this.pointer.style.left="".concat(h,"px"),this.subbar.style.right="".concat(this.rangeWidth-h,"px");var S=h/this.rangeWidth,E=this._absMax*S+this._min,P=this._useDecimal?E:zt(E),_=this.value!==P;_&&(this.value=P,this.realTimeEvent&&this.fire("change",this._value,!1))}},{key:"_changeSlideFinally",value:function(r){if(r.stopPropagation(),r.target.className==="tui-image-editor-range"){var c=r.offsetX,n=c/this.rangeWidth,h=this._absMax*n+this._min;this.pointer.style.left="".concat(n*this.rangeWidth,"px"),this.subbar.style.right="".concat((1-n)*this.rangeWidth,"px"),this.value=h,this.fire("change",h,!0)}}},{key:"_startChangingSlide",value:function(r){this.firstPosition=r.screenX,this.firstLeft=zt(this.pointer.style.left)||0,document.addEventListener("mousemove",this.eventHandler.changeSlide),document.addEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_stopChangingSlide",value:function(){this.fire("change",this._value,!0),document.removeEventListener("mousemove",this.eventHandler.changeSlide),document.removeEventListener("mouseup",this.eventHandler.stopChangingSlide)}},{key:"_filterForInputText",value:function(r){return r.replace(aa,"$1$2$3")}}]),A}();yt().mixin(mn);var ze=mn,yn=function(){function A(v,r){var c=r.locale,n=r.name,h=r.makeSvgIcon,S=r.menuBarPosition,E=r.templateHtml,P=r.usageStatistics;W(this,A),this.subMenuElement=v,this.menuBarPosition=S,this.toggleDirection=S==="top"?"down":"up",this.colorPickerControls=[],this.usageStatistics=P,this.eventHandler={},this._makeSubMenuElement({locale:c,name:n,makeSvgIcon:h,templateHtml:E})}return it(A,[{key:"selector",value:function(r){return this.subMenuElement.querySelector(r)}},{key:"colorPickerChangeShow",value:function(r){var c;Zt()(c=this.colorPickerControls).call(c,function(n){r!==n&&n.hide()})}},{key:"getButtonType",value:function(r,c){return r.className.match(RegExp("(".concat(c.join("|"),")")))[0]}},{key:"changeClass",value:function(r,c,n){r.classList.remove(c),r.classList.add(n)}},{key:"changeStandbyMode",value:function(){}},{key:"changeStartMode",value:function(){}},{key:"_makeSubMenuElement",value:function(r){var c=r.locale,n=r.name,h=r.iconStyle,S=r.makeSvgIcon,E=r.templateHtml,P=document.createElement("div");P.className="tui-image-editor-menu-".concat(n),P.innerHTML=E({locale:c,iconStyle:h,makeSvgIcon:S}),this.subMenuElement.appendChild(P)}},{key:"_onStartEditingInputBox",value:function(){this.fire(Et.INPUT_BOX_EDITING_STARTED)}},{key:"_onStopEditingInputBox",value:function(){this.fire(Et.INPUT_BOX_EDITING_STOPPED)}}]),A}();yt().mixin(yn);var Ge=yn,oa=function(A){var v,r,c,n,h,S,E,P,_=A.locale,N=A.makeSvgIcon;return U()(v=U()(r=U()(c=U()(n=U()(h=U()(S=U()(E=U()(P=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-shape-button">
            <div class="tui-image-editor-button rect">
                <div>
                    `.concat(N(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(P,_.localize("Rectangle"),` </label>
            </div>
            <div class="tui-image-editor-button circle">
                <div>
                    `)).call(E,N(["normal","active"],"shape-circle",!0),`
                </div>
                <label> `)).call(S,_.localize("Circle"),` </label>
            </div>
            <div class="tui-image-editor-button triangle">
                <div>
                    `)).call(h,N(["normal","active"],"shape-triangle",!0),`
                </div>
                <label> `)).call(n,_.localize("Triangle"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-shape-color-button">
            <div class="tie-color-fill" title="`)).call(c,_.localize("Fill"),`"></div>
            <div class="tie-color-stroke" title="`)).call(r,_.localize("Stroke"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(v,_.localize("Stroke"),`</label>
            <div class="tie-stroke-range"></div>
            <input class="tie-stroke-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function sa(A){var v=la();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function la(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var ca={stroke:"#ffbb3b",fill:"",strokeWidth:3},ua=function(A){me(r,A);var v=sa(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"shape",makeSvgIcon:E,menuBarPosition:P,templateHtml:oa,usageStatistics:_}),h.type=null,h.options=ca,h._els={shapeSelectButton:h.selector(".tie-shape-button"),shapeColorButton:h.selector(".tie-shape-color-button"),strokeRange:new ze({slider:h.selector(".tie-stroke-range"),input:h.selector(".tie-stroke-range-value")},ii),fillColorpicker:new Je(h.selector(".tie-color-fill"),{defaultColor:"",toggleDirection:h.toggleDirection,usageStatistics:h.usageStatistics}),strokeColorpicker:new Je(h.selector(".tie-color-stroke"),{defaultColor:"#ffbb3b",toggleDirection:h.toggleDirection,usageStatistics:h.usageStatistics})},h.colorPickerControls.push(h._els.fillColorpicker),h.colorPickerControls.push(h._els.strokeColorpicker),h.colorPickerInputBoxes=[],h.colorPickerInputBoxes.push(h._els.fillColorpicker.colorpickerElement.querySelector(Ce.COLOR_PICKER_INPUT_BOX)),h.colorPickerInputBoxes.push(h._els.strokeColorpicker.colorpickerElement.querySelector(Ce.COLOR_PICKER_INPUT_BOX)),h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.strokeRange.destroy(),this._els.fillColorpicker.destroy(),this._els.strokeColorpicker.destroy(),Re(this)}},{key:"addEvent",value:function(n){var h,S,E,P,_,N,B=this;this.eventHandler.shapeTypeSelected=$()(h=this._changeShapeHandler).call(h,this),this.actions=n,this._els.shapeSelectButton.addEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.on("change",$()(S=this._changeStrokeRangeHandler).call(S,this)),this._els.fillColorpicker.on("change",$()(E=this._changeFillColorHandler).call(E,this)),this._els.strokeColorpicker.on("change",$()(P=this._changeStrokeColorHandler).call(P,this)),this._els.fillColorpicker.on("changeShow",$()(_=this.colorPickerChangeShow).call(_,this)),this._els.strokeColorpicker.on("changeShow",$()(N=this.colorPickerChangeShow).call(N,this)),si()(this.colorPickerInputBoxes,function(nt){var lt,pt;nt.addEventListener(Et.FOCUS,$()(lt=B._onStartEditingInputBox).call(lt,B)),nt.addEventListener(Et.BLUR,$()(pt=B._onStopEditingInputBox).call(pt,B))},this)}},{key:"_removeEvent",value:function(){var n=this;this._els.shapeSelectButton.removeEventListener("click",this.eventHandler.shapeTypeSelected),this._els.strokeRange.off(),this._els.fillColorpicker.off(),this._els.strokeColorpicker.off(),si()(this.colorPickerInputBoxes,function(h){var S,E;h.removeEventListener(Et.FOCUS,$()(S=n._onStartEditingInputBox).call(S,n)),h.removeEventListener(Et.BLUR,$()(E=n._onStopEditingInputBox).call(E,n))},this)}},{key:"setShapeStatus",value:function(n){var h=n.strokeWidth,S=n.strokeColor,E=n.fillColor;this._els.strokeRange.value=h,this._els.strokeColorpicker.color=S,this._els.fillColorpicker.color=E,this.options.stroke=S,this.options.fill=E,this.options.strokeWidth=h,this.actions.setDrawingShape(this.type,{strokeWidth:h})}},{key:"changeStartMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.changeSelectableAll(!0),this._els.shapeSelectButton.classList.remove("circle"),this._els.shapeSelectButton.classList.remove("triangle"),this._els.shapeSelectButton.classList.remove("rect")}},{key:"setMaxStrokeValue",value:function(n){var h=n;h<=0&&(h=ii.max),this._els.strokeRange.max=h}},{key:"setStrokeValue",value:function(n){this._els.strokeRange.value=n,this._els.strokeRange.trigger("change")}},{key:"getStrokeValue",value:function(){return this._els.strokeRange.value}},{key:"_changeShapeHandler",value:function(n){var h=n.target.closest(".tui-image-editor-button");if(h){this.actions.stopDrawingMode(),this.actions.discardSelection();var S=this.getButtonType(h,["circle","triangle","rect"]);if(this.type===S){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=S,n.currentTarget.classList.add(S),this.actions.changeSelectableAll(!1),this.actions.modeChange("shape")}}},{key:"_changeStrokeRangeHandler",value:function(n,h){this.options.strokeWidth=zt(n),this.actions.changeShape({strokeWidth:n},!h),this.actions.setDrawingShape(this.type,this.options)}},{key:"_changeFillColorHandler",value:function(n){n=n||"transparent",this.options.fill=n,this.actions.changeShape({fill:n})}},{key:"_changeStrokeColorHandler",value:function(n){n=n||"transparent",this.options.stroke=n,this.actions.changeShape({stroke:n})}}]),r}(Ge),ha=ua,fa=function(A){var v,r,c,n,h,S,E,P,_,N,B,nt,lt,pt,ut,vt,Lt,ie=A.locale,re=A.makeSvgIcon;return U()(v=U()(r=U()(c=U()(n=U()(h=U()(S=U()(E=U()(P=U()(_=U()(N=U()(B=U()(nt=U()(lt=U()(pt=U()(ut=U()(vt=U()(Lt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-crop-preset-button">
            <div class="tui-image-editor-button preset preset-none active">
                <div>
                    `.concat(re(["normal","active"],"shape-rectangle",!0),`
                </div>
                <label> `)).call(Lt,ie.localize("Custom"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-square">
                <div>
                    `)).call(vt,re(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(ut,ie.localize("Square"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-3-2">
                <div>
                    `)).call(pt,re(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(lt,ie.localize("3:2"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-4-3">
                <div>
                    `)).call(nt,re(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(B,ie.localize("4:3"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-5-4">
                <div>
                    `)).call(N,re(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(_,ie.localize("5:4"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-7-5">
                <div>
                    `)).call(P,re(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(E,ie.localize("7:5"),` </label>
            </div>
            <div class="tui-image-editor-button preset preset-16-9">
                <div>
                    `)).call(S,re(["normal","active"],"crop",!0),`
                </div>
                <label> `)).call(h,ie.localize("16:9"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline">
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-crop-button action">
            <div class="tui-image-editor-button apply">
                `)).call(n,re(["normal","active"],"apply"),`
                <label>
                    `)).call(c,ie.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(r,re(["normal","active"],"cancel"),`
                <label>
                    `)).call(v,ie.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function da(A){var v=ga();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function ga(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var va=function(A){me(r,A);var v=da(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"crop",makeSvgIcon:E,menuBarPosition:P,templateHtml:fa,usageStatistics:_}),h.status="active",h._els={apply:h.selector(".tie-crop-button .apply"),cancel:h.selector(".tie-crop-button .cancel"),preset:h.selector(".tie-crop-preset-button")},h.defaultPresetButton=h._els.preset.querySelector(".preset-none"),h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),Re(this)}},{key:"addEvent",value:function(n){var h,S,E,P=$()(h=this._applyEventHandler).call(h,this),_=$()(S=this._cancelEventHandler).call(S,this),N=$()(E=this._cropzonePresetEventHandler).call(E,this);this.eventHandler={apply:P,cancel:_,cropzonePreset:N},this.actions=n,this._els.apply.addEventListener("click",P),this._els.cancel.addEventListener("click",_),this._els.preset.addEventListener("click",N)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel),this._els.preset.removeEventListener("click",this.eventHandler.cropzonePreset)}},{key:"_applyEventHandler",value:function(){this.actions.crop(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.cancel(),this._els.apply.classList.remove("active")}},{key:"_cropzonePresetEventHandler",value:function(n){var h=n.target.closest(".tui-image-editor-button.preset");if(h){var S=h.className.match(/preset-[^\s]+/),E=ct(S,1),P=E[0];this._setPresetButtonActive(h),this.actions.preset(P)}}},{key:"changeStartMode",value:function(){this.actions.modeChange("crop")}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this._setPresetButtonActive()}},{key:"changeApplyButtonStatus",value:function(n){n?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}},{key:"_setPresetButtonActive",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.defaultPresetButton;X()(this._els.preset.querySelectorAll(".preset"),function(h){h.classList.remove("active")}),n&&n.classList.add("active")}}]),r}(Ge),pa=va,ma=function(A){var v,r,c,n,h,S,E=A.locale,P=A.makeSvgIcon;return U()(v=U()(r=U()(c=U()(n=U()(h=U()(S=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-range-wrap tui-image-editor-newline">
                <label class="range">`.concat(E.localize("Width"),`&nbsp;</label>
                <div class="tie-width-range"></div>
                <input class="tie-width-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
                <div class="tui-image-editor-partition tui-image-editor-newline"></div>
                <label class="range">`)).call(S,E.localize("Height"),`</label>
                <div class="tie-height-range"></div>
                <input class="tie-height-range-value tui-image-editor-range-value" value="0" /> <label>px</label>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-lock-aspect-ratio">
                        <span>`)).call(h,E.localize("Lock Aspect Ratio"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-partition tui-image-editor-newline"></li>
        <li class="tie-resize-button action">
            <div class="tui-image-editor-button apply">
                `)).call(n,P(["normal","active"],"apply"),`
                <label>
                    `)).call(c,E.localize("Apply"),`
                </label>
            </div>
            <div class="tui-image-editor-button cancel">
                `)).call(r,P(["normal","active"],"cancel"),`
                <label>
                    `)).call(v,E.localize("Cancel"),`
                </label>
            </div>
        </li>
    </ul>
`)};function ya(A){var v=Ca();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Ca(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Sa=function(A){me(r,A);var v=ya(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"resize",makeSvgIcon:E,menuBarPosition:P,templateHtml:ma,usageStatistics:_}),h.status="active",h._lockState=!1,h._originalDimensions=null,h._els={widthRange:new ze({slider:h.selector(".tie-width-range"),input:h.selector(".tie-width-range-value")},Xe),heightRange:new ze({slider:h.selector(".tie-height-range"),input:h.selector(".tie-height-range-value")},Xe),lockAspectRatio:h.selector(".tie-lock-aspect-ratio"),apply:h.selector(".tie-resize-button .apply"),cancel:h.selector(".tie-resize-button .cancel")},h}return it(r,[{key:"changeStartMode",value:function(){this.actions.modeChange("resize");var n=this.actions.getCurrentDimensions();this._originalDimensions=n,this.setWidthValue(n.width),this.setHeightValue(n.height)}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode(),this.actions.reset(!0)}},{key:"setLimit",value:function(n){this._els.widthRange.min=this.calcMinValue(n.minWidth),this._els.heightRange.min=this.calcMinValue(n.minHeight),this._els.widthRange.max=this.calcMaxValue(n.maxWidth),this._els.heightRange.max=this.calcMaxValue(n.maxHeight)}},{key:"calcMaxValue",value:function(n){return n<=0&&(n=Xe.max),n}},{key:"calcMinValue",value:function(n){return n<=0&&(n=Xe.min),n}},{key:"setWidthValue",value:function(n){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.widthRange.value=n,h&&this._els.widthRange.trigger("change")}},{key:"setHeightValue",value:function(n){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._els.heightRange.value=n,h&&this._els.heightRange.trigger("change")}},{key:"destroy",value:function(){this._removeEvent(),Re(this)}},{key:"addEvent",value:function(n){var h,S,E,P,_;this._els.widthRange.on("change",$()(h=this._changeWidthRangeHandler).call(h,this)),this._els.heightRange.on("change",$()(S=this._changeHeightRangeHandler).call(S,this)),this._els.lockAspectRatio.addEventListener("change",$()(E=this._changeLockAspectRatio).call(E,this));var N=$()(P=this._applyEventHandler).call(P,this),B=$()(_=this._cancelEventHandler).call(_,this);this.eventHandler={apply:N,cancel:B},this.actions=n,this._els.apply.addEventListener("click",N),this._els.cancel.addEventListener("click",B)}},{key:"_changeWidthRangeHandler",value:function(n){this.actions.preview("width",zt(n),this._lockState)}},{key:"_changeHeightRangeHandler",value:function(n){this.actions.preview("height",zt(n),this._lockState)}},{key:"_changeLockAspectRatio",value:function(n){this._lockState=n.target.checked,this.actions.lockAspectRatio(this._lockState,Xe.min,Xe.max)}},{key:"_removeEvent",value:function(){this._els.apply.removeEventListener("click",this.eventHandler.apply),this._els.cancel.removeEventListener("click",this.eventHandler.cancel)}},{key:"_applyEventHandler",value:function(){this.actions.resize(),this._els.apply.classList.remove("active")}},{key:"_cancelEventHandler",value:function(){this.actions.reset(),this._els.cancel.classList.remove("active")}},{key:"changeApplyButtonStatus",value:function(n){n?this._els.apply.classList.add("active"):this._els.apply.classList.remove("active")}}]),r}(Ge),xa=Sa,Ia=function(A){var v,r,c,n,h,S=A.locale,E=A.makeSvgIcon;return U()(v=U()(r=U()(c=U()(n=U()(h=`
    <ul class="tie-flip-button tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button flipX">
                <div>
                    `.concat(E(["normal","active"],"flip-x",!0),`
                </div>
                <label>
                    `)).call(h,S.localize("Flip X"),`
                </label>
            </div>
            <div class="tui-image-editor-button flipY">
                <div>
                    `)).call(n,E(["normal","active"],"flip-y",!0),`
                </div>
                <label>
                    `)).call(c,S.localize("Flip Y"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tui-image-editor-button resetFlip">
                <div>
                    `)).call(r,E(["normal","active"],"flip-reset",!0),`
                </div>
                <label>
                    `)).call(v,S.localize("Reset"),`
                </label>
            </div>
        </li>
    </ul>
`)};function ba(A){var v=Ma();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Ma(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Ta=function(A){me(r,A);var v=ba(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"flip",makeSvgIcon:E,menuBarPosition:P,templateHtml:Ia,usageStatistics:_}),h.flipStatus=!1,h._els={flipButton:h.selector(".tie-flip-button")},h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),Re(this)}},{key:"addEvent",value:function(n){var h;this.eventHandler.changeFlip=$()(h=this._changeFlip).call(h,this),this._actions=n,this._els.flipButton.addEventListener("click",this.eventHandler.changeFlip)}},{key:"_removeEvent",value:function(){this._els.flipButton.removeEventListener("click",this.eventHandler.changeFlip)}},{key:"_changeFlip",value:function(n){var h=this,S=n.target.closest(".tui-image-editor-button");if(S){var E=this.getButtonType(S,["flipX","flipY","resetFlip"]);if(!this.flipStatus&&E==="resetFlip")return;this._actions.flip(E).then(function(P){var _=h._els.flipButton.classList;h.flipStatus=!1,_.remove("resetFlip"),X()(["flipX","flipY"],function(N){_.remove(N),P[N]&&(_.add(N),_.add("resetFlip"),h.flipStatus=!0)})})}}}]),r}(Ge),Ea=Ta,Aa=function(A){var v,r,c=A.locale,n=A.makeSvgIcon;return U()(v=U()(r=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-rotate-button">
            <div class="tui-image-editor-button clockwise">
                <div>
                    `.concat(n(["normal","active"],"rotate-clockwise",!0),`
                </div>
                <label> 30 </label>
            </div>
            <div class="tui-image-editor-button counterclockwise">
                <div>
                    `)).call(r,n(["normal","active"],"rotate-counterclockwise",!0),`
                </div>
                <label> -30 </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(v,c.localize("Range"),`</label>
            <div class="tie-rotate-range"></div>
            <input class="tie-rotate-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function wa(A){var v=Da();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Da(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Oa=30,_a=-30,ka=function(A){me(r,A);var v=wa(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"rotate",makeSvgIcon:E,menuBarPosition:P,templateHtml:Aa,usageStatistics:_}),h._value=0,h._els={rotateButton:h.selector(".tie-rotate-button"),rotateRange:new ze({slider:h.selector(".tie-rotate-range"),input:h.selector(".tie-rotate-range-value")},fi)},h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.rotateRange.destroy(),Re(this)}},{key:"setRangeBarAngle",value:function(n,h){var S=h;n==="rotate"&&(S=Ct()(this._els.rotateRange.value,10)+h),this._setRangeBarRatio(S)}},{key:"_setRangeBarRatio",value:function(n){this._els.rotateRange.value=n}},{key:"addEvent",value:function(n){var h,S;this.eventHandler.rotationAngleChanged=$()(h=this._changeRotateForButton).call(h,this),this.actions=n,this._els.rotateButton.addEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.on("change",$()(S=this._changeRotateForRange).call(S,this))}},{key:"_removeEvent",value:function(){this._els.rotateButton.removeEventListener("click",this.eventHandler.rotationAngleChanged),this._els.rotateRange.off()}},{key:"_changeRotateForRange",value:function(n,h){var S=zt(n);this.actions.setAngle(S,!h),this._value=S}},{key:"_changeRotateForButton",value:function(n){var h=n.target.closest(".tui-image-editor-button"),S=this._els.rotateRange.value;if(h){var E=this.getButtonType(h,["counterclockwise","clockwise"]),P={clockwise:Oa,counterclockwise:_a}[E],_=Ct()(S,10)+P,N=_>=-360&&_<=360;N&&this.actions.rotate(P)}}}]),r}(Ge),Pa=ka,La=function(A){var v,r,c,n,h,S,E,P,_,N,B,nt,lt,pt=A.locale,ut=A.makeSvgIcon;return U()(v=U()(r=U()(c=U()(n=U()(h=U()(S=U()(E=U()(P=U()(_=U()(N=U()(B=U()(nt=U()(lt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-text-effect-button">
            <div class="tui-image-editor-button bold">
                <div>
                    `.concat(ut(["normal","active"],"text-bold",!0),`
                </div>
                <label> `)).call(lt,pt.localize("Bold"),` </label>
            </div>
            <div class="tui-image-editor-button italic">
                <div>
                    `)).call(nt,ut(["normal","active"],"text-italic",!0),`
                </div>
                <label> `)).call(B,pt.localize("Italic"),` </label>
            </div>
            <div class="tui-image-editor-button underline">
                <div>
                    `)).call(N,ut(["normal","active"],"text-underline",!0),`
                </div>
                <label> `)).call(_,pt.localize("Underline"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-text-align-button">
            <div class="tui-image-editor-button left">
                <div>
                    `)).call(P,ut(["normal","active"],"text-align-left",!0),`
                </div>
                <label> `)).call(E,pt.localize("Left"),` </label>
            </div>
            <div class="tui-image-editor-button center">
                <div>
                    `)).call(S,ut(["normal","active"],"text-align-center",!0),`
                </div>
                <label> `)).call(h,pt.localize("Center"),` </label>
            </div>
            <div class="tui-image-editor-button right">
                <div>
                    `)).call(n,ut(["normal","active"],"text-align-right",!0),`
                </div>
                <label> `)).call(c,pt.localize("Right"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-text-color" title="`)).call(r,pt.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(v,pt.localize("Text size"),`</label>
            <div class="tie-text-range"></div>
            <input class="tie-text-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function ja(A){var v=Na();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Na(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Ra=function(A){me(r,A);var v=ja(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"text",makeSvgIcon:E,menuBarPosition:P,templateHtml:La,usageStatistics:_}),h.effect={bold:!1,italic:!1,underline:!1},h.align="tie-text-align-left",h._els={textEffectButton:h.selector(".tie-text-effect-button"),textAlignButton:h.selector(".tie-text-align-button"),textColorpicker:new Je(h.selector(".tie-text-color"),{defaultColor:"#ffbb3b",toggleDirection:h.toggleDirection,usageStatistics:h.usageStatistics}),textRange:new ze({slider:h.selector(".tie-text-range"),input:h.selector(".tie-text-range-value")},gi)},h.colorPickerInputBox=h._els.textColorpicker.colorpickerElement.querySelector(Ce.COLOR_PICKER_INPUT_BOX),h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.textColorpicker.destroy(),this._els.textRange.destroy(),Re(this)}},{key:"addEvent",value:function(n){var h,S,E,P,_,N,B=$()(h=this._setTextEffectHandler).call(h,this),nt=$()(S=this._setTextAlignHandler).call(S,this);this.eventHandler={setTextEffect:B,setTextAlign:nt},this.actions=n,this._els.textEffectButton.addEventListener("click",B),this._els.textAlignButton.addEventListener("click",nt),this._els.textRange.on("change",$()(E=this._changeTextRnageHandler).call(E,this)),this._els.textColorpicker.on("change",$()(P=this._changeColorHandler).call(P,this)),this.colorPickerInputBox.addEventListener(Et.FOCUS,$()(_=this._onStartEditingInputBox).call(_,this)),this.colorPickerInputBox.addEventListener(Et.BLUR,$()(N=this._onStopEditingInputBox).call(N,this))}},{key:"_removeEvent",value:function(){var n,h,S=this.eventHandler,E=S.setTextEffect,P=S.setTextAlign;this._els.textEffectButton.removeEventListener("click",E),this._els.textAlignButton.removeEventListener("click",P),this._els.textRange.off(),this._els.textColorpicker.off(),this.colorPickerInputBox.removeEventListener(Et.FOCUS,$()(n=this._onStartEditingInputBox).call(n,this)),this.colorPickerInputBox.removeEventListener(Et.BLUR,$()(h=this._onStopEditingInputBox).call(h,this))}},{key:"changeStandbyMode",value:function(){this.actions.stopDrawingMode()}},{key:"changeStartMode",value:function(){this.actions.modeChange("text")}},{key:"textColor",get:function(){return this._els.textColorpicker.color},set:function(n){this._els.textColorpicker.color=n}},{key:"fontSize",get:function(){return this._els.textRange.value},set:function(n){this._els.textRange.value=n}},{key:"fontStyle",get:function(){return this.effect.italic?"italic":"normal"}},{key:"fontWeight",get:function(){return this.effect.bold?"bold":"normal"}},{key:"underline",get:function(){return this.effect.underline}},{key:"setTextStyleStateOnAction",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=St()(n),S=n.fontSize,E=n.fontStyle,P=n.fontWeight,_=n.textDecoration,N=n.textAlign;this.textColor=h,this.fontSize=S,this.setEffectState("italic",E),this.setEffectState("bold",P),this.setEffectState("underline",_),this.setAlignState("tie-text-align-".concat(N))}},{key:"setEffectState",value:function(n,h){var S=h==="italic"||h==="bold"||h==="underline",E=this._els.textEffectButton.querySelector(".tui-image-editor-button.".concat(n));this.effect[n]=S,E.classList[S?"add":"remove"]("active")}},{key:"setAlignState",value:function(n){var h=this._els.textAlignButton;h.classList.remove(this.align),h.classList.add(n),this.align=n}},{key:"_setTextEffectHandler",value:function(n){var h=n.target.closest(".tui-image-editor-button");if(h){var S=h.className.match(/(bold|italic|underline)/),E=ct(S,1),P=E[0],_={bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},underline:{textDecoration:"underline"}}[P];this.effect[P]=!this.effect[P],h.classList.toggle("active"),this.actions.changeTextStyle(_)}}},{key:"_setTextAlignHandler",value:function(n){var h=n.target.closest(".tui-image-editor-button");if(h){var S=this.getButtonType(h,["left","center","right"]),E="tie-text-align-".concat(S);n.currentTarget.classList.remove(this.align),this.align!==E&&n.currentTarget.classList.add(E),this.actions.changeTextStyle({textAlign:S}),this.align=E}}},{key:"_changeTextRnageHandler",value:function(n,h){this.actions.changeTextStyle({fontSize:n},!h)}},{key:"_changeColorHandler",value:function(n){n=n||"transparent",this.actions.changeTextStyle({fill:n})}}]),r}(Ge),za=Ra,Fa=function(A){var v,r,c,n=A.locale,h=A.makeSvgIcon;return U()(v=U()(r=U()(c=`
    <ul class="tui-image-editor-submenu-item">
        <li>
            <div class="tui-image-editor-button">
                <div>
                    <input type="file" accept="image/*" class="tie-mask-image-file">
                    `.concat(h(["normal","active"],"mask-load",!0),`
                </div>
                <label> `)).call(c,n.localize("Load Mask Image"),` </label>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tie-mask-apply tui-image-editor-newline apply" style="margin-top: 22px;margin-bottom: 5px">
            <div class="tui-image-editor-button apply">
                `)).call(r,h(["normal","active"],"apply"),`
                <label>
                    `)).call(v,n.localize("Apply"),`
                </label>
            </div>
        </li>
    </ul>
`)};function Ba(A){var v=Ha();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Ha(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Ua=function(A){me(r,A);var v=Ba(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"mask",makeSvgIcon:E,menuBarPosition:P,templateHtml:Fa,usageStatistics:_}),h._els={applyButton:h.selector(".tie-mask-apply"),maskImageButton:h.selector(".tie-mask-image-file")},h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),Re(this)}},{key:"addEvent",value:function(n){var h,S,E=$()(h=this._loadMaskFile).call(h,this),P=$()(S=this._applyMask).call(S,this);this.eventHandler={loadMaskFile:E,applyMask:P},this.actions=n,this._els.maskImageButton.addEventListener("change",E),this._els.applyButton.addEventListener("click",P)}},{key:"_removeEvent",value:function(){this._els.maskImageButton.removeEventListener("change",this.eventHandler.loadMaskFile),this._els.applyButton.removeEventListener("click",this.eventHandler.applyMask)}},{key:"_applyMask",value:function(){this.actions.applyFilter(),this._els.applyButton.classList.remove("active")}},{key:"_loadMaskFile",value:function(n){var h;Pe()||alert("This browser does not support file-api");var S=ct(n.target.files,1),E=S[0];E&&(h=V().createObjectURL(E),this.actions.loadImageFromURL(h,E),this._els.applyButton.classList.add("active"))}}]),r}(Ge),Ya=Ua,Wa=function(A){var v,r,c,n,h,S,E,P,_,N,B,nt,lt,pt,ut,vt,Lt,ie,re,oe,Ht=A.locale,ge=A.makeSvgIcon;return U()(v=U()(r=U()(c=U()(n=U()(h=U()(S=U()(E=U()(P=U()(_=U()(N=U()(B=U()(nt=U()(lt=U()(pt=U()(ut=U()(vt=U()(Lt=U()(ie=U()(re=U()(oe=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" data-icontype="icon-arrow">
                <div>
                    `.concat(ge(["normal","active"],"icon-arrow",!0),`
                </div>
                <label>
                    `)).call(oe,Ht.localize("Arrow"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-2">
                <div>
                    `)).call(re,ge(["normal","active"],"icon-arrow-2",!0),`
                </div>
                <label>
                    `)).call(ie,Ht.localize("Arrow-2"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-arrow-3">
                <div>
                    `)).call(Lt,ge(["normal","active"],"icon-arrow-3",!0),`
                </div>
                <label>
                    `)).call(vt,Ht.localize("Arrow-3"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star">
                <div>
                    `)).call(ut,ge(["normal","active"],"icon-star",!0),`
                </div>
                <label>
                    `)).call(pt,Ht.localize("Star-1"),`
                </label>
            </div>
            <div class="tui-image-editor-button" data-icontype="icon-star-2">
                <div>
                    `)).call(lt,ge(["normal","active"],"icon-star-2",!0),`
                </div>
                <label>
                    `)).call(nt,Ht.localize("Star-2"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-polygon">
                <div>
                    `)).call(B,ge(["normal","active"],"icon-polygon",!0),`
                </div>
                <label>
                    `)).call(N,Ht.localize("Polygon"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-location">
                <div>
                    `)).call(_,ge(["normal","active"],"icon-location",!0),`
                </div>
                <label>
                    `)).call(P,Ht.localize("Location"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-heart">
                <div>
                    `)).call(E,ge(["normal","active"],"icon-heart",!0),`
                </div>
                <label>
                    `)).call(S,Ht.localize("Heart"),`
                </label>
            </div>

            <div class="tui-image-editor-button" data-icontype="icon-bubble">
                <div>
                    `)).call(h,ge(["normal","active"],"icon-bubble",!0),`
                </div>
                <label>
                    `)).call(n,Ht.localize("Bubble"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tie-icon-add-button">
            <div class="tui-image-editor-button" style="margin:0">
                <div>
                    <input type="file" accept="image/*" class="tie-icon-image-file">
                    `)).call(c,ge(["normal","active"],"icon-load",!0),`
                </div>
                <label>
                    `)).call(r,Ht.localize("Custom icon"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-icon-color" title="`)).call(v,Ht.localize("Color"),`"></div>
        </li>
    </ul>
`)};function Ga(A){var v=Xa();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Xa(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Za=function(A){me(r,A);var v=Ga(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"icon",makeSvgIcon:E,menuBarPosition:P,templateHtml:Wa,usageStatistics:_}),h.iconType=null,h._iconMap={},h._els={registerIconButton:h.selector(".tie-icon-image-file"),addIconButton:h.selector(".tie-icon-add-button"),iconColorpicker:new Je(h.selector(".tie-icon-color"),{defaultColor:"#ffbb3b",toggleDirection:h.toggleDirection,usageStatistics:h.usageStatistics})},h.colorPickerInputBox=h._els.iconColorpicker.colorpickerElement.querySelector(Ce.COLOR_PICKER_INPUT_BOX),h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.iconColorpicker.destroy(),Re(this)}},{key:"addEvent",value:function(n){var h,S,E,P,_,N=$()(h=this._registerIconHandler).call(h,this),B=$()(S=this._addIconHandler).call(S,this);this.eventHandler={registerIcon:N,addIcon:B},this.actions=n,this._els.iconColorpicker.on("change",$()(E=this._changeColorHandler).call(E,this)),this._els.registerIconButton.addEventListener("change",N),this._els.addIconButton.addEventListener("click",B),this.colorPickerInputBox.addEventListener(Et.FOCUS,$()(P=this._onStartEditingInputBox).call(P,this)),this.colorPickerInputBox.addEventListener(Et.BLUR,$()(_=this._onStopEditingInputBox).call(_,this))}},{key:"_removeEvent",value:function(){var n,h;this._els.iconColorpicker.off(),this._els.registerIconButton.removeEventListener("change",this.eventHandler.registerIcon),this._els.addIconButton.removeEventListener("click",this.eventHandler.addIcon),this.colorPickerInputBox.removeEventListener(Et.FOCUS,$()(n=this._onStartEditingInputBox).call(n,this)),this.colorPickerInputBox.removeEventListener(Et.BLUR,$()(h=this._onStopEditingInputBox).call(h,this))}},{key:"clearIconType",value:function(){this._els.addIconButton.classList.remove(this.iconType),this.iconType=null}},{key:"registerDefaultIcon",value:function(){var n=this;X()(hi,function(h,S){n.actions.registerDefaultIcons(S,h)})}},{key:"setIconPickerColor",value:function(n){this._els.iconColorpicker.color=n}},{key:"changeStandbyMode",value:function(){this.clearIconType(),this.actions.cancelAddIcon()}},{key:"_changeColorHandler",value:function(n){n=n||"transparent",this.actions.changeColor(n)}},{key:"_addIconHandler",value:function(n){var h=n.target.closest(".tui-image-editor-button");if(h){var S=h.getAttribute("data-icontype"),E=this._els.iconColorpicker.color;this.actions.discardSelection(),this.actions.changeSelectableAll(!1),this._els.addIconButton.classList.remove(this.iconType),this._els.addIconButton.classList.add(S),this.iconType===S?this.changeStandbyMode():(this.actions.addIcon(S,E),this.iconType=S)}}},{key:"_registerIconHandler",value:function(n){var h;Pe||alert("This browser does not support file-api");var S=ct(n.target.files,1),E=S[0];E&&(h=V().createObjectURL(E),this.actions.registerCustomIcon(h,E))}}]),r}(Ge),Va=Za,Ja=function(A){var v,r,c,n,h,S=A.locale,E=A.makeSvgIcon;return U()(v=U()(r=U()(c=U()(n=U()(h=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tie-draw-line-select-button">
            <div class="tui-image-editor-button free">
                <div>
                    `.concat(E(["normal","active"],"draw-free",!0),`
                </div>
                <label>
                    `)).call(h,S.localize("Free"),`
                </label>
            </div>
            <div class="tui-image-editor-button line">
                <div>
                    `)).call(n,E(["normal","active"],"draw-line",!0),`
                </div>
                <label>
                    `)).call(c,S.localize("Straight"),`
                </label>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="tie-draw-color" title="`)).call(r,S.localize("Color"),`"></div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-newline tui-image-editor-range-wrap">
            <label class="range">`)).call(v,S.localize("Range"),`</label>
            <div class="tie-draw-range"></div>
            <input class="tie-draw-range-value tui-image-editor-range-value" value="0" />
        </li>
    </ul>
`)};function Qa(A){var v=Ka();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Ka(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var $a=.7,qa=function(A){me(r,A);var v=Qa(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon,P=n.menuBarPosition,_=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"draw",makeSvgIcon:E,menuBarPosition:P,templateHtml:Ja,usageStatistics:_}),h._els={lineSelectButton:h.selector(".tie-draw-line-select-button"),drawColorPicker:new Je(h.selector(".tie-draw-color"),{defaultColor:"#00a9ff",toggleDirection:h.toggleDirection,usageStatistics:h.usageStatistics}),drawRange:new ze({slider:h.selector(".tie-draw-range"),input:h.selector(".tie-draw-range-value")},di)},h.type=null,h.color=h._els.drawColorPicker.color,h.width=h._els.drawRange.value,h.colorPickerInputBox=h._els.drawColorPicker.colorpickerElement.querySelector(Ce.COLOR_PICKER_INPUT_BOX),h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),this._els.drawColorPicker.destroy(),this._els.drawRange.destroy(),Re(this)}},{key:"addEvent",value:function(n){var h,S,E,P,_;this.eventHandler.changeDrawType=$()(h=this._changeDrawType).call(h,this),this.actions=n,this._els.lineSelectButton.addEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.on("change",$()(S=this._changeDrawColor).call(S,this)),this._els.drawRange.on("change",$()(E=this._changeDrawRange).call(E,this)),this.colorPickerInputBox.addEventListener(Et.FOCUS,$()(P=this._onStartEditingInputBox).call(P,this)),this.colorPickerInputBox.addEventListener(Et.BLUR,$()(_=this._onStopEditingInputBox).call(_,this))}},{key:"_removeEvent",value:function(){var n,h;this._els.lineSelectButton.removeEventListener("click",this.eventHandler.changeDrawType),this._els.drawColorPicker.off(),this._els.drawRange.off(),this.colorPickerInputBox.removeEventListener(Et.FOCUS,$()(n=this._onStartEditingInputBox).call(n,this)),this.colorPickerInputBox.removeEventListener(Et.BLUR,$()(h=this._onStopEditingInputBox).call(h,this))}},{key:"setDrawMode",value:function(){this.actions.setDrawMode(this.type,{width:this.width,color:ri(this.color,$a)})}},{key:"changeStandbyMode",value:function(){this.type=null,this.actions.stopDrawingMode(),this.actions.changeSelectableAll(!0),this._els.lineSelectButton.classList.remove("free"),this._els.lineSelectButton.classList.remove("line")}},{key:"changeStartMode",value:function(){this.type="free",this._els.lineSelectButton.classList.add("free"),this.setDrawMode()}},{key:"_changeDrawType",value:function(n){var h=n.target.closest(".tui-image-editor-button");if(h){var S=this.getButtonType(h,["free","line"]);if(this.actions.discardSelection(),this.type===S){this.changeStandbyMode();return}this.changeStandbyMode(),this.type=S,this._els.lineSelectButton.classList.add(S),this.setDrawMode()}}},{key:"_changeDrawColor",value:function(n){this.color=n||"transparent",this.type?this.setDrawMode():this.changeStartMode()}},{key:"_changeDrawRange",value:function(n){this.width=n,this.type?this.setDrawMode():this.changeStartMode()}}]),r}(Ge),to=qa,eo=O(9886),Cn=O.n(eo),io=function(A){var v,r,c,n,h,S,E,P,_,N,B,nt,lt,pt,ut,vt,Lt=A.locale;return U()(v=U()(r=U()(c=U()(n=U()(h=U()(S=U()(E=U()(P=U()(_=U()(N=U()(B=U()(nt=U()(lt=U()(pt=U()(ut=U()(vt=`
    <ul class="tui-image-editor-submenu-item">
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-wrap fixed-width">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-grayscale">
                        <span>`.concat(Lt.localize("Grayscale"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-invert">
                        <span>`)).call(vt,Lt.localize("Invert"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sepia">
                        <span>`)).call(ut,Lt.localize("Sepia"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-vintage">
                        <span>`)).call(pt,Lt.localize("Sepia2"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blur">
                        <span>`)).call(lt,Lt.localize("Blur"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-sharpen">
                        <span>`)).call(nt,Lt.localize("Sharpen"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-emboss">
                        <span>`)).call(B,Lt.localize("Emboss"),`</span>
                    </label>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled" style="margin-bottom: 7px;">
                <div class="tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-remove-white">
                            <span>`)).call(N,Lt.localize("Remove White"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(_,Lt.localize("Distance"),`</label>
                    <div class="tie-removewhite-distance-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-brightness">
                        <span>`)).call(P,Lt.localize("Brightness"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-brightness-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-noise">
                        <span>`)).call(E,Lt.localize("Noise"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-noise-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition only-left-right">
            <div></div>
        </li>
        <li class="tui-image-editor-submenu-align">
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-pixelate">
                        <span>`)).call(S,Lt.localize("Pixelate"),`</span>
                    </label>
                </div>
                <div class="tui-image-editor-range-wrap short">
                    <div class="tie-pixelate-range"></div>
                </div>
            </div>
            <div class="tui-image-editor-checkbox-group tui-image-editor-disabled">
                <div class="tui-image-editor-newline tui-image-editor-checkbox-wrap">
                    <div class="tui-image-editor-checkbox">
                        <label>
                            <input type="checkbox" class="tie-color-filter">
                            <span>`)).call(h,Lt.localize("Color Filter"),`</span>
                        </label>
                    </div>
                </div>
                <div class="tui-image-editor-newline tui-image-editor-range-wrap short">
                    <label>`)).call(n,Lt.localize("Threshold"),`</label>
                    <div class="tie-colorfilter-threshold-range"></div>
                </div>
            </div>
        </li>
        <li class="tui-image-editor-partition">
            <div></div>
        </li>
        <li>
            <div class="filter-color-item">
                <div class="tie-filter-tint-color" title="`)).call(c,Lt.localize("Tint"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-tint">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-multiply-color" title="`)).call(r,Lt.localize("Multiply"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-multiply">
                        <span></span>
                    </label>
                </div>
            </div>
            <div class="filter-color-item">
                <div class="tie-filter-blend-color" title="`)).call(v,Lt.localize("Blend"),`"></div>
                <div class="tui-image-editor-checkbox">
                    <label>
                        <input type="checkbox" class="tie-blend">
                        <span></span>
                    </label>
                </div>
            </div>
        </li>
    </ul>
`)};function no(A){var v=ro();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function ro(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Sn="130px",ao=["add","diff","subtract","multiply","screen","lighten","darken"],xn=["grayscale","invert","sepia","vintage","blur","sharpen","emboss","remove-white","brightness","noise","pixelate","color-filter","tint","multiply","blend"],oo={grayscale:"grayscale",invert:"invert",sepia:"sepia",blur:"blur",sharpen:"sharpen",emboss:"emboss",removeWhite:"removeColor",brightness:"brightness",contrast:"contrast",saturation:"saturation",vintage:"vintage",polaroid:"polaroid",noise:"noise",pixelate:"pixelate",colorFilter:"removeColor",tint:"blendColor",multiply:"blendColor",blend:"blendColor",hue:"hue",gamma:"gamma"},In=["removewhiteDistanceRange","colorfilterThresholdRange","pixelateRange","noiseRange","brightnessRange","tintOpacity"],bn=["filterBlendColor","filterMultiplyColor","filterTintColor"],so=function(A){me(r,A);var v=no(r);function r(c,n){var h,S=n.locale,E=n.menuBarPosition,P=n.usageStatistics;return W(this,r),h=v.call(this,c,{locale:S,name:"filter",menuBarPosition:E,templateHtml:io,usageStatistics:P}),h.selectBoxShow=!1,h.checkedMap={},h._makeControlElement(),h}return it(r,[{key:"destroy",value:function(){this._removeEvent(),this._destroyToolInstance(),Re(this)}},{key:"_removeEvent",value:function(){var n=this,h;X()(xn,function(S){var E=n.selector(".tie-".concat(S)),P=Ae(S);E.removeEventListener("change",n.eventHandler[P])}),X()(U()(h=[]).call(h,In,bn),function(S){n._els[S].off()}),this._els.blendType.removeEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.removeEventListener("click",this.eventHandler.changeBlendFilter),si()(this.colorPickerInputBoxes,function(S){var E,P;S.removeEventListener(Et.FOCUS,$()(E=n._onStartEditingInputBox).call(E,n)),S.removeEventListener(Et.BLUR,$()(P=n._onStopEditingInputBox).call(P,n))},this)}},{key:"_destroyToolInstance",value:function(){var n,h=this;X()(U()(n=[]).call(n,In,bn),function(S){h._els[S].destroy()})}},{key:"addEvent",value:function(n){var h=this,S,E,P,_=n.applyFilter,N=function(lt){var pt;return $()(pt=h._changeFilterState).call(pt,h,_,lt)},B=function(lt){return function(pt,ut){return h._changeFilterState(_,lt,ut)}};this.eventHandler={changeBlendFilter:N("blend"),blandTypeClick:function(lt){return lt.stopPropagation()}},X()(xn,function(nt){var lt=h.selector(".tie-".concat(nt)),pt=Ae(nt);h.checkedMap[pt]=lt,h.eventHandler[pt]=N(pt),lt.addEventListener("change",h.eventHandler[pt])}),this._els.removewhiteDistanceRange.on("change",B("removeWhite")),this._els.colorfilterThresholdRange.on("change",B("colorFilter")),this._els.pixelateRange.on("change",B("pixelate")),this._els.noiseRange.on("change",B("noise")),this._els.brightnessRange.on("change",B("brightness")),this._els.filterBlendColor.on("change",this.eventHandler.changeBlendFilter),this._els.filterMultiplyColor.on("change",N("multiply")),this._els.filterTintColor.on("change",N("tint")),this._els.tintOpacity.on("change",B("tint")),this._els.filterMultiplyColor.on("changeShow",$()(S=this.colorPickerChangeShow).call(S,this)),this._els.filterTintColor.on("changeShow",$()(E=this.colorPickerChangeShow).call(E,this)),this._els.filterBlendColor.on("changeShow",$()(P=this.colorPickerChangeShow).call(P,this)),this._els.blendType.addEventListener("change",this.eventHandler.changeBlendFilter),this._els.blendType.addEventListener("click",this.eventHandler.blandTypeClick),si()(this.colorPickerInputBoxes,function(nt){var lt,pt;nt.addEventListener(Et.FOCUS,$()(lt=h._onStartEditingInputBox).call(lt,h)),nt.addEventListener(Et.BLUR,$()(pt=h._onStopEditingInputBox).call(pt,h))},this)}},{key:"setFilterState",value:function(n){var h=n.type,S=n.options,E=n.action,P=this._getFilterNameFromOptions(h,S),_=E==="remove";_||this._setFilterState(P,S),this.checkedMap[P].checked=!_}},{key:"initFilterCheckBoxState",value:function(){X()(this.checkedMap,function(n){n.checked=!1},this)}},{key:"_setFilterState",value:function(n,h){n==="colorFilter"?this._els.colorfilterThresholdRange.value=h.distance:n==="removeWhite"?this._els.removewhiteDistanceRange.value=h.distance:n==="pixelate"?this._els.pixelateRange.value=h.blocksize:n==="brightness"?this._els.brightnessRange.value=h.brightness:n==="noise"?this._els.noiseRange.value=h.noise:n==="tint"?(this._els.tintOpacity.value=h.alpha,this._els.filterTintColor.color=h.color):n==="blend"?this._els.filterBlendColor.color=h.color:n==="multiply"&&(this._els.filterMultiplyColor.color=h.color)}},{key:"_getFilterNameFromOptions",value:function(n,h){var S=n;return n==="removeColor"?S=Cn()(h.useAlpha)?"removeWhite":"colorFilter":n==="blendColor"&&(S={add:"blend",multiply:"multiply",tint:"tint"}[h.mode]),S}},{key:"_changeFilterState",value:function(n,h){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E=this.checkedMap[h].checked,P=oo[h],_=this.checkedMap[h].closest(".tui-image-editor-checkbox-group");_&&(E?_.classList.remove("tui-image-editor-disabled"):_.classList.add("tui-image-editor-disabled")),n(E,P,this._getFilterOption(h),!S)}},{key:"_getFilterOption",value:function(n){var h={};switch(n){case"removeWhite":h.color="#FFFFFF",h.useAlpha=!1,h.distance=Ve()(this._els.removewhiteDistanceRange.value);break;case"colorFilter":h.color="#FFFFFF",h.distance=Ve()(this._els.colorfilterThresholdRange.value);break;case"pixelate":h.blocksize=zt(this._els.pixelateRange.value);break;case"noise":h.noise=zt(this._els.noiseRange.value);break;case"brightness":h.brightness=Ve()(this._els.brightnessRange.value);break;case"blend":h.mode="add",h.color=this._els.filterBlendColor.color,h.mode=this._els.blendType.value;break;case"multiply":h.mode="multiply",h.color=this._els.filterMultiplyColor.color;break;case"tint":h.mode="tint",h.color=this._els.filterTintColor.color,h.alpha=this._els.tintOpacity.value;break;case"blur":h.blur=this._els.blurRange.value;break;default:break}return h}},{key:"_makeControlElement",value:function(){this._els={removewhiteDistanceRange:new ze({slider:this.selector(".tie-removewhite-distance-range")},Ye.removewhiteDistanceRange),brightnessRange:new ze({slider:this.selector(".tie-brightness-range")},Ye.brightnessRange),noiseRange:new ze({slider:this.selector(".tie-noise-range")},Ye.noiseRange),pixelateRange:new ze({slider:this.selector(".tie-pixelate-range")},Ye.pixelateRange),colorfilterThresholdRange:new ze({slider:this.selector(".tie-colorfilter-threshold-range")},Ye.colorfilterThresholdRange),filterTintColor:new Je(this.selector(".tie-filter-tint-color"),{defaultColor:"#03bd9e",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterMultiplyColor:new Je(this.selector(".tie-filter-multiply-color"),{defaultColor:"#515ce6",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),filterBlendColor:new Je(this.selector(".tie-filter-blend-color"),{defaultColor:"#ffbb3b",toggleDirection:this.toggleDirection,usageStatistics:this.usageStatistics}),blurRange:Ye.blurFilterRange},this._els.tintOpacity=this._pickerWithRange(this._els.filterTintColor.pickerControl),this._els.blendType=this._pickerWithSelectbox(this._els.filterBlendColor.pickerControl),this.colorPickerControls.push(this._els.filterTintColor),this.colorPickerControls.push(this._els.filterMultiplyColor),this.colorPickerControls.push(this._els.filterBlendColor),this.colorPickerInputBoxes=[],this.colorPickerInputBoxes.push(this._els.filterTintColor.colorpickerElement.querySelector(Ce.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterMultiplyColor.colorpickerElement.querySelector(Ce.COLOR_PICKER_INPUT_BOX)),this.colorPickerInputBoxes.push(this._els.filterBlendColor.colorpickerElement.querySelector(Ce.COLOR_PICKER_INPUT_BOX))}},{key:"_pickerWithRange",value:function(n){var h=document.createElement("div"),S=document.createElement("label"),E=document.createElement("div");return E.id="tie-filter-tint-opacity",S.innerHTML="Opacity",h.appendChild(S),h.appendChild(E),n.appendChild(h),n.style.height=Sn,new ze({slider:E},Ye.tintOpacityRange)}},{key:"_pickerWithSelectbox",value:function(n){var h=document.createElement("div"),S=document.createElement("select"),E=document.createElement("ul");return h.className="tui-image-editor-selectlist-wrap",E.className="tui-image-editor-selectlist",h.appendChild(S),h.appendChild(E),this._makeSelectOptionList(S),n.appendChild(h),n.style.height=Sn,this._drawSelectOptionList(S,E),this._pickerWithSelectboxForAddEvent(S,E),S}},{key:"_drawSelectOptionList",value:function(n,h){var S=n.querySelectorAll("option");X()(S,function(E){var P=document.createElement("li");P.innerHTML=E.innerHTML,P.setAttribute("data-item",E.value),h.appendChild(P)})}},{key:"_pickerWithSelectboxForAddEvent",value:function(n,h){var S=this;h.addEventListener("click",function(E){var P=E.target.getAttribute("data-item"),_=document.createEvent("HTMLEvents");n.querySelector('[value="'.concat(P,'"]')).selected=!0,_.initEvent("change",!0,!0),n.dispatchEvent(_),S.selectBoxShow=!1,h.style.display="none"}),n.addEventListener("mousedown",function(E){E.preventDefault(),S.selectBoxShow=!S.selectBoxShow,h.style.display=S.selectBoxShow?"block":"none",h.setAttribute("data-selectitem",n.value),h.querySelector("[data-item='".concat(n.value,"']")).classList.add("active")})}},{key:"_makeSelectOptionList",value:function(n){X()(ao,function(h){var S=document.createElement("option");S.setAttribute("value",h),S.innerHTML=h.replace(/^[a-z]/,function(E){return E.toUpperCase()}),n.appendChild(S)})}}]),r}(Ge),lo=so,co=O(4383),uo=O.n(co),ho=function(){function A(v,r){var c=r.name;W(this,A),this.name=c,this.items=[],this.panelElement=this._makePanelElement(),this.listElement=this._makeListElement(),this.panelElement.appendChild(this.listElement),v.appendChild(this.panelElement)}return it(A,[{key:"_makePanelElement",value:function(){var r=document.createElement("div");return r.className="tie-panel-".concat(this.name),r}},{key:"_makeListElement",value:function(){var r=document.createElement("ol");return r.className="".concat(this.name,"-list"),r}},{key:"makeListItemElement",value:function(r){var c=document.createElement("li");return c.innerHTML=r,c.className="".concat(this.name,"-item"),c.setAttribute("data-index",this.items.length),c}},{key:"pushListItemElement",value:function(r){this.listElement.appendChild(r),this.listElement.scrollTop+=r.offsetHeight,this.items.push(r)}},{key:"deleteListItemElement",value:function(r,c){for(var n=this.items,h=r;h<c;h+=1)this.listElement.removeChild(n[h]);b()(n).call(n,r,c-r+1)}},{key:"getListLength",value:function(){return this.items.length}},{key:"addClass",value:function(r,c){this.items[r]&&this.items[r].classList.add(c)}},{key:"removeClass",value:function(r,c){this.items[r]&&this.items[r].classList.remove(c)}},{key:"toggleClass",value:function(r,c){this.items[r]&&this.items[r].classList.toggle(c)}}]),A}(),fo=ho,go=function(A){var v,r,c,n=A.locale,h=A.makeSvgIcon,S=A.name,E=A.detail;return U()(v=U()(r=U()(c=`
    <div class="tui-image-editor-history-item history">
        <div class="history-item-icon">
            `.concat(h(["normal","active"],"history-".concat(S.toLowerCase()),!0),`
        </div>
        <span>
            `)).call(c,n.localize(S),`
            `)).call(r,E?"(".concat(n.localize(E),")"):"",`
        </span>
        <div class="history-item-checkbox">
            `)).call(v,h(["normal"],"history-check",!0),`
        </div>
    </div>
`)};function vo(A){var v=po();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function po(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var mo="history-item",Mn="selected-item",Tn="disabled-item",yo=function(A){me(r,A);var v=vo(r);function r(c,n){var h,S=n.locale,E=n.makeSvgIcon;return W(this,r),h=v.call(this,c,{name:"history"}),c.classList.add("enabled"),h.locale=S,h.makeSvgIcon=E,h._eventHandler={},h._historyIndex=h.getListLength(),h}return it(r,[{key:"add",value:function(n){var h=n.name,S=n.detail;this._hasDisabledItem()&&this.deleteListItemElement(this._historyIndex+1,this.getListLength());var E=go({locale:this.locale,makeSvgIcon:this.makeSvgIcon,name:h,detail:S}),P=this.makeListItemElement(E);this.pushListItemElement(P),this._historyIndex=this.getListLength()-1,this._selectItem(this._historyIndex)}},{key:"init",value:function(){this.deleteListItemElement(1,this.getListLength()),this._historyIndex=0,this._selectItem(this._historyIndex)}},{key:"clear",value:function(){this.deleteListItemElement(0,this.getListLength()),this._historyIndex=-1}},{key:"prev",value:function(){this._historyIndex-=1,this._selectItem(this._historyIndex)}},{key:"next",value:function(){this._historyIndex+=1,this._selectItem(this._historyIndex)}},{key:"_hasDisabledItem",value:function(){return this.getListLength()-1>this._historyIndex}},{key:"_addHistoryEventListener",value:function(){var n=this;this._eventHandler.history=function(h){return n._clickHistoryItem(h)},this.listElement.addEventListener("click",this._eventHandler.history)}},{key:"_removeHistoryEventListener",value:function(){this.listElement.removeEventListener("click",this._eventHandler.history)}},{key:"_clickHistoryItem",value:function(n){var h=n.target,S=h.closest(".".concat(mo));if(S){var E=uo()(S.getAttribute("data-index"),10);if(E!==this._historyIndex){var P=Math.abs(E-this._historyIndex);E<this._historyIndex?this._actions.undo(P):this._actions.redo(P)}}}},{key:"_selectItem",value:function(n){for(var h=0;h<this.getListLength();h+=1)this.removeClass(h,Mn),this.removeClass(h,Tn),h>n&&this.addClass(h,Tn);this.addClass(n,Mn)}},{key:"destroy",value:function(){this.removeEvent(),Re(this)}},{key:"addEvent",value:function(n){this._actions=n,this._addHistoryEventListener()}},{key:"removeEvent",value:function(){this._removeHistoryEventListener()}}]),r}(fo),Co=yo,So=function(){function A(v){W(this,A),this._locale=v}return it(A,[{key:"localize",value:function(r){return this._locale[r]||r}}]),A}(),xo=So,Io={Shape:ha,Crop:pa,Resize:xa,Flip:Ea,Rotate:Pa,Text:za,Mask:Ya,Icon:Va,Draw:to,Filter:lo},bo="1300",En="history",Mo="tie-panel-history",li="on",ci={ZOOM_IN:"zoomIn",HAND:"hand"},An=function(){function A(v,r,c){W(this,A),this.options=this._initializeOption(r),this._actions=c,this.submenu=!1,this.imageSize={},this.uiSize={},this._locale=new xo(this.options.locale),this.theme=new Kr(this.options.theme),this.eventHandler={},this._submenuChangeTransection=!1,this._selectedElement=null,this._mainElement=null,this._editorElementWrap=null,this._editorElement=null,this._menuBarElement=null,this._subMenuElement=null,this._makeUiElement(v),this._setUiSize(),this._initMenuEvent=!1,this._makeSubMenu(),this._attachHistoryEvent(),this._attachZoomEvent()}return it(A,[{key:"destroy",value:function(){this._removeUiEvent(),this._destroyAllMenu(),this._selectedElement.innerHTML="",Re(this)}},{key:"setUiDefaultSelectionStyle",value:function(r){return G()({applyCropSelectionStyle:!0,applyGroupSelectionStyle:!0,selectionStyle:{cornerStyle:"circle",cornerSize:16,cornerColor:"#fff",cornerStrokeColor:"#fff",transparentCorners:!1,lineWidth:2,borderColor:"#fff"}},r)}},{key:"resizeEditor",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=r.uiSize,n=r.imageSize,h=n===void 0?this.imageSize:n;h!==this.imageSize&&(this.imageSize=h),c&&this._setUiSize(c);var S=this._getCanvasMaxDimension(),E=S.width,P=S.height,_=this._editorElement.style,N=this.options.menuBarPosition;_.height="".concat(P,"px"),_.width="".concat(E,"px"),this._setEditorPosition(N),this._editorElementWrap.style.bottom="0px",this._editorElementWrap.style.top="0px",this._editorElementWrap.style.left="0px",this._editorElementWrap.style.width="100%";var B=this._selectedElement.classList;N==="top"&&this._selectedElement.offsetWidth<bo?B.add("tui-image-editor-top-optimization"):B.remove("tui-image-editor-top-optimization")}},{key:"toggleZoomButtonStatus",value:function(r){var c=this._buttonElements[r].classList;c.toggle(li),r===ci.ZOOM_IN?this._buttonElements[ci.HAND].classList.remove(li):this._buttonElements[ci.ZOOM_IN].classList.remove(li)}},{key:"offZoomInButtonStatus",value:function(){var r=this._buttonElements[ci.ZOOM_IN].classList;r.remove(li)}},{key:"changeHandButtonStatus",value:function(r){var c=this._buttonElements[ci.HAND].classList;c[r?"add":"remove"](li)}},{key:"changeHelpButtonEnabled",value:function(r,c){var n=this._buttonElements[r].classList;n[c?"add":"remove"]("enabled")}},{key:"_initializeOption",value:function(r){return G()({loadImage:{path:"",name:""},locale:{},menuIconPath:"",menu:["resize","crop","flip","rotate","draw","shape","icon","text","mask","filter"],initMenu:"",uiSize:{width:"100%",height:"100%"},menuBarPosition:"bottom"},r)}},{key:"_setUiSize",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.uiSize,c=this._selectedElement.style;c.width=r.width,c.height=r.height}},{key:"_makeSubMenu",value:function(){var r=this;X()(this.options.menu,function(c){var n,h=Io[c.replace(/^[a-z]/,function(S){return S.toUpperCase()})];r._makeMenuElement(c),r._buttonElements[c]=r._menuBarElement.querySelector(".tie-btn-".concat(c)),r[c]=new h(r._subMenuElement,{locale:r._locale,makeSvgIcon:$()(n=r.theme.makeMenSvgIconSet).call(n,r.theme),menuBarPosition:r.options.menuBarPosition,usageStatistics:r.options.usageStatistics})})}},{key:"_attachHistoryEvent",value:function(){var r,c,n;this.on(Et.EXECUTE_COMMAND,$()(r=this._addHistory).call(r,this)),this.on(Et.AFTER_UNDO,$()(c=this._selectPrevHistory).call(c,this)),this.on(Et.AFTER_REDO,$()(n=this._selectNextHistory).call(n,this))}},{key:"_attachZoomEvent",value:function(){var r=this;this.on(Et.HAND_STARTED,function(){r.offZoomInButtonStatus(),r.changeHandButtonStatus(!0)}),this.on(Et.HAND_STOPPED,function(){return r.changeHandButtonStatus(!1)})}},{key:"_makeUiElement",value:function(r){var c,n;r.nodeType?n=r:n=document.querySelector(r);var h=ai(n);n.classList.add("tui-image-editor-container"),n.innerHTML=Gr({locale:this._locale,biImage:this.theme.getStyle("common.bi"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),menuBarPosition:this.options.menuBarPosition})+Wr({locale:this._locale,biImage:this.theme.getStyle("common.bi"),commonStyle:this.theme.getStyle("common"),headerStyle:this.theme.getStyle("header"),loadButtonStyle:this.theme.getStyle("loadButton"),downloadButtonStyle:this.theme.getStyle("downloadButton"),submenuStyle:this.theme.getStyle("submenu")}),this._selectedElement=n,this._selectedElement.classList.add(this.options.menuBarPosition),this._mainElement=h(".tui-image-editor-main"),this._editorElementWrap=h(".tui-image-editor-wrap"),this._editorElement=h(".tui-image-editor"),this._helpMenuBarElement=h(".tui-image-editor-help-menu"),this._menuBarElement=h(".tui-image-editor-menu"),this._subMenuElement=h(".tui-image-editor-submenu"),this._buttonElements={download:this._selectedElement.querySelectorAll(".tui-image-editor-download-btn"),load:this._selectedElement.querySelectorAll(".tui-image-editor-load-btn")},this._addHelpMenus(),this._historyMenu=new Co(this._buttonElements[En],{locale:this._locale,makeSvgIcon:$()(c=this.theme.makeMenSvgIconSet).call(c,this.theme)}),this._activateZoomMenus()}},{key:"_activateZoomMenus",value:function(){var r=this;X()($t,function(c){r.changeHelpButtonEnabled(c,!0)})}},{key:"_makeHelpMenuWithPartition",value:function(){var r;return U()(r=[]).call(r,L($t),[""],L(ne),[""],L(ce))}},{key:"_addHelpMenus",value:function(){var r=this,c=this._makeHelpMenuWithPartition();X()(c,function(n){n?(r._makeMenuElement(n,["normal","disabled","hover"],"help"),r._buttonElements[n]=r._helpMenuBarElement.querySelector(".tie-btn-".concat(n))):r._makeMenuPartitionElement()})}},{key:"_makeMenuPartitionElement",value:function(){var r=document.createElement("li"),c=document.createElement("div");r.className=yi("item"),c.className=yi("icpartition"),r.appendChild(c),this._helpMenuBarElement.appendChild(r)}},{key:"_makeMenuElement",value:function(r){var c,n,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["normal","active","hover"],S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal",E=document.createElement("li"),P=this.theme.makeMenSvgIconSet(h,r);this._addTooltipAttribute(E,r),E.className=U()(c=U()(n="tie-btn-".concat(r," ")).call(n,yi("item")," ")).call(c,S),E.innerHTML=P,S==="normal"?this._menuBarElement.appendChild(E):this._helpMenuBarElement.appendChild(E)}},{key:"_addHelpActionEvent",value:function(){var r=this;X()(wt,function(c){r.eventHandler[c]=function(n){return r._actions.main[c](n)},r._buttonElements[c].addEventListener("click",r.eventHandler[c])})}},{key:"_removeHelpActionEvent",value:function(){var r=this;X()(wt,function(c){r._buttonElements[c].removeEventListener("click",r.eventHandler[c])})}},{key:"_addHistory",value:function(r){if(!kr(r)){var c=typeof r=="string"?{name:r}:Pr(r);this._historyMenu.add(c)}}},{key:"initHistory",value:function(){this._historyMenu.init()}},{key:"clearHistory",value:function(){this._historyMenu.clear()}},{key:"_selectPrevHistory",value:function(){this._historyMenu.prev()}},{key:"_selectNextHistory",value:function(){this._historyMenu.next()}},{key:"toggleHistoryMenu",value:function(r){var c=r.target,n=c.closest(".".concat(Mo));if(!n){var h=this._buttonElements[En].classList;h.toggle("opened")}}},{key:"_addTooltipAttribute",value:function(r,c){r.setAttribute("tooltip-content",this._locale.localize(c.replace(/^[a-z]/g,function(n){return n.toUpperCase()})))}},{key:"_addDownloadEvent",value:function(){var r=this;this.eventHandler.download=function(){return r._actions.main.download()},X()(this._buttonElements.download,function(c){c.addEventListener("click",r.eventHandler.download)})}},{key:"_removeDownloadEvent",value:function(){var r=this;X()(this._buttonElements.download,function(c){c.removeEventListener("click",r.eventHandler.download)})}},{key:"_addLoadEvent",value:function(){var r=this;this.eventHandler.loadImage=function(c){return r._actions.main.load(c.target.files[0])},X()(this._buttonElements.load,function(c){c.addEventListener("change",r.eventHandler.loadImage)})}},{key:"_removeLoadEvent",value:function(){var r=this;X()(this._buttonElements.load,function(c){c.removeEventListener("change",r.eventHandler.loadImage)})}},{key:"_addMainMenuEvent",value:function(r){var c=this;this.eventHandler[r]=function(){return c.changeMenu(r)},this._buttonElements[r].addEventListener("click",this.eventHandler[r])}},{key:"_addSubMenuEvent",value:function(r){var c=this;this[r].addEvent(this._actions[r]),this[r].on(Et.INPUT_BOX_EDITING_STARTED,function(){return c.fire(Et.INPUT_BOX_EDITING_STARTED)}),this[r].on(Et.INPUT_BOX_EDITING_STOPPED,function(){return c.fire(Et.INPUT_BOX_EDITING_STOPPED)})}},{key:"_addMenuEvent",value:function(){var r=this;X()(this.options.menu,function(c){r._addMainMenuEvent(c),r._addSubMenuEvent(c)})}},{key:"_removeMainMenuEvent",value:function(){var r=this;X()(this.options.menu,function(c){r._buttonElements[c].removeEventListener("click",r.eventHandler[c]),r[c].off(Et.INPUT_BOX_EDITING_STARTED),r[c].off(Et.INPUT_BOX_EDITING_STOPPED)})}},{key:"getEditorArea",value:function(){return this._editorElement}},{key:"activeMenuEvent",value:function(){this._initMenuEvent||(this._addHelpActionEvent(),this._addDownloadEvent(),this._addMenuEvent(),this._initMenu(),this._historyMenu.addEvent(this._actions.history),this._initMenuEvent=!0)}},{key:"_removeUiEvent",value:function(){this._removeHelpActionEvent(),this._removeDownloadEvent(),this._removeLoadEvent(),this._removeMainMenuEvent(),this._historyMenu.removeEvent()}},{key:"_destroyAllMenu",value:function(){var r=this;X()(this.options.menu,function(c){r[c].destroy()}),this._historyMenu.destroy()}},{key:"initCanvas",value:function(){var r=this,c=this._getLoadImage();c.path&&this._actions.main.initLoadImage(c.path,c.name).then(function(){r.activeMenuEvent()}),this._addLoadEvent();var n=document.createElement("div");n.className=yi("grid-visual");var h=`<table>
           <tr><td class="dot left-top"></td><td></td><td class="dot right-top"></td></tr>
           <tr><td></td><td></td><td></td></tr>
           <tr><td class="dot left-bottom"></td><td></td><td class="dot right-bottom"></td></tr>
         </table>`;n.innerHTML=h,this._editorContainerElement=this._editorElement.querySelector(".tui-image-editor-canvas-container"),this._editorContainerElement.appendChild(n)}},{key:"_getLoadImage",value:function(){return this.options.loadImage}},{key:"changeMenu",value:function(r){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this._submenuChangeTransection||(this._submenuChangeTransection=!0,this._changeMenu(r,c,n),this._submenuChangeTransection=!1)}},{key:"_changeMenu",value:function(r,c,n){this.submenu&&(this._buttonElements[this.submenu].classList.remove("active"),this._mainElement.classList.remove("tui-image-editor-menu-".concat(this.submenu)),n&&this._actions.main.discardSelection(),this._actions.main.changeSelectableAll(!0),this[this.submenu].changeStandbyMode()),this.submenu===r&&c?this.submenu=null:(this._buttonElements[r].classList.add("active"),this._mainElement.classList.add("tui-image-editor-menu-".concat(r)),this.submenu=r,this[this.submenu].changeStartMode()),this.resizeEditor()}},{key:"_initMenu",value:function(){if(this.options.initMenu){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!1),this._buttonElements[this.options.initMenu].dispatchEvent(r)}this.icon&&this.icon.registerDefaultIcon()}},{key:"_getCanvasMaxDimension",value:function(){var r=this._editorContainerElement.style,c=r.maxWidth,n=r.maxHeight,h=Ve()(c),S=Ve()(n);return{width:h,height:S}}},{key:"_setEditorPosition",value:function(r){var c=this._getCanvasMaxDimension(),n=c.width,h=c.height,S=this._editorElement.style,E=0,P=0;this.submenu&&(r==="bottom"?h>this._editorElementWrap.scrollHeight-150?E=(h-this._editorElementWrap.scrollHeight)/2:E=150/2*-1:r==="top"?h>this._editorElementWrap.offsetHeight-150?E=150/2-(h-(this._editorElementWrap.offsetHeight-150))/2:E=150/2:r==="left"?n>this._editorElementWrap.offsetWidth-248?P=248/2-(n-(this._editorElementWrap.offsetWidth-248))/2:P=248/2:r==="right"&&(n>this._editorElementWrap.scrollWidth-248?P=(n-this._editorElementWrap.scrollWidth)/2:P=248/2*-1)),S.top="".concat(E,"px"),S.left="".concat(P,"px")}}]),A}();yt().mixin(An);var To=An,Eo=O(381),ei=O.n(Eo),wn=function(){function A(){W(this,A),this.versionnumber="1.2.4",this.optionpresets={default:{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}},this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}]}return it(A,[{key:"imageToSVG",value:function(r,c,n){var h=this;n=this.checkoptions(n),this.loadImage(r,function(S){c(h.imagedataToSVG(h.getImgdata(S),n))},n)}},{key:"imagedataToSVG",value:function(r,c){c=this.checkoptions(c);var n=this.imagedataToTracedata(r,c);return this.getsvgstring(n,c)}},{key:"imageToTracedata",value:function(r,c,n){var h=this;n=this.checkoptions(n),this.loadImage(r,function(S){c(h.imagedataToTracedata(h.getImgdata(S),n))},n)}},{key:"imagedataToTracedata",value:function(r,c){c=this.checkoptions(c);var n=this.colorquantization(r,c),h;if(c.layering===0){h={layers:[],palette:n.palette,width:n.array[0].length-2,height:n.array.length-2};for(var S=0;S<n.palette.length;S+=1){var E=this.batchtracepaths(this.internodes(this.pathscan(this.layeringstep(n,S),c.pathomit),c),c.ltres,c.qtres);h.layers.push(E)}}else{var P=this.layering(n);c.layercontainerid&&this.drawLayers(P,this.specpalette,c.scale,c.layercontainerid);var _=this.batchpathscan(P,c.pathomit),N=this.batchinternodes(_,c);h={layers:this.batchtracelayers(N,c.ltres,c.qtres),palette:n.palette,width:r.width,height:r.height}}return h}},{key:"checkoptions",value:function(r){r=r||{},typeof r=="string"&&(r=r.toLowerCase(),this.optionpresets[r]?r=this.optionpresets[r]:r={});for(var c=xt()(this.optionpresets.default),n=0;n<c.length;n+=1)r.hasOwnProperty(c[n])||(r[c[n]]=this.optionpresets.default[c[n]]);return r}},{key:"colorquantization",value:function(r,c){var n=[],h=0,S,E,P,_=[],N=r.width*r.height,B,nt,lt,pt,ut;for(nt=0;nt<r.height+2;nt+=1)for(n[nt]=[],B=0;B<r.width+2;B+=1)n[nt][B]=-1;for(c.pal?ut=c.pal:c.colorsampling===0?ut=this.generatepalette(c.numberofcolors):c.colorsampling===1?ut=this.samplepalette(c.numberofcolors,r):ut=this.samplepalette2(c.numberofcolors,r),c.blurradius>0&&(r=this.blur(r,c.blurradius,c.blurdelta)),pt=0;pt<c.colorquantcycles;pt+=1){if(pt>0)for(lt=0;lt<ut.length;lt+=1)_[lt].n>0&&(ut[lt]={r:Math.floor(_[lt].r/_[lt].n),g:Math.floor(_[lt].g/_[lt].n),b:Math.floor(_[lt].b/_[lt].n),a:Math.floor(_[lt].a/_[lt].n)}),_[lt].n/N<c.mincolorratio&&pt<c.colorquantcycles-1&&(ut[lt]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(B=0;B<ut.length;B+=1)_[B]={r:0,g:0,b:0,a:0,n:0};for(nt=0;nt<r.height;nt+=1)for(B=0;B<r.width;B+=1){for(h=(nt*r.width+B)*4,P=0,E=1024,lt=0;lt<ut.length;lt+=1)S=Math.abs(ut[lt].r-r.data[h])+Math.abs(ut[lt].g-r.data[h+1])+Math.abs(ut[lt].b-r.data[h+2])+Math.abs(ut[lt].a-r.data[h+3]),S<E&&(E=S,P=lt);_[P].r+=r.data[h],_[P].g+=r.data[h+1],_[P].b+=r.data[h+2],_[P].a+=r.data[h+3],_[P].n+=1,n[nt+1][B+1]=P}}return{array:n,palette:ut}}},{key:"samplepalette",value:function(r,c){for(var n,h=[],S=0;S<r;S+=1)n=Math.floor(Math.random()*c.data.length/4)*4,h.push({r:c.data[n],g:c.data[n+1],b:c.data[n+2],a:c.data[n+3]});return h}},{key:"samplepalette2",value:function(r,c){for(var n,h=[],S=Math.ceil(Math.sqrt(r)),E=Math.ceil(r/S),P=c.width/(S+1),_=c.height/(E+1),N=0;N<E;N+=1)for(var B=0;B<S&&h.length!==r;B+=1)n=Math.floor((N+1)*_*c.width+(B+1)*P)*4,h.push({r:c.data[n],g:c.data[n+1],b:c.data[n+2],a:c.data[n+3]});return h}},{key:"generatepalette",value:function(r){var c=[],n,h,S;if(r<8)for(var E=Math.floor(255/(r-1)),P=0;P<r;P+=1)c.push({r:P*E,g:P*E,b:P*E,a:255});else{var _=Math.floor(Math.pow(r,.3333333333333333)),N=Math.floor(255/(_-1)),B=r-_*_*_;for(n=0;n<_;n+=1)for(h=0;h<_;h+=1)for(S=0;S<_;S+=1)c.push({r:n*N,g:h*N,b:S*N,a:255});for(n=0;n<B;n+=1)c.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return c}},{key:"layering",value:function(r){var c=[],n=0,h=r.array.length,S=r.array[0].length,E,P,_,N,B,nt,lt,pt,ut,vt,Lt;for(Lt=0;Lt<r.palette.length;Lt+=1)for(c[Lt]=[],vt=0;vt<h;vt+=1)for(c[Lt][vt]=[],ut=0;ut<S;ut+=1)c[Lt][vt][ut]=0;for(vt=1;vt<h-1;vt+=1)for(ut=1;ut<S-1;ut+=1)n=r.array[vt][ut],E=r.array[vt-1][ut-1]===n?1:0,P=r.array[vt-1][ut]===n?1:0,_=r.array[vt-1][ut+1]===n?1:0,N=r.array[vt][ut-1]===n?1:0,B=r.array[vt][ut+1]===n?1:0,nt=r.array[vt+1][ut-1]===n?1:0,lt=r.array[vt+1][ut]===n?1:0,pt=r.array[vt+1][ut+1]===n?1:0,c[n][vt+1][ut+1]=1+B*2+pt*4+lt*8,N||(c[n][vt+1][ut]=0+2+lt*4+nt*8),P||(c[n][vt][ut+1]=0+_*2+B*4+8),E||(c[n][vt][ut]=0+P*2+4+N*8);return c}},{key:"layeringstep",value:function(r,c){var n=[],h=r.array.length,S=r.array[0].length,E,P;for(P=0;P<h;P+=1)for(n[P]=[],E=0;E<S;E+=1)n[P][E]=0;for(P=1;P<h;P+=1)for(E=1;E<S;E+=1)n[P][E]=(r.array[P-1][E-1]===c?1:0)+(r.array[P-1][E]===c?2:0)+(r.array[P][E-1]===c?8:0)+(r.array[P][E]===c?4:0);return n}},{key:"pathscan",value:function(r,c){for(var n=[],h=0,S=0,E=0,P=0,_=r[0].length,N=r.length,B=0,nt=!0,lt=!1,pt,ut=0;ut<N;ut+=1)for(var vt=0;vt<_;vt+=1)if(r[ut][vt]===4||r[ut][vt]===11)for(E=vt,P=ut,n[h]={},n[h].points=[],n[h].boundingbox=[E,P,E,P],n[h].holechildren=[],nt=!1,S=0,lt=r[ut][vt]===11,B=1;!nt;){if(n[h].points[S]={},n[h].points[S].x=E-1,n[h].points[S].y=P-1,n[h].points[S].t=r[P][E],E-1<n[h].boundingbox[0]&&(n[h].boundingbox[0]=E-1),E-1>n[h].boundingbox[2]&&(n[h].boundingbox[2]=E-1),P-1<n[h].boundingbox[1]&&(n[h].boundingbox[1]=P-1),P-1>n[h].boundingbox[3]&&(n[h].boundingbox[3]=P-1),pt=this.pathscan_combined_lookup[r[P][E]][B],r[P][E]=pt[0],B=pt[1],E+=pt[2],P+=pt[3],E-1===n[h].points[0].x&&P-1===n[h].points[0].y)if(nt=!0,n[h].points.length<c)n.pop();else{if(n[h].isholepath=!!lt,lt){for(var Lt=0,ie=[-1,-1,_+1,N+1],re=0;re<h;re++)!n[re].isholepath&&this.boundingboxincludes(n[re].boundingbox,n[h].boundingbox)&&this.boundingboxincludes(ie,n[re].boundingbox)&&(Lt=re,ie=n[re].boundingbox);n[Lt].holechildren.push(h)}h+=1}S+=1}return n}},{key:"boundingboxincludes",value:function(r,c){return r[0]<c[0]&&r[1]<c[1]&&r[2]>c[2]&&r[3]>c[3]}},{key:"batchpathscan",value:function(r,c){var n=[];for(var h in r)r.hasOwnProperty(h)&&(n[h]=this.pathscan(r[h],c));return n}},{key:"internodes",value:function(r,c){var n=[],h=0,S=0,E=0,P=0,_=0,N,B;for(N=0;N<r.length;N+=1)for(n[N]={},n[N].points=[],n[N].boundingbox=r[N].boundingbox,n[N].holechildren=r[N].holechildren,n[N].isholepath=r[N].isholepath,h=r[N].points.length,B=0;B<h;B+=1)S=(B+1)%h,E=(B+2)%h,P=(B-1+h)%h,_=(B-2+h)%h,c.rightangleenhance&&this.testrightangle(r[N],_,P,B,S,E)&&(n[N].points.length>0&&(n[N].points[n[N].points.length-1].linesegment=this.getdirection(n[N].points[n[N].points.length-1].x,n[N].points[n[N].points.length-1].y,r[N].points[B].x,r[N].points[B].y)),n[N].points.push({x:r[N].points[B].x,y:r[N].points[B].y,linesegment:this.getdirection(r[N].points[B].x,r[N].points[B].y,(r[N].points[B].x+r[N].points[S].x)/2,(r[N].points[B].y+r[N].points[S].y)/2)})),n[N].points.push({x:(r[N].points[B].x+r[N].points[S].x)/2,y:(r[N].points[B].y+r[N].points[S].y)/2,linesegment:this.getdirection((r[N].points[B].x+r[N].points[S].x)/2,(r[N].points[B].y+r[N].points[S].y)/2,(r[N].points[S].x+r[N].points[E].x)/2,(r[N].points[S].y+r[N].points[E].y)/2)});return n}},{key:"testrightangle",value:function(r,c,n,h,S,E){return r.points[h].x===r.points[c].x&&r.points[h].x===r.points[n].x&&r.points[h].y===r.points[S].y&&r.points[h].y===r.points[E].y||r.points[h].y===r.points[c].y&&r.points[h].y===r.points[n].y&&r.points[h].x===r.points[S].x&&r.points[h].x===r.points[E].x}},{key:"getdirection",value:function(r,c,n,h){var S=8;return r<n?c<h?S=1:c>h?S=7:S=0:r>n?c<h?S=3:c>h?S=5:S=4:c<h?S=2:c>h?S=6:S=8,S}},{key:"batchinternodes",value:function(r,c){var n=[];for(var h in r)r.hasOwnProperty(h)&&(n[h]=this.internodes(r[h],c));return n}},{key:"tracepath",value:function(r,c,n){var h=0,S,E,P,_={};for(_.segments=[],_.boundingbox=r.boundingbox,_.holechildren=r.holechildren,_.isholepath=r.isholepath;h<r.points.length;){var N;for(S=r.points[h].linesegment,E=-1,P=h+1;(r.points[P].linesegment===S||r.points[P].linesegment===E||E===-1)&&P<r.points.length-1;)r.points[P].linesegment!==S&&E===-1&&(E=r.points[P].linesegment),P+=1;P===r.points.length-1&&(P=0),_.segments=U()(N=_.segments).call(N,this.fitseq(r,c,n,h,P)),P>0?h=P:h=r.points.length}return _}},{key:"fitseq",value:function(r,c,n,h,S){var E;if(S>r.points.length||S<0)return[];var P=h,_=0,N=!0,B,nt,lt,pt=S-h;pt<0&&(pt+=r.points.length);for(var ut=(r.points[S].x-r.points[h].x)/pt,vt=(r.points[S].y-r.points[h].y)/pt,Lt=(h+1)%r.points.length,ie;Lt!=S;)ie=Lt-h,ie<0&&(ie+=r.points.length),B=r.points[h].x+ut*ie,nt=r.points[h].y+vt*ie,lt=(r.points[Lt].x-B)*(r.points[Lt].x-B)+(r.points[Lt].y-nt)*(r.points[Lt].y-nt),lt>c&&(N=!1),lt>_&&(P=Lt,_=lt),Lt=(Lt+1)%r.points.length;if(N)return[{type:"L",x1:r.points[h].x,y1:r.points[h].y,x2:r.points[S].x,y2:r.points[S].y}];var re=P;N=!0,_=0;var oe=(re-h)/pt,Ht=(1-oe)*(1-oe),ge=2*(1-oe)*oe,we=oe*oe,je=(Ht*r.points[h].x+we*r.points[S].x-r.points[re].x)/-ge,He=(Ht*r.points[h].y+we*r.points[S].y-r.points[re].y)/-ge;for(Lt=h+1;Lt!=S;)oe=(Lt-h)/pt,Ht=(1-oe)*(1-oe),ge=2*(1-oe)*oe,we=oe*oe,B=Ht*r.points[h].x+ge*je+we*r.points[S].x,nt=Ht*r.points[h].y+ge*He+we*r.points[S].y,lt=(r.points[Lt].x-B)*(r.points[Lt].x-B)+(r.points[Lt].y-nt)*(r.points[Lt].y-nt),lt>n&&(N=!1),lt>_&&(P=Lt,_=lt),Lt=(Lt+1)%r.points.length;if(N)return[{type:"Q",x1:r.points[h].x,y1:r.points[h].y,x2:je,y2:He,x3:r.points[S].x,y3:r.points[S].y}];var Te=re;return U()(E=this.fitseq(r,c,n,h,Te)).call(E,this.fitseq(r,c,n,Te,S))}},{key:"batchtracepaths",value:function(r,c,n){var h=[];for(var S in r)r.hasOwnProperty(S)&&h.push(this.tracepath(r[S],c,n));return h}},{key:"batchtracelayers",value:function(r,c,n){var h=[];for(var S in r)r.hasOwnProperty(S)&&(h[S]=this.batchtracepaths(r[S],c,n));return h}},{key:"roundtodec",value:function(r,c){return Number(r.toFixed(c))}},{key:"svgpathstring",value:function(r,c,n,h){var S,E,P=r.layers[c],_=P[n],N="",B;if(h.linefilter&&_.segments.length<3)return N;if(N=U()(S="<path ".concat(h.desc?U()(E='desc="l '.concat(c," p ")).call(E,n,'" '):"")).call(S,this.tosvgcolorstr(r.palette[c],h),'d="'),h.roundcoords===-1){var nt;for(N+=U()(nt="M ".concat(_.segments[0].x1*h.scale," ")).call(nt,_.segments[0].y1*h.scale," "),B=0;B<_.segments.length;B++){var lt,pt;if(N+=U()(lt=U()(pt="".concat(_.segments[B].type," ")).call(pt,_.segments[B].x2*h.scale," ")).call(lt,_.segments[B].y2*h.scale," "),_.segments[B].hasOwnProperty("x3")){var ut;N+=U()(ut="".concat(_.segments[B].x3*h.scale," ")).call(ut,_.segments[B].y3*h.scale," ")}}N+="Z "}else{var vt;for(N+=U()(vt="M ".concat(this.roundtodec(_.segments[0].x1*h.scale,h.roundcoords)," ")).call(vt,this.roundtodec(_.segments[0].y1*h.scale,h.roundcoords)," "),B=0;B<_.segments.length;B++){var Lt,ie;if(N+=U()(Lt=U()(ie="".concat(_.segments[B].type," ")).call(ie,this.roundtodec(_.segments[B].x2*h.scale,h.roundcoords)," ")).call(Lt,this.roundtodec(_.segments[B].y2*h.scale,h.roundcoords)," "),_.segments[B].hasOwnProperty("x3")){var re;N+=U()(re="".concat(this.roundtodec(_.segments[B].x3*h.scale,h.roundcoords)," ")).call(re,this.roundtodec(_.segments[B].y3*h.scale,h.roundcoords)," ")}}N+="Z "}for(var oe=0;oe<_.holechildren.length;oe++){var Ht=P[_.holechildren[oe]];if(h.roundcoords===-1){if(Ht.segments[Ht.segments.length-1].hasOwnProperty("x3")){var ge;N+=U()(ge="M ".concat(Ht.segments[Ht.segments.length-1].x3*h.scale," ")).call(ge,Ht.segments[Ht.segments.length-1].y3*h.scale," ")}else{var we;N+=U()(we="M ".concat(Ht.segments[Ht.segments.length-1].x2*h.scale," ")).call(we,Ht.segments[Ht.segments.length-1].y2*h.scale," ")}for(B=Ht.segments.length-1;B>=0;B--){var je;if(N+="".concat(Ht.segments[B].type," "),Ht.segments[B].hasOwnProperty("x3")){var He;N+=U()(He="".concat(Ht.segments[B].x2*h.scale," ")).call(He,Ht.segments[B].y2*h.scale," ")}N+=U()(je="".concat(Ht.segments[B].x1*h.scale," ")).call(je,Ht.segments[B].y1*h.scale," ")}}else{if(Ht.segments[Ht.segments.length-1].hasOwnProperty("x3")){var Te;N+=U()(Te="M ".concat(this.roundtodec(Ht.segments[Ht.segments.length-1].x3*h.scale)," ")).call(Te,this.roundtodec(Ht.segments[Ht.segments.length-1].y3*h.scale)," ")}else{var Ke;N+=U()(Ke="M ".concat(this.roundtodec(Ht.segments[Ht.segments.length-1].x2*h.scale)," ")).call(Ke,this.roundtodec(Ht.segments[Ht.segments.length-1].y2*h.scale)," ")}for(B=Ht.segments.length-1;B>=0;B--){var $e;if(N+="".concat(Ht.segments[B].type," "),Ht.segments[B].hasOwnProperty("x3")){var Le;N+=U()(Le="".concat(this.roundtodec(Ht.segments[B].x2*h.scale)," ")).call(Le,this.roundtodec(Ht.segments[B].y2*h.scale)," ")}N+=U()($e="".concat(this.roundtodec(Ht.segments[B].x1*h.scale)," ")).call($e,this.roundtodec(Ht.segments[B].y1*h.scale)," ")}}N+="Z "}if(N+='" />',h.lcpr||h.qcpr){for(B=0;B<_.segments.length;B++){if(_.segments[B].hasOwnProperty("x3")&&h.qcpr){var wi,Di,Oi,_i,ki,Pi,Li,ji,Ni,Ri,zi,Fi,Bi,Hi;N+=U()(wi=U()(Di=U()(Oi='<circle cx="'.concat(_.segments[B].x2*h.scale,'" cy="')).call(Oi,_.segments[B].y2*h.scale,'" r="')).call(Di,h.qcpr,'" fill="cyan" stroke-width="')).call(wi,h.qcpr*.2,'" stroke="black" />'),N+=U()(_i=U()(ki=U()(Pi='<circle cx="'.concat(_.segments[B].x3*h.scale,'" cy="')).call(Pi,_.segments[B].y3*h.scale,'" r="')).call(ki,h.qcpr,'" fill="white" stroke-width="')).call(_i,h.qcpr*.2,'" stroke="black" />'),N+=U()(Li=U()(ji=U()(Ni=U()(Ri='<line x1="'.concat(_.segments[B].x1*h.scale,'" y1="')).call(Ri,_.segments[B].y1*h.scale,'" x2="')).call(Ni,_.segments[B].x2*h.scale,'" y2="')).call(ji,_.segments[B].y2*h.scale,'" stroke-width="')).call(Li,h.qcpr*.2,'" stroke="cyan" />'),N+=U()(zi=U()(Fi=U()(Bi=U()(Hi='<line x1="'.concat(_.segments[B].x2*h.scale,'" y1="')).call(Hi,_.segments[B].y2*h.scale,'" x2="')).call(Bi,_.segments[B].x3*h.scale,'" y2="')).call(Fi,_.segments[B].y3*h.scale,'" stroke-width="')).call(zi,h.qcpr*.2,'" stroke="cyan" />')}if(!_.segments[B].hasOwnProperty("x3")&&h.lcpr){var Ui,Yi,Wi;N+=U()(Ui=U()(Yi=U()(Wi='<circle cx="'.concat(_.segments[B].x2*h.scale,'" cy="')).call(Wi,_.segments[B].y2*h.scale,'" r="')).call(Yi,h.lcpr,'" fill="white" stroke-width="')).call(Ui,h.lcpr*.2,'" stroke="black" />')}}for(var oe=0;oe<_.holechildren.length;oe++){var Ht=P[_.holechildren[oe]];for(B=0;B<Ht.segments.length;B++){if(Ht.segments[B].hasOwnProperty("x3")&&h.qcpr){var Gi,Ue,ti,fr,dr,gr,vr,pr,mr,yr,Cr,Sr,xr,Ir;N+=U()(Gi=U()(Ue=U()(ti='<circle cx="'.concat(Ht.segments[B].x2*h.scale,'" cy="')).call(ti,Ht.segments[B].y2*h.scale,'" r="')).call(Ue,h.qcpr,'" fill="cyan" stroke-width="')).call(Gi,h.qcpr*.2,'" stroke="black" />'),N+=U()(fr=U()(dr=U()(gr='<circle cx="'.concat(Ht.segments[B].x3*h.scale,'" cy="')).call(gr,Ht.segments[B].y3*h.scale,'" r="')).call(dr,h.qcpr,'" fill="white" stroke-width="')).call(fr,h.qcpr*.2,'" stroke="black" />'),N+=U()(vr=U()(pr=U()(mr=U()(yr='<line x1="'.concat(Ht.segments[B].x1*h.scale,'" y1="')).call(yr,Ht.segments[B].y1*h.scale,'" x2="')).call(mr,Ht.segments[B].x2*h.scale,'" y2="')).call(pr,Ht.segments[B].y2*h.scale,'" stroke-width="')).call(vr,h.qcpr*.2,'" stroke="cyan" />'),N+=U()(Cr=U()(Sr=U()(xr=U()(Ir='<line x1="'.concat(Ht.segments[B].x2*h.scale,'" y1="')).call(Ir,Ht.segments[B].y2*h.scale,'" x2="')).call(xr,Ht.segments[B].x3*h.scale,'" y2="')).call(Sr,Ht.segments[B].y3*h.scale,'" stroke-width="')).call(Cr,h.qcpr*.2,'" stroke="cyan" />')}if(!Ht.segments[B].hasOwnProperty("x3")&&h.lcpr){var br,Mr,Tr;N+=U()(br=U()(Mr=U()(Tr='<circle cx="'.concat(Ht.segments[B].x2*h.scale,'" cy="')).call(Tr,Ht.segments[B].y2*h.scale,'" r="')).call(Mr,h.lcpr,'" fill="white" stroke-width="')).call(br,h.lcpr*.2,'" stroke="black" />')}}}}return N}},{key:"getsvgstring",value:function(r,c){var n,h,S;c=this.checkoptions(c);for(var E=r.width*c.scale,P=r.height*c.scale,_=U()(n="<svg ".concat(c.viewbox?U()(h='viewBox="0 0 '.concat(E," ")).call(h,P,'" '):U()(S='width="'.concat(E,'" height="')).call(S,P,'" '),'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version ')).call(n,this.versionnumber,'" >'),N=0;N<r.layers.length;N+=1)for(var B=0;B<r.layers[N].length;B+=1)r.layers[N][B].isholepath||(_+=this.svgpathstring(r,N,B,c));return _+="</svg>",_}},{key:"compareNumbers",value:function(r,c){return r-c}},{key:"torgbastr",value:function(r){var c,n,h;return U()(c=U()(n=U()(h="rgba(".concat(r.r,",")).call(h,r.g,",")).call(n,r.b,",")).call(c,r.a,")")}},{key:"tosvgcolorstr",value:function(r,c){var n,h,S,E,P,_,N;return U()(n=U()(h=U()(S=U()(E=U()(P=U()(_=U()(N='fill="rgb('.concat(r.r,",")).call(N,r.g,",")).call(_,r.b,')" stroke="rgb(')).call(P,r.r,",")).call(E,r.g,",")).call(S,r.b,')" stroke-width="')).call(h,c.strokewidth,'" opacity="')).call(n,r.a/255,'" ')}},{key:"appendSVGString",value:function(r,c){var n;c?(n=document.getElementById(c),n||(n=document.createElement("div"),n.id=c,document.body.appendChild(n))):(n=document.createElement("div"),document.body.appendChild(n)),n.innerHTML+=r}},{key:"blur",value:function(r,c,n){var h,S,E,P,_,N,B,nt,lt,pt,ut={width:r.width,height:r.height,data:[]};if(c=Math.floor(c),c<1)return r;c>5&&(c=5),n=Math.abs(n),n>1024&&(n=1024);var vt=this.gks[c-1];for(S=0;S<r.height;S++)for(h=0;h<r.width;h++){for(N=0,B=0,nt=0,lt=0,pt=0,E=-c;E<c+1;E++)h+E>0&&h+E<r.width&&(_=(S*r.width+h+E)*4,N+=r.data[_]*vt[E+c],B+=r.data[_+1]*vt[E+c],nt+=r.data[_+2]*vt[E+c],lt+=r.data[_+3]*vt[E+c],pt+=vt[E+c]);_=(S*r.width+h)*4,ut.data[_]=Math.floor(N/pt),ut.data[_+1]=Math.floor(B/pt),ut.data[_+2]=Math.floor(nt/pt),ut.data[_+3]=Math.floor(lt/pt)}var Lt=new Uint8ClampedArray(ut.data);for(S=0;S<r.height;S++)for(h=0;h<r.width;h++){for(N=0,B=0,nt=0,lt=0,pt=0,E=-c;E<c+1;E++)S+E>0&&S+E<r.height&&(_=((S+E)*r.width+h)*4,N+=Lt[_]*vt[E+c],B+=Lt[_+1]*vt[E+c],nt+=Lt[_+2]*vt[E+c],lt+=Lt[_+3]*vt[E+c],pt+=vt[E+c]);_=(S*r.width+h)*4,ut.data[_]=Math.floor(N/pt),ut.data[_+1]=Math.floor(B/pt),ut.data[_+2]=Math.floor(nt/pt),ut.data[_+3]=Math.floor(lt/pt)}for(S=0;S<r.height;S++)for(h=0;h<r.width;h++)_=(S*r.width+h)*4,P=Math.abs(ut.data[_]-r.data[_])+Math.abs(ut.data[_+1]-r.data[_+1])+Math.abs(ut.data[_+2]-r.data[_+2])+Math.abs(ut.data[_+3]-r.data[_+3]),P>n&&(ut.data[_]=r.data[_],ut.data[_+1]=r.data[_+1],ut.data[_+2]=r.data[_+2],ut.data[_+3]=r.data[_+3]);return ut}},{key:"loadImage",value:function(r,c,n){var h=new Image;n&&n.corsenabled&&(h.crossOrigin="Anonymous"),h.src=r,h.onload=function(){var S=document.createElement("canvas");S.width=h.width,S.height=h.height;var E=S.getContext("2d");E.drawImage(h,0,0),c(S)}}},{key:"getImgdata",value:function(r){var c=r.getContext("2d");return c.getImageData(0,0,r.width,r.height)}},{key:"drawLayers",value:function(r,c,n,h){n=n||1;var S,E,P,_,N,B;h?(B=document.getElementById(h),B||(B=document.createElement("div"),B.id=h,document.body.appendChild(B))):(B=document.createElement("div"),document.body.appendChild(B));for(N in r)if(r.hasOwnProperty(N)){S=r[N][0].length,E=r[N].length;var nt=document.createElement("canvas");nt.width=S*n,nt.height=E*n;var lt=nt.getContext("2d");for(_=0;_<E;_+=1)for(P=0;P<S;P+=1)lt.fillStyle=this.torgbastr(c[r[N][_][P]%c.length]),lt.fillRect(P*n,_*n,n,n);B.appendChild(nt)}}}],[{key:"tracerDefaultOption",value:function(){return{pathomit:100,ltres:.1,qtres:1,scale:1,strokewidth:5,viewbox:!1,linefilter:!0,desc:!1,rightangleenhance:!1,pal:[{r:0,g:0,b:0,a:255},{r:255,g:255,b:255,a:255}]}}}]),A}(),Ao={getActions:function(){return{main:this._mainAction(),shape:this._shapeAction(),crop:this._cropAction(),resize:this._resizeAction(),flip:this._flipAction(),rotate:this._rotateAction(),text:this._textAction(),mask:this._maskAction(),draw:this._drawAction(),icon:this._iconAction(),filter:this._filterAction(),history:this._historyAction()}},_mainAction:function(){var v=this,r=function(){v.ui.submenu==="crop"&&(v.stopDrawingMode(),v.ui.changeMenu("crop"))},c=function(N){v.ui.submenu==="rotate"&&v.ui.rotate.setRangeBarAngle("setAngle",N)},n=function(N){v.ui.submenu==="filter"&&ei()(v.ui).setFilterState(N)},h=function(N){return c(N),n(N),N},S=function(){var N=v._graphics.getZoomMode();v.stopDrawingMode(),N!==De.ZOOM?(v.startDrawingMode(de.ZOOM),v._graphics.startZoomInMode()):v._graphics.endZoomInMode()},E=function(){var N=v._graphics.getZoomMode();v.stopDrawingMode(),N!==De.HAND?(v.startDrawingMode(de.ZOOM),v._graphics.startHandMode()):v._graphics.endHandMode()},P=function(){ei()(v.ui)&&ei()(v.ui).initFilterCheckBoxState()};return G()({initLoadImage:function(N,B){return v.loadImageFromURL(N,B).then(function(nt){r(),v.ui.initializeImgUrl=N,v.ui.resizeEditor({imageSize:nt}),v.clearUndoStack(),v._invoker.fire(Et.EXECUTE_COMMAND,he.LOAD_IMAGE)})},undo:function(){v.isEmptyUndoStack()||(r(),v.deactivateAll(),v.undo().then(h))},redo:function(){v.isEmptyRedoStack()||(r(),v.deactivateAll(),v.redo().then(h))},reset:function(){r(),v.loadImageFromURL(v.ui.initializeImgUrl,"resetImage").then(function(N){r(),P(),v.ui.resizeEditor({imageSize:N}),v.clearUndoStack(),v._initHistory()})},delete:function(){v.ui.changeHelpButtonEnabled("delete",!1),r(),v.removeActiveObject(),v.activeObjectId=null},deleteAll:function(){r(),v.clearObjects(),v.ui.changeHelpButtonEnabled("delete",!1),v.ui.changeHelpButtonEnabled("deleteAll",!1)},load:function(N){Pe()||alert("This browser does not support file-api"),v.ui.initializeImgUrl=V().createObjectURL(N),v.loadImageFromFile(N).then(function(B){r(),P(),v.clearUndoStack(),v.ui.activeMenuEvent(),v.ui.resizeEditor({imageSize:B}),v._clearHistory(),v._invoker.fire(Et.EXECUTE_COMMAND,he.LOAD_IMAGE)}).catch(function(B){return gt().reject(B)})},download:function(){var N=v.toDataURL(),B=v.getImageName(),nt,lt,pt;Pe()&&window.saveAs?(nt=Er(N),lt=nt.type.split("/")[1],B.split(".").pop()!==lt&&(B+=".".concat(lt)),saveAs(nt,B)):(pt=window.open(),pt.document.body.innerHTML="<img src='".concat(N,"'>"))},history:function(N){v.ui.toggleHistoryMenu(N)},zoomIn:function(){v.ui.toggleZoomButtonStatus("zoomIn"),v.deactivateAll(),S()},zoomOut:function(){v._graphics.zoomOut()},hand:function(){v.ui.offZoomInButtonStatus(),v.ui.toggleZoomButtonStatus("hand"),v.deactivateAll(),E()}},this._commonAction())},_iconAction:function(){var v=this;return G()({changeColor:function(c){v.activeObjectId&&v.changeIconColor(v.activeObjectId,c)},addIcon:function(c,n){v.startDrawingMode("ICON"),v.setDrawingIcon(c,n)},cancelAddIcon:function(){v.ui.icon.clearIconType(),v.changeSelectableAll(!0),v.changeCursor("default"),v.stopDrawingMode()},registerDefaultIcons:function(c,n){var h={};h[c]=n,v.registerIcons(h)},registerCustomIcon:function(c,n){var h=new wn;h.imageToSVG(c,function(S){var E=S.match(/path[^>]*d="([^"]*)"/),P=ct(E,2),_=P[1],N={};N[n.name]=_,v.registerIcons(N),v.addIcon(n.name,{left:100,top:100})},wn.tracerDefaultOption())}},this._commonAction())},_drawAction:function(){var v=this;return G()({setDrawMode:function(c,n){v.stopDrawingMode(),c==="free"?v.startDrawingMode("FREE_DRAWING",n):v.startDrawingMode("LINE_DRAWING",n)},setColor:function(c){v.setBrush({color:c})}},this._commonAction())},_maskAction:function(){var v=this;return G()({loadImageFromURL:function(c,n){return v.loadImageFromURL(v.toDataURL(),"FilterImage").then(function(){v.addImageObject(c).then(function(){V().revokeObjectURL(n)}),v._invoker.fire(Et.EXECUTE_COMMAND,he.LOAD_MASK_IMAGE)})},applyFilter:function(){v.applyFilter("mask",{maskObjId:v.activeObjectId})}},this._commonAction())},_textAction:function(){var v=this;return G()({changeTextStyle:function(c,n){v.activeObjectId&&v.changeTextStyle(v.activeObjectId,c,n)}},this._commonAction())},_rotateAction:function(){var v=this;return G()({rotate:function(c,n){v.rotate(c,n),v.ui.resizeEditor(),v.ui.rotate.setRangeBarAngle("rotate",c)},setAngle:function(c,n){v.setAngle(c,n),v.ui.resizeEditor(),v.ui.rotate.setRangeBarAngle("setAngle",c)}},this._commonAction())},_shapeAction:function(){var v=this;return G()({changeShape:function(c,n){v.activeObjectId&&v.changeShape(v.activeObjectId,c,n)},setDrawingShape:function(c){v.setDrawingShape(c)}},this._commonAction())},_cropAction:function(){var v=this;return G()({crop:function(){var c=v.getCropzoneRect();c&&!jr(c)&&v.crop(c).then(function(){v.stopDrawingMode(),v.ui.resizeEditor(),v.ui.changeMenu("crop"),v._invoker.fire(Et.EXECUTE_COMMAND,he.CROP)}).catch(function(n){return gt().reject(n)})},cancel:function(){v.stopDrawingMode(),v.ui.changeMenu("crop")},preset:function(c){switch(c){case"preset-square":v.setCropzoneRect(1/1);break;case"preset-3-2":v.setCropzoneRect(3/2);break;case"preset-4-3":v.setCropzoneRect(4/3);break;case"preset-5-4":v.setCropzoneRect(5/4);break;case"preset-7-5":v.setCropzoneRect(7/5);break;case"preset-16-9":v.setCropzoneRect(16/9);break;default:v.setCropzoneRect(),v.ui.crop.changeApplyButtonStatus(!1);break}}},this._commonAction())},_resizeAction:function(){var v=this;return G()({getCurrentDimensions:function(){return v._graphics.getCurrentDimensions()},preview:function(c,n,h){var S=v._graphics.getCurrentDimensions(),E=function(){return S.width/S.height},P={};switch(c){case"width":P.width=n,h?P.height=n/E():P.height=S.height;break;case"height":P.height=n,h?P.width=n*E():P.width=S.width;break;default:P=S}v._graphics.resize(P).then(function(){v.ui.resizeEditor()}),h&&(v.ui.resize.setWidthValue(P.width),v.ui.resize.setHeightValue(P.height))},lockAspectRatio:function(c,n,h){var S=v._graphics.getCurrentDimensions(),E=S.width,P=S.height,_=E/P;if(c)if(E>P){var N=h/_,B=n*_;v.ui.resize.setLimit({minWidth:B>n?B:n,minHeight:n,maxWidth:h,maxHeight:N<h?N:h})}else{var nt=h*_,lt=n/_;v.ui.resize.setLimit({minWidth:n,minHeight:lt>n?lt:n,maxWidth:nt<h?nt:h,maxHeight:h})}else v.ui.resize.setLimit({minWidth:n,minHeight:n,maxWidth:h,maxHeight:h})},resize:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;c||(c=v._graphics.getCurrentDimensions()),v.resize(c).then(function(){v._graphics.setOriginalDimensions(c),v.stopDrawingMode(),v.ui.resizeEditor(),v.ui.changeMenu("resize")}).catch(function(n){return gt().reject(n)})},reset:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=v._graphics.getOriginalDimensions();v.ui.resize.setWidthValue(n.width,!0),v.ui.resize.setHeightValue(n.height,!0),v._graphics.resize(n).then(function(){c||(v.stopDrawingMode(),v.ui.resizeEditor(),v.ui.changeMenu("resize"))})}},this._commonAction())},_flipAction:function(){var v=this;return G()({flip:function(c){return v[c]()}},this._commonAction())},_filterAction:function(){var v=this;return G()({applyFilter:function(c,n,h,S){c?v.applyFilter(n,h,S):v.hasFilter(n)&&v.removeFilter(n)}},this._commonAction())},setReAction:function(){var v=this;this.on({undoStackChanged:function(c){c?(v.ui.changeHelpButtonEnabled("undo",!0),v.ui.changeHelpButtonEnabled("reset",!0)):(v.ui.changeHelpButtonEnabled("undo",!1),v.ui.changeHelpButtonEnabled("reset",!1)),v.ui.resizeEditor()},redoStackChanged:function(c){c?v.ui.changeHelpButtonEnabled("redo",!0):v.ui.changeHelpButtonEnabled("redo",!1),v.ui.resizeEditor()},objectActivated:function(c){var n,h;v.activeObjectId=c.id,v.ui.changeHelpButtonEnabled("delete",!0),v.ui.changeHelpButtonEnabled("deleteAll",!0),c.type==="cropzone"?v.ui.crop.changeApplyButtonStatus(!0):l()(n=["rect","circle","triangle"]).call(n,c.type)>-1?(v.stopDrawingMode(),v.ui.submenu!=="shape"&&v.ui.changeMenu("shape",!1,!1),v.ui.shape.setShapeStatus({strokeColor:c.stroke,strokeWidth:c.strokeWidth,fillColor:St()(c)}),v.ui.shape.setMaxStrokeValue(Math.min(c.width,c.height))):c.type==="path"||c.type==="line"?v.ui.submenu!=="draw"&&(v.ui.changeMenu("draw",!1,!1),v.ui.draw.changeStandbyMode()):l()(h=["i-text","text"]).call(h,c.type)>-1?(v.ui.submenu!=="text"&&v.ui.changeMenu("text",!1,!1),v.ui.text.setTextStyleStateOnAction(c)):c.type==="icon"&&(v.stopDrawingMode(),v.ui.submenu!=="icon"&&v.ui.changeMenu("icon",!1,!1),v.ui.icon.setIconPickerColor(St()(c)))},addText:function(c){var n=v.ui.text,h=n.textColor,S=n.fontSize,E=n.fontStyle,P=n.fontWeight,_=n.underline,N="Noto Sans";v.addText("Double Click",{position:c.originPosition,styles:{fill:h,fontSize:S,fontFamily:N,fontStyle:E,fontWeight:P,underline:_}}).then(function(){v.changeCursor("default")})},addObjectAfter:function(c){var n;c.type==="icon"?v.ui.icon.changeStandbyMode():l()(n=["rect","circle","triangle"]).call(n,c.type)>-1&&(v.ui.shape.setMaxStrokeValue(Math.min(c.width,c.height)),v.ui.shape.changeStandbyMode())},objectScaled:function(c){var n,h;if(l()(n=["i-text","text"]).call(n,c.type)>-1)v.ui.text.fontSize=zt(c.fontSize);else if(l()(h=["rect","circle","triangle"]).call(h,c.type)>=0){var S=c.width,E=c.height,P=v.ui.shape.getStrokeValue();S<P&&v.ui.shape.setStrokeValue(S),E<P&&v.ui.shape.setStrokeValue(E)}},selectionCleared:function(){v.activeObjectId=null,v.ui.submenu==="text"?v.changeCursor("text"):Ci(["draw","crop","resize"],v.ui.submenu)||v.stopDrawingMode()}})},_historyAction:function(){var v=this;return{undo:function(c){return v.undo(c)},redo:function(c){return v.redo(c)}}},_commonAction:function(){var v=this,r,c,n,h,S=de.TEXT,E=de.CROPPER,P=de.SHAPE,_=de.ZOOM,N=de.RESIZE;return{modeChange:function(nt){switch(nt){case Oe.TEXT:v._changeActivateMode(S);break;case Oe.CROP:v.startDrawingMode(E);break;case Oe.SHAPE:v._changeActivateMode(P),v.setDrawingShape(v.ui.shape.type,v.ui.shape.options);break;case Oe.ZOOM:v.startDrawingMode(_);break;case Oe.RESIZE:v.startDrawingMode(N);break;default:break}},deactivateAll:$()(r=this.deactivateAll).call(r,this),changeSelectableAll:$()(c=this.changeSelectableAll).call(c,this),discardSelection:$()(n=this.discardSelection).call(n,this),stopDrawingMode:$()(h=this.stopDrawingMode).call(h,this)}},mixin:function(v){G()(v.prototype,this)}},wo=O(602),Dn=O.n(wo),Do=O(5573),Ii=O.n(Do),Oo=function(){function A(v,r){W(this,A),this.name=v,this.graphics=r}return it(A,[{key:"fire",value:function(){for(var r=this.graphics,c=arguments.length,n=new Array(c),h=0;h<c;h++)n[h]=arguments[h];return this.graphics.fire.apply(r,n)}},{key:"setCanvasImage",value:function(r,c){this.graphics.setCanvasImage(r,c)}},{key:"getCanvasElement",value:function(){return this.graphics.getCanvasElement()}},{key:"getCanvas",value:function(){return this.graphics.getCanvas()}},{key:"getCanvasImage",value:function(){return this.graphics.getCanvasImage()}},{key:"getImageName",value:function(){return this.graphics.getImageName()}},{key:"getEditor",value:function(){return this.graphics.getEditor()}},{key:"getName",value:function(){return this.name}},{key:"setImageProperties",value:function(r,c){this.graphics.setImageProperties(r,c)}},{key:"setCanvasCssDimension",value:function(r){this.graphics.setCanvasCssDimension(r)}},{key:"setCanvasBackstoreDimension",value:function(r){this.graphics.setCanvasBackstoreDimension(r)}},{key:"adjustCanvasDimension",value:function(){this.graphics.adjustCanvasDimension()}},{key:"adjustCanvasDimensionBase",value:function(){this.graphics.adjustCanvasDimensionBase()}}]),A}(),Fe=Oo;function _o(A){var v=ko();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function ko(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Po={padding:0,crossOrigin:"Anonymous"},Lo=function(A){me(r,A);var v=_o(r);function r(c){return W(this,r),v.call(this,Bt.IMAGE_LOADER,c)}return it(r,[{key:"load",value:function(n,h){var S=this,E;if(!n&&!h){var P=this.getCanvas();P.backgroundImage=null,P.renderAll(),E=new(gt())(function(_){S.setCanvasImage("",null),_()})}else E=this._setBackgroundImage(h).then(function(_){return S.setCanvasImage(n,_),S.adjustCanvasDimension(),_});return E}},{key:"_setBackgroundImage",value:function(n){var h=this;return n?new(gt())(function(S,E){var P=h.getCanvas();P.setBackgroundImage(n,function(){var _=P.backgroundImage;_&&_.getElement()?S(_):E(pe.loadingImageFailed)},Po)}):gt().reject(pe.loadImage)}}]),r}(Fe),jo=Lo,No="tl",Ro="tr",zo="mt",Fo="ml",Bo="mr",Ho="mb",Uo="bl",Yo="br",On=[No,Ro,zo,Fo,Bo,Ho,Uo,Yo],Qi=function(){};function Wo(A){return l()(On).call(On,A)>=0}function bi(A,v){return A>v?"width":"height"}var Go=q.fabric.util.createClass(q.fabric.Rect,{initialize:function(v,r,c){r=G()(r,c),r.type="cropzone",this.callSuper("initialize",r),this._addEventHandler(),this.canvas=v,this.options=r},canvasEventDelegation:function(v){var r,c="unregistered",n=this.canvasEventTrigger[v]!==Qi;return n?c="registered":l()(r=[Et.OBJECT_MOVED,Et.OBJECT_SCALED]).call(r,v)<0&&(c="none"),c},canvasEventRegister:function(v,r){this.canvasEventTrigger[v]=r},_addEventHandler:function(){var v,r,c,n,h;this.canvasEventTrigger=(v={},F(v,Et.OBJECT_MOVED,Qi),F(v,Et.OBJECT_SCALED,Qi),v),this.on({moving:$()(r=this._onMoving).call(r,this),scaling:$()(c=this._onScaling).call(c,this)}),q.fabric.util.addListener(document,"keydown",$()(n=this._onKeyDown).call(n,this)),q.fabric.util.addListener(document,"keyup",$()(h=this._onKeyUp).call(h,this))},_renderCropzone:function(v){var r=7,c=7,n=this.flipX?-1:1,h=this.flipY?-1:1,S=n/this.scaleX,E=h/this.scaleY;v.scale(S,E),this._fillOuterRect(v,"rgba(0, 0, 0, 0.5)"),this.options.lineWidth?(this._fillInnerRect(v),this._strokeBorder(v,"rgb(255, 255, 255)",{lineWidth:this.options.lineWidth})):(this._strokeBorder(v,"rgb(0, 0, 0)",{lineDashWidth:r}),this._strokeBorder(v,"rgb(255, 255, 255)",{lineDashWidth:r,lineDashOffset:c})),v.scale(1/S,1/E)},_render:function(v){this.callSuper("_render",v),this._renderCropzone(v)},_fillOuterRect:function(v,r){var c=this._getCoordinates(),n=c.x,h=c.y;v.save(),v.fillStyle=r,v.beginPath(),v.moveTo(n[0]-1,h[0]-1),v.lineTo(n[3]+1,h[0]-1),v.lineTo(n[3]+1,h[3]+1),v.lineTo(n[0]-1,h[3]+1),v.lineTo(n[0]-1,h[0]-1),v.closePath(),v.moveTo(n[1],h[1]),v.lineTo(n[1],h[2]),v.lineTo(n[2],h[2]),v.lineTo(n[2],h[1]),v.lineTo(n[1],h[1]),v.closePath(),St()(v).call(v),v.restore()},_fillInnerRect:function(v){var r=this._getCoordinates(),c=r.x,n=r.y,h=this._caculateInnerPosition(c,(c[2]-c[1])/3),S=this._caculateInnerPosition(n,(n[2]-n[1])/3);v.save(),v.strokeStyle="rgba(255, 255, 255, 0.7)",v.lineWidth=this.options.lineWidth,v.beginPath(),v.moveTo(h[0],S[1]),v.lineTo(h[3],S[1]),v.moveTo(h[0],S[2]),v.lineTo(h[3],S[2]),v.moveTo(h[1],S[0]),v.lineTo(h[1],S[3]),v.moveTo(h[2],S[0]),v.lineTo(h[2],S[3]),v.stroke(),v.closePath(),v.restore()},_caculateInnerPosition:function(v,r){var c=[];return c[0]=v[1],c[1]=v[1]+r,c[2]=v[1]+r*2,c[3]=v[2],c},_getCoordinates:function(){var v,r,c=this.canvas,n=this.width,h=this.height,S=this.left,E=this.top,P=n/2,_=h/2,N=c.getHeight(),B=c.getWidth();return{x:We()(v=[-(P+S),-P,P,P+(B-S-n)]).call(v,Math.ceil),y:We()(r=[-(_+E),-_,_,_+(N-E-h)]).call(r,Math.ceil)}},_strokeBorder:function(v,r,c){var n=c.lineDashWidth,h=c.lineDashOffset,S=c.lineWidth,E=this.width/2,P=this.height/2;v.save(),v.strokeStyle=r,v.setLineDash&&v.setLineDash([n,n]),h&&(v.lineDashOffset=h),S&&(v.lineWidth=S),v.beginPath(),v.moveTo(-E,-P),v.lineTo(E,-P),v.lineTo(E,P),v.lineTo(-E,P),v.lineTo(-E,-P),v.stroke(),v.restore()},_onMoving:function(){var v=this.height,r=this.width,c=this.left,n=this.top,h=this.canvas.getWidth()-r,S=this.canvas.getHeight()-v;this.left=se(c,0,h),this.top=se(n,0,S),this.canvasEventTrigger[Et.OBJECT_MOVED](this)},_onScaling:function(v){var r=v.transform.corner,c=this.canvas.getPointer(v.e),n=this._calcScalingSizeFromPointer(c,r);this.scale(1).set(n),this.canvasEventTrigger[Et.OBJECT_SCALED](this)},_calcScalingSizeFromPointer:function(v,r){var c=Wo(r);return c&&this._resizeCropZone(v,r)},adjustRatioCropzoneSize:function(v){var r=v.width,c=v.height,n=v.leftMaker,h=v.topMaker,S=v.maxWidth,E=v.maxHeight,P=v.scaleTo;if(r=S?se(r,1,S):r,c=E?se(c,1,E):c,!this.presetRatio)return this._withShiftKey&&(r>c?c=r:c>r&&(r=c)),{width:r,height:c,left:n(r),top:h(c)};P==="width"?c=r/this.presetRatio:r=c*this.presetRatio;var _=Math.min(S/r,E/c);if(_<=1){var N,B=We()(N=[r,c]).call(N,function(lt){return lt*_}),nt=ct(B,2);r=nt[0],c=nt[1]}return{width:r,height:c,left:n(r),top:h(c)}},_getCropzoneRectInfo:function(){var v=this.canvas,r=v.width,c=v.height,n=this.getBoundingRect(!1,!0),h=n.top,S=n.left,E=n.width,P=n.height;return{rectTop:h,rectLeft:S,rectWidth:E,rectHeight:P,rectRight:S+E,rectBottom:h+P,canvasWidth:r,canvasHeight:c}},_resizeCropZone:function(v,r){var c=v.x,n=v.y,h=this._getCropzoneRectInfo(),S=h.rectWidth,E=h.rectHeight,P=h.rectTop,_=h.rectLeft,N=h.rectBottom,B=h.rectRight,nt=h.canvasWidth,lt=h.canvasHeight,pt={tl:{width:B-c,height:N-n,leftMaker:function(vt){return B-vt},topMaker:function(vt){return N-vt},maxWidth:B,maxHeight:N,scaleTo:bi(_-c,P-n)},tr:{width:c-_,height:N-n,leftMaker:function(){return _},topMaker:function(vt){return N-vt},maxWidth:nt-_,maxHeight:N,scaleTo:bi(c-B,P-n)},mt:{width:S,height:N-n,leftMaker:function(){return _},topMaker:function(vt){return N-vt},maxWidth:nt-_,maxHeight:N,scaleTo:"height"},ml:{width:B-c,height:E,leftMaker:function(vt){return B-vt},topMaker:function(){return P},maxWidth:B,maxHeight:lt-P,scaleTo:"width"},mr:{width:c-_,height:E,leftMaker:function(){return _},topMaker:function(){return P},maxWidth:nt-_,maxHeight:lt-P,scaleTo:"width"},mb:{width:S,height:n-P,leftMaker:function(){return _},topMaker:function(){return P},maxWidth:nt-_,maxHeight:lt-P,scaleTo:"height"},bl:{width:B-c,height:n-P,leftMaker:function(vt){return B-vt},topMaker:function(){return P},maxWidth:B,maxHeight:lt-P,scaleTo:bi(_-c,n-N)},br:{width:c-_,height:n-P,leftMaker:function(){return _},topMaker:function(){return P},maxWidth:nt-_,maxHeight:lt-P,scaleTo:bi(c-B,n-N)}};return this.adjustRatioCropzoneSize(pt[r])},isValid:function(){return this.left>=0&&this.top>=0&&this.width>0&&this.height>0},_onKeyDown:function(v){var r=v.keyCode;r===xe.SHIFT&&(this._withShiftKey=!0)},_onKeyUp:function(v){var r=v.keyCode;r===xe.SHIFT&&(this._withShiftKey=!1)}}),Xo=Go;function Zo(A){var v=Vo();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Vo(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Jo=10,Qo={presetRatio:null,top:-10,left:-10,height:1,width:1},Ko=function(A){me(r,A);var v=Zo(r);function r(c){var n,h,S,E,P,_;return W(this,r),_=v.call(this,Bt.CROPPER,c),_._cropzone=null,_._startX=null,_._startY=null,_._withShiftKey=!1,_._listeners={keydown:$()(n=_._onKeyDown).call(n,fe(_)),keyup:$()(h=_._onKeyUp).call(h,fe(_)),mousedown:$()(S=_._onFabricMouseDown).call(S,fe(_)),mousemove:$()(E=_._onFabricMouseMove).call(E,fe(_)),mouseup:$()(P=_._onFabricMouseUp).call(P,fe(_))},_}return it(r,[{key:"start",value:function(){if(!this._cropzone){var n=this.getCanvas();n.forEachObject(function(h){h.evented=!1}),this._cropzone=new Xo(n,G()({left:0,top:0,width:.5,height:.5,strokeWidth:0,cornerSize:10,cornerColor:"black",fill:"transparent"},Me,this.graphics.cropSelectionStyle)),n.discardActiveObject(),n.add(this._cropzone),n.on("mouse:down",this._listeners.mousedown),n.selection=!1,n.defaultCursor="crosshair",q.fabric.util.addListener(document,"keydown",this._listeners.keydown),q.fabric.util.addListener(document,"keyup",this._listeners.keyup)}}},{key:"end",value:function(){var n=this.getCanvas(),h=this._cropzone;h&&(n.remove(h),n.selection=!0,n.defaultCursor="default",n.off("mouse:down",this._listeners.mousedown),n.forEachObject(function(S){S.evented=!0}),this._cropzone=null,q.fabric.util.removeListener(document,"keydown",this._listeners.keydown),q.fabric.util.removeListener(document,"keyup",this._listeners.keyup))}},{key:"changeVisibility",value:function(n){this._cropzone&&this._cropzone.set({visible:n})}},{key:"_onFabricMouseDown",value:function(n){var h=this.getCanvas();if(!n.target){h.selection=!1;var S=h.getPointer(n.e);this._startX=S.x,this._startY=S.y,h.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}}},{key:"_onFabricMouseMove",value:function(n){var h=this.getCanvas(),S=h.getPointer(n.e),E=S.x,P=S.y,_=this._cropzone;Math.abs(E-this._startX)+Math.abs(P-this._startY)>Jo&&(h.remove(_),_.set(this._calcRectDimensionFromPoint(E,P,_.presetRatio)),h.add(_),h.setActiveObject(_))}},{key:"_calcRectDimensionFromPoint",value:function(n,h){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,E=this.getCanvas(),P=E.getWidth(),_=E.getHeight(),N=this._startX,B=this._startY,nt=se(n,0,N),lt=se(h,0,B),pt=se(n,N,P)-nt,ut=se(h,B,_)-lt;return this._withShiftKey&&!S?(pt>ut?ut=pt:ut>pt&&(pt=ut),N>=n&&(nt=N-pt),B>=h&&(lt=B-ut)):S&&(ut=pt/S,N>=n&&(nt=se(N-pt,0,P)),B>=h&&(lt=se(B-ut,0,_)),lt+ut>_&&(ut=_-lt,pt=ut*S,N>=n&&(nt=se(N-pt,0,P)),B>=h&&(lt=se(B-ut,0,_)))),{left:nt,top:lt,width:pt,height:ut}}},{key:"_onFabricMouseUp",value:function(){var n=this._cropzone,h=this._listeners,S=this.getCanvas();S.setActiveObject(n),S.off({"mouse:move":h.mousemove,"mouse:up":h.mouseup})}},{key:"getCroppedImageData",value:function(n){var h=this.getCanvas(),S=h.contains(this._cropzone);if(!n)return null;S&&h.remove(this._cropzone);var E={imageName:this.getImageName(),url:h.toDataURL(n)};return S&&h.add(this._cropzone),E}},{key:"getCropzoneRect",value:function(){var n=this._cropzone;return n.isValid()?{left:n.left,top:n.top,width:n.width,height:n.height}:null}},{key:"setCropzoneRect",value:function(n){var h=this.getCanvas(),S=this._cropzone;h.discardActiveObject(),h.selection=!1,h.remove(S),S.set(n?this._getPresetPropertiesForCropSize(n):Qo),h.add(S),h.selection=!0,n&&h.setActiveObject(S)}},{key:"_getPresetPropertiesForCropSize",value:function(n){var h,S,E=this.getCanvas(),P=E.getWidth(),_=E.getHeight(),N=P>=_?P:_,B=function(Ht,ge){return Ht>ge?ge/Ht:1},nt=N*n,lt=N,pt=B(nt,P),ut=We()(h=[nt,lt]).call(h,function(oe){return oe*pt}),vt=ct(ut,2);nt=vt[0],lt=vt[1];var Lt=B(lt,_),ie=We()(S=[nt,lt]).call(S,function(oe){return Ar(oe*Lt)}),re=ct(ie,2);return nt=re[0],lt=re[1],{presetRatio:n,top:(_-lt)/2,left:(P-nt)/2,width:nt,height:lt}}},{key:"_onKeyDown",value:function(n){n.keyCode===xe.SHIFT&&(this._withShiftKey=!0)}},{key:"_onKeyUp",value:function(n){n.keyCode===xe.SHIFT&&(this._withShiftKey=!1)}}]),r}(Fe),$o=Ko;function qo(A){var v=ts();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function ts(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var es=function(A){me(r,A);var v=qo(r);function r(c){return W(this,r),v.call(this,Bt.FLIP,c)}return it(r,[{key:"getCurrentSetting",value:function(){var n=this.getCanvasImage();return{flipX:n.flipX,flipY:n.flipY}}},{key:"set",value:function(n){var h=this.getCurrentSetting(),S=h.flipX!==n.flipX,E=h.flipY!==n.flipY;return!S&&!E?gt().reject(pe.flip):(G()(h,n),this.setImageProperties(h,!0),this._invertAngle(S,E),this._flipObjects(S,E),gt().resolve({flipX:h.flipX,flipY:h.flipY,angle:this.getCanvasImage().angle}))}},{key:"_invertAngle",value:function(n,h){var S=this.getCanvasImage(),E=S.angle;n&&(E*=-1),h&&(E*=-1),S.rotate(Ve()(E)).setCoords()}},{key:"_flipObjects",value:function(n,h){var S=this.getCanvas();n&&S.forEachObject(function(E){E.set({angle:Ve()(E.angle*-1),flipX:!E.flipX,left:S.width-E.left}).setCoords()}),h&&S.forEachObject(function(E){E.set({angle:Ve()(E.angle*-1),flipY:!E.flipY,top:S.height-E.top}).setCoords()}),S.renderAll()}},{key:"reset",value:function(){return this.set({flipX:!1,flipY:!1})}},{key:"flipX",value:function(){var n=this.getCurrentSetting();return this.set({flipX:!n.flipX,flipY:n.flipY})}},{key:"flipY",value:function(){var n=this.getCurrentSetting();return this.set({flipX:n.flipX,flipY:!n.flipY})}}]),r}(Fe),is=es;function ns(A){var v=rs();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function rs(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var as=function(A){me(r,A);var v=ns(r);function r(c){return W(this,r),v.call(this,Bt.ROTATION,c)}return it(r,[{key:"getCurrentAngle",value:function(){return this.getCanvasImage().angle}},{key:"setAngle",value:function(n){var h=this.getCurrentAngle()%360;n%=360;var S=this.getCanvasImage(),E=S.getCenterPoint();S.set({angle:n}).setCoords(),this.adjustCanvasDimension();var P=S.getCenterPoint();return this._rotateForEachObject(E,P,n-h),gt().resolve(n)}},{key:"_rotateForEachObject",value:function(n,h,S){var E=this.getCanvas(),P={x:n.x-h.x,y:n.y-h.y};E.forEachObject(function(_){var N=_.getCenterPoint(),B=q.fabric.util.degreesToRadians(S),nt=q.fabric.util.rotatePoint(N,n,B);_.set({left:nt.x-P.x,top:nt.y-P.y,angle:(_.angle+S)%360}),_.setCoords()}),E.renderAll()}},{key:"rotate",value:function(n){var h=this.getCurrentAngle();return this.setAngle(h+n)}}]),r}(Fe),os=as;function ss(A){var v=ls();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function ls(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var cs=function(A){me(r,A);var v=ss(r);function r(c){var n;return W(this,r),n=v.call(this,Bt.FREE_DRAWING,c),n.width=12,n.oColor=new q.fabric.Color("rgba(0, 0, 0, 0.5)"),n}return it(r,[{key:"start",value:function(n){var h=this.getCanvas();h.isDrawingMode=!0,this.setBrush(n)}},{key:"setBrush",value:function(n){var h=this.getCanvas().freeDrawingBrush;n=n||{},this.width=n.width||this.width,n.color&&(this.oColor=new q.fabric.Color(n.color)),h.width=this.width,h.color=this.oColor.toRgba()}},{key:"end",value:function(){var n=this.getCanvas();n.isDrawingMode=!1}}]),r}(Fe),us=cs,_n=30,hs=2.7,fs=1.7,kn=180,ds=q.fabric.util.createClass(q.fabric.Line,{type:"line",initialize:function(v){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.callSuper("initialize",v,r),this.arrowType=r.arrowType},_render:function(v){var r=this.calcLinePoints(),c=r.x1,n=r.y1,h=r.x2,S=r.y2,E={fromX:c,fromY:n,toX:h,toY:S};this.ctx=v,v.lineWidth=this.strokeWidth,this._renderBasicLinePath(E),this._drawDecoratorPath(E),this._renderStroke(v)},_renderBasicLinePath:function(v){var r=v.fromX,c=v.fromY,n=v.toX,h=v.toY;this.ctx.beginPath(),this.ctx.moveTo(r,c),this.ctx.lineTo(n,h)},_drawDecoratorPath:function(v){this._drawDecoratorPathType("head",v),this._drawDecoratorPathType("tail",v)},_drawDecoratorPathType:function(v,r){switch(this.arrowType[v]){case"triangle":this._drawTrianglePath(v,r);break;case"chevron":this._drawChevronPath(v,r);break;default:break}},_drawTrianglePath:function(v,r){var c=this.ctx.lineWidth*fs;this._drawChevronPath(v,r,c),this.ctx.closePath()},_drawChevronPath:function(v,r,c){var n=this,h=r.fromX,S=r.fromY,E=r.toX,P=r.toY,_=this.ctx;c||(c=this.ctx.lineWidth*hs);var N=v==="head"?[h,S]:[E,P],B=ct(N,2),nt=B[0],lt=B[1],pt=v==="head"?[E,P]:[h,S],ut=ct(pt,2),vt=ut[0],Lt=ut[1],ie=Math.atan2(Lt-lt,vt-nt)*kn/Math.PI,re=function(Ht){return n.getRotatePosition(c,Ht,{x:nt,y:lt})};_.moveTo.apply(_,L(re(ie+_n))),_.lineTo(nt,lt),_.lineTo.apply(_,L(re(ie-_n)))},getRotatePosition:function(v,r,c){var n=r*Math.PI/kn,h=c.x,S=c.y;return[v*Math.cos(n)+h,v*Math.sin(n)+S]}}),gs=ds;function vs(A){var v=ps();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function ps(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var ms=function(A){me(r,A);var v=vs(r);function r(c){var n,h,S,E;return W(this,r),E=v.call(this,Bt.LINE,c),E._width=12,E._oColor=new q.fabric.Color("rgba(0, 0, 0, 0.5)"),E._listeners={mousedown:$()(n=E._onFabricMouseDown).call(n,fe(E)),mousemove:$()(h=E._onFabricMouseMove).call(h,fe(E)),mouseup:$()(S=E._onFabricMouseUp).call(S,fe(E))},E}return it(r,[{key:"setHeadOption",value:function(n){var h=n.arrowType,S=h===void 0?{head:null,tail:null}:h;this._arrowType=S}},{key:"start",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=this.getCanvas();h.defaultCursor="crosshair",h.selection=!1,this.setHeadOption(n),this.setBrush(n),h.forEachObject(function(S){S.set({evented:!1})}),h.on({"mouse:down":this._listeners.mousedown})}},{key:"setBrush",value:function(n){var h=this.getCanvas().freeDrawingBrush;n=n||{},this._width=n.width||this._width,n.color&&(this._oColor=new q.fabric.Color(n.color)),h.width=this._width,h.color=this._oColor.toRgba()}},{key:"end",value:function(){var n=this.getCanvas();n.defaultCursor="default",n.selection=!0,n.forEachObject(function(h){h.set({evented:!0})}),n.off("mouse:down",this._listeners.mousedown)}},{key:"_onFabricMouseDown",value:function(n){var h=this.getCanvas(),S=h.getPointer(n.e),E=S.x,P=S.y,_=[E,P,E,P];this._line=new gs(_,{stroke:this._oColor.toRgba(),strokeWidth:this._width,arrowType:this._arrowType,evented:!1}),this._line.set(Be.SELECTION_STYLE),h.add(this._line),h.on({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup}),this.fire(Et.ADD_OBJECT,this._createLineEventObjectProperties())}},{key:"_onFabricMouseMove",value:function(n){var h=this.getCanvas(),S=h.getPointer(n.e);this._line.set({x2:S.x,y2:S.y}),this._line.setCoords(),h.renderAll()}},{key:"_onFabricMouseUp",value:function(){var n=this.getCanvas();this.fire(Et.OBJECT_ADDED,this._createLineEventObjectProperties()),this._line=null,n.off({"mouse:move":this._listeners.mousemove,"mouse:up":this._listeners.mouseup})}},{key:"_createLineEventObjectProperties",value:function(){var n=this.graphics.createObjectProperties(this._line),h=this._line,S=h.x1,E=h.x2,P=h.y1,_=h.y2;return G()({},n,{startPosition:{x:S,y:P},endPosition:{x:E,y:_}})}}]),r}(Fe),ys=ms;function Cs(A){var v=Ss();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Ss(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var xs={fill:"#000000",left:0,top:0},Is={fill:"#000000",fontStyle:"normal",fontWeight:"normal",textAlign:"tie-text-align-left",underline:!1},bs=500,Ms=function(A){me(r,A);var v=Cs(r);function r(c){var n,h,S,E,P,_;return W(this,r),_=v.call(this,Bt.TEXT,c),_._defaultStyles=xs,_._isSelected=!1,_._selectedObj={},_._editingObj={},_._listeners={mousedown:$()(n=_._onFabricMouseDown).call(n,fe(_)),select:$()(h=_._onFabricSelect).call(h,fe(_)),selectClear:$()(S=_._onFabricSelectClear).call(S,fe(_)),scaling:$()(E=_._onFabricScaling).call(E,fe(_)),textChanged:$()(P=_._onFabricTextChanged).call(P,fe(_))},_._textarea=null,_._ratio=1,_._lastClickTime=new Date().getTime(),_._editingObjInfos={},_.isPrevEditing=!1,_}return it(r,[{key:"start",value:function(){var n=this,h=this.getCanvas();h.selection=!1,h.defaultCursor="text",h.on({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged}),h.forEachObject(function(S){S.type==="i-text"&&n.adjustOriginPosition(S,"start")}),this.setCanvasRatio()}},{key:"end",value:function(){var n=this,h=this.getCanvas();h.selection=!0,h.defaultCursor="default",h.forEachObject(function(S){S.type==="i-text"&&(S.text===""?h.remove(S):n.adjustOriginPosition(S,"end"))}),h.off({"mouse:down":this._listeners.mousedown,"selection:created":this._listeners.select,"selection:updated":this._listeners.select,"before:selection:cleared":this._listeners.selectClear,"object:selected":this._listeners.select,"object:scaling":this._listeners.scaling,"text:changed":this._listeners.textChanged})}},{key:"adjustOriginPosition",value:function(n,h){var S="center",E="center";h==="start"&&(S="left",E="top");var P=n.getPointByOrigin(S,E),_=P.x,N=P.y;n.set({left:_,top:N,originX:S,originY:E}),n.setCoords()}},{key:"add",value:function(n,h){var S=this;return new(gt())(function(E){var P,_=S.getCanvas(),N=null,B=Be.SELECTION_STYLE,nt=S._defaultStyles;S._setInitPos(h.position),h.styles&&(nt=G()(nt,h.styles)),Cn()(h.autofocus)||(h.autofocus=!0),N=new q.fabric.IText(n,nt),B=G()({},B,{originX:"left",originY:"top"}),N.set(B),N.on({mouseup:$()(P=S._onFabricMouseUp).call(P,S)}),_.add(N),h.autofocus&&(N.enterEditing(),N.selectAll()),_.getActiveObject()||_.setActiveObject(N),S.isPrevEditing=!0,E(S.graphics.createObjectProperties(N))})}},{key:"change",value:function(n,h){var S=this;return new(gt())(function(E){n.set("text",h),S.getCanvas().renderAll(),E()})}},{key:"setStyle",value:function(n,h){var S=this;return new(gt())(function(E){X()(h,function(P,_){n[_]===P&&_!=="fontSize"&&(h[_]=Is[_]||"")},S),"textDecoration"in h&&G()(h,S._getTextDecorationAdaptObject(h.textDecoration)),n.set(h),S.getCanvas().renderAll(),E()})}},{key:"getText",value:function(n){return n.text}},{key:"setSelectedInfo",value:function(n,h){this._selectedObj=n,this._isSelected=h}},{key:"isSelected",value:function(){return this._isSelected}},{key:"getSelectedObj",value:function(){return this._selectedObj}},{key:"setCanvasRatio",value:function(){var n=this.getCanvasElement(),h=Ct()(n.style.maxWidth,10),S=n.width;this._ratio=S/h}},{key:"getCanvasRatio",value:function(){return this._ratio}},{key:"_getTextDecorationAdaptObject",value:function(n){return{underline:n==="underline",linethrough:n==="line-through",overline:n==="overline"}}},{key:"_setInitPos",value:function(n){n=n||this.getCanvasImage().getCenterPoint(),this._defaultStyles.left=n.x,this._defaultStyles.top=n.y}},{key:"_onInput",value:function(){var n=this.getCanvasRatio(),h=this._editingObj,S=this._textarea.style;S.width="".concat(Math.ceil(h.width/n),"px"),S.height="".concat(Math.ceil(h.height/n),"px")}},{key:"_onKeyDown",value:function(){var n=this,h=this.getCanvasRatio(),S=this._editingObj,E=this._textarea.style;t()(function(){S.text(n._textarea.value),E.width="".concat(Math.ceil(S.width/h),"px"),E.height="".concat(Math.ceil(S.height/h),"px")},0)}},{key:"_onBlur",value:function(){var n=this.getCanvasRatio(),h=this._editingObj,S=this._editingObjInfos,E=this._textarea.value,P=h.width/n-S.width/n,_=h.height/n-S.height/n;if(n===1&&(P/=2,_/=2),this._textarea.style.display="none",h.set({left:S.left+P,top:S.top+_}),E.length){this.getCanvas().add(h);var N={id:Ft(h),type:h.type,text:E};this.fire(Et.TEXT_CHANGED,N)}}},{key:"_onScroll",value:function(){this._textarea.scrollLeft=0,this._textarea.scrollTop=0}},{key:"_onFabricScaling",value:function(n){var h=n.target;h.fontSize=h.fontSize*h.scaleY,h.scaleX=1,h.scaleY=1}},{key:"_onFabricTextChanged",value:function(n){this.fire(Et.TEXT_CHANGED,n.target)}},{key:"_onFabricSelectClear",value:function(n){var h=this.getSelectedObj();this.isPrevEditing=!0,this.setSelectedInfo(n.target,!1),h&&h.text===""&&this.getCanvas().remove(h)}},{key:"_onFabricSelect",value:function(n){this.isPrevEditing=!0,this.setSelectedInfo(n.target,!0)}},{key:"_onFabricMouseDown",value:function(n){var h=n.target;if(!(h&&!h.isType("text"))){if(this.isPrevEditing){this.isPrevEditing=!1;return}this._fireAddText(n)}}},{key:"_fireAddText",value:function(n){var h=n.target,S=n.e||{},E=this.getCanvas().getPointer(S);h||this.fire(Et.ADD_TEXT,{originPosition:{x:E.x,y:E.y},clientPosition:{x:S.clientX||0,y:S.clientY||0}})}},{key:"_onFabricMouseUp",value:function(n){var h=n.target,S=new Date().getTime();this._isDoubleClick(S)&&!h.isEditing&&h.enterEditing(),h.isEditing&&this.fire(Et.TEXT_EDITING),this._lastClickTime=S}},{key:"_isDoubleClick",value:function(n){return n-this._lastClickTime<bs}}]),r}(Fe),Ts=Ms;function Es(A){var v=As();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function As(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var ws={arrow:"M 0 90 H 105 V 120 L 160 60 L 105 0 V 30 H 0 Z",cancel:"M 0 30 L 30 60 L 0 90 L 30 120 L 60 90 L 90 120 L 120 90 L 90 60 L 120 30 L 90 0 L 60 30 L 30 0 Z"},Ds=function(A){me(r,A);var v=Es(r);function r(c){var n,h,S,E;return W(this,r),E=v.call(this,Bt.ICON,c),E._oColor="#000000",E._pathMap=ws,E._type=null,E._iconColor=null,E._handlers={mousedown:$()(n=E._onFabricMouseDown).call(n,fe(E)),mousemove:$()(h=E._onFabricMouseMove).call(h,fe(E)),mouseup:$()(S=E._onFabricMouseUp).call(S,fe(E))},E}return it(r,[{key:"setStates",value:function(n,h){this._type=n,this._iconColor=h}},{key:"start",value:function(){var n=this.getCanvas();n.selection=!1,n.on("mouse:down",this._handlers.mousedown)}},{key:"end",value:function(){var n=this.getCanvas();n.selection=!0,n.off({"mouse:down":this._handlers.mousedown})}},{key:"add",value:function(n,h){var S=this;return new(gt())(function(E,P){var _=S.getCanvas(),N=S._pathMap[n],B=Be.SELECTION_STYLE,nt=N?S._createIcon(N):null;S._icon=nt,nt||P(pe.invalidParameters),nt.set(G()({type:"icon",fill:S._oColor},B,h,S.graphics.controlStyle)),_.add(nt).setActiveObject(nt),E(S.graphics.createObjectProperties(nt))})}},{key:"registerPaths",value:function(n){var h=this;X()(n,function(S,E){h._pathMap[E]=S},this)}},{key:"setColor",value:function(n,h){this._oColor=n,h&&h.get("type")==="icon"&&(h.set({fill:this._oColor}),this.getCanvas().renderAll())}},{key:"getColor",value:function(n){return St()(n)}},{key:"_createIcon",value:function(n){return new q.fabric.Path(n)}},{key:"_onFabricMouseDown",value:function(n){var h=this,S=this.getCanvas();this._startPoint=S.getPointer(n.e);var E=this._startPoint,P=E.x,_=E.y;this.add(this._type,{left:P,top:_,fill:this._iconColor}).then(function(){h.fire(Et.ADD_OBJECT,h.graphics.createObjectProperties(h._icon)),S.on("mouse:move",h._handlers.mousemove),S.on("mouse:up",h._handlers.mouseup)})}},{key:"_onFabricMouseMove",value:function(n){var h=this.getCanvas();if(this._icon){var S=h.getPointer(n.e),E=(S.x-this._startPoint.x)/this._icon.width,P=(S.y-this._startPoint.y)/this._icon.height;this._icon.set({scaleX:Math.abs(E*2),scaleY:Math.abs(P*2)}),this._icon.setCoords(),h.renderAll()}}},{key:"_onFabricMouseUp",value:function(){var n=this.getCanvas();this.fire(Et.OBJECT_ADDED,this.graphics.createObjectProperties(this._icon)),this._icon=null,n.off("mouse:down",this._handlers.mousedown),n.off("mouse:move",this._handlers.mousemove),n.off("mouse:up",this._handlers.mouseup)}}]),r}(Fe),Os=Ds,_s=q.fabric.util.createClass(q.fabric.Image.filters.BlendImage,{applyTo:function(v){if(this.mask){var r=v.canvasEl,c=r.width,n=r.height,h=this._createCanvasOfMask(c,n),S=r.getContext("2d"),E=h.getContext("2d"),P=S.getImageData(0,0,c,n);this._drawMask(E,r,S),this._mapData(E,P,c,n),v.imageData=P}},_createCanvasOfMask:function(v,r){var c=q.fabric.util.createCanvasElement();return c.width=v,c.height=r,c},_drawMask:function(v){var r=this.mask,c=r.getElement(),n=r.angle,h=r.left,S=r.scaleX,E=r.scaleY,P=r.top;v.save(),v.translate(h,P),v.rotate(n*Math.PI/180),v.scale(S,E),v.drawImage(c,-c.width/2,-c.height/2),v.restore()},_mapData:function(v,r,c,n){for(var h=r.data,S=r.height,E=r.width,P=h,_=E*S*4,N=v.getImageData(0,0,c,n).data,B=0;B<_;B+=4)P[B+3]=N[B]}}),ks=_s,Ps=q.fabric.util.createClass(q.fabric.Image.filters.Convolute,{type:"Sharpen",initialize:function(){this.matrix=[0,-1,0,-1,5,-1,0,-1,0]}}),Ls=Ps,js=q.fabric.util.createClass(q.fabric.Image.filters.Convolute,{type:"Emboss",initialize:function(){this.matrix=[1,1,1,1,.7,-1,-1,-1,-1]}}),Ns=js,Rs=q.fabric.util.createClass(q.fabric.Image.filters.BaseFilter,{type:"ColorFilter",initialize:function(v){v||(v={}),this.color=v.color||"#FFFFFF",this.threshold=v.threshold||45,this.x=v.x||null,this.y=v.y||null},applyTo:function(v){var r=v.canvasEl,c=r.getContext("2d"),n=c.getImageData(0,0,r.width,r.height),h=n.data,S=this.threshold,E=q.fabric.Color.sourceFromHex(this.color),P,_;for(this.x&&this.y&&(E=this._getColor(n,this.x,this.y)),P=0,_=h.length;P<_;P+=4)this._isOutsideThreshold(h[P],E[0],S)||this._isOutsideThreshold(h[P+1],E[1],S)||this._isOutsideThreshold(h[P+2],E[2],S)||(h[P]=h[P+1]=h[P+2]=h[P+3]=0);c.putImageData(n,0,0)},_isOutsideThreshold:function(v,r,c){var n=v-r;return Math.abs(n)>c},_getColor:function(v,r,c){var n=[0,0,0,0],h=v.data,S=v.width,E=4,P=(S*c+r)*E;return n[0]=h[P],n[1]=h[P+1],n[2]=h[P+2],n[3]=h[P+3],n}}),zs=Rs;function Fs(A){var v=Bs();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Bs(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Mi=q.fabric.Image.filters;Mi.Mask=ks,Mi.Sharpen=Ls,Mi.Emboss=Ns,Mi.ColorFilter=zs;var Hs=function(A){me(r,A);var v=Fs(r);function r(c){return W(this,r),v.call(this,Bt.FILTER,c)}return it(r,[{key:"add",value:function(n,h){var S=this;return new(gt())(function(E,P){var _=S._getSourceImage(),N=S.getCanvas(),B=S._getFilter(_,n);B||(B=S._createFilter(_,n,h)),B||P(pe.invalidParameters),S._changeFilterValues(B,h),S._apply(_,function(){N.renderAll(),E({type:n,action:"add",options:h})})})}},{key:"remove",value:function(n){var h=this;return new(gt())(function(S,E){var P=h._getSourceImage(),_=h.getCanvas(),N=h.getOptions(n);P.filters.length||E(pe.unsupportedOperation),h._removeFilter(P,n),h._apply(P,function(){_.renderAll(),S({type:n,action:"remove",options:N})})})}},{key:"hasFilter",value:function(n){return!!this._getFilter(this._getSourceImage(),n)}},{key:"getOptions",value:function(n){var h=this._getSourceImage(),S=this._getFilter(h,n);return S?G()({},S.options):null}},{key:"_changeFilterValues",value:function(n,h){X()(h,function(S,E){H()(n[E])||(n[E]=S)}),X()(n.options,function(S,E){H()(h[E])||(n.options[E]=h[E])})}},{key:"_apply",value:function(n,h){n.filters.push();var S=n.applyFilters();S&&h()}},{key:"_getSourceImage",value:function(){return this.getCanvasImage()}},{key:"_createFilter",value:function(n,h,S){var E,P=this._getFabricFilterType(h),_=q.fabric.Image.filters[P];return _&&(E=new _(S),E.options=S,n.filters.push(E)),E}},{key:"_getFilter",value:function(n,h){var S=null;if(n){var E=this._getFabricFilterType(h),P=n.filters.length,_,N;for(N=0;N<P;N+=1)if(_=n.filters[N],_.type===E){S=_;break}}return S}},{key:"_removeFilter",value:function(n,h){var S,E=this._getFabricFilterType(h);n.filters=ei()(S=n.filters).call(S,function(P){return P.type!==E})}},{key:"_getFabricFilterType",value:function(n){return n.charAt(0).toUpperCase()+p()(n).call(n,1)}}]),r}(Fe),Us=Hs,Ys=O(1801),Ze=O.n(Ys),Pn={pixelate:"blocksize",blur:"blur"},Ki={x:"width",y:"height"},Ws=Dr(Pn),ui=null;function Ti(A){var v=oi(A,"patternSourceCanvas"),r=v.patternSourceCanvas,c=r.getObjects(),n=ct(c,1),h=n[0];return h}function Gs(A){var v=A.angle,r=A.flipX,c=A.flipY,n=Ti(A),h=nl(A),S=h.right,E=h.bottom,P=h.width,_=h.height,N=(P-A.width)/2,B=(_-A.height)/2,nt=A.left-A.width/2-N,lt=A.top-A.height/2-B,pt=P/2-N,ut=_/2-B,vt=Math.max(P,_)+Math.max(N,B),Lt=Xs({shapeObj:A,left:pt,top:ut,width:P,height:_,cropX:nt,cropY:lt,flipX:r,flipY:c,right:S,bottom:E}),ie=ct(Lt,4);pt=ie[0],ut=ie[1],P=ie[2],_=ie[3],n.set({angle:r===c?-v:v,left:pt,top:ut,width:P,height:_,cropX:nt,cropY:lt,flipX:r,flipY:c}),Xi(n,{fillImageMaxSize:vt})}function $i(A){var v;return We()(v=A.filters).call(v,function(r){var c=xt()(r),n=ct(c,1),h=n[0];return F({},Ws[h],r[h])})}function Xs(A){var v=A.shapeObj,r=A.left,c=A.top,n=A.width,h=A.height,S=A.cropX,E=A.cropY,P=A.flipX,_=A.flipY,N=A.right,B=A.bottom,nt=function(oe,Ht,ge,we){return Ks({type:oe,outDistance:Ht,shapeObj:v,flipX:P,flipY:_,left:ge,top:we})},lt=n,pt=h,ut=Vs(nt,{left:r,top:c,width:n,height:h,cropX:S,cropY:E}),vt=ct(ut,4);r=vt[0],c=vt[1],n=vt[2],h=vt[3];var Lt=Zs(nt,{left:r,top:c,insideCanvasRealImageWidth:n,insideCanvasRealImageHeight:h,right:N,bottom:B,cropX:S,cropY:E,originalWidth:lt,originalHeight:pt}),ie=ct(Lt,4);return r=ie[0],c=ie[1],n=ie[2],h=ie[3],[r,c,n,h]}function Zs(A,v){var r=v.left,c=v.top,n=v.insideCanvasRealImageWidth,h=v.insideCanvasRealImageHeight,S=v.right,E=v.bottom,P=v.cropX,_=v.cropY,N=v.originalWidth,B=v.originalHeight,nt=n,lt=h,pt=ui,ut=pt.width,vt=pt.height;S>ut&&P>0&&(nt=N-Math.abs(S-ut)),E>vt&&_>0&&(lt=B-Math.abs(E-vt));var Lt={x:(n-nt)/2,y:(h-lt)/2};return X()(["x","y"],function(ie){var re=Lt[ie];if(re>0){var oe=A(ie,re,r,c),Ht=ct(oe,2);r=Ht[0],c=Ht[1]}}),[r,c,nt,lt]}function Vs(A,v){var r=v.left,c=v.top,n=v.width,h=v.height,S=v.cropX,E=v.cropY,P={width:n,height:h};return X()(["x","y"],function(_){var N=_==="x"?S:E,B=P[Ki[_]],nt=ui[Ki[_]];if(B>nt){var lt=(B-nt)/2;P[Ki[_]]=nt;var pt=A(_,lt,r,c),ut=ct(pt,2);r=ut[0],c=ut[1]}if(N<0){var vt=A(_,N,r,c),Lt=ct(vt,2);r=Lt[0],c=Lt[1]}}),[r,c,P.width,P.height]}function Ln(A,v,r){var c=jn(A),n=Rn(c,A.angle,v);r.add(n);var h={fill:new q.fabric.Pattern({source:r.getElement(),repeat:"no-repeat"})};return Xi(h,{patternSourceCanvas:r}),h}function Js(A){var v=A.getObjects(),r=ct(v,1),c=r[0],n=oi(c,"fillImageMaxSize"),h=n.fillImageMaxSize;h=Math.max(1,h),A.setDimensions({width:h,height:h}),A.renderAll()}function Qs(A,v){var r=oi(A,"patternSourceCanvas"),c=r.patternSourceCanvas,n=c.getObjects(),h=ct(n,1),S=h[0],E=$i(S);c.remove(S);var P=jn(v,!0),_=Rn(P,v.angle,E);c.add(_)}function jn(A){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!ui||v)&&(ui=A.toCanvasElement()),ui}function Ks(A){var v=A.type,r=A.shapeObj,c=A.outDistance,n=A.left,h=A.top,S=A.flipX,E=A.flipY,P=Nn(r),_=[[1,2],[0,3],[0,3],[1,2]],N=qs(v,P,_),B=tl(v,P,N),nt=N.startPointIndex,lt=$s({outDistance:c,startPointIndex:nt,flipX:S,flipY:E,reatAngles:B});return[n+lt.left,h+lt.top]}function $s(A){var v=A.outDistance,r=A.startPointIndex,c=A.flipX,n=A.flipY,h=A.reatAngles,S=v*Math.cos(h[0]*Math.PI/180),E=v*Math.cos(h[1]*Math.PI/180),P=r===2||r===3,_={top:P?S:E,left:P?E:S};return el(r,c,n)&&(_.left=_.left*-1),il(r,c,n)&&(_.top=_.top*-1),_}function qs(A,v,r){var c=0,n=0;X()(v,function(P,_){P[A]<c&&(c=P[A],n=_)});var h=ct(r[n],2),S=h[0],E=h[1];return{startPointIndex:n,endPointIndex1:S,endPointIndex2:E}}function tl(A,v,r){var c,n=r.startPointIndex,h=r.endPointIndex1,S=r.endPointIndex2,E=A==="x"?180:270;return We()(c=[h,S]).call(c,function(P){var _=v[n],N=v[P],B=_.y-N.y,nt=_.x-N.x;return Math.atan2(B,nt)*180/Math.PI-E})}function el(A,v,r){return(!v&&r||!v&&!r)&&A===0||(v&&r||v&&!r)&&A===1||(!v&&!r||!v&&r)&&A===2||(v&&!r||v&&r)&&A===3}function il(A,v,r){return(v&&!r||!v&&!r)&&A===0||(!v&&!r||v&&!r)&&A===1||(v&&r||!v&&r)&&A===2||(!v&&r||v&&r)&&A===3}function Nn(A){return[A.getPointByOrigin("left","top"),A.getPointByOrigin("right","top"),A.getPointByOrigin("left","bottom"),A.getPointByOrigin("right","bottom")]}function nl(A){var v=Nn(A),r=ct(v,4),c=r[0],n=c.x,h=c.y,S=r[1],E=S.x,P=S.y,_=r[2],N=_.x,B=_.y,nt=r[3],lt=nt.x,pt=nt.y,ut=Math.min(n,E,N,lt),vt=Math.min(h,P,B,pt),Lt=Math.max(n,E,N,lt),ie=Math.max(h,P,B,pt);return{left:ut,top:vt,right:Lt,bottom:ie,width:Lt-ut,height:ie-vt}}function Rn(A,v,r){var c,n=new q.fabric.Image(A);return X()(G().apply(void 0,U()(c=[{}]).call(c,L(r))),function(h,S){var E=Or(S),P=new q.fabric.Image.filters[E](F({},Pn[S],h));n.filters.push(P)}),n.applyFilters(),Xi(n,{originalAngle:v,fillImageMaxSize:Math.max(n.width,n.height)}),Ze().adjustOriginToCenter(n),n}function rl(A){var v=al();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function al(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var zn=G()({strokeWidth:1,stroke:"#000000",fill:"#ffffff",width:1,height:1,rx:0,ry:0},be),ol="rect",sl=20,ll=20;function Fn(A,v,r){var c=St()(A),n=on(St()(A)),h=c;c.color&&(h=c.color);var S=null;if(n==="filter"){var E=r();S=Ln(v,ei()(c),E)}else S={fill:h};return G()({},A,S)}var cl=function(A){me(r,A);var v=rl(r);function r(c){var n,h,S,E,P,_;return W(this,r),_=v.call(this,Bt.SHAPE,c),_._shapeObj=null,_._type=ol,_._options=G()({},zn),_._isSelected=!1,_._startPoint={},_._withShiftKey=!1,_._handlers={mousedown:$()(n=_._onFabricMouseDown).call(n,fe(_)),mousemove:$()(h=_._onFabricMouseMove).call(h,fe(_)),mouseup:$()(S=_._onFabricMouseUp).call(S,fe(_)),keydown:$()(E=_._onKeyDown).call(E,fe(_)),keyup:$()(P=_._onKeyUp).call(P,fe(_))},_}return it(r,[{key:"start",value:function(){var n=this.getCanvas();this._isSelected=!1,n.defaultCursor="crosshair",n.selection=!1,n.uniformScaling=!0,n.on({"mouse:down":this._handlers.mousedown}),q.fabric.util.addListener(document,"keydown",this._handlers.keydown),q.fabric.util.addListener(document,"keyup",this._handlers.keyup)}},{key:"end",value:function(){var n=this.getCanvas();this._isSelected=!1,n.defaultCursor="default",n.selection=!0,n.uniformScaling=!1,n.off({"mouse:down":this._handlers.mousedown}),q.fabric.util.removeListener(document,"keydown",this._handlers.keydown),q.fabric.util.removeListener(document,"keyup",this._handlers.keyup)}},{key:"setStates",value:function(n,h){this._type=n,h&&(this._options=G()(this._options,h))}},{key:"add",value:function(n,h){var S=this;return new(gt())(function(E){var P=S.getCanvas(),_=S._extendOptions(h),N=S._createInstance(n,_),B=S.graphics.createObjectProperties(N);S._bindEventOnShape(N),P.add(N).setActiveObject(N),S._resetPositionFillFilter(N),E(B)})}},{key:"change",value:function(n,h){var S=this;return new(gt())(function(E,P){sn(n)||P(pe.unsupportedType);var _=on(St()(h))==="filter",N=S.graphics,B=N.canvasImage,nt=N.createStaticCanvas;n.set(_?Fn(h,B,nt):h),_&&S._resetPositionFillFilter(n),S.getCanvas().renderAll(),E()})}},{key:"makeFillPropertyForUserEvent",value:function(n){var h=Zi(n),S={};if(h===_t.FILTER){var E=Ti(n),P=$i(E);S.type=h,S.filter=P}else S.type=_t.COLOR,S.color=St()(n)||"transparent";return S}},{key:"processForCopiedObject",value:function(n,h){if(this._bindEventOnShape(n),Zi(n)==="filter"){var S=Ti(h),E=$i(S),P=this.graphics.createStaticCanvas();n.set(Ln(this.graphics.canvasImage,E,P)),this._resetPositionFillFilter(n)}}},{key:"_createInstance",value:function(n,h){var S;switch(n){case"rect":S=new q.fabric.Rect(h);break;case"circle":S=new q.fabric.Ellipse(G()({type:"circle"},h));break;case"triangle":S=new q.fabric.Triangle(h);break;default:S={}}return S}},{key:"_extendOptions",value:function(n){var h=Be.SELECTION_STYLE,S=this.graphics,E=S.canvasImage,P=S.createStaticCanvas;return n=G()({},zn,this._options,h,n),Fn(n,E,P)}},{key:"_bindEventOnShape",value:function(n){var h=this,S=this.getCanvas();n.on({added:function(){h._shapeObj=this,Ze().setOrigins(h._shapeObj)},selected:function(){h._isSelected=!0,h._shapeObj=this,S.uniformScaling=!0,S.defaultCursor="default",Ze().setOrigins(h._shapeObj)},deselected:function(){h._isSelected=!1,h._shapeObj=null,S.defaultCursor="crosshair",S.uniformScaling=!1},modified:function(){var P=h._shapeObj;Ze().adjustOriginToCenter(P),Ze().setOrigins(P)},modifiedInGroup:function(P){h._fillFilterRePositionInGroupSelection(n,P)},moving:function(){h._resetPositionFillFilter(this)},rotating:function(){h._resetPositionFillFilter(this)},scaling:function(P){var _=S.getPointer(P.e),N=h._shapeObj;S.setCursor("crosshair"),Ze().resize(N,_,!0),h._resetPositionFillFilter(this)}})}},{key:"_onFabricMouseDown",value:function(n){if(n.target||(this._isSelected=!1,this._shapeObj=!1),!this._isSelected&&!this._shapeObj){var h=this.getCanvas();this._startPoint=h.getPointer(n.e),h.on({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}}},{key:"_onFabricMouseMove",value:function(n){var h=this,S=this.getCanvas(),E=S.getPointer(n.e),P=this._startPoint.x,_=this._startPoint.y,N=P-E.x,B=_-E.y,nt=this._shapeObj;nt?(this._shapeObj.set({isRegular:this._withShiftKey}),Ze().resize(nt,E),S.renderAll(),this._resetPositionFillFilter(nt)):this.add(this._type,{left:P,top:_,width:N,height:B}).then(function(lt){h.fire(Et.ADD_OBJECT,lt)})}},{key:"_onFabricMouseUp",value:function(){var n=this,h=this.getCanvas(),S=this._startPoint.x,E=this._startPoint.y,P=this._shapeObj;P?P&&(Ze().adjustOriginToCenter(P),this.fire(Et.OBJECT_ADDED,this.graphics.createObjectProperties(P))):this.add(this._type,{left:S,top:E,width:sl,height:ll}).then(function(_){n.fire(Et.ADD_OBJECT,_)}),h.off({"mouse:move":this._handlers.mousemove,"mouse:up":this._handlers.mouseup})}},{key:"_onKeyDown",value:function(n){n.keyCode===xe.SHIFT&&(this._withShiftKey=!0,this._shapeObj&&(this._shapeObj.isRegular=!0))}},{key:"_onKeyUp",value:function(n){n.keyCode===xe.SHIFT&&(this._withShiftKey=!1,this._shapeObj&&(this._shapeObj.isRegular=!1))}},{key:"_resetPositionFillFilter",value:function(n){if(Zi(n)==="filter"){var h=oi(n,"patternSourceCanvas"),S=h.patternSourceCanvas,E=Ti(n),P=oi(E,"originalAngle"),_=P.originalAngle;this.graphics.canvasImage.angle!==_&&Qs(n,this.graphics.canvasImage);var N=n.originX,B=n.originY;Ze().adjustOriginToCenter(n),n.width*=n.scaleX,n.height*=n.scaleY,n.rx*=n.scaleX,n.ry*=n.scaleY,n.scaleX=1,n.scaleY=1,Gs(n),wr(n,{originX:N,originY:B}),Js(S)}}},{key:"_fillFilterRePositionInGroupSelection",value:function(n,h){(h.scaleX!==1||h.scaleY!==1)&&h.addWithUpdate();var S=n.angle,E=n.left,P=n.top;q.fabric.util.addTransformToObject(n,h.calcTransformMatrix()),this._resetPositionFillFilter(n),n.set({angle:S,left:E,top:P})}}]),r}(Fe);function ul(A){var v=hl();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function hl(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var qi=10,Bn={left:0,top:0,width:0,height:0,stroke:"#000000",strokeWidth:0,fill:"#000000",opacity:.4,evented:!1,selectable:!1,hoverCursor:"auto"},tn={SIZE:.0045,MARGIN:.003,BORDER_RADIUS:.003},en={SIZE:.0066,MARGIN:.0044,BORDER_RADIUS:.003},Ei=1,Hn=Et.ZOOM_CHANGED,fl=Et.ADD_TEXT,dl=Et.TEXT_EDITING,gl=Et.OBJECT_MODIFIED,Un=Et.KEY_DOWN,Yn=Et.KEY_UP,vl=Et.HAND_STARTED,pl=Et.HAND_STOPPED,ml=function(A){me(r,A);var v=ul(r);function r(c){var n,h,S,E,P,_,N,B,nt,lt,pt,ut,vt;W(this,r),vt=v.call(this,Bt.ZOOM,c),vt.zoomArea=null,vt._startPoint=null,vt._centerPoints=[],vt.zoomLevel=Ei,vt.zoomMode=De.DEFAULT,vt._listeners={startZoom:$()(n=vt._onMouseDownWithZoomMode).call(n,fe(vt)),moveZoom:$()(h=vt._onMouseMoveWithZoomMode).call(h,fe(vt)),stopZoom:$()(S=vt._onMouseUpWithZoomMode).call(S,fe(vt)),startHand:$()(E=vt._onMouseDownWithHandMode).call(E,fe(vt)),moveHand:$()(P=vt._onMouseMoveWithHandMode).call(P,fe(vt)),stopHand:$()(_=vt._onMouseUpWithHandMode).call(_,fe(vt)),zoomChanged:$()(N=vt._changeScrollState).call(N,fe(vt)),keydown:$()(B=vt._startHandModeWithSpaceBar).call(B,fe(vt)),keyup:$()(nt=vt._endHandModeWithSpaceBar).call(nt,fe(vt))};var Lt=vt.getCanvas();return vt.aspectRatio=Lt.width/Lt.height,vt._verticalScroll=new q.fabric.Rect(Bn),vt._horizontalScroll=new q.fabric.Rect(Bn),Lt.on(Hn,vt._listeners.zoomChanged),vt.graphics.on(fl,$()(lt=vt._startTextEditingHandler).call(lt,fe(vt))),vt.graphics.on(dl,$()(pt=vt._startTextEditingHandler).call(pt,fe(vt))),vt.graphics.on(gl,$()(ut=vt._stopTextEditingHandler).call(ut,fe(vt))),vt}return it(r,[{key:"attachKeyboardZoomEvents",value:function(){q.fabric.util.addListener(document,Un,this._listeners.keydown),q.fabric.util.addListener(document,Yn,this._listeners.keyup)}},{key:"detachKeyboardZoomEvents",value:function(){q.fabric.util.removeListener(document,Un,this._listeners.keydown),q.fabric.util.removeListener(document,Yn,this._listeners.keyup)}},{key:"_startTextEditingHandler",value:function(){this.isTextEditing=!0}},{key:"_stopTextEditingHandler",value:function(){this.isTextEditing=!1}},{key:"_startHandModeWithSpaceBar",value:function(n){this.withSpace||this.isTextEditing||n.keyCode===xe.SPACE&&(this.withSpace=!0,this.startHandMode())}},{key:"_endHandModeWithSpaceBar",value:function(n){n.keyCode===xe.SPACE&&(this.withSpace=!1,this.endHandMode())}},{key:"startZoomInMode",value:function(){if(!this.zoomArea){this.endHandMode(),this.zoomMode=De.ZOOM;var n=this.getCanvas();this._changeObjectsEventedState(!1),this.zoomArea=new q.fabric.Rect({left:0,top:0,width:.5,height:.5,stroke:"black",strokeWidth:1,fill:"transparent",hoverCursor:"zoom-in"}),n.discardActiveObject(),n.add(this.zoomArea),n.on("mouse:down",this._listeners.startZoom),n.selection=!1,n.defaultCursor="zoom-in"}}},{key:"endZoomInMode",value:function(){this.zoomMode=De.DEFAULT;var n=this.getCanvas(),h=this._listeners,S=h.startZoom,E=h.moveZoom,P=h.stopZoom;n.selection=!0,n.defaultCursor="auto",n.off({"mouse:down":S,"mouse:move":E,"mouse:up":P}),this._changeObjectsEventedState(!0),n.remove(this.zoomArea),this.zoomArea=null}},{key:"start",value:function(){this.zoomArea=null,this._startPoint=null,this._startHandPoint=null}},{key:"end",value:function(){this.endZoomInMode(),this.endHandMode()}},{key:"startHandMode",value:function(){this.endZoomInMode(),this.zoomMode=De.HAND;var n=this.getCanvas();this._changeObjectsEventedState(!1),n.discardActiveObject(),n.off("mouse:down",this._listeners.startHand),n.on("mouse:down",this._listeners.startHand),n.selection=!1,n.defaultCursor="grab",n.fire(vl)}},{key:"endHandMode",value:function(){this.zoomMode=De.DEFAULT;var n=this.getCanvas();this._changeObjectsEventedState(!0),n.off("mouse:down",this._listeners.startHand),n.selection=!0,n.defaultCursor="auto",this._startHandPoint=null,n.fire(pl)}},{key:"_onMouseDownWithZoomMode",value:function(n){var h=n.target,S=n.e;if(!h){var E=this.getCanvas();E.selection=!1,this._startPoint=E.getPointer(S),this.zoomArea.set({width:0,height:0});var P=this._listeners,_=P.moveZoom,N=P.stopZoom;E.on({"mouse:move":_,"mouse:up":N})}}},{key:"_onMouseMoveWithZoomMode",value:function(n){var h=n.e,S=this.getCanvas(),E=S.getPointer(h),P=E.x,_=E.y,N=this.zoomArea,B=this._startPoint,nt=Math.abs(P-B.x),lt=Math.abs(_-B.y);nt+lt>qi&&(S.remove(N),N.set(this._calcRectDimensionFromPoint(P,_)),S.add(N))}},{key:"_calcRectDimensionFromPoint",value:function(n,h){var S=this.getCanvas(),E=S.getWidth(),P=S.getHeight(),_=this._startPoint,N=_.x,B=_.y,nt=Math.min,lt=nt(N,n),pt=nt(B,h),ut=se(n,N,E)-lt,vt=se(h,B,P)-pt;return{left:lt,top:pt,width:ut,height:vt}}},{key:"_onMouseUpWithZoomMode",value:function(){var n=this.zoomLevel,h=this.zoomArea,S=this._listeners,E=S.moveZoom,P=S.stopZoom,_=this.getCanvas(),N=this._getCenterPoint(),B=N.x,nt=N.y;this._isMaxZoomLevel()||(this._centerPoints.push({x:B,y:nt,prevZoomLevel:n,zoomLevel:n+1}),n+=1,_.zoomToPoint({x:B,y:nt},n),this._fireZoomChanged(_,n),this.zoomLevel=n),_.off({"mouse:move":E,"mouse:up":P}),_.remove(h),this._startPoint=null}},{key:"_getCenterPoint",value:function(){var n=this.zoomArea,h=n.left,S=n.top,E=n.width,P=n.height,_=this._startPoint,N=_.x,B=_.y,nt=this.aspectRatio;return E<qi&&P<qi?{x:N,y:B}:E>P?{x:h+nt*P/2,y:S+P/2}:{x:h+E/2,y:S+E/nt/2}}},{key:"zoom",value:function(n){for(var h=n.x,S=n.y,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.zoomLevel,P=this.getCanvas(),_=this._centerPoints,N=_.length-1;N>=0&&!(_[N].zoomLevel<E);N-=1){var B=_.pop(),nt=B.x,lt=B.y,pt=B.prevZoomLevel;P.zoomToPoint({x:nt,y:lt},pt),this.zoomLevel=pt}P.zoomToPoint({x:h,y:S},E),this._isDefaultZoomLevel(E)||this._centerPoints.push({x:h,y:S,zoomLevel:E,prevZoomLevel:this.zoomLevel}),this.zoomLevel=E,this._fireZoomChanged(P,E)}},{key:"zoomOut",value:function(){var n=this._centerPoints;if(n.length){var h=this.getCanvas(),S=n.pop(),E=S.x,P=S.y,_=S.prevZoomLevel;this._isDefaultZoomLevel(_)?h.setViewportTransform([1,0,0,1,0,0]):h.zoomToPoint({x:E,y:P},_),this.zoomLevel=_,this._fireZoomChanged(h,this.zoomLevel)}}},{key:"resetZoom",value:function(){var n=this.getCanvas();n.setViewportTransform([1,0,0,1,0,0]),this.zoomLevel=Ei,this._centerPoints=[],this._fireZoomChanged(n,this.zoomLevel)}},{key:"_isMaxZoomLevel",value:function(){return this.zoomLevel>=5}},{key:"_movePointOfZoom",value:function(n){var h=n.x,S=n.y,E=this._centerPoints;if(E.length){var P=this.getCanvas(),_=this.zoomLevel,N=E.pop(),B=N.x,nt=N.y,lt=N.prevZoomLevel,pt=B-h,ut=nt-S;P.zoomToPoint({x:B,y:nt},lt),P.zoomToPoint({x:pt,y:ut},_),E.push({x:pt,y:ut,prevZoomLevel:lt,zoomLevel:_}),this._fireZoomChanged(P,_)}}},{key:"_onMouseDownWithHandMode",value:function(n){var h=n.target,S=n.e;if(!h){var E=this.getCanvas();if(!(this.zoomLevel<=Ei)){E.selection=!1,this._startHandPoint=E.getPointer(S);var P=this._listeners,_=P.moveHand,N=P.stopHand;E.on({"mouse:move":_,"mouse:up":N})}}}},{key:"_onMouseMoveWithHandMode",value:function(n){var h=n.e,S=this.getCanvas(),E=S.getPointer(h),P=E.x,_=E.y,N=P-this._startHandPoint.x,B=_-this._startHandPoint.y;this._movePointOfZoom({x:N,y:B})}},{key:"_onMouseUpWithHandMode",value:function(){var n=this.getCanvas(),h=this._listeners,S=h.moveHand,E=h.stopHand;n.off({"mouse:move":S,"mouse:up":E}),this._startHandPoint=null}},{key:"_changeScrollState",value:function(n){var h=n.viewport,S=n.zoomLevel,E=this.getCanvas();if(E.remove(this._verticalScroll),E.remove(this._horizontalScroll),!this._isDefaultZoomLevel(S)){var P=E.width,_=E.height,N=h.tl,B=h.tr,nt=h.bl,lt=B.x-N.x,pt=nt.y-N.y,ut=lt*lt/P,vt=pt*en.SIZE,Lt=se(N.x+N.x/P*lt,N.x,B.x-ut),ie=pt*en.MARGIN,re=pt*en.BORDER_RADIUS;this._horizontalScroll.set({left:Lt,top:nt.y-vt-ie,width:ut,height:vt,rx:re,ry:re});var oe=lt*tn.SIZE,Ht=pt*pt/_,ge=se(N.y+N.y/_*pt,B.y,nt.y-Ht),we=lt*tn.MARGIN,je=lt*tn.BORDER_RADIUS;this._verticalScroll.set({left:B.x-oe-we,top:ge,width:oe,height:Ht,rx:je,ry:je}),this._addScrollBar()}}},{key:"_changeObjectsEventedState",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,h=this.getCanvas();h.forEachObject(function(S){S.evented=n})}},{key:"_addScrollBar",value:function(){var n=this,h=this.getCanvas();h.add(this._horizontalScroll),h.add(this._verticalScroll),this.scrollBarTid&&clearTimeout(this.scrollBarTid),this.scrollBarTid=t()(function(){h.remove(n._horizontalScroll),h.remove(n._verticalScroll)},3e3)}},{key:"_isDefaultZoomLevel",value:function(n){return n===Ei}},{key:"_fireZoomChanged",value:function(n,h){n.fire(Hn,{viewport:n.calcViewportBoundaries(),zoomLevel:h})}},{key:"mode",get:function(){return this.zoomMode}}]),r}(Fe),yl=ml,Wn=Si.create,Gn=Si.types,Cl=function(){function A(v){W(this,A),this.name=v}return it(A,[{key:"getName",value:function(){return this.name}},{key:"start",value:function(){throw new Error(Wn(Gn.UN_IMPLEMENTATION,"start"))}},{key:"end",value:function(){throw new Error(Wn(Gn.UN_IMPLEMENTATION,"stop"))}}]),A}(),Qe=Cl;function Sl(A){var v=xl();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function xl(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Il=function(A){me(r,A);var v=Sl(r);function r(){return W(this,r),v.call(this,de.CROPPER)}return it(r,[{key:"start",value:function(n){var h=n.getComponent(Bt.CROPPER);h.start()}},{key:"end",value:function(n){var h=n.getComponent(Bt.CROPPER);h.end()}}]),r}(Qe),bl=Il;function Ml(A){var v=Tl();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Tl(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var El=function(A){me(r,A);var v=Ml(r);function r(){return W(this,r),v.call(this,de.FREE_DRAWING)}return it(r,[{key:"start",value:function(n,h){var S=n.getComponent(Bt.FREE_DRAWING);S.start(h)}},{key:"end",value:function(n){var h=n.getComponent(Bt.FREE_DRAWING);h.end()}}]),r}(Qe),Al=El;function wl(A){var v=Dl();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Dl(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Ol=function(A){me(r,A);var v=wl(r);function r(){return W(this,r),v.call(this,de.LINE_DRAWING)}return it(r,[{key:"start",value:function(n,h){var S=n.getComponent(Bt.LINE);S.start(h)}},{key:"end",value:function(n){var h=n.getComponent(Bt.LINE);h.end()}}]),r}(Qe),_l=Ol;function kl(A){var v=Pl();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Pl(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Ll=function(A){me(r,A);var v=kl(r);function r(){return W(this,r),v.call(this,de.SHAPE)}return it(r,[{key:"start",value:function(n){var h=n.getComponent(Bt.SHAPE);h.start()}},{key:"end",value:function(n){var h=n.getComponent(Bt.SHAPE);h.end()}}]),r}(Qe),jl=Ll;function Nl(A){var v=Rl();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Rl(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var zl=function(A){me(r,A);var v=Nl(r);function r(){return W(this,r),v.call(this,de.TEXT)}return it(r,[{key:"start",value:function(n){var h=n.getComponent(Bt.TEXT);h.start()}},{key:"end",value:function(n){var h=n.getComponent(Bt.TEXT);h.end()}}]),r}(Qe),Fl=zl;function Bl(A){var v=Hl();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Hl(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Ul=function(A){me(r,A);var v=Bl(r);function r(){return W(this,r),v.call(this,de.ICON)}return it(r,[{key:"start",value:function(n){var h=n.getComponent(Bt.ICON);h.start()}},{key:"end",value:function(n){var h=n.getComponent(Bt.ICON);h.end()}}]),r}(Qe),Yl=Ul;function Wl(A){var v=Gl();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Gl(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Xl=function(A){me(r,A);var v=Wl(r);function r(){return W(this,r),v.call(this,de.ZOOM)}return it(r,[{key:"start",value:function(n){var h=n.getComponent(Bt.ZOOM);h.start()}},{key:"end",value:function(n){var h=n.getComponent(Bt.ZOOM);h.end()}}]),r}(Qe),Zl=Xl,Xn=null;function Zn(A){Xn=A}function Vl(){return Xn}function nn(A,v){var r;if(A.type==="activeSelection"){var c;r=We()(c=A.getObjects()).call(c,function(n){var h=n.angle,S=n.left,E=n.top,P=n.scaleX,_=n.scaleY,N=n.width,B=n.height;q.fabric.util.addTransformToObject(n,A.calcTransformMatrix());var nt=v(n);return n.set({angle:h,left:S,top:E,width:N,height:B,scaleX:P,scaleY:_}),nt})}else r=[v(A)];return r}function rn(A,v,r){return r?{id:A,width:v.width,height:v.height,top:v.top,left:v.left,angle:v.angle,scaleX:v.scaleX,scaleY:v.scaleY}:G()({id:A},v)}function Jl(A){var v=Ql();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function Ql(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var Kl=function(A){me(r,A);var v=Jl(r);function r(c){var n;return W(this,r),n=v.call(this,Bt.RESIZE,c),n._dimensions=null,n._originalDimensions=null,n}return it(r,[{key:"getCurrentDimensions",value:function(){var n=this.getCanvasImage();if(!this._dimensions&&n){var h=n.width,S=n.height;this._dimensions={width:h,height:S}}return this._dimensions}},{key:"getOriginalDimensions",value:function(){return this._originalDimensions}},{key:"setOriginalDimensions",value:function(n){this._originalDimensions=n}},{key:"resize",value:function(n){var h=this.getCanvasImage(),S=h.width,E=h.height,P=h.scaleX,_=h.scaleY,N=n.width,B=n.height,nt={scaleX:N?N/S:P,scaleY:B?B/E:_};return(P!==nt.scaleX||_!==nt.scaleY)&&(h.set(nt).setCoords(),this._dimensions={width:h.width*h.scaleX,height:h.height*h.scaleY}),this.adjustCanvasDimensionBase(),gt().resolve()}},{key:"start",value:function(){var n=this.getCurrentDimensions();this.setOriginalDimensions(n)}},{key:"end",value:function(){}}]),r}(Fe),$l=Kl;function ql(A){var v=tc();return function(){var c=ee(A),n;if(v){var h=ee(this).constructor;n=Ot()(c,arguments,h)}else n=c.apply(this,arguments);return ye(this,n)}}function tc(){if(typeof Reflect=="undefined"||!Ot()||Ot().sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Ot()(Boolean,[],function(){})),!0}catch(A){return!1}}var ec=function(A){me(r,A);var v=ql(r);function r(){return W(this,r),v.call(this,de.RESIZE)}return it(r,[{key:"start",value:function(n){var h=n.getComponent(Bt.RESIZE);h.start()}},{key:"end",value:function(n){var h=n.getComponent(Bt.RESIZE);h.end()}}]),r}(Qe),ic=ec,nc=1e3,rc=800,Ai=10,ac={cssOnly:!0},oc={backstoreOnly:!0},Vn=function(){function A(v){var r,c,n,h,S,E,P,_,N,B,nt,lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pt=lt.cssMaxWidth,ut=lt.cssMaxHeight;W(this,A),this.canvasImage=null,this.cssMaxWidth=pt||nc,this.cssMaxHeight=ut||rc,this.cropSelectionStyle={},this.targetObjectForCopyPaste=null,this.imageName="",this._objects={},this._canvas=null,this._drawingMode=de.NORMAL,this._drawingModeMap={},this._componentMap={},this._handler={onMouseDown:$()(r=this._onMouseDown).call(r,this),onObjectAdded:$()(c=this._onObjectAdded).call(c,this),onObjectRemoved:$()(n=this._onObjectRemoved).call(n,this),onObjectMoved:$()(h=this._onObjectMoved).call(h,this),onObjectScaled:$()(S=this._onObjectScaled).call(S,this),onObjectModified:$()(E=this._onObjectModified).call(E,this),onObjectRotated:$()(P=this._onObjectRotated).call(P,this),onObjectSelected:$()(_=this._onObjectSelected).call(_,this),onPathCreated:$()(N=this._onPathCreated).call(N,this),onSelectionCleared:$()(B=this._onSelectionCleared).call(B,this),onSelectionCreated:$()(nt=this._onSelectionCreated).call(nt,this)},this._setObjectCachingToFalse(),this._setCanvasElement(v),this._createDrawingModeInstances(),this._createComponents(),this._attachCanvasEvents(),this._attachZoomEvents()}return it(A,[{key:"destroy",value:function(){var r=this._canvas.wrapperEl;this._canvas.clear(),r.parentNode.removeChild(r),this._detachZoomEvents()}},{key:"_attachZoomEvents",value:function(){var r=this.getComponent(Bt.ZOOM);r.attachKeyboardZoomEvents()}},{key:"_detachZoomEvents",value:function(){var r=this.getComponent(Bt.ZOOM);r.detachKeyboardZoomEvents()}},{key:"deactivateAll",value:function(){return this._canvas.discardActiveObject(),this}},{key:"renderAll",value:function(){return this._canvas.renderAll(),this}},{key:"add",value:function(r){var c,n=[];Dn()(r)?n=r:n.push(r),(c=this._canvas).add.apply(c,L(n))}},{key:"contains",value:function(r){return this._canvas.contains(r)}},{key:"getObjects",value:function(){var r;return p()(r=this._canvas.getObjects()).call(r)}},{key:"getObject",value:function(r){return this._objects[r]}},{key:"remove",value:function(r){this._canvas.remove(r)}},{key:"removeAll",value:function(r){var c,n=this._canvas,h=p()(c=n.getObjects()).call(c);return n.remove.apply(n,L(this._canvas.getObjects())),r&&n.clear(),h}},{key:"removeObjectById",value:function(r){var c=[],n=this._canvas,h=this.getObject(r),S=h&&h.isType("group")&&!h.isEmpty();return S?(n.discardActiveObject(),h.forEachObject(function(E){c.push(E),n.remove(E)})):n.contains(h)&&(c.push(h),n.remove(h)),c}},{key:"getObjectId",value:function(r){var c=null;for(c in this._objects)if(this._objects.hasOwnProperty(c)&&r===this._objects[c])return c;return null}},{key:"getActiveObject",value:function(){return this._canvas._activeObject}},{key:"getActiveObjectIdForRemove",value:function(){var r=this.getActiveObject(),c=r.type,n=r.left,h=r.top,S=c==="activeSelection";if(S){var E=new q.fabric.Group(L(r.getObjects()),{left:n,top:h});return this._addFabricObject(E)}return this.getObjectId(r)}},{key:"isReadyRemoveObject",value:function(){var r=this.getActiveObject();return r&&!r.isEditing}},{key:"getActiveObjects",value:function(){var r=this._canvas._activeObject;return r&&r.type==="activeSelection"?r:null}},{key:"getActiveSelectionFromObjects",value:function(r){var c=this.getCanvas();return new q.fabric.ActiveSelection(r,{canvas:c})}},{key:"setActiveObject",value:function(r){this._canvas.setActiveObject(r)}},{key:"setCropSelectionStyle",value:function(r){this.cropSelectionStyle=r}},{key:"getComponent",value:function(r){return this._componentMap[r]}},{key:"getDrawingMode",value:function(){return this._drawingMode}},{key:"startDrawingMode",value:function(r,c){if(this._isSameDrawingMode(r))return!0;this.stopDrawingMode();var n=this._getDrawingModeInstance(r);return n&&n.start&&(n.start(this,c),this._drawingMode=r),!!n}},{key:"stopDrawingMode",value:function(){if(!this._isSameDrawingMode(de.NORMAL)){var r=this._getDrawingModeInstance(this.getDrawingMode());r&&r.end&&r.end(this),this._drawingMode=de.NORMAL}}},{key:"zoom",value:function(r,c){var n=r.x,h=r.y,S=this.getComponent(Bt.ZOOM);S.zoom({x:n,y:h},c)}},{key:"getZoomMode",value:function(){var r=this.getComponent(Bt.ZOOM);return r.mode}},{key:"startZoomInMode",value:function(){var r=this.getComponent(Bt.ZOOM);r.startZoomInMode()}},{key:"endZoomInMode",value:function(){var r=this.getComponent(Bt.ZOOM);r.endZoomInMode()}},{key:"zoomOut",value:function(){var r=this.getComponent(Bt.ZOOM);r.zoomOut()}},{key:"startHandMode",value:function(){var r=this.getComponent(Bt.ZOOM);r.startHandMode()}},{key:"endHandMode",value:function(){var r=this.getComponent(Bt.ZOOM);r.endHandMode()}},{key:"resetZoom",value:function(){var r=this.getComponent(Bt.ZOOM);r.resetZoom()}},{key:"toDataURL",value:function(r){var c=this.getComponent(Bt.CROPPER);c.changeVisibility(!1);var n=this._canvas&&this._canvas.toDataURL(r);return c.changeVisibility(!0),n}},{key:"setCanvasImage",value:function(r,c){c&&Ft(c),this.imageName=r,this.canvasImage=c}},{key:"setCssMaxDimension",value:function(r){this.cssMaxWidth=r.width||this.cssMaxWidth,this.cssMaxHeight=r.height||this.cssMaxHeight}},{key:"adjustCanvasDimension",value:function(){this.adjustCanvasDimensionBase(this.canvasImage.scale(1))}},{key:"adjustCanvasDimensionBase",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r||(r=this.canvasImage);var c=r.getBoundingRect(),n=c.width,h=c.height,S=this._calcMaxDimension(n,h);this.setCanvasCssDimension({width:"100%",height:"100%","max-width":"".concat(S.width,"px"),"max-height":"".concat(S.height,"px")}),this.setCanvasBackstoreDimension({width:n,height:h}),this._canvas.centerObject(r)}},{key:"setCanvasCssDimension",value:function(r){this._canvas.setDimensions(r,ac)}},{key:"setCanvasBackstoreDimension",value:function(r){this._canvas.setDimensions(r,oc)}},{key:"setImageProperties",value:function(r,c){var n=this.canvasImage;n&&(n.set(r).setCoords(),c&&this._canvas.renderAll())}},{key:"getCanvasElement",value:function(){return this._canvas.getElement()}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getCanvasImage",value:function(){return this.canvasImage}},{key:"getImageName",value:function(){return this.imageName}},{key:"addImageObject",value:function(r){var c,n=this,h=$()(c=this._callbackAfterLoadingImageObject).call(c,this);return new(gt())(function(S){q.fabric.Image.fromURL(r,function(E){h(E),S(n.createObjectProperties(E))},{crossOrigin:"Anonymous"})})}},{key:"getCenter",value:function(){return this._canvas.getCenter()}},{key:"getCropzoneRect",value:function(){return this.getComponent(Bt.CROPPER).getCropzoneRect()}},{key:"setCropzoneRect",value:function(r){this.getComponent(Bt.CROPPER).setCropzoneRect(r)}},{key:"getCroppedImageData",value:function(r){return this.getComponent(Bt.CROPPER).getCroppedImageData(r)}},{key:"setBrush",value:function(r){var c=this._drawingMode,n=Bt.FREE_DRAWING;c===de.LINE_DRAWING&&(n=Bt.LINE),this.getComponent(n).setBrush(r)}},{key:"setDrawingShape",value:function(r,c){this.getComponent(Bt.SHAPE).setStates(r,c)}},{key:"setIconStyle",value:function(r,c){this.getComponent(Bt.ICON).setStates(r,c)}},{key:"registerPaths",value:function(r){this.getComponent(Bt.ICON).registerPaths(r)}},{key:"changeCursor",value:function(r){var c=this.getCanvas();c.defaultCursor=r,c.renderAll()}},{key:"hasFilter",value:function(r){return this.getComponent(Bt.FILTER).hasFilter(r)}},{key:"setSelectionStyle",value:function(r){G()(Be.SELECTION_STYLE,r)}},{key:"setObjectProperties",value:function(r,c){var n=this.getObject(r),h=G()({},c);return n.set(h),n.setCoords(),this.getCanvas().renderAll(),h}},{key:"getObjectProperties",value:function(r,c){var n=this.getObject(r),h={};return It()(c)?h[c]=n[c]:Dn()(c)?si()(c,function(S){h[S]=n[S]}):Ii()(c,function(S,E){h[E]=n[E]}),h}},{key:"getObjectPosition",value:function(r,c,n){var h=this.getObject(r);return h?h.getPointByOrigin(c,n):null}},{key:"setObjectPosition",value:function(r,c){var n=this.getObject(r),h=c.x,S=c.y,E=c.originX,P=c.originY;if(!n)return!1;var _=n.getPointByOrigin(E,P),N=n.getPointByOrigin("center","center"),B=N.x-_.x,nt=N.y-_.y;return n.set({left:h+B,top:S+nt}),n.setCoords(),!0}},{key:"getCanvasSize",value:function(){var r=this.getCanvasImage();return{width:r?r.width:0,height:r?r.height:0}}},{key:"createStaticCanvas",value:function(){var r=new q.fabric.StaticCanvas;return r.set({enableRetinaScaling:!1}),r}},{key:"_getDrawingModeInstance",value:function(r){return this._drawingModeMap[r]}},{key:"_setObjectCachingToFalse",value:function(){q.fabric.Object.prototype.objectCaching=!1}},{key:"_setCanvasElement",value:function(r){var c,n;r.nodeType?c=r:c=document.querySelector(r),c.nodeName.toUpperCase()!=="CANVAS"&&(n=document.createElement("canvas"),c.appendChild(n)),this._canvas=new q.fabric.Canvas(n,{containerClass:"tui-image-editor-canvas-container",enableRetinaScaling:!1})}},{key:"_createDrawingModeInstances",value:function(){this._register(this._drawingModeMap,new bl),this._register(this._drawingModeMap,new Al),this._register(this._drawingModeMap,new _l),this._register(this._drawingModeMap,new jl),this._register(this._drawingModeMap,new Fl),this._register(this._drawingModeMap,new Yl),this._register(this._drawingModeMap,new Zl),this._register(this._drawingModeMap,new ic)}},{key:"_createComponents",value:function(){this._register(this._componentMap,new jo(this)),this._register(this._componentMap,new $o(this)),this._register(this._componentMap,new is(this)),this._register(this._componentMap,new os(this)),this._register(this._componentMap,new us(this)),this._register(this._componentMap,new ys(this)),this._register(this._componentMap,new Ts(this)),this._register(this._componentMap,new Os(this)),this._register(this._componentMap,new Us(this)),this._register(this._componentMap,new cl(this)),this._register(this._componentMap,new yl(this)),this._register(this._componentMap,new $l(this))}},{key:"_register",value:function(r,c){r[c.getName()]=c}},{key:"_isSameDrawingMode",value:function(r){return this.getDrawingMode()===r}},{key:"_calcMaxDimension",value:function(r,c){var n=this.cssMaxWidth/r,h=this.cssMaxHeight/c,S=Math.min(r,this.cssMaxWidth),E=Math.min(c,this.cssMaxHeight);return n<1&&n<h?(S=r*n,E=c*n):h<1&&h<n&&(S=r*h,E=c*h),{width:Math.floor(S),height:Math.floor(E)}}},{key:"_callbackAfterLoadingImageObject",value:function(r){var c=this.getCanvasImage().getCenterPoint();r.set(Be.SELECTION_STYLE),r.set({left:c.x,top:c.y,crossOrigin:"Anonymous"}),this.getCanvas().add(r).setActiveObject(r)}},{key:"_attachCanvasEvents",value:function(){var r=this._canvas,c=this._handler;r.on({"mouse:down":c.onMouseDown,"object:added":c.onObjectAdded,"object:removed":c.onObjectRemoved,"object:moving":c.onObjectMoved,"object:scaling":c.onObjectScaled,"object:modified":c.onObjectModified,"object:rotating":c.onObjectRotated,"path:created":c.onPathCreated,"selection:cleared":c.onSelectionCleared,"selection:created":c.onSelectionCreated,"selection:updated":c.onObjectSelected})}},{key:"_onMouseDown",value:function(r){var c=this,n=r.e,h=r.target,S=this._canvas.getPointer(n);if(h){var E=h.type,P=nn(h,function(_){return rn(c.getObjectId(_),_,E==="activeSelection")});Zn(P)}this.fire(Et.MOUSE_DOWN,n,S)}},{key:"_onObjectAdded",value:function(r){var c=r.target;c.isType("cropzone")||this._addFabricObject(c)}},{key:"_onObjectRemoved",value:function(r){var c=r.target;this._removeFabricObject(Ft(c))}},{key:"_onObjectMoved",value:function(r){var c=this;this._lazyFire(Et.OBJECT_MOVED,function(n){return c.createObjectProperties(n)},r.target)}},{key:"_onObjectScaled",value:function(r){var c=this;this._lazyFire(Et.OBJECT_SCALED,function(n){return c.createObjectProperties(n)},r.target)}},{key:"_onObjectModified",value:function(r){var c=r.target;if(c.type==="activeSelection"){var n=c.getObjects();Zt()(n).call(n,function(h){return h.fire("modifiedInGroup",c)})}this.fire(Et.OBJECT_MODIFIED,c,this.getObjectId(c))}},{key:"_onObjectRotated",value:function(r){var c=this;this._lazyFire(Et.OBJECT_ROTATED,function(n){return c.createObjectProperties(n)},r.target)}},{key:"_lazyFire",value:function(r,c,n){var h=this,S=n&&n.canvasEventDelegation,E=S?n.canvasEventDelegation(r):"none";E==="unregistered"&&n.canvasEventRegister(r,function(P){h.fire(r,c(P))}),E==="none"&&this.fire(r,c(n))}},{key:"_onObjectSelected",value:function(r){var c=r.target,n=this.createObjectProperties(c);this.fire(Et.OBJECT_ACTIVATED,n)}},{key:"_onPathCreated",value:function(r){var c=r.path.getCenterPoint(),n=c.x,h=c.y;r.path.set(G()({left:n,top:h},Be.SELECTION_STYLE));var S=this.createObjectProperties(r.path);this.fire(Et.ADD_OBJECT,S)}},{key:"_onSelectionCleared",value:function(){this.fire(Et.SELECTION_CLEARED)}},{key:"_onSelectionCreated",value:function(r){var c=r.target,n=this.createObjectProperties(c);this.fire(Et.OBJECT_ACTIVATED,n),this.fire(Et.SELECTION_CREATED,r.target)}},{key:"discardSelection",value:function(){this._canvas.discardActiveObject(),this._canvas.renderAll()}},{key:"changeSelectableAll",value:function(r){this._canvas.forEachObject(function(c){c.selectable=r,c.hoverCursor=r?"move":"crosshair"})}},{key:"createObjectProperties",value:function(r){var c=["left","top","width","height","fill","stroke","strokeWidth","opacity","angle"],n={id:Ft(r),type:r.type};if(G()(n,_e(r,c)),Ci(["i-text","text"],r.type))G()(n,this._createTextProperties(r,n));else if(Ci(["rect","triangle","circle"],r.type)){var h=this.getComponent(Bt.SHAPE);G()(n,{fill:h.makeFillPropertyForUserEvent(r)})}return n}},{key:"_createTextProperties",value:function(r){var c=["text","fontFamily","fontSize","fontStyle","textAlign","textDecoration","fontWeight"],n={};return G()(n,_e(r,c)),n}},{key:"_addFabricObject",value:function(r){var c=Ft(r);return this._objects[c]=r,c}},{key:"_removeFabricObject",value:function(r){delete this._objects[r]}},{key:"resetTargetObjectForCopyPaste",value:function(){var r=this.getActiveObject();r&&(this.targetObjectForCopyPaste=r)}},{key:"pasteObject",value:function(){var r=this;if(!this.targetObjectForCopyPaste)return gt().resolve([]);var c=this.targetObjectForCopyPaste,n=c.type==="activeSelection",h=n?c.getObjects():[c],S=null;return this.discardSelection(),this._cloneObject(h).then(function(E){if(E.length>1)S=r.getActiveSelectionFromObjects(E);else{var P=ct(E,1);S=P[0]}r.targetObjectForCopyPaste=S,r.setActiveObject(S)})}},{key:"_cloneObject",value:function(r){var c=this,n=We()(r).call(r,function(h){return c._cloneObjectItem(h)});return gt().all(n)}},{key:"_cloneObjectItem",value:function(r){var c=this;return this._copyFabricObjectForPaste(r).then(function(n){var h=c.createObjectProperties(n);return c.add(n),c.fire(Et.ADD_OBJECT,h),n})}},{key:"_copyFabricObjectForPaste",value:function(r){var c=this,n=function(S,E){return E?S-Ai:S+Ai};return this._copyFabricObject(r).then(function(h){var S=h.left,E=h.top,P=h.width,_=h.height,N=c.getCanvasSize(),B=N.width,nt=N.height,lt=S+P/2,pt=E+_/2;return h.set(G()({left:n(S,lt+Ai>B),top:n(E,pt+Ai>nt)},Be.SELECTION_STYLE)),h})}},{key:"_copyFabricObject",value:function(r){var c=this;return new(gt())(function(n){r.clone(function(h){var S=c.getComponent(Bt.SHAPE);sn(h)&&S.processForCopiedObject(h,r),n(h)})})}},{key:"getCurrentDimensions",value:function(){var r=this.getComponent(Bt.RESIZE);return r.getCurrentDimensions()}},{key:"getOriginalDimensions",value:function(){var r=this.getComponent(Bt.RESIZE);return r.getOriginalDimensions()}},{key:"setOriginalDimensions",value:function(r){var c=this.getComponent(Bt.RESIZE);c.setOriginalDimensions(r)}},{key:"resize",value:function(r){var c=this.getComponent(Bt.RESIZE);return c.resize(r)}}]),A}();yt().mixin(Vn);var sc=Vn,lc=Et.MOUSE_DOWN,cc=Et.OBJECT_MOVED,uc=Et.OBJECT_SCALED,hc=Et.OBJECT_ACTIVATED,fc=Et.OBJECT_ROTATED,Jn=Et.OBJECT_ADDED,dc=Et.OBJECT_MODIFIED,gc=Et.ADD_TEXT,vc=Et.ADD_OBJECT,pc=Et.TEXT_EDITING,mc=Et.TEXT_CHANGED,yc=Et.ICON_CREATE_RESIZE,Cc=Et.ICON_CREATE_END,Qn=Et.SELECTION_CLEARED,Kn=Et.SELECTION_CREATED,Sc=Et.ADD_OBJECT_AFTER,an=function(){function A(v,r){var c,n,h,S,E,P,_,N,B,nt,lt,pt,ut,vt,Lt,ie;if(W(this,A),r=G()({includeUI:!1,usageStatistics:!0},r),this.mode=null,this.activeObjectId=null,r.includeUI){var re=r.includeUI;re.usageStatistics=r.usageStatistics,this.ui=new To(v,re,this.getActions()),r=this.ui.setUiDefaultSelectionStyle(r)}this._invoker=new Ur,this._graphics=new sc(this.ui?this.ui.getEditorArea():v,{cssMaxWidth:r.cssMaxWidth,cssMaxHeight:r.cssMaxHeight}),this._handlers={keydown:$()(c=this._onKeyDown).call(c,this),mousedown:$()(n=this._onMouseDown).call(n,this),objectActivated:$()(h=this._onObjectActivated).call(h,this),objectMoved:$()(S=this._onObjectMoved).call(S,this),objectScaled:$()(E=this._onObjectScaled).call(E,this),objectRotated:$()(P=this._onObjectRotated).call(P,this),objectAdded:$()(_=this._onObjectAdded).call(_,this),objectModified:$()(N=this._onObjectModified).call(N,this),createdPath:this._onCreatedPath,addText:$()(B=this._onAddText).call(B,this),addObject:$()(nt=this._onAddObject).call(nt,this),textEditing:$()(lt=this._onTextEditing).call(lt,this),textChanged:$()(pt=this._onTextChanged).call(pt,this),iconCreateResize:$()(ut=this._onIconCreateResize).call(ut,this),iconCreateEnd:$()(vt=this._onIconCreateEnd).call(vt,this),selectionCleared:$()(Lt=this._selectionCleared).call(Lt,this),selectionCreated:$()(ie=this._selectionCreated).call(ie,this)},this._attachInvokerEvents(),this._attachGraphicsEvents(),this._attachDomEvents(),this._setSelectionStyle(r.selectionStyle,{applyCropSelectionStyle:r.applyCropSelectionStyle,applyGroupSelectionStyle:r.applyGroupSelectionStyle}),r.usageStatistics&&pi(),this.ui&&(this.ui.initCanvas(),this.setReAction(),this._attachColorPickerInputBoxEvents()),q.fabric.enableGLFiltering=!1}return it(A,[{key:"_attachColorPickerInputBoxEvents",value:function(){var r=this;this.ui.on(Et.INPUT_BOX_EDITING_STARTED,function(){r.isColorPickerInputBoxEditing=!0}),this.ui.on(Et.INPUT_BOX_EDITING_STOPPED,function(){r.isColorPickerInputBoxEditing=!1})}},{key:"_detachColorPickerInputBoxEvents",value:function(){this.ui.off(Et.INPUT_BOX_EDITING_STARTED),this.ui.off(Et.INPUT_BOX_EDITING_STOPPED)}},{key:"_setSelectionStyle",value:function(r,c){var n=c.applyCropSelectionStyle,h=c.applyGroupSelectionStyle;r&&this._graphics.setSelectionStyle(r),n&&this._graphics.setCropSelectionStyle(r),h&&this.on("selectionCreated",function(S){S.type==="activeSelection"&&S.set(r)})}},{key:"_attachInvokerEvents",value:function(){var r,c,n=this,h=Et.UNDO_STACK_CHANGED,S=Et.REDO_STACK_CHANGED,E=Et.EXECUTE_COMMAND,P=Et.AFTER_UNDO,_=Et.AFTER_REDO,N=Et.HAND_STARTED,B=Et.HAND_STOPPED;if(this._invoker.on(h,$()(r=this.fire).call(r,this,h)),this._invoker.on(S,$()(c=this.fire).call(c,this,S)),this.ui){var nt=this._graphics.getCanvas();this._invoker.on(E,function(lt){return n.ui.fire(E,lt)}),this._invoker.on(P,function(lt){return n.ui.fire(P,lt)}),this._invoker.on(_,function(lt){return n.ui.fire(_,lt)}),nt.on(N,function(){return n.ui.fire(N)}),nt.on(B,function(){return n.ui.fire(B)})}}},{key:"_attachGraphicsEvents",value:function(){var r;this._graphics.on((r={},F(r,lc,this._handlers.mousedown),F(r,cc,this._handlers.objectMoved),F(r,uc,this._handlers.objectScaled),F(r,fc,this._handlers.objectRotated),F(r,hc,this._handlers.objectActivated),F(r,Jn,this._handlers.objectAdded),F(r,dc,this._handlers.objectModified),F(r,gc,this._handlers.addText),F(r,vc,this._handlers.addObject),F(r,pc,this._handlers.textEditing),F(r,mc,this._handlers.textChanged),F(r,yc,this._handlers.iconCreateResize),F(r,Cc,this._handlers.iconCreateEnd),F(r,Qn,this._handlers.selectionCleared),F(r,Kn,this._handlers.selectionCreated),r))}},{key:"_attachDomEvents",value:function(){document.addEventListener("keydown",this._handlers.keydown)}},{key:"_detachDomEvents",value:function(){document.removeEventListener("keydown",this._handlers.keydown)}},{key:"_onKeyDown",value:function(r){var c=r.ctrlKey,n=r.keyCode,h=r.metaKey,S=c||h;S&&(n===xe.C?this._graphics.resetTargetObjectForCopyPaste():n===xe.V?(this._graphics.pasteObject(),this.clearRedoStack()):n===xe.Z?this.undo().catch(function(){}):n===xe.Y&&this.redo().catch(function(){}));var E=n===xe.BACKSPACE||n===xe.DEL,P=this._graphics.isReadyRemoveObject();!this.isColorPickerInputBoxEditing&&P&&E&&(r.preventDefault(),this.removeActiveObject())}},{key:"removeActiveObject",value:function(){var r=this._graphics.getActiveObjectIdForRemove();this.removeObject(r)}},{key:"_onMouseDown",value:function(r,c){this.fire(Et.MOUSE_DOWN,r,c)}},{key:"_pushAddObjectCommand",value:function(r){var c=Ie.create(Qt.ADD_OBJECT,this._graphics,r);this._invoker.pushUndoStack(c)}},{key:"_pushModifyObjectCommand",value:function(r){var c=this,n=r.type,h=nn(r,function(E){return rn(c._graphics.getObjectId(E),E,n==="activeSelection")}),S=Ie.create(Qt.CHANGE_SELECTION,this._graphics,h);S.execute(this._graphics,h),this._invoker.pushUndoStack(S)}},{key:"_onObjectActivated",value:function(r){this.fire(Et.OBJECT_ACTIVATED,r)}},{key:"_onObjectMoved",value:function(r){this.fire(Et.OBJECT_MOVED,r)}},{key:"_onObjectScaled",value:function(r){this.fire(Et.OBJECT_SCALED,r)}},{key:"_onObjectRotated",value:function(r){this.fire(Et.OBJECT_ROTATED,r)}},{key:"getDrawingMode",value:function(){return this._graphics.getDrawingMode()}},{key:"clearObjects",value:function(){return this.execute(Qt.CLEAR_OBJECTS)}},{key:"deactivateAll",value:function(){this._graphics.deactivateAll(),this._graphics.renderAll()}},{key:"discardSelection",value:function(){this._graphics.discardSelection()}},{key:"changeSelectableAll",value:function(r){this._graphics.changeSelectableAll(r)}},{key:"_initHistory",value:function(){this.ui&&this.ui.initHistory()}},{key:"_clearHistory",value:function(){this.ui&&this.ui.clearHistory()}},{key:"execute",value:function(r){for(var c,n,h,S=arguments.length,E=new Array(S>1?S-1:0),P=1;P<S;P++)E[P-1]=arguments[P];var _=U()(c=[this._graphics]).call(c,E);return(n=this._invoker).execute.apply(n,U()(h=[r]).call(h,L(_)))}},{key:"executeSilent",value:function(r){for(var c,n,h,S=arguments.length,E=new Array(S>1?S-1:0),P=1;P<S;P++)E[P-1]=arguments[P];var _=U()(c=[this._graphics]).call(c,E);return(n=this._invoker).executeSilent.apply(n,U()(h=[r]).call(h,L(_)))}},{key:"undo",value:function(){for(var r=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=gt().resolve(),h=0;h<c;h+=1)n=n.then(function(){return r._invoker.undo()});return n}},{key:"redo",value:function(){for(var r=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=gt().resolve(),h=0;h<c;h+=1)n=n.then(function(){return r._invoker.redo()});return n}},{key:"zoom",value:function(r){var c=r.x,n=r.y,h=r.zoomLevel;this._graphics.zoom({x:c,y:n},h)}},{key:"resetZoom",value:function(){this._graphics.resetZoom()}},{key:"loadImageFromFile",value:function(r,c){if(!r)return gt().reject(pe.invalidParameters);var n=V().createObjectURL(r);return c=c||r.name,this.loadImageFromURL(n,c).then(function(h){return V().revokeObjectURL(r),h})}},{key:"loadImageFromURL",value:function(r,c){return!c||!r?gt().reject(pe.invalidParameters):this.execute(Qt.LOAD_IMAGE,c,r)}},{key:"addImageObject",value:function(r){return r?this.execute(Qt.ADD_IMAGE_OBJECT,r):gt().reject(pe.invalidParameters)}},{key:"startDrawingMode",value:function(r,c){return this._graphics.startDrawingMode(r,c)}},{key:"stopDrawingMode",value:function(){this._graphics.stopDrawingMode()}},{key:"crop",value:function(r){var c=this._graphics.getCroppedImageData(r);return c?this.loadImageFromURL(c.url,c.imageName):gt().reject(pe.invalidParameters)}},{key:"getCropzoneRect",value:function(){return this._graphics.getCropzoneRect()}},{key:"setCropzoneRect",value:function(r){this._graphics.setCropzoneRect(r)}},{key:"_flip",value:function(r){return this.execute(Qt.FLIP_IMAGE,r)}},{key:"flipX",value:function(){return this._flip("flipX")}},{key:"flipY",value:function(){return this._flip("flipY")}},{key:"resetFlip",value:function(){return this._flip("reset")}},{key:"_rotate",value:function(r,c,n){var h=null;return n?h=this.executeSilent(Qt.ROTATE_IMAGE,r,c):h=this.execute(Qt.ROTATE_IMAGE,r,c),h}},{key:"rotate",value:function(r,c){return this._rotate("rotate",r,c)}},{key:"setAngle",value:function(r,c){return this._rotate("setAngle",r,c)}},{key:"setBrush",value:function(r){this._graphics.setBrush(r)}},{key:"setDrawingShape",value:function(r,c){this._graphics.setDrawingShape(r,c)}},{key:"setDrawingIcon",value:function(r,c){this._graphics.setIconStyle(r,c)}},{key:"addShape",value:function(r,c){return c=c||{},this._setPositions(c),this.execute(Qt.ADD_SHAPE,r,c)}},{key:"changeShape",value:function(r,c,n){var h=n?"executeSilent":"execute";return this[h](Qt.CHANGE_SHAPE,r,c)}},{key:"addText",value:function(r,c){return r=r||"",c=c||{},this.execute(Qt.ADD_TEXT,r,c)}},{key:"changeText",value:function(r,c){return c=c||"",this.execute(Qt.CHANGE_TEXT,r,c)}},{key:"changeTextStyle",value:function(r,c,n){var h=n?"executeSilent":"execute";return this[h](Qt.CHANGE_TEXT_STYLE,r,c)}},{key:"_changeActivateMode",value:function(r){r!=="ICON"&&this.getDrawingMode()!==r&&this.startDrawingMode(r)}},{key:"_onTextChanged",value:function(r){this.fire(Et.TEXT_CHANGED,r)}},{key:"_onIconCreateResize",value:function(r){this.fire(Et.ICON_CREATE_RESIZE,r)}},{key:"_onIconCreateEnd",value:function(r){this.fire(Et.ICON_CREATE_END,r)}},{key:"_onTextEditing",value:function(){this.fire(Et.TEXT_EDITING)}},{key:"_onAddText",value:function(r){this.fire(Et.ADD_TEXT,{originPosition:r.originPosition,clientPosition:r.clientPosition})}},{key:"_onAddObject",value:function(r){var c=this._graphics.getObject(r.id);this._invoker.fire(Et.EXECUTE_COMMAND,Vi(c.type)),this._pushAddObjectCommand(c)}},{key:"_onObjectAdded",value:function(r){this.fire(Jn,r),this.fire(Sc,r)}},{key:"_onObjectModified",value:function(r){r.type!==Vt.CROPZONE&&(this._invoker.fire(Et.EXECUTE_COMMAND,Vi(r.type)),this._pushModifyObjectCommand(r))}},{key:"_selectionCleared",value:function(){this.fire(Qn)}},{key:"_selectionCreated",value:function(r){this.fire(Kn,r)}},{key:"registerIcons",value:function(r){this._graphics.registerPaths(r)}},{key:"changeCursor",value:function(r){this._graphics.changeCursor(r)}},{key:"addIcon",value:function(r,c){return c=c||{},this._setPositions(c),this.execute(Qt.ADD_ICON,r,c)}},{key:"changeIconColor",value:function(r,c){return this.execute(Qt.CHANGE_ICON_COLOR,r,c)}},{key:"removeObject",value:function(r){var c=this._graphics.getObject(r),n=c.type;return this.execute(Qt.REMOVE_OBJECT,r,Vi(n))}},{key:"hasFilter",value:function(r){return this._graphics.hasFilter(r)}},{key:"removeFilter",value:function(r){return this.execute(Qt.REMOVE_FILTER,r)}},{key:"applyFilter",value:function(r,c,n){var h=n?"executeSilent":"execute";return this[h](Qt.APPLY_FILTER,r,c)}},{key:"toDataURL",value:function(r){return this._graphics.toDataURL(r)}},{key:"getImageName",value:function(){return this._graphics.getImageName()}},{key:"clearUndoStack",value:function(){this._invoker.clearUndoStack()}},{key:"clearRedoStack",value:function(){this._invoker.clearRedoStack()}},{key:"isEmptyUndoStack",value:function(){return this._invoker.isEmptyUndoStack()}},{key:"isEmptyRedoStack",value:function(){return this._invoker.isEmptyRedoStack()}},{key:"resizeCanvasDimension",value:function(r){return r?this.execute(Qt.RESIZE_CANVAS_DIMENSION,r):gt().reject(pe.invalidParameters)}},{key:"destroy",value:function(){var r=this;this.stopDrawingMode(),this._detachDomEvents(),this._graphics.destroy(),this._graphics=null,this.ui&&(this._detachColorPickerInputBoxEvents(),this.ui.destroy()),X()(this,function(c,n){r[n]=null},this)}},{key:"_setPositions",value:function(r){var c=this._graphics.getCenter();H()(r.left)&&(r.left=c.left),H()(r.top)&&(r.top=c.top)}},{key:"setObjectProperties",value:function(r,c){return this.execute(Qt.SET_OBJECT_PROPERTIES,r,c)}},{key:"setObjectPropertiesQuietly",value:function(r,c){this._graphics.setObjectProperties(r,c)}},{key:"getObjectProperties",value:function(r,c){var n=this._graphics.getObject(r);return n?this._graphics.getObjectProperties(r,c):null}},{key:"getCanvasSize",value:function(){return this._graphics.getCanvasSize()}},{key:"getObjectPosition",value:function(r,c,n){return this._graphics.getObjectPosition(r,c,n)}},{key:"setObjectPosition",value:function(r,c){return this.execute(Qt.SET_OBJECT_POSITION,r,c)}},{key:"resize",value:function(r){return this.execute(Qt.RESIZE_IMAGE,r)}}]),A}();Ao.mixin(an),yt().mixin(an);var xc=an,Ic=Bt.ICON,bc={name:Qt.ADD_ICON,execute:function(v,r,c){var n=this,h=v.getComponent(Ic);return h.add(r,c).then(function(S){return n.undoData.object=v.getObject(S.id),S})},undo:function(v){return v.remove(this.undoData.object),gt().resolve()}};Ie.register(bc);var Kc=null,Mc={name:Qt.ADD_IMAGE_OBJECT,execute:function(v,r){var c=this;return v.addImageObject(r).then(function(n){return c.undoData.object=v.getObject(n.id),n})},undo:function(v){return v.remove(this.undoData.object),gt().resolve()}};Ie.register(Mc);var $c=null,Tc={name:Qt.ADD_OBJECT,execute:function(v,r){return new(gt())(function(c,n){v.contains(r)?n(pe.addedObject):(v.add(r),c(r))})},undo:function(v,r){return new(gt())(function(c,n){v.contains(r)?(v.remove(r),c(r)):n(pe.noObject)})}};Ie.register(Tc);var qc=null,Ec=Bt.SHAPE,Ac={name:Qt.ADD_SHAPE,execute:function(v,r,c){var n=this,h=v.getComponent(Ec);return h.add(r,c).then(function(S){var E=S.id;return n.undoData.object=v.getObject(E),S})},undo:function(v){return v.remove(this.undoData.object),gt().resolve()}};Ie.register(Ac);var tu=null,wc=Bt.TEXT,Dc={name:Qt.ADD_TEXT,execute:function(v,r,c){var n=this,h=v.getComponent(wc);if(this.undoData.object){var S=this.undoData.object;return new(gt())(function(E,P){v.contains(S)?P(pe.redo):(v.add(S),E(S))})}return h.add(r,c).then(function(E){var P=E.id,_=v.getObject(P);return n.undoData.object=_,Zn(nn(_,function(){return rn(P,_,!1)})),E})},undo:function(v){return v.remove(this.undoData.object),gt().resolve()}};Ie.register(Dc);var eu=null,$n=Bt.FILTER,qn=null;function Oc(A,v,r){var c={};return A==="mask"&&(c.object=r.mask),c.options=v,c}var _c={name:Qt.APPLY_FILTER,execute:function(v,r,c,n){var h=v.getComponent($n);if(r==="mask"){var S=v.getObject(c.maskObjId);if(!(S&&S.isType("image")))return gt().reject(pe.invalidParameters);G()(c,{mask:S}),v.remove(c.mask)}if(!this.isRedo){var E=h.getOptions(r),P=Oc(r,E,c);qn=this.setUndoData(P,qn,n)}return h.add(r,c)},undo:function(v,r){var c=v.getComponent($n);if(r==="mask"){var n=this.undoData.object;return v.add(n),v.setActiveObject(n),c.remove(r)}return this.undoData.options?c.add(r,this.undoData.options):c.remove(r)}};Ie.register(_c);var iu=null,tr=Bt.ICON,kc={name:Qt.CHANGE_ICON_COLOR,execute:function(v,r,c){var n=this;return new(gt())(function(h,S){var E=v.getComponent(tr),P=v.getObject(r);P||S(pe.noObject),n.undoData.object=P,n.undoData.color=E.getColor(P),E.setColor(c,P),h()})},undo:function(v){var r=v.getComponent(tr),c=this.undoData,n=c.object,h=c.color;return r.setColor(h,n),gt().resolve()}};Ie.register(kc);var nu=null,er=Bt.SHAPE,ir=null;function Pc(A,v){var r={object:v,options:{}};return Ii()(A,function(c,n){r.options[n]=v[n]}),r}var Lc={name:Qt.CHANGE_SHAPE,execute:function(v,r,c,n){var h=v.getComponent(er),S=v.getObject(r);if(!S)return gt().reject(pe.noObject);if(!this.isRedo){var E=Pc(c,S);ir=this.setUndoData(E,ir,n)}return h.change(S,c)},undo:function(v){var r=v.getComponent(er),c=this.undoData,n=c.object,h=c.options;return r.change(n,h)}};Ie.register(Lc);var ru=null,nr=Bt.TEXT,jc={name:Qt.CHANGE_TEXT,execute:function(v,r,c){var n=v.getComponent(nr),h=v.getObject(r);return h?(this.undoData.object=h,this.undoData.text=n.getText(h),n.change(h,c)):gt().reject(pe.noObject)},undo:function(v){var r=v.getComponent(nr),c=this.undoData,n=c.object,h=c.text;return r.change(n,h)}};Ie.register(jc);var au=null,rr=Bt.TEXT,ar=null;function Nc(A,v){var r={object:v,styles:{}};return Ii()(A,function(c,n){var h=v[n];r.styles[n]=h}),r}var Rc={name:Qt.CHANGE_TEXT_STYLE,execute:function(v,r,c,n){var h=v.getComponent(rr),S=v.getObject(r);if(!S)return gt().reject(pe.noObject);if(!this.isRedo){var E=Nc(c,S);ar=this.setUndoData(E,ar,n)}return h.setStyle(S,c)},undo:function(v){var r=v.getComponent(rr),c=this.undoData,n=c.object,h=c.styles;return r.setStyle(n,h)}};Ie.register(Rc);var ou=null,zc={name:Qt.CLEAR_OBJECTS,execute:function(v){var r=this;return new(gt())(function(c){r.undoData.objects=v.removeAll(),c()})},undo:function(v){return v.add(this.undoData.objects),gt().resolve()}};Ie.register(zc);var su=null,or=Bt.FLIP,Fc={name:Qt.FLIP_IMAGE,execute:function(v,r){var c=v.getComponent(or);return this.undoData.setting=c.getCurrentSetting(),c[r]()},undo:function(v){var r=v.getComponent(or);return r.set(this.undoData.setting)}};Ie.register(Fc);var lu=null,sr=Bt.IMAGE_LOADER,Bc={name:Qt.LOAD_IMAGE,execute:function(v,r,c){var n,h=v.getComponent(sr),S=h.getCanvasImage(),E=S?S.width:0,P=S?S.height:0,_=ei()(n=v.removeAll(!0)).call(n,function(N){return N.type!=="cropzone"});return Zt()(_).call(_,function(N){N.evented=!0}),this.undoData={name:h.getImageName(),image:S,objects:_},h.load(r,c).then(function(N){return{oldWidth:E,oldHeight:P,newWidth:N.width,newHeight:N.height}})},undo:function(v){var r=v.getComponent(sr),c=this.undoData,n=c.objects,h=c.name,S=c.image;return v.removeAll(!0),v.add(n),r.load(h,S)}};Ie.register(Bc);var cu=null,lr=Bt.FILTER,Hc={name:Qt.REMOVE_FILTER,execute:function(v,r){var c=v.getComponent(lr);return this.undoData.options=c.getOptions(r),c.remove(r)},undo:function(v,r){var c=v.getComponent(lr),n=this.undoData.options;return c.add(r,n)}};Ie.register(Hc);var uu=null,Uc={name:Qt.REMOVE_OBJECT,execute:function(v,r){var c=this;return new(gt())(function(n,h){c.undoData.objects=v.removeObjectById(r),c.undoData.objects.length?n():h(pe.noObject)})},undo:function(v){return v.add(this.undoData.objects),gt().resolve()}};Ie.register(Uc);var hu=null,Yc={name:Qt.RESIZE_CANVAS_DIMENSION,execute:function(v,r){var c=this;return new(gt())(function(n){c.undoData.size={width:v.cssMaxWidth,height:v.cssMaxHeight},v.setCssMaxDimension(r),v.adjustCanvasDimension(),n()})},undo:function(v){return v.setCssMaxDimension(this.undoData.size),v.adjustCanvasDimension(),gt().resolve()}};Ie.register(Yc);var fu=null,cr=Bt.ROTATION,ur=null;function Wc(A){return{angle:A.getCurrentAngle()}}var Gc={name:Qt.ROTATE_IMAGE,execute:function(v,r,c,n){var h=v.getComponent(cr);if(!this.isRedo){var S=Wc(h);ur=this.setUndoData(S,ur,n)}return h[r](c)},undo:function(v){var r=v.getComponent(cr),c=ct(this.args,3),n=c[1],h=c[2];return n==="setAngle"?r[n](this.undoData.angle):r.rotate(-h)}};Ie.register(Gc);var du=null,Xc={name:Qt.SET_OBJECT_PROPERTIES,execute:function(v,r,c){var n=this,h=v.getObject(r);return h?(this.undoData.props={},Ii()(c,function(S,E){n.undoData.props[E]=h[E]}),v.setObjectProperties(r,c),gt().resolve()):gt().reject(pe.noObject)},undo:function(v,r){var c=this.undoData.props;return v.setObjectProperties(r,c),gt().resolve()}};Ie.register(Xc);var gu=null,Zc={name:Qt.SET_OBJECT_POSITION,execute:function(v,r,c){var n=v.getObject(r);return n?(this.undoData.objectId=r,this.undoData.props=v.getObjectProperties(r,["left","top"]),v.setObjectPosition(r,c),v.renderAll(),gt().resolve()):gt().reject(pe.noObject)},undo:function(v){var r=this.undoData,c=r.objectId,n=r.props;return v.setObjectProperties(c,n),v.renderAll(),gt().resolve()}};Ie.register(Zc);var vu=null,Vc={name:Qt.CHANGE_SELECTION,execute:function(v,r){return this.isRedo?Zt()(r).call(r,function(c){v.setObjectProperties(c.id,c)}):this.undoData=Vl(),gt().resolve()},undo:function(v){var r;return Zt()(r=this.undoData).call(r,function(c){v.setObjectProperties(c.id,c)}),gt().resolve()}};Ie.register(Vc);var pu=null,hr=Bt.RESIZE,Jc={name:Qt.RESIZE_IMAGE,execute:function(v,r){var c=v.getComponent(hr),n=c.getOriginalDimensions();return n||(n=c.getCurrentDimensions()),this.undoData.dimensions=n,c.resize(r)},undo:function(v){var r=v.getComponent(hr);return r.resize(this.undoData.dimensions)}};Ie.register(Jc);var mu=null,Qc=xc}(),z=z.default,z}()})},95878:function(Ne){"use strict";Ne.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABemlDQ1BJQ0MgUHJvZmlsZQAAKM9jYGAqSSwoyGFhYGDIzSspCnJ3UoiIjFJgv8PAzcDDIMRgxSCemFxc4BgQ4MOAE3y7xsAIoi/rgsxK8/x506a1fP4WNq+ZclYlOgz4AXdKanEyAwMjB5CdnFKcnAtk5wDZOskFRSVA9gwgW7e8pADEPgFkixQBHQhk3wGx0yHsDyB2EpjNxAJWExLkDGRLANkCSRC2BoidDmFbgNjJGYkpQLYHyC6IG8CA08NFwdzAUteRgcogN6cUZgcotHhS80KDQe4AYhkGDwYXBgUGcwYDBksGXQbHktSKEpBC5/yCyqLM9IwSBUdgyKYqOOfnFpSWpBbpKHjmJevpKBgZGBqA1IHiDGL05yCw6Yxi5xFi+QsZGCyVGRiYexBiSdMYGLbvYWCQOIUQU5nHwMBvzcCw7VxBYlEi3OGM31gI8YvTjI0gbB4nBgbWe///f1ZjYGCfxMDwd+L//78X/f//dzHQfmCcHcgBACR3aeD10IV6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABnGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4xMTA8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+OTk8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KydpWSQAAACVJREFUKFNj/Pnz538GIgFYMRsbG5SLHzBBaaLAqGJkQCvFDAwAlKIH+ycXcc8AAAAASUVORK5CYII="}}]);
